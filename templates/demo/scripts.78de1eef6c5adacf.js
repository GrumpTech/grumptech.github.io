(function(){"use strict";var Od=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var o=typeof t;return"object"===o&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===o&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":o},$a=function(t){return{eq:t}},fi=$a(function(t,o){return t===o}),Sa=function(t){return $a(function(o,n){if(o.length!==n.length)return!1;for(var s=o.length,i=0;i<s;i++)if(!t.eq(o[i],n[i]))return!1;return!0})},da=function(t){return $a(function(o,n){var h,y,C,s=Object.keys(o),i=Object.keys(n);if(!(h=fi,y=Sa(h),C=function(y){return Array.prototype.slice.call(y).sort(undefined)},$a(function(E,R){return y.eq(C(E),C(R))})).eq(s,i))return!1;for(var c=s.length,d=0;d<c;d++){var u=s[d];if(!t.eq(o[u],n[u]))return!1}return!0})},Zo=$a(function(t,o){if(t===o)return!0;var n=Od(t);return n===Od(o)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===o:"array"===n?Sa(Zo).eq(t,o):"object"===n&&da(Zo).eq(t,o))});const Ia=Object.getPrototypeOf,Us=(t,o,n)=>{var s;return!!n(t,o.prototype)||(null===(s=t.constructor)||void 0===s?void 0:s.name)===o.name},Or=t=>o=>(n=>{const s=typeof n;return null===n?"null":"object"===s&&Array.isArray(n)?"array":"object"===s&&Us(n,String,(i,c)=>c.isPrototypeOf(i))?"string":s})(o)===t,Zi=t=>o=>typeof o===t,ua=t=>o=>t===o,kn=(t,o)=>rt(t)&&Us(t,o,(n,s)=>Ia(n)===s),Xt=Or("string"),rt=Or("object"),Ut=t=>kn(t,Object),Nt=Or("array"),Wr=ua(null),yt=Zi("boolean"),Bt=ua(void 0),yr=t=>null==t,ie=t=>!yr(t),ht=Zi("function"),Ae=Zi("number"),hr=(t,o)=>{if(Nt(t)){for(let n=0,s=t.length;n<s;++n)if(!o(t[n]))return!1;return!0}return!1},_o=()=>{},zr=(t,o)=>(...n)=>t(o.apply(null,n)),Er=(t,o)=>n=>t(o(n)),Ke=t=>()=>t,fn=t=>t,M=(t,o)=>t===o;function at(t,...o){return(...n)=>{const s=o.concat(n);return t.apply(null,s)}}const bi=t=>o=>!t(o),Kn=t=>()=>{throw new Error(t)},Cr=t=>t(),$r=t=>{t()},Do=Ke(!1),zn=Ke(!0);class ${constructor(o,n){this.tag=o,this.value=n}static some(o){return new $(!0,o)}static none(){return $.singletonNone}fold(o,n){return this.tag?n(this.value):o()}isSome(){return this.tag}isNone(){return!this.tag}map(o){return this.tag?$.some(o(this.value)):$.none()}bind(o){return this.tag?o(this.value):$.none()}exists(o){return this.tag&&o(this.value)}forall(o){return!this.tag||o(this.value)}filter(o){return!this.tag||o(this.value)?this:$.none()}getOr(o){return this.tag?this.value:o}or(o){return this.tag?this:o}getOrThunk(o){return this.tag?this.value:o()}orThunk(o){return this.tag?this:o()}getOrDie(o){if(this.tag)return this.value;throw new Error(o??"Called getOrDie on None")}static from(o){return ie(o)?$.some(o):$.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(o){this.tag&&o(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$.singletonNone=new $(!1);const yn=Array.prototype.slice,St=Array.prototype.indexOf,Qt=Array.prototype.push,ri=(t,o)=>St.call(t,o),zt=(t,o)=>ri(t,o)>-1,Bn=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return!0;return!1},no=(t,o)=>{const n=t.length,s=new Array(n);for(let i=0;i<n;i++)s[i]=o(t[i],i);return s},Ue=(t,o)=>{for(let n=0,s=t.length;n<s;n++)o(t[n],n)},ma=(t,o)=>{for(let n=t.length-1;n>=0;n--)o(t[n],n)},dn=(t,o)=>{const n=[],s=[];for(let i=0,c=t.length;i<c;i++){const d=t[i];(o(d,i)?n:s).push(d)}return{pass:n,fail:s}},Vt=(t,o)=>{const n=[];for(let s=0,i=t.length;s<i;s++){const c=t[s];o(c,s)&&n.push(c)}return n},ka=(t,o,n)=>(ma(t,(s,i)=>{n=o(n,s,i)}),n),lr=(t,o,n)=>(Ue(t,(s,i)=>{n=o(n,s,i)}),n),qa=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++){const c=t[s];if(o(c,s))return $.some(c);if(n(c,s))break}return $.none()},wr=(t,o)=>qa(t,o,Do),Ui=(t,o)=>{for(let n=0,s=t.length;n<s;n++)if(o(t[n],n))return $.some(n);return $.none()},ji=t=>{const o=[];for(let n=0,s=t.length;n<s;++n){if(!Nt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Qt.apply(o,t[n])}return o},ps=(t,o)=>ji(no(t,o)),Ar=(t,o)=>{for(let n=0,s=t.length;n<s;++n)if(!0!==o(t[n],n))return!1;return!0},nr=t=>{const o=yn.call(t,0);return o.reverse(),o},Ha=(t,o)=>Vt(t,n=>!zt(o,n)),hs=(t,o)=>{const n={};for(let s=0,i=t.length;s<i;s++){const c=t[s];n[String(c)]=o(c,s)}return n},Sr=(t,o)=>{const n=yn.call(t,0);return n.sort(o),n},ml=(t,o)=>o>=0&&o<t.length?$.some(t[o]):$.none(),Nn=t=>ml(t,0),Zn=t=>ml(t,t.length-1),fr=ht(Array.from)?Array.from:t=>yn.call(t),Ni=(t,o)=>{for(let n=0;n<t.length;n++){const s=o(t[n],n);if(s.isSome())return s}return $.none()},cr=Object.keys,Wi=Object.hasOwnProperty,Po=(t,o)=>{const n=cr(t);for(let s=0,i=n.length;s<i;s++){const c=n[s];o(t[c],c)}},ga=(t,o)=>_a(t,(n,s)=>({k:s,v:o(n,s)})),_a=(t,o)=>{const n={};return Po(t,(s,i)=>{const c=o(s,i);n[c.k]=c.v}),n},jt=t=>(o,n)=>{t[n]=o},Fo=(t,o,n,s)=>{Po(t,(i,c)=>{(o(i,c)?n:s)(i,c)})},ws=(t,o)=>{const n={};return Fo(t,o,jt(n),_o),n},os=(t,o)=>{const n=[];return Po(t,(s,i)=>{n.push(o(s,i))}),n},Ot=t=>os(t,fn),wn=(t,o)=>wo(t,o)?$.from(t[o]):$.none(),wo=(t,o)=>Wi.call(t,o),ns=(t,o)=>wo(t,o)&&null!=t[o],Qn=t=>{const o={};return Ue(t,n=>{o[n]={}}),cr(o)},gl=t=>void 0!==t.length,fs=Array.isArray,Pa=(t,o,n)=>{if(!t)return!1;if(n=n||t,gl(t)){for(let s=0,i=t.length;s<i;s++)if(!1===o.call(n,t[s],s,t))return!1}else for(const s in t)if(wo(t,s)&&!1===o.call(n,t[s],s,t))return!1;return!0},As=(t,o)=>{const n=[];return Pa(t,(s,i)=>{n.push(o(s,i,t))}),n},ea=(t,o)=>{const n=[];return Pa(t,(s,i)=>{o&&!o(s,i,t)||n.push(s)}),n},Ea=(t,o,n,s)=>{let i=Bt(n)?t[0]:n;for(let c=0;c<t.length;c++)i=o.call(s,i,t[c],c);return i},ta=(t,o,n)=>{for(let s=0,i=t.length;s<i;s++)if(o.call(n,t[s],s,t))return s;return-1},xs=t=>t[t.length-1],Nr=t=>{let o,n=!1;return(...s)=>(n||(n=!0,o=t.apply(null,s)),o)},js=()=>Ws(0,0),Ws=(t,o)=>({major:t,minor:o}),Le={nu:Ws,detect:(t,o)=>{const n=String(o).toLowerCase();return 0===t.length?js():((s,i)=>{const c=((u,h)=>{for(let v=0;v<u.length;v++){const y=u[v];if(y.test(h))return y}})(s,i);if(!c)return{major:0,minor:0};const d=u=>Number(i.replace(c,"$"+u));return Ws(d(1),d(2))})(t,n)},unknown:js},ue=(t,o)=>{const n=String(o).toLowerCase();return wr(t,s=>s.search(n))},Je=(t,o,n)=>""===o||t.length>=o.length&&t.substr(n,n+o.length)===o,$e=(t,o)=>Pt(t,o)?t.substring(o.length):t,Lt=(t,o,n=0,s)=>{const i=t.indexOf(o,n);return-1!==i&&(!!Bt(s)||i+o.length<=s)},Pt=(t,o)=>Je(t,o,0),Dt=(t,o)=>Je(t,o,t.length-o.length),po=t=>o=>o.replace(t,""),bo=po(/^\s+|\s+$/g),rn=po(/^\s+/g),An=po(/\s+$/g),_n=t=>t.length>0,an=t=>!_n(t),Rr=(t,o=10)=>{const n=parseInt(t,o);return isNaN(n)?$.none():$.some(n)},Fr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,br=t=>o=>Lt(o,t),se=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Lt(t,"edge/")&&Lt(t,"chrome")&&Lt(t,"safari")&&Lt(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fr],search:t=>Lt(t,"chrome")&&!Lt(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Lt(t,"msie")||Lt(t,"trident")},{name:"Opera",versionRegexes:[Fr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:br("firefox")},{name:"Safari",versionRegexes:[Fr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Lt(t,"safari")||Lt(t,"mobile/"))&&Lt(t,"applewebkit")}],we=[{name:"Windows",search:br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Lt(t,"iphone")||Lt(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:br("linux"),versionRegexes:[]},{name:"Solaris",search:br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ve={browsers:Ke(se),oses:Ke(we)},lt="Chromium",xo="Firefox",sn=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isEdge:s("Edge"),isChromium:s(lt),isIE:s("IE"),isOpera:s("Opera"),isFirefox:s(xo),isSafari:s("Safari")}},ln=()=>sn({current:void 0,version:Le.unknown()}),un=sn,en=(Ke("Edge"),Ke(lt),Ke("IE"),Ke("Opera"),Ke(xo),Ke("Safari"),"Windows"),dr="Android",vi="Solaris",oa="FreeBSD",Wn="ChromeOS",bs=t=>{const o=t.current,s=i=>()=>o===i;return{current:o,version:t.version,isWindows:s(en),isiOS:s("iOS"),isAndroid:s(dr),isMacOS:s("macOS"),isLinux:s("Linux"),isSolaris:s(vi),isFreeBSD:s(oa),isChromeOS:s(Wn)}},ur=()=>bs({current:void 0,version:Le.unknown()}),Ml=bs,Is=(Ke(en),Ke("iOS"),Ke(dr),Ke("Linux"),Ke("macOS"),Ke(vi),Ke(oa),Ke(Wn),t=>window.matchMedia(t).matches);let Ri=Nr(()=>((t,o,n)=>{const s=Ve.browsers(),i=Ve.oses(),c=o.bind(h=>{return v=s,Ni(h.brands,C=>{const E=C.brand.toLowerCase();return wr(v,R=>{var T;return E===(null===(T=R.brand)||void 0===T?void 0:T.toLowerCase())}).map(R=>({current:R.name,version:Le.nu(parseInt(C.version,10),0)}))});var v}).orThunk(()=>{return ue(s,v=t).map(y=>{const C=Le.detect(y.versionRegexes,v);return{current:y.name,version:C}});var v}).fold(ln,un),d=(h=i,v=t,ue(h,v).map(y=>{const C=Le.detect(y.versionRegexes,v);return{current:y.name,version:C}})).fold(ur,Ml),u=((h,v,y,C)=>{const E=h.isiOS()&&!0===/ipad/i.test(y),R=h.isiOS()&&!E,T=h.isiOS()||h.isAndroid(),I=T||C("(pointer:coarse)"),N=E||!R&&T&&C("(min-device-width:768px)"),H=R||T&&!N,z=v.isSafari()&&h.isiOS()&&!1===/safari/i.test(y),U=!H&&!N&&!z;return{isiPad:Ke(E),isiPhone:Ke(R),isTablet:Ke(N),isPhone:Ke(H),isTouch:Ke(I),isAndroid:h.isAndroid,isiOS:h.isiOS,isWebView:Ke(z),isDesktop:Ke(U)}})(d,c,t,n);var h,v;return{browser:c,os:d,deviceType:u}})(navigator.userAgent,$.from(navigator.userAgentData),Is));const yi=()=>Ri(),Fa=navigator.userAgent,No=yi(),Ta=No.browser,qr=No.os,Ns=No.deviceType,Sc=-1!==Fa.indexOf("Windows Phone"),Oo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ta.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ta.isIE(),windowsPhone:Sc,browser:{current:Ta.current,version:Ta.version,isChromium:Ta.isChromium,isEdge:Ta.isEdge,isFirefox:Ta.isFirefox,isIE:Ta.isIE,isOpera:Ta.isOpera,isSafari:Ta.isSafari},os:{current:qr.current,version:qr.version,isAndroid:qr.isAndroid,isChromeOS:qr.isChromeOS,isFreeBSD:qr.isFreeBSD,isiOS:qr.isiOS,isLinux:qr.isLinux,isMacOS:qr.isMacOS,isSolaris:qr.isSolaris,isWindows:qr.isWindows},deviceType:{isDesktop:Ns.isDesktop,isiPad:Ns.isiPad,isiPhone:Ns.isiPhone,isPhone:Ns.isPhone,isTablet:Ns.isTablet,isTouch:Ns.isTouch,isWebView:Ns.isWebView}},qs=/^\s*|\s*$/g,kc=t=>yr(t)?"":(""+t).replace(qs,""),Bo=function(t,o,n,s){s=s||this,t&&(n&&(t=t[n]),Pa(t,(i,c)=>!1!==o.call(s,i,c,n)&&(Bo(i,o,n,s),!0)))},wt={trim:kc,isArray:fs,is:(t,o)=>o?!("array"!==o||!fs(t))||typeof t===o:void 0!==t,toArray:t=>{if(fs(t))return t;{const o=[];for(let n=0,s=t.length;n<s;n++)o[n]=t[n];return o}},makeMap:(t,o,n={})=>{const s=Xt(t)?t.split(o||","):t||[];let i=s.length;for(;i--;)n[s[i]]={};return n},each:Pa,map:As,grep:ea,inArray:(t,o)=>{if(t)for(let n=0,s=t.length;n<s;n++)if(t[n]===o)return n;return-1},hasOwn:wo,extend:(t,...o)=>{for(let n=0;n<o.length;n++){const s=o[n];for(const i in s)if(wo(s,i)){const c=s[i];void 0!==c&&(t[i]=c)}}return t},walk:Bo,resolve:(t,o=window)=>{const n=t.split(".");for(let s=0,i=n.length;s<i&&(o=o[n[s]]);s++);return o},explode:(t,o)=>Nt(t)?t:""===t?[]:As(t.split(o||","),kc),_addCacheSuffix:t=>{const o=Oo.cacheSuffix;return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},Mi=(t,o,n=M)=>t.exists(s=>n(s,o)),cs=(t,o,n=M)=>kr(t,o,n).getOr(t.isNone()&&o.isNone()),kr=(t,o,n)=>t.isSome()&&o.isSome()?$.some(n(t.getOrDie(),o.getOrDie())):$.none(),rs=(t,o)=>t?$.some(o):$.none(),tu=typeof window<"u"?window:Function("return this;")(),Gc=(t,o)=>((n,s)=>{let i=s??tu;for(let c=0;c<n.length&&null!=i;++c)i=i[n[c]];return i})(t.split("."),o),Yn=Object.getPrototypeOf,Sn=t=>t.dom.nodeName.toLowerCase(),oc=t=>t.dom.nodeType,ds=t=>o=>oc(o)===t,Ga=t=>us(t)&&(t=>{const o=Gc("ownerDocument.defaultView",t);return rt(t)&&((n=o,((s,i)=>{const c=Gc(s,i);if(null==c)throw new Error(s+" not available on this browser");return c})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Yn(t).constructor.name));var n})(t.dom),us=ds(1),En=ds(3),Rs=ds(9),si=ds(11),Di=t=>o=>us(o)&&Sn(o)===t,Dl=(t,o,n)=>{if(!(Xt(n)||yt(n)||Ae(n)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(o,n+"")},mr=(t,o,n)=>{Dl(t.dom,o,n)},Oa=(t,o)=>{const n=t.dom;Po(o,(s,i)=>{Dl(n,i,s)})},ss=(t,o)=>{const n=t.dom.getAttribute(o);return null===n?void 0:n},$i=(t,o)=>$.from(ss(t,o)),hl=(t,o)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(o)},as=(t,o)=>{t.dom.removeAttribute(o)},ou=t=>lr(t.dom.attributes,(o,n)=>(o[n.name]=n.value,o),{}),Bl=(t,o)=>{const n=ss(t,o);return void 0===n||""===n?[]:n.split(" ")},Ms=t=>void 0!==t.dom.classList,nu=t=>Bl(t,"class"),ym=(t,o)=>((n,s,i)=>{const c=Bl(n,s).concat([i]);return mr(n,s,c.join(" ")),!0})(t,"class",o),ru=(t,o)=>((n,s,i)=>{const c=Vt(Bl(n,s),d=>d!==i);return c.length>0?mr(n,s,c.join(" ")):as(n,s),!1})(t,"class",o),Ll=(t,o)=>{Ms(t)?t.dom.classList.add(o):ym(t,o)},Ad=t=>{0===(Ms(t)?t.dom.classList:nu(t)).length&&as(t,"class")},Il=(t,o)=>{Ms(t)?t.dom.classList.remove(o):ru(t,o),Ad(t)},Kc=(t,o)=>Ms(t)&&t.dom.classList.contains(o),_c=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},fl=(t,o)=>{const n=(o||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const s="HTML does not have a single root node";throw console.error(s,t),new Error(s)}return _c(n.childNodes[0])},vs=(t,o)=>{const n=(o||document).createElement(t);return _c(n)},Bi=(t,o)=>{const n=(o||document).createTextNode(t);return _c(n)},ve=_c,rc=(t,o)=>{const n=[],s=c=>(n.push(c),o(c));let i=o(t);do{i=i.bind(s)}while(i.isSome());return n},ai=(t,o)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const s=n;if(void 0!==s.matches)return s.matches(o);if(void 0!==s.msMatchesSelector)return s.msMatchesSelector(o);if(void 0!==s.webkitMatchesSelector)return s.webkitMatchesSelector(o);if(void 0!==s.mozMatchesSelector)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},Nd=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,$n=(t,o)=>t.dom===o.dom,bl=(t,o)=>{const n=t.dom,s=o.dom;return n!==s&&n.contains(s)},Rd=t=>ve(t.dom.ownerDocument),vl=t=>Rs(t)?t:Rd(t),q=t=>ve(vl(t).dom.defaultView),ee=t=>$.from(t.dom.parentNode).map(ve),ce=t=>$.from(t.dom.parentElement).map(ve),Ce=(t,o)=>{const n=ht(o)?o:Do;let s=t.dom;const i=[];for(;null!=s.parentNode;){const c=s.parentNode,d=ve(c);if(i.push(d),!0===n(d))break;s=c}return i},he=t=>$.from(t.dom.previousSibling).map(ve),Pe=t=>$.from(t.dom.nextSibling).map(ve),Ge=t=>nr(rc(t,he)),ct=t=>rc(t,Pe),xt=t=>no(t.dom.childNodes,ve),kt=(t,o)=>$.from(t.dom.childNodes[o]).map(ve),vo=t=>kt(t,0),Co=t=>kt(t,t.dom.childNodes.length-1),Ao=t=>t.dom.childNodes.length,Lo=t=>si(t)&&ie(t.dom.host),tn=ht(Element.prototype.attachShadow)&&ht(Node.prototype.getRootNode),mn=Ke(tn),gn=tn?t=>ve(t.dom.getRootNode()):vl,qn=t=>Lo(t)?t:(o=>{const n=o.dom.head;if(null==n)throw new Error("Head is not available yet");return ve(n)})(vl(t)),Mr=t=>ve(t.dom.host),Ka=t=>{if(mn()&&ie(t.target)){const o=ve(t.target);if(us(o)&&Hl(o)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Nn(n)}}return $.from(t.target)},Hl=t=>ie(t.dom.shadowRoot),Pl=t=>{const o=En(t)?t.dom.parentNode:t.dom;if(null==o||null===o.ownerDocument)return!1;const n=o.ownerDocument;return(s=>{const i=gn(s);return Lo(i)?$.some(i):$.none()})(ve(o)).fold(()=>n.body.contains(o),Er(Pl,Mr))};var su=(t,o,n,s,i)=>t(n,s)?$.some(n):ht(i)&&i(n)?$.none():o(n,s,i);const Gr=(t,o,n)=>{let s=t.dom;const i=ht(n)?n:Do;for(;s.parentNode;){s=s.parentNode;const c=ve(s);if(o(c))return $.some(c);if(i(c))break}return $.none()},Ds=(t,o,n)=>su((s,i)=>i(s),Gr,t,o,n),Gs=(t,o)=>{const n=s=>{for(let i=0;i<s.childNodes.length;i++){const c=ve(s.childNodes[i]);if(o(c))return $.some(c);const d=n(s.childNodes[i]);if(d.isSome())return d}return $.none()};return n(t.dom)},sc=(t,o,n)=>Gr(t,s=>ai(s,o),n),ys=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return Nd(i)?$.none():$.from(i.querySelector(n)).map(ve)})(o,t),ac=(t,o,n)=>su((s,i)=>ai(s,i),sc,t,o,n),Yc=(t,o=!1)=>{return Pl(t)?t.dom.isContentEditable:(n=t,ac(n,"[contenteditable]")).fold(Ke(o),s=>"true"===Cg(s));var n},Cg=t=>t.dom.contentEditable,pn=t=>void 0!==t.style&&ht(t.style.getPropertyValue),ii=(t,o,n)=>{if(!Xt(n))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);pn(t)&&t.style.setProperty(o,n)},wm=(t,o,n)=>{ii(t.dom,o,n)},au=(t,o)=>{const n=t.dom;Po(o,(s,i)=>{ii(n,i,s)})},yl=(t,o)=>{const n=t.dom,s=window.getComputedStyle(n).getPropertyValue(o);return""!==s||Pl(t)?s:Xc(n,o)},Xc=(t,o)=>pn(t)?t.style.getPropertyValue(o):"",ic=(t,o)=>{const s=Xc(t.dom,o);return $.from(s).filter(i=>i.length>0)},Sg=t=>{const o={},n=t.dom;if(pn(n))for(let s=0;s<n.style.length;s++){const i=n.style.item(s);o[i]=n.style[i]}return o},iu=(t,o)=>{var n,s;s=o,pn(n=t.dom)&&n.style.removeProperty(s),Mi($i(t,"style").map(bo),"")&&as(t,"style")},pa=(t,o)=>{ee(t).each(n=>{n.dom.insertBefore(o.dom,t.dom)})},Fl=(t,o)=>{Pe(t).fold(()=>{ee(t).each(n=>{F(n,o)})},n=>{pa(n,o)})},Zr=(t,o)=>{vo(t).fold(()=>{F(t,o)},n=>{t.dom.insertBefore(o.dom,n.dom)})},F=(t,o)=>{t.dom.appendChild(o.dom)},G=(t,o)=>{pa(t,o),F(o,t)},K=(t,o)=>{Ue(o,n=>{F(t,n)})},re=t=>{t.dom.textContent="",Ue(xt(t),o=>{_e(o)})},_e=t=>{const o=t.dom;null!==o.parentNode&&o.parentNode.removeChild(o)},De=t=>{const o=xt(t);var n,s;o.length>0&&(n=t,Ue(s=o,(i,c)=>{Fl(0===c?n:s[c-1],i)})),_e(t)},dt=t=>no(t,ve),Tt=t=>t.dom.innerHTML,Et=(t,o)=>{const n=Rd(t).dom,s=ve(n.createDocumentFragment()),i=((c,d)=>{const u=(d||document).createElement("div");return u.innerHTML=c,xt(ve(u))})(o,n);K(s,i),re(t),F(t,s)},qt=(t,o,n,s)=>{t.dom.removeEventListener(o,n,s)},to=(t,o)=>({left:t,top:o,translate:(n,s)=>to(t+n,o+s)}),rr=to,ao=(t,o)=>void 0!==t?t:void 0!==o?o:0,Ct=t=>{const o=t.dom,n=o.ownerDocument.body;return n===o?rr(n.offsetLeft,n.offsetTop):Pl(t)?(s=>{const i=s.getBoundingClientRect();return rr(i.left,i.top)})(o):rr(0,0)},Tn=t=>{const o=void 0!==t?t.dom:document;return rr(o.body.scrollLeft||o.documentElement.scrollLeft,o.body.scrollTop||o.documentElement.scrollTop)},so=(t,o,n)=>{const s=(void 0!==n?n.dom:document).defaultView;s&&s.scrollTo(t,o)},cn=(t,o)=>{yi().browser.isSafari()&&ht(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(o)},Qo=(t,o,n,s)=>({x:t,y:o,width:n,height:s,right:t+n,bottom:o+s}),xn=t=>{const o=void 0===t?window:t,s=Tn(ve(o.document));return(i=>{const c=void 0===i?window:i;return yi().browser.isFirefox()?$.none():$.from(c.visualViewport)})(o).fold(()=>{const i=o.document.documentElement;return Qo(s.left,s.top,i.clientWidth,i.clientHeight)},i=>Qo(Math.max(i.pageLeft,s.left),Math.max(i.pageTop,s.top),i.width,i.height))},gr=(t,o)=>{let n=[];return Ue(xt(t),s=>{o(s)&&(n=n.concat([s])),n=n.concat(gr(s,o))}),n},er=(t,o)=>((n,s)=>{const i=void 0===s?document:s.dom;return Nd(i)?[]:no(i.querySelectorAll(n),ve)})(o,t),vr=(t,o,n)=>sc(t,o,n).isSome();class tr{constructor(o,n){this.node=o,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(o){return this.node=this.findSibling(this.node,"firstChild","nextSibling",o),this.node}prev(o){return this.node=this.findSibling(this.node,"lastChild","previousSibling",o),this.node}prev2(o){return this.node=this.findPreviousNode(this.node,o),this.node}findSibling(o,n,s,i){if(o){if(!i&&o[n])return o[n];if(o!==this.rootNode){let c=o[s];if(c)return c;for(let d=o.parentNode;d&&d!==this.rootNode;d=d.parentNode)if(c=d[s],c)return c}}}findPreviousNode(o,n){if(o){const s=o.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n)for(let c=s.lastChild;c;c=c.lastChild)if(!c.lastChild)return c;return s}const i=o.parentNode;if(i&&i!==this.rootNode)return i}}}const ha=t=>o=>!!o&&o.nodeType===t,fa=t=>!!t&&!Object.getPrototypeOf(t),Wt=ha(1),wl=t=>Wt(t)&&Ga(ve(t)),Vl=t=>{const o=t.toLowerCase();return n=>ie(n)&&n.nodeName.toLowerCase()===o},Ec=t=>{const o=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return zt(o,s)}return!1}},is=(t,o)=>{const n=o.toLowerCase().split(" ");return s=>{if(Wt(s)){const i=s.ownerDocument.defaultView;if(i)for(let c=0;c<n.length;c++){const d=i.getComputedStyle(s,null);if((d?d.getPropertyValue(t):null)===n[c])return!0}}return!1}},lc=t=>o=>Wt(o)&&o.hasAttribute(t),Aa=t=>Wt(t)&&t.hasAttribute("data-mce-bogus"),xl=t=>Wt(t)&&"TABLE"===t.tagName,Qi=t=>o=>!(!wl(o)||o.contentEditable!==t&&o.getAttribute("data-mce-contenteditable")!==t),kf=Ec(["textarea","input"]),pt=ha(3),qi=ha(4),Ip=ha(7),Xe=ha(8),wi=ha(9),Hp=ha(11),Ln=Vl("br"),cc=Vl("img"),ba=Qi("true"),xr=Qi("false"),Vu=Ec(["td","th"]),zl=Ec(["td","th","caption"]),In=Ec(["video","audio","object","embed"]),Md=Vl("li"),lu=Vl("details"),li=Vl("summary"),Hs="\xa0",Jc=t=>"\ufeff"===t,el=(t=>{const n=s=>t(s)?$.from(s.dom.nodeValue):$.none();return{get:s=>{if(!t(s))throw new Error("Can only get text value of a text node");return n(s).getOr("")},getOption:n,set:(s,i)=>{if(!t(s))throw new Error("Can only set raw text value of a text node");s.dom.nodeValue=i}}})(En),Ie=t=>el.get(t),Cl=t=>el.getOption(t),cu=t=>{let o;return n=>(o=o||hs(t,zn),wo(o,Sn(n)))},Sl=t=>us(t)&&"br"===Sn(t),Qc=cu(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Na=cu(["ul","ol","dl"]),Bs=cu(["li","dd","dt"]),zu=cu(["thead","tbody","tfoot"]),Zu=cu(["td","th"]),ho=cu(["pre","script","textarea","style"]),tl=()=>{const t=vs("br");return mr(t,"data-mce-bogus","1"),t},ol=t=>{re(t),F(t,tl())},Ps="\ufeff",ed=Jc,nl=t=>t.replace(/\uFEFF/g,""),Pp=Wt,Uu=pt,Cm=t=>(Uu(t)&&(t=t.parentNode),Pp(t)&&t.hasAttribute("data-mce-caret")),kl=t=>Uu(t)&&ed(t.data),Kr=t=>Cm(t)||kl(t),td=t=>t.firstChild!==t.lastChild||!Ln(t.firstChild),du=t=>{const o=t.container();return!!pt(o)&&(o.data.charAt(t.offset())===Ps||t.isAtStart()&&kl(o.previousSibling))},Tc=t=>{const o=t.container();return!!pt(o)&&(o.data.charAt(t.offset()-1)===Ps||t.isAtEnd()&&kl(o.nextSibling))},Dd=t=>Uu(t)&&t.data[0]===Ps,ci=t=>Uu(t)&&t.data[t.data.length-1]===Ps,kg=t=>t&&t.hasAttribute("data-mce-caret")?((o=>{var n;const s=o.getElementsByTagName("br"),i=s[s.length-1];Aa(i)&&(null===(n=i.parentNode)||void 0===n||n.removeChild(i))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Fp=t=>Cm(t.startContainer),_f=ba,uu=xr,mu=Ln,T0=pt,_l=Ec(["script","style","textarea"]),O0=Ec(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Bd=Ec(["table"]),od=Kr,va=t=>!od(t)&&(T0(t)?!_l(t.parentNode):O0(t)||mu(t)||Bd(t)||_g(t)),_g=t=>{return!(Wt(o=t)&&"true"===o.getAttribute("unselectable"))&&uu(t);var o},Sm=(t,o)=>va(t)&&((n,s)=>{for(let i=n.parentNode;i&&i!==s;i=i.parentNode){if(_g(i))return!1;if(_f(i))return!0}return!0})(t,o),uy=/^[ \t\r\n]*$/,Ld=t=>uy.test(t),Ks=t=>{for(const o of t)if(!Jc(o))return!1;return!0},my=t=>"\n"===t||"\r"===t,Id=(t,o=4,n=!0,s=!0)=>{const i=(h=o)<=0?"":new Array(h+1).join(" "),c=t.replace(/\t/g,i);var h;return lr(c,(u,h)=>{return-1!==" \f\t\v".indexOf(h)||h===Hs?u.pcIsSpace||""===u.str&&n||u.str.length===c.length-1&&s||(y=u.str.length+1)<(v=c).length&&y>=0&&my(v[y])?{pcIsSpace:!1,str:u.str+Hs}:{pcIsSpace:!0,str:u.str+" "}:{pcIsSpace:my(h),str:u.str+h};var v,y},{pcIsSpace:!1,str:""}).str},km=(t,o)=>{return va(t)&&(s=o,!(pt(n=t)&&Ld(n.data)&&!((i,c)=>{const d=ve(c),u=ve(i);return vr(u,"pre,code",at($n,d))})(n,s)))||(n=>Wt(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||Ef(t);var n,s},Ef=lc("data-mce-bookmark"),_m=lc("data-mce-bogus"),rl=t=>Wt(t)&&"all"===t.getAttribute("data-mce-bogus"),ju=t=>ce(ve(t)).exists(o=>!Yc(o)),Ss=(t,o=!0)=>((n,s)=>{let i=0;if(km(n,n))return!1;{let c=n.firstChild;if(!c)return!0;const d=new tr(c,n);do{if(s){if(rl(c)){c=d.next(!0);continue}if(_m(c)){c=d.next();continue}}if(ba(c)&&ju(c))return!1;if(Ln(c))i++,c=d.next();else{if(km(c,n))return!1;c=d.next()}}while(c);return i<=1}})(t.dom,o),Hd=t=>"svg"===t.toLowerCase(),Eg=t=>Hd(t.nodeName),Tf=t=>"svg"===t?.nodeName?"svg":"html",Vp=["svg"],Tg="data-mce-block",zp=t=>{return no((o=t,Vt(cr(o),n=>!/[A-Z]/.test(n))),o=>`${o}:`+no(Vp,n=>`not(${n} ${o})`).join(":")).join(",");var o},Em=(t,o)=>ie(o.querySelector(t))?(o.setAttribute(Tg,"true"),"inline-boundary"===o.getAttribute("data-mce-selected")&&o.removeAttribute("data-mce-selected"),!0):(o.removeAttribute(Tg),!1),Tm=(t,o)=>{const n=zp(t.getTransparentElements()),s=zp(t.getBlockElements());return Vt(o.querySelectorAll(n),i=>Em(s,i))},Oc=(t,o)=>{var n;const s=o?"lastChild":"firstChild";for(let i=t[s];i;i=i[s])if(Ss(ve(i)))return void(null===(n=i.parentNode)||void 0===n||n.removeChild(i))},Pd=(t,o)=>{const n=Tm(t,o);var s,i,c;((t,o,n)=>{const s=t.getBlockElements(),i=ve(o),c=u=>Sn(u)in s,d=u=>$n(u,i);Ue(dt(n),u=>{Gr(u,c,d).each(h=>{const v=Vt(xt(u),E=>c(E)&&!t.isValidChild(Sn(h),Sn(E)));if(v.length>0){const y=ce(h);Ue(v,C=>{Gr(C,c,d).each(E=>{((R,T)=>{const I=document.createRange(),N=R.parentNode;if(N){I.setStartBefore(R),I.setEndBefore(T);const H=I.extractContents();Oc(H,!0),I.setStartAfter(T),I.setEndAfter(R);const z=I.extractContents();Oc(z,!1),Ss(ve(H))||N.insertBefore(H,R),Ss(ve(T))||N.insertBefore(T,R),Ss(ve(z))||N.insertBefore(z,R),N.removeChild(R)}})(E.dom,C.dom)})}),y.each(C=>Tm(t,C.dom))}})})})(t,o,n),s=t,i=o,c=n,Ue([...c,...nd(s,i)?[i]:[]],d=>Ue(er(ve(d),d.nodeName.toLowerCase()),u=>{Af(s,u.dom)&&De(u)}))},gy=(t,o)=>{if(Of(t,o)){const n=zp(t.getBlockElements());Em(n,o)}},Om=t=>t.hasAttribute(Tg),Zp=(t,o)=>wo(t.getTransparentElements(),o),Of=(t,o)=>Wt(o)&&Zp(t,o.nodeName),nd=(t,o)=>Of(t,o)&&Om(o),Af=(t,o)=>Of(t,o)&&!Om(o),Am=(t,o)=>1===o.type&&Zp(t,o.name)&&Xt(o.attr(Tg)),A0=yi().browser,Hn=t=>wr(t,us),io=(t,o)=>t.children&&zt(t.children,o),gu=(t,o={})=>{let n=0;const s={},i=ve(t),c=vl(i),d=C=>{F(qn(i),C)},u=C=>{const E=qn(i);ys(E,"#"+C).each(_e)},h=C=>wn(s,C).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),v=C=>new Promise((E,R)=>{let T;const I=wt._addCacheSuffix(C),N=h(I);s[I]=N,N.count++;const H=(Y,ge)=>{Ue(Y,$r),N.status=ge,N.passed=[],N.failed=[],T&&(T.onload=null,T.onerror=null,T=null)},z=()=>H(N.passed,2),U=()=>H(N.failed,3);if(E&&N.passed.push(E),R&&N.failed.push(R),1===N.status)return;if(2===N.status)return void z();if(3===N.status)return void U();N.status=1;const J=vs("link",c.dom);Oa(J,{rel:"stylesheet",type:"text/css",id:N.id}),o.contentCssCors&&mr(J,"crossOrigin","anonymous"),o.referrerPolicy&&mr(J,"referrerpolicy",o.referrerPolicy),T=J.dom,T.onload=z,T.onerror=U,d(J),mr(J,"href",I)}),y=C=>{const E=wt._addCacheSuffix(C);wn(s,E).each(R=>{0==--R.count&&(delete s[E],u(R.id))})};return{load:v,loadRawCss:(C,E)=>{const R=h(C);s[C]=R,R.count++;const T=vs("style",c.dom);Oa(T,{rel:"stylesheet",type:"text/css",id:R.id}),T.dom.innerHTML=E,d(T)},loadAll:C=>Promise.allSettled(no(C,E=>v(E).then(Ke(E)))).then(E=>{const R=dn(E,T=>"fulfilled"===T.status);return R.fail.length>0?Promise.reject(no(R.fail,T=>T.reason)):no(R.pass,T=>T.value)}),unload:y,unloadRawCss:C=>{wn(s,C).each(E=>{0==--E.count&&(delete s[C],u(E.id))})},unloadAll:C=>{Ue(C,E=>{y(E)})},_setReferrerPolicy:C=>{o.referrerPolicy=C},_setContentCssCors:C=>{o.contentCssCors=C}}},Nf=(()=>{const t=new WeakMap;return{forElement:(o,n)=>{const s=gn(o).dom;return $.from(t.get(s)).getOrThunk(()=>{const i=gu(s,n);return t.set(s,i),i})}}})(),Ag=(t,o,n)=>ie(t)&&(km(t,o)||n.isInline(t.nodeName.toLowerCase())),Ac=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Dr=(t,o,n,s)=>{var i;const c=s||o;if(Wt(o)&&Ac(o))return o;const d=o.childNodes;for(let u=d.length-1;u>=0;u--)Dr(t,d[u],n,c);if(Wt(o)){const u=o.childNodes;1===u.length&&Ac(u[0])&&(null===(i=o.parentNode)||void 0===i||i.insertBefore(u[0],o))}return Hp(u=o)||wi(u)||km(o,c)||(u=>!!Wt(u)&&u.childNodes.length>0)(o)||((u,h,v)=>pt(u)&&u.data.length>0&&((y,C,E)=>{const R=new tr(y,C).prev(!1),T=new tr(y,C).next(!1),I=Bt(R)||Ag(R,C,E),N=Bt(T)||Ag(T,C,E);return I&&N})(u,h,v))(o,c,n)||t.remove(o),o;var u},Ng=wt.makeMap,Rg=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qe=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rf=/[<>&\"\']/g,Mf=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Mg={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},pu={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Fd={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},N0=(t,o)=>{const n={};if(t){const s=t.split(",");o=o||10;for(let i=0;i<s.length;i+=2){const c=String.fromCharCode(parseInt(s[i],o));if(!pu[c]){const d="&"+s[i+1]+";";n[c]=d,n[d]=c}}return n}},hu=N0("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Br=(t,o)=>t.replace(o?Rg:Qe,n=>pu[n]||n),rd=(t,o)=>t.replace(o?Rg:Qe,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":pu[n]||"&#"+n.charCodeAt(0)+";"),Df=(t,o,n)=>{const s=n||hu;return t.replace(o?Rg:Qe,i=>pu[i]||s[i]||i)},Gi={encodeRaw:Br,encodeAllRaw:t=>(""+t).replace(Rf,o=>pu[o]||o),encodeNumeric:rd,encodeNamed:Df,getEncodeFunc:(t,o)=>{const n=N0(o)||hu,s=Ng(t.replace(/\+/g,","));return s.named&&s.numeric?(i,c)=>i.replace(c?Rg:Qe,d=>void 0!==pu[d]?pu[d]:void 0!==n[d]?n[d]:d.length>1?"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";":"&#"+d.charCodeAt(0)+";"):s.named?o?(i,c)=>Df(i,c,n):Df:s.numeric?rd:Br},decode:t=>t.replace(Mf,(o,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Mg[n]||String.fromCharCode(n):Fd[o]||hu[o]||(s=>{const i=vs("div").dom;return i.innerHTML=s,i.textContent||i.innerText||s})(o))},Ra=(t,o)=>(t=wt.trim(t))?t.split(o||" "):[],Vd=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),Wu={},Nc=wt.makeMap,Rc=wt.each,Dg=wt.extend,Bf=wt.explode,Up=(t,o={})=>{const n=Nc(t," ",Nc(t.toUpperCase()," "));return Dg(n,o)},Jt=t=>Up("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Lf=(t,o)=>{if(t){const n={};return Xt(t)&&(t={"*":t}),Rc(t,(s,i)=>{n[i]=n[i.toUpperCase()]="map"===o?Nc(s,/[, ]/):Bf(s,/[, ]/)}),n}},fu=(t={})=>{var o;const n={},s={};let i=[];const c={},d={},u=(lo,Cn,Mn)=>{const nn=t[lo];if(nn)return Nc(nn,/[, ]/,Nc(nn.toUpperCase(),/[, ]/));{let Vn=Wu[lo];return Vn||(Vn=Up(Cn,Mn),Wu[lo]=Vn),Vn}},h=null!==(o=t.schema)&&void 0!==o?o:"html5",v=(lo=>{const{globalAttributes:Cn,phrasingContent:Mn,flowContent:nn}=(Ts=>{let oi,Ei,ul;oi="id accesskey class dir lang style tabindex title role",Ei="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ul="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==Ts&&(oi+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",Ei+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ul+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==Ts&&(oi+=" xml:lang",ul=[ul,"acronym applet basefont big font strike tt"].join(" "),Ei=[Ei,"center dir isindex noframes"].join(" "));const xc=[Ei,ul].join(" ");return{globalAttributes:oi,blockContent:Ei,phrasingContent:ul,flowContent:xc}})(lo),Vn={},ti=(Ts,oi,Ei)=>{Vn[Ts]={attributes:hs(oi,Ke({})),attributesOrder:oi,children:hs(Ei,Ke({}))}},ko=(Ts,oi="",Ei="")=>{const ul=Ra(Ei),xc=Ra(Ts);let Ti=xc.length;const Cc=Ra([Cn,oi].join(" "));for(;Ti--;)ti(xc[Ti],Cc.slice(),ul)},Dn=(Ts,oi)=>{const Ei=Ra(Ts),ul=Ra(oi);let xc=Ei.length;for(;xc--;){const Ti=Vn[Ei[xc]];for(let Cc=0,ni=ul.length;Cc<ni;Cc++)Ti.attributes[ul[Cc]]={},Ti.attributesOrder.push(ul[Cc])}};return"html5-strict"!==lo&&(Ue(Ra("acronym applet basefont big font strike tt"),Ts=>{ko(Ts,"",Mn)}),Ue(Ra("center dir isindex noframes"),Ts=>{ko(Ts,"",nn)})),ko("html","manifest","head body"),ko("head","","base command link meta noscript script style title"),ko("title hr noscript br"),ko("base","href target"),ko("link","href rel media hreflang type sizes hreflang"),ko("meta","name http-equiv content charset"),ko("style","media type scoped"),ko("script","src async defer type charset"),ko("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",nn),ko("dd div","",nn),ko("address dt caption","","html4"===lo?Mn:nn),ko("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Mn),ko("blockquote","cite",nn),ko("ol","reversed start type","li"),ko("ul","","li"),ko("li","value",nn),ko("dl","","dt dd"),ko("a","href target rel media hreflang type","html4"===lo?Mn:nn),ko("q","cite",Mn),ko("ins del","cite datetime",nn),ko("img","src sizes srcset alt usemap ismap width height"),ko("iframe","src name width height",nn),ko("embed","src type width height"),ko("object","data type typemustmatch name usemap form width height",[nn,"param"].join(" ")),ko("param","name value"),ko("map","name",[nn,"area"].join(" ")),ko("area","alt coords shape href target rel media hreflang type"),ko("table","border","caption colgroup thead tfoot tbody tr"+("html4"===lo?" col":"")),ko("colgroup","span","col"),ko("col","span"),ko("tbody thead tfoot","","tr"),ko("tr","","td th"),ko("td","colspan rowspan headers",nn),ko("th","colspan rowspan headers scope abbr",nn),ko("form","accept-charset action autocomplete enctype method name novalidate target",nn),ko("fieldset","disabled form name",[nn,"legend"].join(" ")),ko("label","form for",Mn),ko("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),ko("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===lo?nn:Mn),ko("select","disabled form multiple name required size","option optgroup"),ko("optgroup","disabled label","option"),ko("option","disabled label selected value"),ko("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),ko("menu","type label",[nn,"li"].join(" ")),ko("noscript","",nn),"html4"!==lo&&(ko("wbr"),ko("ruby","",[Mn,"rt rp"].join(" ")),ko("figcaption","",nn),ko("mark rt rp bdi","",Mn),ko("summary","",[Mn,"h1 h2 h3 h4 h5 h6"].join(" ")),ko("canvas","width height",nn),ko("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[nn,"track source"].join(" ")),ko("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[nn,"track source"].join(" ")),ko("picture","","img source"),ko("source","src srcset type media sizes"),ko("track","kind src srclang label default"),ko("datalist","",[Mn,"option"].join(" ")),ko("article section nav aside main header footer","",nn),ko("hgroup","","h1 h2 h3 h4 h5 h6"),ko("figure","",[nn,"figcaption"].join(" ")),ko("time","datetime",Mn),ko("dialog","open",nn),ko("command","type label icon disabled checked radiogroup command"),ko("output","for form name",Mn),ko("progress","value max",Mn),ko("meter","value min max low high optimum",Mn),ko("details","open",[nn,"summary"].join(" ")),ko("keygen","autofocus challenge disabled form keytype name"),ti("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==lo&&(Dn("script","language xml:space"),Dn("style","xml:space"),Dn("object","declare classid code codebase codetype archive standby align border hspace vspace"),Dn("embed","align name hspace vspace"),Dn("param","valuetype type"),Dn("a","charset name rev shape coords"),Dn("br","clear"),Dn("applet","codebase archive code object alt name width height align hspace vspace"),Dn("img","name longdesc align border hspace vspace"),Dn("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Dn("font basefont","size color face"),Dn("input","usemap align"),Dn("select"),Dn("textarea"),Dn("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Dn("ul","type compact"),Dn("li","type"),Dn("ol dl menu dir","compact"),Dn("pre","width xml:space"),Dn("hr","align noshade size width"),Dn("isindex","prompt"),Dn("table","summary width frame rules cellspacing cellpadding align bgcolor"),Dn("col","width align char charoff valign"),Dn("colgroup","width align char charoff valign"),Dn("thead","align char charoff valign"),Dn("tr","align char charoff valign bgcolor"),Dn("th","axis align char charoff valign nowrap bgcolor width height"),Dn("form","accept"),Dn("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Dn("tfoot","align char charoff valign"),Dn("tbody","align char charoff valign"),Dn("area","nohref"),Dn("body","background bgcolor text link vlink alink")),"html4"!==lo&&(Dn("input button select textarea","autofocus"),Dn("input textarea","placeholder"),Dn("a","download"),Dn("link script img","crossorigin"),Dn("img","loading"),Dn("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==lo&&Ue([Vn.video,Vn.audio],Ts=>{delete Ts.children.audio,delete Ts.children.video}),Ue(Ra("a form meter progress dfn"),Ts=>{Vn[Ts]&&delete Vn[Ts].children[Ts]}),delete Vn.caption.children.table,delete Vn.script,Vn})(h);!1===t.verify_html&&(t.valid_elements="*[*]");const y=Lf(t.valid_styles),C=Lf(t.invalid_styles,"map"),E=Lf(t.valid_classes,"map"),R=u("whitespace_elements","pre script noscript style textarea video audio iframe object code"),T=u("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),I=u("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=u("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),H="td th iframe video audio object script code",z=u("non_empty_elements",H+" pre svg",I),U=u("move_caret_before_on_enter_elements",H+" table",I),J="h1 h2 h3 h4 h5 h6",Y=u("text_block_elements",J+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),ge=u("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Y),Ee=u("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ne=u("transparent_elements","a ins del canvas map"),Me=u("wrap_block_elements","pre "+J);Rc("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),lo=>{d[lo]=new RegExp("</"+lo+"[^>]*>","gi")});const Fe=lo=>{const Cn=$.from(n["@"]),Mn=/[*?+]/;Ue(((nn,Vn)=>{const ti=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return ps(Ra(Vn,","),ko=>{const Dn=ti.exec(ko);if(Dn){const Ts=Dn[1],oi=Dn[2],Ei=Dn[3],ul=Dn[4],xc=Dn[5],Ti={attributes:{},attributesOrder:[]};if(nn.each(Cc=>{return bm=Ti,Po((ni=Cc).attributes,(Ed,eu)=>{bm.attributes[eu]=Ed}),void bm.attributesOrder.push(...ni.attributesOrder);var ni,bm}),"#"===Ts?Ti.paddEmpty=!0:"-"===Ts&&(Ti.removeEmpty=!0),"!"===ul&&(Ti.removeEmptyAttrs=!0),xc&&((Cc,ni)=>{const bm=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Ed=/[*?+]/,{attributes:eu,attributesOrder:Dp}=ni;Ue(Ra(Cc,"|"),pf=>{const hf=bm.exec(pf);if(hf){const ec={},Ux=hf[1],Zs=hf[2].replace(/[\\:]:/g,":"),Fu=hf[3],Bp=hf[4];if("!"===Ux&&(ni.attributesRequired=ni.attributesRequired||[],ni.attributesRequired.push(Zs),ec.required=!0),"-"===Ux)return delete eu[Zs],void Dp.splice(wt.inArray(Dp,Zs),1);if(Fu&&("="===Fu?(ni.attributesDefault=ni.attributesDefault||[],ni.attributesDefault.push({name:Zs,value:Bp}),ec.defaultValue=Bp):"~"===Fu?(ni.attributesForced=ni.attributesForced||[],ni.attributesForced.push({name:Zs,value:Bp}),ec.forcedValue=Bp):"<"===Fu&&(ec.validValues=wt.makeMap(Bp,"?"))),Ed.test(Zs)){const w0=ec;ni.attributePatterns=ni.attributePatterns||[],w0.pattern=Vd(Zs),ni.attributePatterns.push(w0)}else eu[Zs]||Dp.push(Zs),eu[Zs]=ec}})})(xc,Ti),Ei&&(Ti.outputName=oi),"@"===oi){if(!nn.isNone())return[];nn=$.some(Ti)}return[Ei?{name:oi,element:Ti,aliasName:Ei}:{name:oi,element:Ti}]}return[]})})(Cn,lo??""),({name:nn,element:Vn,aliasName:ti})=>{if(ti&&(n[ti]=Vn),Mn.test(nn)){const ko=Vn;ko.pattern=Vd(nn),i.push(ko)}else n[nn]=Vn})},ye=lo=>{i=[],Ue(cr(n),Cn=>{delete n[Cn]}),Fe(lo)},Te=lo=>{delete Wu.text_block_elements,delete Wu.block_elements,Ue((Cn=>{const Mn=/^(~)?(.+)$/;return ps(Ra(Cn,","),nn=>{const Vn=Mn.exec(nn);if(Vn){const ti="~"===Vn[1];return[{inline:ti,cloneName:ti?"span":"div",name:Vn[2]}]}return[]})})(lo??""),({inline:Cn,name:Mn,cloneName:nn})=>{if(s[Mn]=s[nn],c[Mn]=nn,z[Mn.toUpperCase()]={},z[Mn]={},Cn||(ge[Mn.toUpperCase()]={},ge[Mn]={}),!n[Mn]){let Vn=n[nn];Vn=Dg({},Vn),delete Vn.removeEmptyAttrs,delete Vn.removeEmpty,n[Mn]=Vn}Po(s,(Vn,ti)=>{Vn[nn]&&(s[ti]=Vn=Dg({},s[ti]),Vn[Mn]=Vn[nn])})})},Be=lo=>{Ue((Cn=>{const Mn=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return ps(Ra(Cn,","),nn=>{const Vn=Mn.exec(nn);if(Vn){const ti=Vn[1];return[{operation:ti?(Dn=>"-"===Dn?"remove":"add")(ti):"replace",name:Vn[2],validChildren:Ra(Vn[3],"|")}]}return[]})})(lo??""),({operation:Cn,name:Mn,validChildren:nn})=>{const Vn="replace"===Cn?{"#comment":{}}:s[Mn];Ue(nn,ti=>{"remove"===Cn?delete Vn[ti]:Vn[ti]={}}),s[Mn]=Vn})},tt=lo=>{const Cn=n[lo];if(Cn)return Cn;let Mn=i.length;for(;Mn--;){const nn=i[Mn];if(nn.pattern.test(lo))return nn}};t.valid_elements?(ye(t.valid_elements),Rc(v,(lo,Cn)=>{s[Cn]=lo.children})):(Rc(v,(lo,Cn)=>{n[Cn]={attributes:lo.attributes,attributesOrder:lo.attributesOrder},s[Cn]=lo.children}),Rc(Ra("strong/b em/i"),lo=>{const Cn=Ra(lo,"/");n[Cn[1]].outputName=Cn[0]}),Rc(Ee,(lo,Cn)=>{n[Cn]&&(t.padd_empty_block_inline_children&&(n[Cn].paddInEmptyBlock=!0),n[Cn].removeEmpty=!0)}),Rc(Ra("ol ul blockquote a table tbody"),lo=>{n[lo]&&(n[lo].removeEmpty=!0)}),Rc(Ra("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),lo=>{n[lo]&&(n[lo].paddEmpty=!0)}),Rc(Ra("span"),lo=>{n[lo].removeEmptyAttrs=!0})),delete n.svg,Te(t.custom_elements),Be(t.valid_children),Fe(t.extended_valid_elements),Be("+ol[ul|ol],+ul[ul|ol]"),Rc({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(lo,Cn)=>{n[Cn]&&(n[Cn].parentsRequired=Ra(lo))}),t.invalid_elements&&Rc(Bf(t.invalid_elements),lo=>{n[lo]&&delete n[lo]}),tt("span")||Fe("span[!data-mce-type|*]");const Zt=Ke(y),Mt=Ke(C),mo=Ke(E),co=Ke(N),Mo=Ke(ge),So=Ke(Y),$t=Ke(Ee),oo=Ke(Object.seal(I)),Wo=Ke(T),ke=Ke(z),Oe=Ke(U),it=Ke(R),mt=Ke(Ne),ft=Ke(Me),ro=Ke(Object.seal(d)),To=(lo,Cn)=>{const Mn=tt(lo);if(Mn){if(!Cn)return!0;{if(Mn.attributes[Cn])return!0;const nn=Mn.attributePatterns;if(nn){let Vn=nn.length;for(;Vn--;)if(nn[Vn].pattern.test(Cn))return!0}}}return!1},Yo=lo=>wo(Mo(),lo),Ho=lo=>!Pt(lo,"#")&&To(lo)&&!Yo(lo),Jr=Ke(c);return{type:h,children:s,elements:n,getValidStyles:Zt,getValidClasses:mo,getBlockElements:Mo,getInvalidStyles:Mt,getVoidElements:oo,getTextBlockElements:So,getTextInlineElements:$t,getBoolAttrs:co,getElementRule:tt,getSelfClosingElements:Wo,getNonEmptyElements:ke,getMoveCaretBeforeOnEnterElements:Oe,getWhitespaceElements:it,getTransparentElements:mt,getSpecialElements:ro,isValidChild:(lo,Cn)=>{const Mn=s[lo.toLowerCase()];return!(!Mn||!Mn[Cn.toLowerCase()])},isValid:To,isBlock:Yo,isInline:Ho,isWrapper:lo=>wo(ft(),lo)||Ho(lo),getCustomElements:Jr,addValidElements:Fe,setValidElements:ye,addCustomElements:Te,addValidChildren:Be}},R0=t=>{const o=t.toString(16);return(1===o.length?"0"+o:o).toUpperCase()},py=t=>{return{value:(n=R0(t.red)+R0(t.green)+R0(t.blue),$e(n,"#").toUpperCase())};var n},M0=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,jp=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,sd=(t,o,n,s)=>({red:t,green:o,blue:n,alpha:s}),D0=(t,o,n,s)=>{const i=parseInt(t,10),c=parseInt(o,10),d=parseInt(n,10),u=parseFloat(s);return sd(i,c,d,u)},Wp=t=>{if("transparent"===t)return $.some(sd(0,0,0,0));const o=M0.exec(t);if(null!==o)return $.some(D0(o[1],o[2],o[3],"1"));const n=jp.exec(t);return null!==n?$.some(D0(n[1],n[2],n[3],n[4])):$.none()},hy=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Nm=t=>Wp(t).map(py).map(o=>"#"+o.value).getOr(t),bu=(t={},o)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,c={};let d,u;o&&(d=o.getValidStyles(),u=o.getInvalidStyles());const v="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let C=0;C<v.length;C++)c[v[C]]="\ufeff"+C,c["\ufeff"+C]=v[C];const y={parse:C=>{const E={};let R=!1;const T=t.url_converter,I=t.url_converter_scope||y,N=(Fe,ye,Te)=>{const Be=E[Fe+"-top"+ye];if(!Be)return;const tt=E[Fe+"-right"+ye];if(!tt)return;const Zt=E[Fe+"-bottom"+ye];if(!Zt)return;const Mt=E[Fe+"-left"+ye];if(!Mt)return;const mo=[Be,tt,Zt,Mt];let co=mo.length-1;for(;co--&&mo[co]===mo[co+1];);co>-1&&Te||(E[Fe+ye]=-1===co?mo[0]:mo.join(" "),delete E[Fe+"-top"+ye],delete E[Fe+"-right"+ye],delete E[Fe+"-bottom"+ye],delete E[Fe+"-left"+ye])},H=Fe=>{const ye=E[Fe];if(!ye)return;const Te=ye.indexOf(",")>-1?[ye]:ye.split(" ");let Be=Te.length;for(;Be--;)if(Te[Be]!==Te[0])return!1;return E[Fe]=Te[0],!0},z=Fe=>(R=!0,c[Fe]),U=(Fe,ye)=>(R&&(Fe=Fe.replace(/\uFEFF[0-9]/g,Te=>c[Te])),ye||(Fe=Fe.replace(/\\([\'\";:])/g,"$1")),Fe),J=Fe=>String.fromCharCode(parseInt(Fe.slice(1),16)),Y=Fe=>Fe.replace(/\\[0-9a-f]+/gi,J),ge=(Fe,ye,Te,Be,tt,Zt)=>{if(tt=tt||Zt)return"'"+(tt=U(tt)).replace(/\'/g,"\\'")+"'";if(ye=U(ye||Te||Be||""),!t.allow_script_urls){const Mt=ye.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Mt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(Mt))return""}return T&&(ye=T.call(I,ye,"style")),"url('"+ye.replace(/\'/g,"\\'")+"')"};if(C){let Fe;for(C=(C=C.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,z).replace(/\"[^\"]+\"|\'[^\']+\'/g,ye=>ye.replace(/[;:]/g,z));Fe=s.exec(C);){s.lastIndex=Fe.index+Fe[0].length;let ye=Fe[1].replace(i,"").toLowerCase(),Te=Fe[2].replace(i,"");if(ye&&Te){if(ye=Y(ye),Te=Y(Te),-1!==ye.indexOf("\ufeff")||-1!==ye.indexOf('"')||!t.allow_script_urls&&("behavior"===ye||/expression\s*\(|\/\*|\*\//.test(Te)))continue;"font-weight"===ye&&"700"===Te?Te="bold":"color"!==ye&&"background-color"!==ye||(Te=Te.toLowerCase()),Xt(t.force_hex_color)&&"off"!==t.force_hex_color&&Wp(Te).each(Be=>{"always"!==t.force_hex_color&&1!==Be.alpha||(Te=Nm(hy(Be)))}),Te=Te.replace(n,ge),E[ye]=R?U(Te,!0):Te}}N("border","",!0),N("border","-width"),N("border","-color"),N("border","-style"),N("padding",""),N("margin",""),Ne="border-style",Me="border-color",H(Ee="border-width")&&H(Ne)&&H(Me)&&(E.border=E[Ee]+" "+E[Ne]+" "+E[Me],delete E[Ee],delete E[Ne],delete E[Me]),"medium none"===E.border&&delete E.border,"none"===E["border-image"]&&delete E["border-image"]}var Ee,Ne,Me;return E},serialize:(C,E)=>{let R="";const T=(I,N)=>{const H=N[I];if(H)for(let z=0,U=H.length;z<U;z++){const J=H[z],Y=C[J];Y&&(R+=(R.length>0?" ":"")+J+": "+Y+";")}};return E&&d?(T("*",d),T(E,d)):Po(C,(I,N)=>{I&&((H,z)=>{if(!u||!z)return!0;let U=u["*"];return!(U&&U[H]||(U=u[z],U&&U[H]))})(N,E)&&(R+=(R.length>0?" ":"")+N+": "+I+";")}),R}};return y},Rm={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},$p=(t,o)=>{const n=o??{};for(const s in t)wo(Rm,s)||(n[s]=t[s]);return ie(t.composedPath)&&(n.composedPath=()=>t.composedPath()),ie(t.getModifierState)&&(n.getModifierState=s=>t.getModifierState(s)),ie(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},Bg=(t,o,n,s)=>{var i;const c=$p(o,s);return c.type=t,yr(c.target)&&(c.target=null!==(i=c.srcElement)&&void 0!==i?i:n),(yr((d=o).preventDefault)||(u=d)instanceof Event||ht(u.initEvent))&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=zn,ht(o.preventDefault)&&o.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=zn,ht(o.stopPropagation)&&o.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=zn,c.stopPropagation()},(d=>d.isDefaultPrevented===zn||d.isDefaultPrevented===Do)(c)||(c.isDefaultPrevented=!0===c.defaultPrevented?zn:Do,c.isPropagationStopped=!0===c.cancelBubble?zn:Do,c.isImmediatePropagationStopped=Do)),c;var d,u},Ma=/^(?:mouse|contextmenu)|click/,El=(t,o,n,s)=>{t.addEventListener(o,n,s||!1)},na=(t,o,n,s)=>{t.removeEventListener(o,n,s||!1)},Zl=(t,o)=>{const n=Bg(t.type,t,document,o);if(ie(s=t)&&Ma.test(s.type)&&Bt(t.pageX)&&!Bt(t.clientX)){const s=n.target.ownerDocument||document,i=s.documentElement,c=s.body,d=n;d.pageX=t.clientX+(i&&i.scrollLeft||c&&c.scrollLeft||0)-(i&&i.clientLeft||c&&c.clientLeft||0),d.pageY=t.clientY+(i&&i.scrollTop||c&&c.scrollTop||0)-(i&&i.clientTop||c&&c.clientTop||0)}var s;return n},Mc=(t,o,n)=>{const s=t.document,i={type:"ready"};if(n.domLoaded)return void o(i);const c=()=>{na(t,"DOMContentLoaded",c),na(t,"load",c),n.domLoaded||(n.domLoaded=!0,o(i)),t=null};"complete"===s.readyState||"interactive"===s.readyState&&s.body?c():El(t,"DOMContentLoaded",c),n.domLoaded||El(t,"load",c)};class zd{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(o,n,s,i){const c=this;let d;const u=window,h=E=>{c.executeHandlers(Zl(E||u.event),v)};if(!o||pt(o)||Xe(o))return s;let v;o[c.expando]?v=o[c.expando]:(v=c.count++,o[c.expando]=v,c.events[v]={}),i=i||o;const y=n.split(" ");let C=y.length;for(;C--;){let E=y[C],R=h,T=!1,I=!1;"DOMContentLoaded"===E&&(E="ready"),c.domLoaded&&"ready"===E&&"complete"===o.readyState?s.call(i,Zl({type:E})):(c.hasFocusIn||"focusin"!==E&&"focusout"!==E||(T=!0,I="focusin"===E?"focus":"blur",R=N=>{const H=Zl(N||u.event);H.type="focus"===H.type?"focusin":"focusout",c.executeHandlers(H,v)}),d=c.events[v][E],d?"ready"===E&&c.domLoaded?s(Zl({type:E})):d.push({func:s,scope:i}):(c.events[v][E]=d=[{func:s,scope:i}],d.fakeName=I,d.capture=T,d.nativeHandler=R,"ready"===E?Mc(o,R,c):El(o,I||E,R,T)))}return o=d=null,s}unbind(o,n,s){if(!o||pt(o)||Xe(o))return this;const i=o[this.expando];if(i){let c=this.events[i];if(n){const d=n.split(" ");let u=d.length;for(;u--;){const h=d[u],v=c[h];if(v){if(s){let y=v.length;for(;y--;)if(v[y].func===s){const C=v.nativeHandler,E=v.fakeName,R=v.capture,T=v.slice(0,y).concat(v.slice(y+1));T.nativeHandler=C,T.fakeName=E,T.capture=R,c[h]=T}}s&&0!==v.length||(delete c[h],na(o,v.fakeName||h,v.nativeHandler,v.capture))}}}else Po(c,(d,u)=>{na(o,d.fakeName||u,d.nativeHandler,d.capture)}),c={};for(const d in c)if(wo(c,d))return this;delete this.events[i];try{delete o[this.expando]}catch{o[this.expando]=null}}return this}fire(o,n,s){return this.dispatch(o,n,s)}dispatch(o,n,s){if(!o||pt(o)||Xe(o))return this;const i=Zl({type:n,target:o},s);do{const c=o[this.expando];c&&this.executeHandlers(i,c),o=o.parentNode||o.ownerDocument||o.defaultView||o.parentWindow}while(o&&!i.isPropagationStopped());return this}clean(o){if(!o||pt(o)||Xe(o))return this;if(o[this.expando]&&this.unbind(o),o.getElementsByTagName||(o=o.document),o&&o.getElementsByTagName){this.unbind(o);const n=o.getElementsByTagName("*");let s=n.length;for(;s--;)(o=n[s])[this.expando]&&this.unbind(o)}return this}destroy(){this.events={}}cancel(o){return o&&(o.preventDefault(),o.stopImmediatePropagation()),!1}executeHandlers(o,n){const s=this.events[n],i=s&&s[o.type];if(i)for(let c=0,d=i.length;c<d;c++){const u=i[c];if(u&&!1===u.func.call(u.scope,o)&&o.preventDefault(),o.isImmediatePropagationStopped())return}}}zd.Event=new zd;const If=wt.each,fy=wt.grep,Lg="data-mce-style",by=wt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Dc=(t,o,n)=>{yr(n)||""===n?as(t,o):mr(t,o,n)},Hf=t=>t.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),Ig=(t,o)=>{let n=0;if(t)for(let s=t.nodeType,i=t.previousSibling;i;i=i.previousSibling){const c=i.nodeType;(!o||!pt(i)||c!==s&&i.data.length)&&(n++,s=c)}return n},Pf=(t,o)=>{const n=ss(o,"style"),s=t.serialize(t.parse(n),Sn(o));Dc(o,Lg,s)},ad=(t,o,n)=>{const s=Hf(o);var i,c;yr(n)||""===n?iu(t,s):wm(t,s,(c=s,Ae(i=n)?wo(by,c)?i+"":i+"px":i))},Lr=(t,o={})=>{const n={},s=window,i={};let c=0;const d=Nf.forElement(ve(t),{contentCssCors:o.contentCssCors,referrerPolicy:o.referrerPolicy}),u=[],h=o.schema?o.schema:fu({}),v=bu({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope,force_hex_color:o.force_hex_color},o.schema),y=o.ownEvents?new zd:zd.Event,C=h.getBlockElements(),E=ke=>ke&&t&&Xt(ke)?t.getElementById(ke):ke,R=ke=>{const Oe=E(ke);return ie(Oe)?ve(Oe):null},T=(ke,Oe,it="")=>{let mt;const ft=R(ke);if(ie(ft)&&us(ft)){const ro=Wo[Oe];mt=ro&&ro.get?ro.get(ft.dom,Oe):ss(ft,Oe)}return ie(mt)?mt:it},I=ke=>{const Oe=E(ke);return yr(Oe)?[]:Oe.attributes},N=(ke,Oe,it)=>{Ne(ke,mt=>{if(Wt(mt)){const ft=ve(mt),ro=""===it?null:it,To=ss(ft,Oe),Yo=Wo[Oe];Yo&&Yo.set?Yo.set(ft.dom,ro,Oe):Dc(ft,Oe,ro),To!==ro&&o.onSetAttrib&&o.onSetAttrib({attrElm:ft.dom,attrName:Oe,attrValue:ro})}})},H=()=>o.root_element||t.body,z=(ke,Oe)=>((it,mt,ft)=>{let ro=0,To=0;const Yo=it.ownerDocument;if(ft=ft||it,mt){if(ft===it&&mt.getBoundingClientRect&&"static"===yl(ve(it),"position")){const Jr=mt.getBoundingClientRect();return ro=Jr.left+(Yo.documentElement.scrollLeft||it.scrollLeft)-Yo.documentElement.clientLeft,To=Jr.top+(Yo.documentElement.scrollTop||it.scrollTop)-Yo.documentElement.clientTop,{x:ro,y:To}}let Ho=mt;for(;Ho&&Ho!==ft&&Ho.nodeType&&!io(Ho,ft);)ro+=Ho.offsetLeft||0,To+=Ho.offsetTop||0,Ho=Ho.offsetParent;for(Ho=mt.parentNode;Ho&&Ho!==ft&&Ho.nodeType&&!io(Ho,ft);)ro-=Ho.scrollLeft||0,To-=Ho.scrollTop||0,Ho=Ho.parentNode;To+=(Jr=ve(mt),A0.isFirefox()&&"table"===Sn(Jr)?Hn(xt(Jr)).filter(lo=>"caption"===Sn(lo)).bind(lo=>Hn(ct(lo)).map(Cn=>Cn.dom.offsetTop<=lo.dom.offsetTop?-lo.dom.offsetHeight:0)).getOr(0):0)}var Jr;return{x:ro,y:To}})(t.body,E(ke),Oe),U=(ke,Oe,it)=>{const mt=E(ke);var ft;if(!yr(mt)&&(wl(mt)||Wt(ft=mt)&&"http://www.w3.org/2000/svg"===ft.namespaceURI))return it?yl(ve(mt),Hf(Oe)):("float"===(Oe=Oe.replace(/-(\D)/g,(ro,To)=>To.toUpperCase()))&&(Oe="cssFloat"),mt.style?mt.style[Oe]:void 0)},J=ke=>{const Oe=E(ke);if(!Oe)return{w:0,h:0};let it=U(Oe,"width"),mt=U(Oe,"height");return it&&-1!==it.indexOf("px")||(it="0"),mt&&-1!==mt.indexOf("px")||(mt="0"),{w:parseInt(it,10)||Oe.offsetWidth||Oe.clientWidth,h:parseInt(mt,10)||Oe.offsetHeight||Oe.clientHeight}},Y=(ke,Oe)=>{if(!ke)return!1;const it=Nt(ke)?ke:[ke];return Bn(it,mt=>ai(ve(mt),Oe))},ge=(ke,Oe,it,mt)=>{const ft=[];let ro=E(ke);mt=void 0===mt;const To=it||("BODY"!==H().nodeName?H().parentNode:null);if(Xt(Oe))if("*"===Oe)Oe=Wt;else{const Yo=Oe;Oe=Ho=>Y(Ho,Yo)}for(;ro&&!(ro===To||yr(ro.nodeType)||wi(ro)||Hp(ro));){if(!Oe||Oe(ro)){if(!mt)return[ro];ft.push(ro)}ro=ro.parentNode}return mt?ft:null},Ee=(ke,Oe,it)=>{let mt=Oe;if(ke){Xt(Oe)&&(mt=ft=>Y(ft,Oe));for(let ft=ke[it];ft;ft=ft[it])if(ht(mt)&&mt(ft))return ft}return null},Ne=function(ke,Oe,it){const mt=it??this;if(Nt(ke)){const ft=[];return If(ke,(ro,To)=>{const Yo=E(ro);Yo&&ft.push(Oe.call(mt,Yo,To))}),ft}{const ft=E(ke);return!!ft&&Oe.call(mt,ft)}},Me=(ke,Oe)=>{Ne(ke,it=>{Po(Oe,(mt,ft)=>{N(it,ft,mt)})})},Fe=(ke,Oe)=>{Ne(ke,it=>{const mt=ve(it);Et(mt,Oe)})},ye=(ke,Oe,it,mt,ft)=>Ne(ke,ro=>{const To=Xt(Oe)?t.createElement(Oe):Oe;return ie(it)&&Me(To,it),mt&&(!Xt(mt)&&mt.nodeType?To.appendChild(mt):Xt(mt)&&Fe(To,mt)),ft?To:ro.appendChild(To)}),Te=(ke,Oe,it)=>ye(t.createElement(ke),ke,Oe,it,!0),Be=Gi.encodeAllRaw,tt=(ke,Oe)=>Ne(ke,it=>{const mt=ve(it);return Oe&&Ue(xt(mt),ft=>{En(ft)&&0===ft.dom.length?_e(ft):pa(mt,ft)}),_e(mt),mt.dom}),Zt=(ke,Oe,it)=>{Ne(ke,mt=>{if(Wt(mt)){const ft=ve(mt),ro=Oe.split(" ");Ue(ro,To=>{var Yo,Ho,lo,Cn;ie(it)?(it?Ll:Il)(ft,To):(Ho=To,Ms(Yo=ft)?Yo.dom.classList.toggle(Ho):(Cn=Ho,zt(nu(lo=Yo),Cn)?ru(lo,Cn):ym(lo,Cn)),Ad(Yo))})}})},Mt=(ke,Oe,it)=>Ne(Oe,mt=>{var ft;const ro=Nt(Oe)?ke.cloneNode(!0):ke;return it&&If(fy(mt.childNodes),To=>{ro.appendChild(To)}),null===(ft=mt.parentNode)||void 0===ft||ft.replaceChild(ro,mt),mt}),mo=ke=>{if(Wt(ke)){const Oe="a"===ke.nodeName.toLowerCase()&&!T(ke,"href")&&T(ke,"id");if(T(ke,"name")||T(ke,"data-mce-bookmark")||Oe)return!0}return!1},co=()=>t.createRange(),Mo=(ke,Oe,it,mt)=>{if(Nt(ke)){let ft=ke.length;const ro=[];for(;ft--;)ro[ft]=Mo(ke[ft],Oe,it,mt);return ro}return!o.collect||ke!==t&&ke!==s||u.push([ke,Oe,it,mt]),y.bind(ke,Oe,it,mt||oo)},So=(ke,Oe,it)=>{if(Nt(ke)){let mt=ke.length;const ft=[];for(;mt--;)ft[mt]=So(ke[mt],Oe,it);return ft}if(u.length>0&&(ke===t||ke===s)){let mt=u.length;for(;mt--;){const[ft,ro,To]=u[mt];ke!==ft||Oe&&Oe!==ro||it&&it!==To||y.unbind(ft,ro,To)}}return y.unbind(ke,Oe,it)},$t=ke=>{if(ke&&wl(ke)){const Oe=ke.getAttribute("data-mce-contenteditable");return Oe&&"inherit"!==Oe?Oe:"inherit"!==ke.contentEditable?ke.contentEditable:null}return null},oo={doc:t,settings:o,win:s,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:d,boundEvents:u,styles:v,schema:h,events:y,isBlock:ke=>Xt(ke)?wo(C,ke):Wt(ke)&&(wo(C,ke.nodeName)||nd(h,ke)),root:null,clone:(ke,Oe)=>ke.cloneNode(Oe),getRoot:H,getViewPort:ke=>{const Oe=xn(ke);return{x:Oe.x,y:Oe.y,w:Oe.width,h:Oe.height}},getRect:ke=>{const Oe=E(ke),it=z(Oe),mt=J(Oe);return{x:it.x,y:it.y,w:mt.w,h:mt.h}},getSize:J,getParent:(ke,Oe,it)=>{const mt=ge(ke,Oe,it,!1);return mt&&mt.length>0?mt[0]:null},getParents:ge,get:E,getNext:(ke,Oe)=>Ee(ke,Oe,"nextSibling"),getPrev:(ke,Oe)=>Ee(ke,Oe,"previousSibling"),select:(ke,Oe)=>{var it,mt;const ft=null!==(mt=null!==(it=E(Oe))&&void 0!==it?it:o.root_element)&&void 0!==mt?mt:t;return ht(ft.querySelectorAll)?fr(ft.querySelectorAll(ke)):[]},is:Y,add:ye,create:Te,createHTML:(ke,Oe,it="")=>{let mt="<"+ke;for(const ft in Oe)ns(Oe,ft)&&(mt+=" "+ft+'="'+Be(Oe[ft])+'"');return an(it)&&wo(h.getVoidElements(),ke)?mt+" />":mt+">"+it+"</"+ke+">"},createFragment:ke=>{const Oe=t.createElement("div"),it=t.createDocumentFragment();let mt;for(it.appendChild(Oe),ke&&(Oe.innerHTML=ke);mt=Oe.firstChild;)it.appendChild(mt);return it.removeChild(Oe),it},remove:tt,setStyle:(ke,Oe,it)=>{Ne(ke,mt=>{const ft=ve(mt);ad(ft,Oe,it),o.update_styles&&Pf(v,ft)})},getStyle:U,setStyles:(ke,Oe)=>{Ne(ke,it=>{const mt=ve(it);Po(Oe,(ft,ro)=>{ad(mt,ro,ft)}),o.update_styles&&Pf(v,mt)})},removeAllAttribs:ke=>Ne(ke,Oe=>{const it=Oe.attributes;for(let mt=it.length-1;mt>=0;mt--)Oe.removeAttributeNode(it.item(mt))}),setAttrib:N,setAttribs:Me,getAttrib:T,getPos:z,parseStyle:ke=>v.parse(ke),serializeStyle:(ke,Oe)=>v.serialize(ke,Oe),addStyle:ke=>{if(oo!==Lr.DOM&&t===document){if(n[ke])return;n[ke]=!0}let Oe=t.getElementById("mceDefaultStyles");if(!Oe){Oe=t.createElement("style"),Oe.id="mceDefaultStyles",Oe.type="text/css";const it=t.head;it.firstChild?it.insertBefore(Oe,it.firstChild):it.appendChild(Oe)}Oe.styleSheet?Oe.styleSheet.cssText+=ke:Oe.appendChild(t.createTextNode(ke))},loadCSS:ke=>{ke||(ke=""),Ue(ke.split(","),Oe=>{i[Oe]=!0,d.load(Oe).catch(_o)})},addClass:(ke,Oe)=>{Zt(ke,Oe,!0)},removeClass:(ke,Oe)=>{Zt(ke,Oe,!1)},hasClass:(ke,Oe)=>{const it=R(ke),mt=Oe.split(" ");return ie(it)&&Ar(mt,ft=>Kc(it,ft))},toggleClass:Zt,show:ke=>{Ne(ke,Oe=>iu(ve(Oe),"display"))},hide:ke=>{Ne(ke,Oe=>wm(ve(Oe),"display","none"))},isHidden:ke=>{const Oe=R(ke);return ie(Oe)&&Mi(ic(Oe,"display"),"none")},uniqueId:ke=>(ke||"mce_")+c++,setHTML:Fe,getOuterHTML:ke=>{const Oe=R(ke);return ie(Oe)?Wt(Oe.dom)?Oe.dom.outerHTML:(it=>{const mt=vs("div"),ft=ve(it.dom.cloneNode(!0));return F(mt,ft),Tt(mt)})(Oe):""},setOuterHTML:(ke,Oe)=>{Ne(ke,it=>{Wt(it)&&(it.outerHTML=Oe)})},decode:Gi.decode,encode:Be,insertAfter:(ke,Oe)=>{const it=E(Oe);return Ne(ke,mt=>{const ft=it?.parentNode,ro=it?.nextSibling;return ft&&(ro?ft.insertBefore(mt,ro):ft.appendChild(mt)),mt})},replace:Mt,rename:(ke,Oe)=>{if(ke.nodeName!==Oe.toUpperCase()){const it=Te(Oe);return If(I(ke),mt=>{N(it,mt.nodeName,T(ke,mt.nodeName))}),Mt(it,ke,!0),it}return ke},findCommonAncestor:(ke,Oe)=>{let it=ke;for(;it;){let mt=Oe;for(;mt&&it!==mt;)mt=mt.parentNode;if(it===mt)break;it=it.parentNode}return!it&&ke.ownerDocument?ke.ownerDocument.documentElement:it},run:Ne,getAttribs:I,isEmpty:(ke,Oe,it)=>{let mt=0;if(mo(ke))return!1;const ft=ke.firstChild;if(ft){const ro=new tr(ft,ke),To=h?h.getWhitespaceElements():{},Yo=Oe||(h?h.getNonEmptyElements():null);let Ho=ft;do{if(Wt(Ho)){const Jr=Ho.getAttribute("data-mce-bogus");if(Jr){Ho=ro.next("all"===Jr);continue}const lo=Ho.nodeName.toLowerCase();if(Yo&&Yo[lo]){if("br"===lo){mt++,Ho=ro.next();continue}return!1}if(mo(Ho))return!1}if(Xe(Ho)||pt(Ho)&&!Ld(Ho.data)&&(!it?.includeZwsp||!Ks(Ho.data))||pt(Ho)&&Ho.parentNode&&To[Ho.parentNode.nodeName]&&Ld(Ho.data))return!1;Ho=ro.next()}while(Ho)}return mt<=1},createRng:co,nodeIndex:Ig,split:(ke,Oe,it)=>{let mt,ft,ro=co();if(ke&&Oe&&ke.parentNode&&Oe.parentNode){const To=ke.parentNode;return ro.setStart(To,Ig(ke)),ro.setEnd(Oe.parentNode,Ig(Oe)),mt=ro.extractContents(),ro=co(),ro.setStart(Oe.parentNode,Ig(Oe)+1),ro.setEnd(To,Ig(ke)+1),ft=ro.extractContents(),To.insertBefore(Dr(oo,mt,h),ke),To.insertBefore(it||Oe,ke),To.insertBefore(Dr(oo,ft,h),ke),tt(ke),it||Oe}},bind:Mo,unbind:So,fire:(ke,Oe,it)=>y.dispatch(ke,Oe,it),dispatch:(ke,Oe,it)=>y.dispatch(ke,Oe,it),getContentEditable:$t,getContentEditableParent:ke=>{const Oe=H();let it=null;for(let mt=ke;mt&&mt!==Oe&&(it=$t(mt),null===it);mt=mt.parentNode);return it},isEditable:ke=>{if(ie(ke)){const Oe=Wt(ke)?ke:ke.parentElement;return ie(Oe)&&wl(Oe)&&Yc(ve(Oe))}return!1},destroy:()=>{if(u.length>0){let ke=u.length;for(;ke--;){const[Oe,it,mt]=u[ke];y.unbind(Oe,it,mt)}}Po(i,(ke,Oe)=>{d.unload(Oe),delete i[Oe]})},isChildOf:(ke,Oe)=>ke===Oe||Oe.contains(ke),dumpRng:ke=>"startContainer: "+ke.startContainer.nodeName+", startOffset: "+ke.startOffset+", endContainer: "+ke.endContainer.nodeName+", endOffset: "+ke.endOffset},Wo=((ke,Oe,it)=>{const mt=Oe.keep_values,ro={style:{set:(To,Yo)=>{const Ho=ve(To);mt&&Dc(Ho,Lg,Yo),as(Ho,"style"),Xt(Yo)&&au(Ho,ke.parse(Yo))},get:To=>{const Yo=ve(To),Ho=ss(Yo,Lg)||ss(Yo,"style");return ke.serialize(ke.parse(Ho),Sn(Yo))}}};return mt&&(ro.href=ro.src={set:(To,Yo,Ho)=>{const Jr=ve(To);ht(Oe.url_converter)&&ie(Yo)&&(Yo=Oe.url_converter.call(Oe.url_converter_scope||it(),String(Yo),Ho,To)),Dc(Jr,"data-mce-"+Ho,Yo),Dc(Jr,Ho,Yo)},get:(To,Yo)=>{const Ho=ve(To);return ss(Ho,"data-mce-"+Yo)||ss(Ho,Yo)}}),ro})(v,o,Ke(oo));return oo};Lr.DOM=Lr(document),Lr.nodeIndex=Ig;const B0=Lr.DOM;class id{constructor(o={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=o}_setReferrerPolicy(o){this.settings.referrerPolicy=o}loadScript(o){return new Promise((n,s)=>{const i=B0;let c;const d=()=>{i.remove(u),c&&(c.onerror=c.onload=c=null)},u=i.uniqueId();c=document.createElement("script"),c.id=u,c.type="text/javascript",c.src=wt._addCacheSuffix(o),this.settings.referrerPolicy&&i.setAttrib(c,"referrerpolicy",this.settings.referrerPolicy),c.onload=()=>{d(),n()},c.onerror=()=>{d(),s("Failed to load script: "+o)},(document.getElementsByTagName("head")[0]||document.body).appendChild(c)})}isDone(o){return 2===this.states[o]}markDone(o){this.states[o]=2}add(o){const n=this;return n.queue.push(o),void 0===n.states[o]&&(n.states[o]=0),new Promise((s,i)=>{n.scriptLoadedCallbacks[o]||(n.scriptLoadedCallbacks[o]=[]),n.scriptLoadedCallbacks[o].push({resolve:s,reject:i})})}load(o){return this.add(o)}remove(o){delete this.states[o],delete this.scriptLoadedCallbacks[o]}loadQueue(){const o=this.queue;return this.queue=[],this.loadScripts(o)}loadScripts(o){const n=this,s=(h,v)=>{wn(n.scriptLoadedCallbacks,v).each(y=>{Ue(y,C=>C[h](v))}),delete n.scriptLoadedCallbacks[v]},i=h=>{const v=Vt(h,y=>"rejected"===y.status);return v.length>0?Promise.reject(ps(v,({reason:y})=>Nt(y)?y:[y])):Promise.resolve()},c=h=>Promise.allSettled(no(h,v=>2===n.states[v]?(s("resolve",v),Promise.resolve()):3===n.states[v]?(s("reject",v),Promise.reject(v)):(n.states[v]=1,n.loadScript(v).then(()=>{n.states[v]=2,s("resolve",v);const y=n.queue;return y.length>0?(n.queue=[],c(y).then(i)):Promise.resolve()},()=>(n.states[v]=3,s("reject",v),Promise.reject(v)))))),d=h=>(n.loading=!0,c(h).then(v=>{n.loading=!1;const y=n.queueLoadedCallbacks.shift();return $.from(y).each($r),i(v)})),u=Qn(o);return n.loading?new Promise((h,v)=>{n.queueLoadedCallbacks.push(()=>{d(u).then(h,v)})}):d(u)}}id.ScriptLoader=new id;const Gn=t=>{let o=t;return{get:()=>o,set:n=>{o=n}}},Mm={},ms=Gn("en"),Li=()=>wn(Mm,ms.get()),Ii={getData:()=>ga(Mm,t=>({...t})),setCode:t=>{t&&ms.set(t)},getCode:()=>ms.get(),add:(t,o)=>{let n=Mm[t];n||(Mm[t]=n={});const s=no(cr(o),i=>i.toLowerCase());Po(o,(i,c)=>{const d=c.toLowerCase();d!==c&&((u,h)=>{const v=u.indexOf(h);return-1!==v&&u.indexOf(h,v+1)>v})(s,d)?(wo(o,d)||(n[d]=i),n[c]=i):n[d]=i})},translate:t=>{const o=Li().getOr({}),n=u=>ht(u)?Object.prototype.toString.call(u):s(u)?"":""+u,s=u=>""===u||null==u,i=u=>{const h=n(u);return wo(o,h)?n(o[h]):wn(o,h.toLowerCase()).map(n).getOr(h)},c=u=>u.replace(/{context:\w+}$/,"");if(s(t))return"";if(rt(d=t)&&wo(d,"raw"))return n(t.raw);var d,u;if(Nt(u=t)&&u.length>1){const u=t.slice(1);return c(i(t[0]).replace(/\{([0-9]+)\}/g,(h,v)=>wo(u,v)?n(u[v]):h))}return c(i(t))},isRtl:()=>Li().bind(t=>wn(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>wo(Mm,t)},ks=()=>{const t=[],o={},n={},s=[],i=(h,v)=>{const y=Vt(s,C=>C.name===h&&C.state===v);Ue(y,C=>C.resolve())},c=h=>wo(o,h),d=(h,v)=>{const y=Ii.getCode();!y||v&&-1===(","+(v||"")+",").indexOf(","+y+",")||id.ScriptLoader.add(o[h]+"/langs/"+y+".js")},u=(h,v="added")=>"added"===v&&wo(n,h)||"loaded"===v&&c(h)?Promise.resolve():new Promise(y=>{s.push({name:h,state:v,resolve:y})});return{items:t,urls:o,lookup:n,get:h=>{if(n[h])return n[h].instance},requireLangPack:(h,v)=>{!1!==ks.languageLoad&&(c(h)?d(h,v):u(h,"loaded").then(()=>d(h,v)))},add:(h,v)=>(t.push(v),n[h]={instance:v},i(h,"added"),v),remove:h=>{delete o[h],delete n[h]},createUrl:(h,v)=>Xt(v)?Xt(h)?{prefix:"",resource:v,suffix:""}:{prefix:h.prefix,resource:v,suffix:h.suffix}:v,load:(h,v)=>{if(o[h])return Promise.resolve();let y=Xt(v)?v:v.prefix+v.resource+v.suffix;0!==y.indexOf("/")&&-1===y.indexOf("://")&&(y=ks.baseURL+"/"+y),o[h]=y.substring(0,y.lastIndexOf("/"));const C=()=>(i(h,"loaded"),Promise.resolve());return n[h]?C():id.ScriptLoader.add(y).then(C)},waitFor:u}};ks.languageLoad=!0,ks.baseURL="",ks.PluginManager=ks(),ks.ThemeManager=ks(),ks.ModelManager=ks();const Ff=t=>{const o=Gn($.none()),n=()=>o.get().each(s=>clearInterval(s));return{clear:()=>{n(),o.set($.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:s=>{n(),o.set($.some(setInterval(s,t)))}}},Ki=()=>{const t=(o=>{const n=Gn($.none()),s=()=>n.get().each(o);return{clear:()=>{s(),n.set($.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:i=>{s(),n.set($.some(i))}}})(_o);return{...t,on:o=>t.get().each(o)}},ld=(t,o)=>{let n=null;return{cancel:()=>{Wr(n)||(clearTimeout(n),n=null)},throttle:(...s)=>{Wr(n)&&(n=setTimeout(()=>{n=null,t.apply(null,s)},o))}}},qp=(t,o)=>{let n=null;const s=()=>{Wr(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...i)=>{s(),n=setTimeout(()=>{n=null,t.apply(null,i)},o)}}},Bc=Ke("mce-annotation"),dc=Ke("data-mce-annotation"),$u=Ke("data-mce-annotation-uid"),Gp=Ke("data-mce-annotation-active"),Dm=Ke("data-mce-annotation-classes"),Hg=Ke("data-mce-annotation-attrs"),Yr=t=>o=>$n(o,t),Vf=(t,o)=>{const n=t.selection.getRng(),s=ve(n.startContainer),i=ve(t.getBody()),c=o.fold(()=>"."+Bc(),u=>`[${dc()}="${u}"]`),d=kt(s,n.startOffset).getOr(s);return ac(d,c,Yr(i)).bind(u=>$i(u,`${$u()}`).bind(h=>$i(u,`${dc()}`).map(v=>{const y=Kp(t,h);return{uid:h,name:v,elements:y}})))},L0=(t,o)=>hl(t,"data-mce-bogus")||vr(t,'[data-mce-bogus="all"]',Yr(o)),Kp=(t,o)=>{const n=ve(t.getBody()),s=er(n,`[${$u()}="${o}"]`);return Vt(s,i=>!L0(i,n))},di=(t,o)=>{const n=ve(t.getBody()),s=er(n,`[${dc()}="${o}"]`),i={};return Ue(s,c=>{if(!L0(c,n)){const d=ss(c,$u()),u=wn(i,d).getOr([]);i[d]=u.concat([c])}}),i};let Tl=0;const sl=t=>{const o=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Tl++,t+"_"+n+Tl+String(o)},zf=(t,o)=>ve(t.dom.cloneNode(o)),vu=t=>zf(t,!1),I0=t=>zf(t,!0),Yp=(t,o,n=Do)=>{const s=new tr(t,o),i=c=>{let d;do{d=s[c]()}while(d&&!pt(d)&&!n(d));return $.from(d).filter(pt)};return{current:()=>$.from(s.current()).filter(pt),next:()=>i("next"),prev:()=>i("prev"),prev2:()=>i("prev2")}},al=(t,o)=>{const n=o||(i=>t.isBlock(i)||Ln(i)||xr(i)),s=(i,c,d,u)=>{if(pt(i)){const h=u(i,c,i.data);if(-1!==h)return $.some({container:i,offset:h})}return d().bind(h=>s(h.container,h.offset,d,u))};return{backwards:(i,c,d,u)=>{const h=Yp(i,u??t.getRoot(),n);return s(i,c,()=>h.prev().map(v=>({container:v,offset:v.length})),d).getOrNull()},forwards:(i,c,d,u)=>{const h=Yp(i,u??t.getRoot(),n);return s(i,c,()=>h.next().map(v=>({container:v,offset:0})),d).getOrNull()}}},qu=Math.round,Xr=t=>t?{left:qu(t.left),top:qu(t.top),bottom:qu(t.bottom),right:qu(t.right),width:qu(t.width),height:qu(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},uc=(t,o)=>(t=Xr(t),o||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Bm=(t,o,n)=>t>=0&&t<=Math.min(o.height,n.height)/2,yu=(t,o)=>{const n=Math.min(o.height/2,t.height/2);return t.bottom-n<o.top||!(t.top>o.bottom)&&Bm(o.top-t.bottom,t,o)},Ys=(t,o)=>t.top>o.bottom||!(t.bottom<o.top)&&Bm(o.bottom-t.top,t,o),Zd=(t,o,n)=>{const s=Math.max(Math.min(o,t.left+t.width),t.left),i=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((o-s)*(o-s)+(n-i)*(n-i))},Gu=t=>{const o=t.startContainer,n=t.startOffset;return o===t.endContainer&&o.hasChildNodes()&&t.endOffset===n+1?o.childNodes[n]:null},Ku=(t,o)=>{if(Wt(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(d=n.length-1,Math.min(Math.max(o,0),d))]}var d;return t},H0=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),vy=t=>Xt(t)&&t.charCodeAt(0)>=768&&H0.test(t),Pg=Wt,Xp=va,Zf=is("display","block table"),yy=is("float","left right"),wu=((...t)=>o=>{for(let n=0;n<t.length;n++)if(!t[n](o))return!1;return!0})(Pg,Xp,bi(yy)),Yu=bi(is("white-space","pre pre-line pre-wrap")),xu=pt,Rn=Ln,Hi=Lr.nodeIndex,mc=(t,o)=>o<0&&Wt(t)&&t.hasChildNodes()?void 0:Ku(t,o),Jp=t=>t?t.createRange():Lr.DOM.createRng(),Vr=t=>Xt(t)&&/[\r\n\t ]/.test(t),P0=t=>!!t.setStart&&!!t.setEnd,Uf=t=>{const o=t.startContainer,n=t.startOffset;if(Vr(t.toString())&&Yu(o.parentNode)&&pt(o)){const s=o.data;if(Vr(s[n-1])||Vr(s[n+1]))return!0}return!1},Ya=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Ol=t=>{var o;let n;const s=t.getClientRects();return n=Xr(s.length>0?s[0]:t.getBoundingClientRect()),!P0(t)&&Rn(t)&&Ya(n)?(i=>{const c=i.ownerDocument,d=Jp(c),u=c.createTextNode(Hs),h=i.parentNode;h.insertBefore(u,i),d.setStart(u,0),d.setEnd(u,1);const v=Xr(d.getBoundingClientRect());return h.removeChild(u),v})(t):Ya(n)&&P0(t)&&null!==(o=(i=>{const d=i.endContainer,u=i.startOffset,h=i.endOffset;if(i.startContainer===d&&pt(d)&&0===u&&1===h){const v=i.cloneRange();return v.setEndAfter(d),Ol(v)}return null})(t))&&void 0!==o?o:n},Ud=(t,o)=>{const n=uc(t,o);return n.width=1,n.right=n.left+1,n},qe=(t,o,n)=>{const s=()=>(n||(n=(i=>{const c=[],d=y=>{var C,E;0!==y.height&&(c.length>0&&(C=y).left===(E=c[c.length-1]).left&&C.top===E.top&&C.bottom===E.bottom&&C.right===E.right||c.push(y))},u=(y,C)=>{const E=Jp(y.ownerDocument);if(C<y.data.length){if(vy(y.data[C]))return;if(vy(y.data[C-1])&&(E.setStart(y,C),E.setEnd(y,C+1),!Uf(E)))return void d(Ud(Ol(E),!1))}C>0&&(E.setStart(y,C-1),E.setEnd(y,C),Uf(E)||d(Ud(Ol(E),!1))),C<y.data.length&&(E.setStart(y,C),E.setEnd(y,C+1),Uf(E)||d(Ud(Ol(E),!0)))},h=i.container(),v=i.offset();if(xu(h))return u(h,v),c;if(Pg(h))if(i.isAtEnd()){const y=mc(h,v);xu(y)&&u(y,y.data.length),wu(y)&&!Rn(y)&&d(Ud(Ol(y),!1))}else{const y=mc(h,v);if(xu(y)&&u(y,0),wu(y)&&i.isAtEnd())return d(Ud(Ol(y),!1)),c;const C=mc(i.container(),i.offset()-1);wu(C)&&!Rn(C)&&(Zf(C)||Zf(y)||!wu(y))&&d(Ud(Ol(C),!1)),wu(y)&&d(Ud(Ol(y),!0))}return c})(qe(t,o))),n);return{container:Ke(t),offset:Ke(o),toRange:()=>{const i=Jp(t.ownerDocument);return i.setStart(t,o),i.setEnd(t,o),i},getClientRects:s,isVisible:()=>s().length>0,isAtStart:()=>(xu(t),0===o),isAtEnd:()=>xu(t)?o>=t.data.length:o>=t.childNodes.length,isEqual:i=>i&&t===i.container()&&o===i.offset(),getNode:i=>mc(t,i?o-1:o)}};qe.fromRangeStart=t=>qe(t.startContainer,t.startOffset),qe.fromRangeEnd=t=>qe(t.endContainer,t.endOffset),qe.after=t=>qe(t.parentNode,Hi(t)+1),qe.before=t=>qe(t.parentNode,Hi(t)),qe.isAbove=(t,o)=>kr(Nn(o.getClientRects()),Zn(t.getClientRects()),yu).getOr(!1),qe.isBelow=(t,o)=>kr(Zn(o.getClientRects()),Nn(t.getClientRects()),Ys).getOr(!1),qe.isAtStart=t=>!!t&&t.isAtStart(),qe.isAtEnd=t=>!!t&&t.isAtEnd(),qe.isTextPosition=t=>!!t&&pt(t.container()),qe.isElementPosition=t=>!qe.isTextPosition(t);const Fg=(t,o)=>{pt(o)&&0===o.data.length&&t.remove(o)},Qp=(t,o,n)=>{var s,c;Hp(n)?((s,i,c)=>{const d=$.from(c.firstChild),u=$.from(c.lastChild);i.insertNode(c),d.each(h=>Fg(s,h.previousSibling)),u.each(h=>Fg(s,h.nextSibling))})(t,o,n):(s=t,o.insertNode(c=n),Fg(s,c.previousSibling),Fg(s,c.nextSibling))},Lc=pt,F0=Aa,V0=Lr.nodeIndex,z0=t=>{const o=t.parentNode;return F0(o)?z0(o):o},Xu=t=>t?Ea(t.childNodes,(o,n)=>(F0(n)&&"BR"!==n.nodeName?o=o.concat(Xu(n)):o.push(n),o),[]):[],Al=t=>o=>t===o,Xa=t=>(Lc(t)?"text()":t.nodeName.toLowerCase())+"["+(o=>{let n,s;n=Xu(z0(o)),s=ta(n,Al(o),o),n=n.slice(0,s+1);const i=Ea(n,(c,d,u)=>(Lc(d)&&Lc(n[u-1])&&c++,c),0);return n=ea(n,Ec([o.nodeName])),s=ta(n,Al(o),o),s-i})(t)+"]",Cu=(t,o)=>{let n,s=[],i=o.container(),c=o.offset();if(Lc(i))n=((u,h)=>{let v=u;for(;(v=v.previousSibling)&&Lc(v);)h+=v.data.length;return h})(i,c);else{const u=i.childNodes;c>=u.length?(n="after",c=u.length-1):n="before",i=u[c]}s.push(Xa(i));let d=((u,h)=>{const y=[];for(let C=h.parentNode;C&&C!==u;C=C.parentNode)y.push(C);return y})(t,i);return d=ea(d,bi(Aa)),s=s.concat(As(d,u=>Xa(u))),s.reverse().join("/")+","+n},Z0=(t,o)=>{if(!o)return null;const n=o.split(","),s=n[0].split("/"),i=n.length>1?n[1]:"before",c=Ea(s,(d,u)=>{const h=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(u);return h?("text()"===h[1]&&(h[1]="#text"),((v,y,C)=>{let E=Xu(v);return E=ea(E,(R,T)=>!Lc(R)||!Lc(E[T-1])),E=ea(E,Ec([y])),E[C]})(d,h[1],parseInt(h[2],10))):null},t);if(!c)return null;if(!Lc(c)&&c.parentNode){let d;return d="after"===i?V0(c)+1:V0(c),qe(c.parentNode,d)}return((d,u)=>{let h=d,v=0;for(;Lc(h);){const y=h.data.length;if(u>=v&&u<=v+y){d=h,u-=v;break}if(!Lc(h.nextSibling)){d=h,u=y;break}v+=y,h=h.nextSibling}return Lc(d)&&u>d.data.length&&(u=d.data.length),qe(d,u)})(c,parseInt(i,10))},eh=xr,U0=(t,o,n,s,i)=>{const c=i?s.startContainer:s.endContainer;let d=i?s.startOffset:s.endOffset;const u=[],h=t.getRoot();if(pt(c))u.push(n?((v,y,C)=>{let E=v(y.data.slice(0,C)).length;for(let R=y.previousSibling;R&&pt(R);R=R.previousSibling)E+=v(R.data).length;return E})(o,c,d):d);else{let v=0;const y=c.childNodes;d>=y.length&&y.length&&(v=1,d=Math.max(0,y.length-1)),u.push(t.nodeIndex(y[d],n)+v)}for(let v=c;v&&v!==h;v=v.parentNode)u.push(t.nodeIndex(v,n));return u},th=(t,o,n)=>{let s=0;return wt.each(t.select(o),i=>"all"===i.getAttribute("data-mce-bogus")?void 0:i!==n&&void s++),s},jf=(t,o)=>{let n=o?t.startContainer:t.endContainer,s=o?t.startOffset:t.endOffset;if(Wt(n)&&"TR"===n.nodeName){const i=n.childNodes;n=i[Math.min(o?s:s-1,i.length-1)],n&&(s=o?0:n.childNodes.length,o?t.setStart(n,s):t.setEnd(n,s))}},Wf=t=>(jf(t,!0),jf(t,!1),t),Va=(t,o)=>{if(Wt(t)&&(t=Ku(t,o),eh(t)))return t;if(Kr(t)){pt(t)&&Cm(t)&&(t=t.parentNode);let n=t.previousSibling;if(eh(n)||(n=t.nextSibling,eh(n)))return n}},Fs=(t,o,n)=>{const s=n.getNode(),i=n.getRng();if("IMG"===s.nodeName||eh(s)){const d=s.nodeName;return{name:d,index:th(n.dom,d,s)}}const c=Va((d=i).startContainer,d.startOffset)||Va(d.endContainer,d.endOffset);var d;if(c){const d=c.tagName;return{name:d,index:th(n.dom,d,c)}}return((d,u,h,v)=>{const y=u.dom,C=U0(y,d,h,v,!0),E=u.isForward(),R=Fp(v)?{isFakeCaret:!0}:{};return u.isCollapsed()?{start:C,forward:E,...R}:{start:C,end:U0(y,d,h,v,!1),forward:E,...R}})(t,n,o,i)},ui=(t,o,n)=>{const s={"data-mce-type":"bookmark",id:o,style:"overflow:hidden;line-height:0px"};return n?t.create("span",s,"&#xFEFF;"):t.create("span",s)},Tr=(t,o)=>{const n=t.dom;let s=t.getRng();const i=n.uniqueId(),c=t.isCollapsed(),d=t.getNode(),u=d.nodeName,h=t.isForward();if("IMG"===u)return{name:u,index:th(n,u,d)};const v=Wf(s.cloneRange());if(!c){v.collapse(!1);const C=ui(n,i+"_end",o);Qp(n,v,C)}s=Wf(s),s.collapse(!0);const y=ui(n,i+"_start",o);return Qp(n,s,y),t.moveToBookmark({id:i,keep:!0,forward:h}),{id:i,forward:h}},mi=at(Fs,fn,!0),ya=t=>{const o=c=>c(t),n=Ke(t),s=()=>i,i={tag:!0,inner:t,fold:(c,d)=>d(t),isValue:zn,isError:Do,map:c=>xi.value(c(t)),mapError:s,bind:o,exists:o,forall:o,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:c=>{c(t)},toOptional:()=>$.some(t)};return i},$f=t=>{const o=()=>n,n={tag:!1,inner:t,fold:(s,i)=>s(t),isValue:Do,isError:zn,map:o,mapError:s=>xi.error(s(t)),bind:o,exists:Do,forall:zn,getOr:fn,or:fn,getOrThunk:Cr,orThunk:Cr,getOrDie:Kn(String(t)),each:_o,toOptional:$.none};return n},xi={value:ya,error:$f,fromOption:(t,o)=>t.fold(()=>$f(o),ya)},Ic=t=>{if(!Nt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const o=[],n={};return Ue(t,(s,i)=>{const c=cr(s);if(1!==c.length)throw new Error("one and only one name per case");const d=c[0],u=s[d];if(void 0!==n[d])throw new Error("duplicate key detected:"+d);if("cata"===d)throw new Error("cannot have a case named cata (sorry)");if(!Nt(u))throw new Error("case arguments must be an array");o.push(d),n[d]=(...h)=>{const v=h.length;if(v!==u.length)throw new Error("Wrong number of arguments to case "+d+". Expected "+u.length+" ("+u+"), got "+v);return{fold:(...y)=>{if(y.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+y.length);return y[i].apply(null,h)},match:y=>{const C=cr(y);if(o.length!==C.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+"\nActual: "+C.join(","));if(!Ar(o,E=>zt(C,E)))throw new Error("Not all branches were specified when using match. Specified: "+C.join(", ")+"\nRequired: "+o.join(", "));return y[d].apply(null,h)},log:y=>{console.log(y,{constructors:o,constructor:d,params:h})}}}}),n};Ic([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Vg=t=>"inline-command"===t.type||"inline-format"===t.type,j0=t=>"block-command"===t.type||"block-format"===t.type,Ju=t=>{const o=s=>xi.error({message:s,pattern:t}),n=(s,i,c)=>{if(void 0!==t.format){let d;if(Nt(t.format)){if(!Ar(t.format,Xt))return o(s+" pattern has non-string items in the `format` array");d=t.format}else{if(!Xt(t.format))return o(s+" pattern has non-string `format` parameter");d=[t.format]}return xi.value(i(d))}return void 0!==t.cmd?Xt(t.cmd)?xi.value(c(t.cmd,t.value)):o(s+" pattern has non-string `cmd` parameter"):o(s+" pattern is missing both `format` and `cmd` parameters")};if(!rt(t))return o("Raw pattern is not an object");if(!Xt(t.start))return o("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!Xt(t.end))return o("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return o("Inline pattern has empty `start` and `end` parameters");let s=t.start,i=t.end;return 0===i.length&&(i=s,s=""),n("Inline",c=>({type:"inline-format",start:s,end:i,format:c}),(c,d)=>({type:"inline-command",start:s,end:i,cmd:c,value:d}))}return void 0!==t.replacement?Xt(t.replacement)?0===t.start.length?o("Replacement pattern has empty `start` parameter"):xi.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):o("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?o("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:t.start,format:s[0]}),(s,i)=>({type:"block-command",start:t.start,cmd:s,value:i}))},oh=t=>Vt(t,j0),zg=t=>Vt(t,Vg),wy=t=>{const o=(n=>{const s=[],i=[];return Ue(n,c=>{c.fold(d=>{s.push(d)},d=>{i.push(d)})}),{errors:s,values:i}})(no(t,Ju));return Ue(o.errors,n=>console.error(n.message,n.pattern)),o.values},W0=yi().deviceType,$0=W0.isTouch(),xy=Lr.DOM,qf=t=>kn(t,RegExp),Re=t=>o=>o.options.get(t),Gf=t=>Xt(t)||rt(t),Da=(t,o="")=>n=>{const s=Xt(n);if(s){if(-1!==n.indexOf("=")){const i=(c=>{const d=c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):c.split(",");return lr(d,(u,h)=>{const v=h.split("="),y=v[0],C=v.length>1?v[1]:y;return u[bo(y)]=bo(C),u},{})})(n);return{value:wn(i,t.id).getOr(o),valid:s}}return{value:n,valid:s}}return{valid:!1,message:"Must be a string."}},Kf=Re("iframe_attrs"),Zg=Re("doctype"),Yf=Re("document_base_url"),il=Re("body_id"),oC=Re("body_class"),Ul=Re("content_security_policy"),q0=Re("br_in_pre"),za=Re("forced_root_block"),Yi=Re("forced_root_block_attrs"),Hc=Re("newline_behavior"),nh=Re("br_newline_selector"),jl=Re("no_newline_selector"),G0=Re("keep_styles"),rh=Re("end_container_on_empty_block"),Xf=Re("automatic_uploads"),Jf=Re("images_reuse_filename"),Qf=Re("images_replace_blob_uris"),Cy=Re("icons"),K0=Re("icons_url"),Sy=Re("images_upload_url"),nC=Re("images_upload_base_path"),sh=Re("images_upload_credentials"),ky=Re("images_upload_handler"),Ug=Re("content_css_cors"),Ci=Re("referrer_policy"),Su=Re("language"),jg=Re("language_url"),Ur=Re("indent_use_margin"),_y=Re("indentation"),Pi=Re("content_css"),ah=Re("content_style"),Y0=Re("font_css"),Wg=Re("directionality"),ih=Re("inline_boundaries_selector"),X0=Re("object_resizing"),e1=Re("resize_img_proportional"),$g=Re("placeholder"),Qu=Re("event_root"),J0=Re("service_message"),ku=Re("theme"),Ey=Re("theme_url"),gc=Re("model"),lh=Re("model_url"),pc=Re("inline_boundaries"),Lm=Re("formats"),rC=Re("preview_styles"),jd=Re("format_empty_lines"),ch=Re("format_noneditable_selector"),Ty=Re("custom_ui_selector"),cd=Re("inline"),dh=Re("hidden_input"),t1=Re("submit_patch"),Oy=Re("add_form_submit_trigger"),Q0=Re("add_unload_trigger"),o1=Re("custom_undo_redo_levels"),sC=Re("disable_nodechange"),em=Re("readonly"),n1=Re("editable_root"),r1=Re("content_css_cors"),s1=Re("plugins"),uh=Re("external_plugins"),qg=Re("block_unsupported_drop"),eb=Re("visual"),a1=Re("visual_table_class"),mh=Re("visual_anchor_class"),i1=Re("iframe_aria_text"),Ay=Re("setup"),dd=Re("init_instance_callback"),Gg=Re("urlconverter_callback"),Ny=Re("auto_focus"),l1=Re("browser_spellcheck"),tb=Re("protect"),Im=Re("paste_block_drop"),gh=Re("paste_data_images"),c1=Re("paste_preprocess"),ob=Re("paste_postprocess"),Fi=Re("newdocument_content"),Ry=Re("paste_webkit_styles"),My=Re("paste_remove_styles_if_webkit"),nb=Re("paste_merge_formats"),aC=Re("smart_paste"),d1=Re("paste_as_text"),rb=Re("paste_tab_spaces"),ph=Re("allow_html_data_urls"),hh=Re("text_patterns"),Dy=Re("text_patterns_lookup"),fh=Re("noneditable_class"),sb=Re("editable_class"),ab=Re("noneditable_regexp"),Hm=Re("preserve_cdata"),u1=Re("highlight_on_focus"),Pm=Re("xss_sanitization"),Fm=Re("init_content_sync"),ib=t=>wt.explode(t.options.get("images_file_types")),By=Re("table_tab_navigation"),bh=Re("details_initial_state"),Vm=Re("details_serialized_state"),iC=Re("force_hex_color"),Kg=Re("sandbox_iframes"),m1=Wt,lb=pt,g1=t=>{const o=t.parentNode;o&&o.removeChild(t)},p1=t=>{const o=nl(t);return{count:t.length-o.length,text:o}},cb=t=>{let o;for(;-1!==(o=t.data.lastIndexOf(Ps));)t.deleteData(o,1)},gi=(t,o)=>(ud(t),o),ud=t=>{m1(t)&&Kr(t)&&(td(t)?t.removeAttribute("data-mce-caret"):g1(t)),lb(t)&&(cb(t),0===t.data.length&&g1(t))},Yg=xr,db=In,vh=Vu,tm=(t,o,n)=>{const s=uc(o.getBoundingClientRect(),n);let i,c;if("BODY"===t.tagName){const u=t.ownerDocument.documentElement;i=t.scrollLeft||u.scrollLeft,c=t.scrollTop||u.scrollTop}else{const u=t.getBoundingClientRect();i=t.scrollLeft-u.left,c=t.scrollTop-u.top}s.left+=i,s.right+=i,s.top+=c,s.bottom+=c,s.width=1;let d=o.offsetWidth-o.clientWidth;return d>0&&(n&&(d*=-1),s.left+=d,s.right+=d),s},yh=()=>Oo.browser.isFirefox(),zm=t=>Yg(t)||db(t),hc=t=>(zm(t)||xl(t)&&yh())&&ce(ve(t)).exists(Yc),Zm=ba,Um=xr,f1=In,ub=is("display","block table table-cell table-caption list-item"),Ly=Kr,b1=Cm,Iy=Wt,Hy=pt,jm=va,md=t=>t>0,Wd=t=>t<0,v1=(t,o)=>{let n;for(;n=t(o);)if(!b1(n))return n;return null},ll=(t,o,n,s,i)=>{const c=new tr(t,s),d=Um(t)||b1(t);let u;if(Wd(o)){if(d&&(u=v1(c.prev.bind(c),!0),n(u)))return u;for(;u=v1(c.prev.bind(c),i);)if(n(u))return u}if(md(o)){if(d&&(u=v1(c.next.bind(c),!0),n(u)))return u;for(;u=v1(c.next.bind(c),i);)if(n(u))return u}return null},Wl=(t,o)=>{for(;t&&t!==o;){if(ub(t))return t;t=t.parentNode}return null},$l=(t,o,n)=>Wl(t.container(),n)===Wl(o.container(),n),Pn=(t,o)=>{if(!o)return $.none();const n=o.container(),s=o.offset();return Iy(n)?$.from(n.childNodes[s+t]):$.none()},gd=(t,o)=>{var n;const s=(null!==(n=o.ownerDocument)&&void 0!==n?n:document).createRange();return t?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),s},Xg=(t,o,n)=>Wl(o,t)===Wl(n,t),y1=(t,o,n)=>{const s=t?"previousSibling":"nextSibling";let i=n;for(;i&&i!==o;){let c=i[s];if(c&&Ly(c)&&(c=c[s]),Um(c)||f1(c)){if(Xg(o,c,i))return c;break}if(jm(c))break;i=i.parentNode}return null},wh=at(gd,!0),Wm=at(gd,!1),w1=(t,o,n)=>{let s;const i=at(y1,!0,o),c=at(y1,!1,o),d=n.startContainer,u=n.startOffset;if(Cm(d)){const h=Hy(d)?d.parentNode:d,v=h.getAttribute("data-mce-caret");if("before"===v&&(s=h.nextSibling,hc(s)))return wh(s);if("after"===v&&(s=h.previousSibling,hc(s)))return Wm(s)}if(!n.collapsed)return n;if(pt(d)){if(Ly(d)){if(1===t){if(s=c(d),s)return wh(s);if(s=i(d),s)return Wm(s)}if(-1===t){if(s=i(d),s)return Wm(s);if(s=c(d),s)return wh(s)}return n}if(ci(d)&&u>=d.data.length-1)return 1===t&&(s=c(d),s)?wh(s):n;if(Dd(d)&&u<=1)return-1===t&&(s=i(d),s)?Wm(s):n;if(u===d.data.length)return s=c(d),s?wh(s):n;if(0===u)return s=i(d),s?Wm(s):n}return n},xh=(t,o)=>Pn(t?0:-1,o).filter(Um),$m=(t,o,n)=>{const s=w1(t,o,n);return-1===t?qe.fromRangeStart(s):qe.fromRangeEnd(s)},nm=t=>$.from(t.getNode()).map(ve),Ch=(t,o)=>{let n=o;for(;n=t(n);)if(n.isVisible())return n;return n},Sh=(t,o)=>{const n=$l(t,o);return!(n||!Ln(t.getNode()))||n};var Ba,t;(t=Ba||(Ba={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const x1=xr,pd=pt,mb=Wt,kh=Ln,qm=va,Py=t=>{return O0(t)||!!_g(o=t)&&!lr(fr(o.getElementsByTagName("*")),(n,s)=>n||_f(s),!1);var o},C1=Sm,Ft=(t,o)=>t.hasChildNodes()&&o<t.childNodes.length?t.childNodes[o]:null,La=(t,o)=>{if(md(t)){if(qm(o.previousSibling)&&!pd(o.previousSibling))return qe.before(o);if(pd(o))return qe(o,0)}if(Wd(t)){if(qm(o.nextSibling)&&!pd(o.nextSibling))return qe.after(o);if(pd(o))return qe(o,o.data.length)}return Wd(t)?kh(o)?qe.before(o):qe.after(o):qe.before(o)},_h=(t,o,n)=>{let s,i,c,d;if(!mb(n)||!o)return null;if(o.isEqual(qe.after(n))&&n.lastChild){if(d=qe.after(n.lastChild),Wd(t)&&qm(n.lastChild)&&mb(n.lastChild))return kh(n.lastChild)?qe.before(n.lastChild):d}else d=o;const u=d.container();let h=d.offset();if(pd(u)){if(Wd(t)&&h>0)return qe(u,--h);if(md(t)&&h<u.length)return qe(u,++h);s=u}else{if(Wd(t)&&h>0&&(i=Ft(u,h-1),qm(i)))return!Py(i)&&(c=ll(i,t,C1,i),c)?pd(c)?qe(c,c.data.length):qe.after(c):pd(i)?qe(i,i.data.length):qe.before(i);if(md(t)&&h<u.childNodes.length&&(i=Ft(u,h),qm(i)))return kh(i)?((y,C)=>{const E=C.nextSibling;return E&&qm(E)?pd(E)?qe(E,0):qe.before(E):_h(Ba.Forwards,qe.after(C),y)})(n,i):!Py(i)&&(c=ll(i,t,C1,i),c)?pd(c)?qe(c,0):qe.before(c):pd(i)?qe(i,0):qe.after(i);s=i||d.getNode()}if(s&&(md(t)&&d.isAtEnd()||Wd(t)&&d.isAtStart())&&(s=ll(s,t,zn,n,!0),C1(s,n)))return La(t,s);i=s&&ll(s,t,C1,n);const v=xs(Vt(((y,C)=>{const E=[];let R=y;for(;R&&R!==C;)E.push(R),R=R.parentNode;return E})(u,n),x1));return!v||i&&v.contains(i)?i?La(t,i):null:(d=md(t)?qe.after(v):qe.before(v),d)},gs=t=>({next:o=>_h(Ba.Forwards,o,t),prev:o=>_h(Ba.Backwards,o,t)}),_u=t=>qe.isTextPosition(t)?0===t.offset():va(t.getNode()),Gm=t=>{if(qe.isTextPosition(t)){const o=t.container();return t.offset()===o.data.length}return va(t.getNode(!0))},gb=(t,o)=>!qe.isTextPosition(t)&&!qe.isTextPosition(o)&&t.getNode()===o.getNode(!0),cl=(t,o,n)=>{const s=gs(o);return $.from(t?s.next(n):s.prev(n))},p=(t,o,n)=>cl(t,o,n).bind(s=>{return $l(n,s,o)&&(c=n,d=s,t?!gb(c,d)&&(qe.isTextPosition(u=c)||!Ln(u.getNode()))&&Gm(c)&&_u(d):!gb(d,c)&&_u(c)&&Gm(d))?cl(t,o,s):$.some(s);var c,d,u}),b=(t,o,n,s)=>p(t,o,n).bind(i=>s(i)?b(t,o,i,s):$.some(i)),S=(t,o)=>{const n=t?o.firstChild:o.lastChild;return pt(n)?$.some(qe(n,t?0:n.data.length)):n?va(n)?$.some(t?qe.before(n):Ln(s=n)?qe.before(s):qe.after(s)):((i,c,d)=>{const u=i?qe.before(d):qe.after(d);return cl(i,c,u)})(t,o,n):$.none();var s},_=at(cl,!0),B=at(cl,!1),L=at(S,!0),V=at(S,!1),W="_mce_caret",Q=t=>Wt(t)&&t.id===W,de=(t,o)=>{let n=o;for(;n&&n!==t;){if(Q(n))return n;n=n.parentNode}return null},be=t=>wo(t,"name"),pe=t=>wt.isArray(t.start),fe=t=>!(!be(t)&&yt(t.forward))||t.forward,Se=(t,o)=>(Wt(o)&&t.isBlock(o)&&!o.innerHTML&&(o.innerHTML='<br data-mce-bogus="1" />'),o),Ze=(t,o)=>V(t).fold(Do,n=>(o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),!0)),He=(t,o,n)=>!(o.hasChildNodes()||!de(t,o)||(((s,i)=>{var c;const d=(null!==(c=s.ownerDocument)&&void 0!==c?c:document).createTextNode(Ps);s.appendChild(d),i.setStart(d,0),i.setEnd(d,0)})(o,n),0)),Ye=(t,o,n,s)=>{const i=n[o?"start":"end"],c=t.getRoot();if(i){let d=c,u=i[0];for(let h=i.length-1;d&&h>=1;h--){const v=d.childNodes;if(He(c,d,s))return!0;if(i[h]>v.length-1)return!!He(c,d,s)||Ze(d,s);d=v[i[h]]}pt(d)&&(u=Math.min(i[0],d.data.length)),Wt(d)&&(u=Math.min(i[0],d.childNodes.length)),o?s.setStart(d,u):s.setEnd(d,u)}return!0},et=t=>pt(t)&&t.data.length>0,bt=(t,o,n)=>{const s=t.get(n.id+"_"+o),i=s?.parentNode,c=n.keep;if(s&&i){let d,u;if("start"===o?c?s.hasChildNodes()?(d=s.firstChild,u=1):et(s.nextSibling)?(d=s.nextSibling,u=0):et(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)+1):(d=i,u=t.nodeIndex(s)):c?s.hasChildNodes()?(d=s.firstChild,u=1):et(s.previousSibling)?(d=s.previousSibling,u=s.previousSibling.data.length):(d=i,u=t.nodeIndex(s)):(d=i,u=t.nodeIndex(s)),!c){const h=s.previousSibling,v=s.nextSibling;let y;for(wt.each(wt.grep(s.childNodes),C=>{pt(C)&&(C.data=C.data.replace(/\uFEFF/g,""))});y=t.get(n.id+"_"+o);)t.remove(y,!0);if(pt(v)&&pt(h)&&!Oo.browser.isOpera()){const C=h.data.length;h.appendData(v.data),t.remove(v),d=h,u=C}}return $.some(qe(d,u))}return $.none()},ut=(t,o,n)=>((s,i,c=!1)=>{return 2===i?Fs(nl,c,s):3===i?(d=>{const u=d.getRng();return{start:Cu(d.dom.getRoot(),qe.fromRangeStart(u)),end:Cu(d.dom.getRoot(),qe.fromRangeEnd(u)),forward:d.isForward()}})(s):i?{rng:(d=s).getRng(),forward:d.isForward()}:Tr(s,!1);var d})(t,o,n),_t=(t,o)=>{((n,s)=>{const i=n.dom;if(s){if(pe(s))return((c,d)=>{const u=c.createRng();return Ye(c,!0,d,u)&&Ye(c,!1,d,u)?$.some({range:u,forward:fe(d)}):$.none()})(i,s);if(Xt(s.start))return((c,d)=>{const u=$.from(Z0(c.getRoot(),d.start)),h=$.from(Z0(c.getRoot(),d.end));return kr(u,h,(v,y)=>{const C=c.createRng();return C.setStart(v.container(),v.offset()),C.setEnd(y.container(),y.offset()),{range:C,forward:fe(d)}})})(i,s);if(wo(s,"id"))return((c,d)=>{const u=bt(c,"start",d),h=bt(c,"end",d);return kr(u,h.or(u),(v,y)=>{const C=c.createRng();return C.setStart(Se(c,v.container()),v.offset()),C.setEnd(Se(c,y.container()),y.offset()),{range:C,forward:fe(d)}})})(i,s);if(be(s))return((c,d)=>$.from(c.select(d.name)[d.index]).map(u=>{const h=c.createRng();return h.selectNode(u),{range:h,forward:!0}}))(i,s);if((c=>wo(c,"rng"))(s))return $.some({range:s.rng,forward:fe(s)})}return $.none()})(t,o).each(({range:n,forward:s})=>{t.setRng(n,s)})},vt=t=>Wt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),It=(Eo=Hs,t=>Eo===t);var Eo;const fo=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Xn=t=>!fo(t)&&!It(t)&&!Jc(t),Vo=t=>{const o=[];if(t)for(let n=0;n<t.rangeCount;n++)o.push(t.getRangeAt(n));return o},hn=(t,o)=>{const n=er(o,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:Vt(ps(t,c=>{const d=Gu(c);return d?[ve(d)]:[]}),Zu)},Go=t=>hn(Vo(t.selection.getSel()),ve(t.getBody())),or=(t,o)=>sc(t,"table",o),Vs=t=>vo(t).fold(Ke([t]),o=>[t].concat(Vs(o))),Za=t=>Co(t).fold(Ke([t]),o=>"br"===Sn(o)?he(o).map(n=>[t].concat(Za(n))).getOr([]):[t].concat(Za(o))),Xs=(t,o)=>kr((n=>{const s=n.startContainer,i=n.startOffset;return pt(s)?0===i?$.some(ve(s)):$.none():$.from(s.childNodes[i]).map(ve)})(o),(n=>{const s=n.endContainer,i=n.endOffset;return pt(s)?i===s.data.length?$.some(ve(s)):$.none():$.from(s.childNodes[i-1]).map(ve)})(o),(n,s)=>{const i=wr(Vs(t),at($n,n)),c=wr(Za(t),at($n,s));return i.isSome()&&c.isSome()}).getOr(!1),Vi=(t,o,n,s)=>{const i=n,c=new tr(n,i),d=ws(t.schema.getMoveCaretBeforeOnEnterElements(),(h,v)=>!zt(["td","th","table"],v.toLowerCase()));let u=n;do{if(pt(u)&&0!==wt.trim(u.data).length)return void(s?o.setStart(u,0):o.setEnd(u,u.data.length));if(d[u.nodeName])return void(s?o.setStartBefore(u):"BR"===u.nodeName?o.setEndBefore(u):o.setEndAfter(u))}while(u=s?c.next():c.prev());"BODY"===i.nodeName&&(s?o.setStart(i,0):o.setEnd(i,i.childNodes.length))},Jn=t=>{const o=t.selection.getSel();return ie(o)&&o.rangeCount>0},ra=(t,o)=>{const n=Go(t);n.length>0?Ue(n,s=>{const i=s.dom,c=t.dom.createRng();c.setStartBefore(i),c.setEndAfter(i),o(c,!0)}):o(t.selection.getRng(),!1)},Eu=(t,o,n)=>{const s=Tr(t,o);n(s),t.moveToBookmark(s)},Tu=t=>Ae(t?.nodeType),Km=t=>Wt(t)&&!vt(t)&&!Q(t)&&!Aa(t),Jg=(t,o,n)=>{const{selection:s,dom:i}=t,c=s.getNode(),d=xr(c);Eu(s,!0,()=>{o()}),d&&xr(c)&&i.isChildOf(c,t.getBody())?t.selection.select(c):n(s.getStart())&&Eh(i,s)},Eh=(t,o)=>{var n,s;const i=o.getRng(),{startContainer:c,startOffset:d}=i;if(!((u,h)=>{if(Km(h)&&!/^(TD|TH)$/.test(h.nodeName)){const v=u.getAttrib(h,"data-mce-selected"),y=parseInt(v,10);return!isNaN(y)&&y>0}return!1})(t,o.getNode())&&Wt(c)){const u=c.childNodes,h=t.getRoot();let v;if(d<u.length){const y=u[d];v=new tr(y,null!==(n=t.getParent(y,t.isBlock))&&void 0!==n?n:h)}else{const y=u[u.length-1];v=new tr(y,null!==(s=t.getParent(y,t.isBlock))&&void 0!==s?s:h),v.next(!0)}for(let y=v.current();y;y=v.next()){if("false"===t.getContentEditable(y))return;if(pt(y)&&!pb(y))return i.setStart(y,0),void o.setRng(i)}}},Ym=(t,o,n)=>{if(t){const s=o?"nextSibling":"previousSibling";for(t=n?t:t[s];t;t=t[s])if(Wt(t)||!pb(t))return t}},lC=(t,o)=>!!t.getTextBlockElements()[o.nodeName.toLowerCase()]||nd(t,o),Th=(t,o,n)=>t.schema.isValidChild(o,n),pb=(t,o=!1)=>{if(ie(t)&&pt(t)){const n=o?t.data.replace(/ /g,"\xa0"):t.data;return Ld(n)}return!1},cC=(t,o)=>{const n=t.dom;return Km(o)&&"false"===n.getContentEditable(o)&&((s,i)=>{const c="[data-mce-cef-wrappable]",d=ch(s),u=an(d)?c:`${c},${d}`;return ai(ve(i),u)})(t,o)&&0===n.select('[contenteditable="true"]',o).length},Qg=(t,o)=>ht(t)?t(o):(ie(o)&&(t=t.replace(/%(\w+)/g,(n,s)=>o[s]||n)),t),dC=(t,o)=>(t=""+((t=t||"").nodeName||t),o=""+((o=o||"").nodeName||o),t.toLowerCase()===o.toLowerCase()),ql=(t,o)=>{if(yr(t))return null;{let n=String(t);return"color"!==o&&"backgroundColor"!==o||(n=Nm(n)),"fontWeight"===o&&700===t&&(n="bold"),"fontFamily"===o&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Si=(t,o,n)=>{const s=t.getStyle(o,n);return ql(s,n)},Oh=(t,o)=>{let n;return t.getParent(o,s=>!!Wt(s)&&(n=t.getStyle(s,"text-decoration"),!!n&&"none"!==n)),n},Fy=(t,o,n)=>t.getParents(o,n,t.getRoot()),uC=(t,o,n)=>{const s=t.formatter.get(o);return ie(s)&&Bn(s,n)},bn=t=>ns(t,"block"),hd=t=>ns(t,"selector"),Ja=t=>ns(t,"inline"),hb=t=>hd(t)&&!1!==t.expand&&!Ja(t),N3=t=>(o=>{const n=[];let s=o;for(;s;){if(pt(s)&&s.data!==Ps||s.childNodes.length>1)return[];Wt(s)&&n.push(s),s=s.firstChild}return n})(t).length>0,mC=t=>Q(t.dom)&&N3(t.dom),S1=vt,R3=Fy,Vy=pb,gC=lC,pC=(t,o)=>{let n=o;for(;n;){if(Wt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:o;n=n.parentNode}return o},M3=(t,o,n,s)=>{const i=o.data;if(t){for(let c=n;c>0;c--)if(s(i.charAt(c-1)))return c}else for(let c=n;c<i.length;c++)if(s(i.charAt(c)))return c;return-1},wA=(t,o,n)=>M3(t,o,n,s=>It(s)||fo(s)),xA=(t,o,n)=>M3(t,o,n,Xn),Ro=(t,o,n,s,i,c)=>{let d;const u=t.getParent(n,t.isBlock)||o,h=(v,y,C)=>{const E=al(t);return $.from((i?E.backwards:E.forwards)(v,y,(T,I)=>S1(T.parentNode)?-1:(d=T,C(i,T,I)),u))};return h(n,s,wA).bind(v=>c?h(v.container,v.offset+(i?-1:0),xA):$.some(v)).orThunk(()=>d?$.some({container:d,offset:i?0:d.length}):$.none())},hC=(t,o,n,s,i)=>{const c=s[i];pt(s)&&an(s.data)&&c&&(s=c);const d=R3(t,s);for(let u=0;u<d.length;u++)for(let h=0;h<o.length;h++){const v=o[h];if((!ie(v.collapsed)||v.collapsed===n.collapsed)&&hd(v)&&t.is(d[u],v.selector))return d[u]}return s},k1=(t,o,n,s)=>{var i;let c=n;const d=t.getRoot(),u=o[0];if(bn(u)&&(c=u.wrapper?null:t.getParent(n,u.block,d)),!c){const h=null!==(i=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==i?i:d;c=t.getParent(pt(n)?n.parentNode:n,v=>v!==d&&gC(t.schema,v),h)}if(c&&bn(u)&&u.wrapper&&(c=R3(t,c,"ul,ol").reverse()[0]||c),!c)for(c=n;c&&c[s]&&!t.isBlock(c[s])&&(c=c[s],!dC(c,"br")););return c||n},zy=(t,o,n,s)=>{const i=n.parentNode;return!ie(n[s])&&(!(i!==o&&!yr(i)&&!t.isBlock(i))||zy(t,o,i,s))},fb=(t,o,n,s,i)=>{let c=n;const d=i?"previousSibling":"nextSibling",u=t.getRoot();if(pt(n)&&!Vy(n)&&(i?s>0:s<n.data.length))return n;for(;c;){if(!o[0].block_expand&&t.isBlock(c))return c;for(let v=c[d];v;v=v[d]){const y=pt(v)&&!zy(t,u,v,d);if(!S1(v)&&(!Ln(h=v)||!h.getAttribute("data-mce-bogus")||h.nextSibling)&&!Vy(v,y))return c}if(c===u||c.parentNode===u){n=c;break}c=c.parentNode}var h;return n},fC=t=>S1(t.parentNode)||S1(t),ep=(t,o,n,s=!1)=>{let{startContainer:i,startOffset:c,endContainer:d,endOffset:u}=o;const h=n[0];return Wt(i)&&i.hasChildNodes()&&(i=Ku(i,c),pt(i)&&(c=0)),Wt(d)&&d.hasChildNodes()&&(d=Ku(d,o.collapsed?u:u-1),pt(d)&&(u=d.data.length)),i=pC(t,i),d=pC(t,d),fC(i)&&(i=S1(i)?i:i.parentNode,i=o.collapsed?i.previousSibling||i:i.nextSibling||i,pt(i)&&(c=o.collapsed?i.length:0)),fC(d)&&(d=S1(d)?d:d.parentNode,d=o.collapsed?d.nextSibling||d:d.previousSibling||d,pt(d)&&(u=o.collapsed?0:d.length)),o.collapsed&&(Ro(t,t.getRoot(),i,c,!0,s).each(({container:v,offset:y})=>{i=v,c=y}),Ro(t,t.getRoot(),d,u,!1,s).each(({container:v,offset:y})=>{d=v,u=y})),(Ja(h)||h.block_expand)&&(Ja(h)&&pt(i)&&0!==c||(i=fb(t,n,i,c,!0)),Ja(h)&&pt(d)&&u!==d.data.length||(d=fb(t,n,d,u,!1))),hb(h)&&(i=hC(t,n,o,i,"previousSibling"),d=hC(t,n,o,d,"nextSibling")),(bn(h)||hd(h))&&(i=k1(t,n,i,"previousSibling"),d=k1(t,n,d,"nextSibling"),bn(h)&&(t.isBlock(i)||(i=fb(t,n,i,c,!0)),t.isBlock(d)||(d=fb(t,n,d,u,!1)))),Wt(i)&&i.parentNode&&(c=t.nodeIndex(i),i=i.parentNode),Wt(d)&&d.parentNode&&(u=t.nodeIndex(d)+1,d=d.parentNode),{startContainer:i,startOffset:c,endContainer:d,endOffset:u}},_1=(t,o,n)=>{var s;const i=o.startOffset,c=Ku(o.startContainer,i),d=o.endOffset,u=Ku(o.endContainer,d-1),h=N=>{const H=N[0];pt(H)&&H===c&&i>=H.data.length&&N.splice(0,1);const z=N[N.length-1];return 0===d&&N.length>0&&z===u&&pt(z)&&N.splice(N.length-1,1),N},v=(N,H,z)=>{const U=[];for(;N&&N!==z;N=N[H])U.push(N);return U},y=(N,H)=>t.getParent(N,z=>z.parentNode===H,H),C=(N,H,z)=>{const U=z?"nextSibling":"previousSibling";for(let J=N,Y=J.parentNode;J&&J!==H;J=Y){Y=J.parentNode;const ge=v(J===N?J:J[U],U);ge.length&&(z||ge.reverse(),n(h(ge)))}};if(c===u)return n(h([c]));const E=null!==(s=t.findCommonAncestor(c,u))&&void 0!==s?s:t.getRoot();if(t.isChildOf(c,u))return C(c,E,!0);if(t.isChildOf(u,c))return C(u,E);const R=y(c,E)||c,T=y(u,E)||u;C(c,R,!0);const I=v(R===c?R:R.nextSibling,"nextSibling",T===u?T.nextSibling:T);I.length&&n(h(I)),C(u,T)},CA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],D3=(t,o,n,s,i,c)=>{const{uid:d=o,...u}=n;Ll(t,Bc()),mr(t,`${$u()}`,d),mr(t,`${dc()}`,s);const{attributes:h={},classes:v=[]}=i(d,u);if(Oa(t,h),y=t,Ue(v,E=>{Ll(y,E)}),c){v.length>0&&mr(t,`${Dm()}`,v.join(","));const y=cr(h);y.length>0&&mr(t,`${Hg()}`,y.join(","))}var y},sr=(t,o,n,s,i)=>{const c=vs("span",t);return D3(c,o,n,s,i,!1),c},rm=t=>{const o=(()=>{const c={};return{register:(d,u)=>{c[d]={name:d,settings:u}},lookup:d=>wn(c,d).map(u=>u.settings),getNames:()=>cr(c)}})();((c,d)=>{const u=dc(),h=y=>$.from(y.attr(u)).bind(d.lookup),v=y=>{var C,E;y.attr($u(),null),y.attr(dc(),null),y.attr(Gp(),null);const R=$.from(y.attr(Hg())).map(H=>H.split(",")).getOr([]),T=$.from(y.attr(Dm())).map(H=>H.split(",")).getOr([]);Ue(R,H=>y.attr(H,null));const I=null!==(E=null===(C=y.attr("class"))||void 0===C?void 0:C.split(" "))&&void 0!==E?E:[],N=Ha(I,[Bc()].concat(T));y.attr("class",N.length>0?N.join(" "):null),y.attr(Dm(),null),y.attr(Hg(),null)};c.serializer.addTempAttr(Gp()),c.serializer.addAttributeFilter(u,y=>{for(const C of y)h(C).each(E=>{!1===E.persistent&&("span"===C.name?C.unwrap():v(C))})})})(t,o);const n=((c,d)=>{const u=Gn({}),h=()=>({listeners:[],previous:Ki()}),v=(R,T)=>{y(R,I=>(T(I),I))},y=(R,T)=>{const I=u.get(),N=T(wn(I,R).getOrThunk(h));I[R]=N,u.set(I)},C=(R,T)=>{Ue(Kp(c,R),I=>{T?mr(I,Gp(),"true"):as(I,Gp())})},E=qp(()=>{const R=Sr(d.getNames());Ue(R,T=>{y(T,I=>{const N=I.previous.get();return Vf(c,$.some(T)).fold(()=>{N.each(H=>{var z;v(z=T,U=>{Ue(U.listeners,J=>J(!1,z))}),I.previous.clear(),C(H,!1)})},({uid:H,name:z,elements:U})=>{var J,Y,ge;Mi(N,H)||(N.each(J=>C(J,!1)),Y=H,ge=U,v(J=z,Ee=>{Ue(Ee.listeners,Ne=>Ne(!0,J,{uid:Y,nodes:no(ge,Me=>Me.dom)}))}),I.previous.set(H),C(H,!0))}),{previous:I.previous,listeners:I.listeners}})})},30);return c.on("remove",()=>{E.cancel()}),c.on("NodeChange",()=>{E.throttle()}),{addListener:(R,T)=>{y(R,I=>({previous:I.previous,listeners:I.listeners.concat([T])}))}}})(t,o),s=Di("span"),i=c=>{Ue(c,d=>{s(d)?De(d):(u=>{Il(u,Bc()),as(u,`${$u()}`),as(u,`${dc()}`),as(u,`${Gp()}`);const h=$i(u,`${Hg()}`).map(C=>C.split(",")).getOr([]),v=$i(u,`${Dm()}`).map(C=>C.split(",")).getOr([]);var y;Ue(h,C=>as(u,C)),y=u,Ue(v,C=>{Il(y,C)}),as(u,`${Dm()}`),as(u,`${Hg()}`)})(d)})};return{register:(c,d)=>{o.register(c,d)},annotate:(c,d)=>{o.lookup(c).each(u=>{var h,v,y,C;v=c,y=u,C=d,(h=t).undoManager.transact(()=>{const E=h.selection,R=E.getRng(),T=Go(h).length>0,I=sl("mce-annotation");if(R.collapsed&&!T&&((N,H)=>{const z=ep(N.dom,H,[{inline:"span"}]);H.setStart(z.startContainer,z.startOffset),H.setEnd(z.endContainer,z.endOffset),N.selection.setRng(H)})(h,R),E.getRng().collapsed&&!T){const N=sr(h.getDoc(),I,C,v,y.decorate);Et(N,Hs),E.getRng().insertNode(N.dom),E.select(N.dom)}else Eu(E,!1,()=>{ra(h,N=>{((t,o,n,s,i,c)=>{const d=[],u=sr(t.getDoc(),n,c,s,i),h=Ki(),v=()=>{h.clear()},y=E=>{Ue(E,C)},C=E=>{switch(R=t,T=E,I="span",N=Sn(E),ee(T).fold(()=>"skipping",H=>{return"br"===N||En(z=T)&&Ie(z)===Ps?"valid":(z=>us(z)&&Kc(z,Bc()))(T)?"existing":Q(T.dom)?"caret":Bn(CA,z=>ai(T,z))?"valid-block":Th(R,I,N)&&Th(R,Sn(H),I)?"valid":"invalid-child";var z})){case"invalid-child":{v();const R=xt(E);y(R),v();break}case"valid-block":v(),D3(E,n,c,s,i,!0);break;case"valid":{const R=h.get().getOrThunk(()=>{const T=vu(u);return d.push(T),h.set(T),T});G(E,R);break}}var R,T,I,N};_1(t.dom,o,E=>{v(),(R=>{const T=no(R,ve);y(T)})(E)})})(h,N,I,v,y.decorate,C)})})})})},annotationChanged:(c,d)=>{n.addListener(c,d)},remove:c=>{Vf(t,$.some(c)).each(({elements:d})=>{const u=t.selection.getBookmark();i(d),t.selection.moveToBookmark(u)})},removeAll:c=>{const d=t.selection.getBookmark();Po(di(t,c),(u,h)=>{i(u)}),t.selection.moveToBookmark(d)},getAll:c=>{const d=di(t,c);return ga(d,u=>no(u,h=>h.dom))}}},Pc=t=>({getBookmark:at(ut,t),moveToBookmark:at(_t,t)});Pc.isBookmarkNode=vt;const bb=(t,o,n)=>!n.collapsed&&Bn(n.getClientRects(),s=>{return d=o,(c=t)>=(i=s).left&&c<=i.right&&d>=i.top&&d<=i.bottom;var i,c,d}),Gl=(t,o,n)=>{t.dispatch(o,n)},vb=(t,o,n,s)=>{t.dispatch("FormatApply",{format:o,node:n,vars:s})},E1=(t,o,n,s)=>{t.dispatch("FormatRemove",{format:o,node:n,vars:s})},yb=(t,o)=>t.dispatch("SetContent",o),Ah=(t,o)=>t.dispatch("GetContent",o),B3=(t,o)=>t.dispatch("PastePlainTextToggle",{state:o}),Gt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||Gt.metaKeyPressed(t),metaKeyPressed:t=>Oo.os.isMacOS()||Oo.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},Nh="data-mce-selected",L3=Math.abs,Fn=Math.round,fd={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},tp=(t,o)=>{const n=o.dom,s=o.getDoc(),i=document,c=o.getBody();let d,u,h,v,y,C,E,R,T,I,N,H,z,U,J;const Y=$t=>ie($t)&&(cc($t)||n.is($t,"figure.image")),ge=$t=>In($t)||n.hasClass($t,"mce-preview-object"),Ee=$t=>{const oo=$t.target;((Wo,ke)=>{if("longpress"===(Oe=Wo).type||0===Oe.type.indexOf("touch")){const Oe=Wo.touches[0];return Y(Wo.target)&&!bb(Oe.clientX,Oe.clientY,ke)}var Oe;return Y(Wo.target)&&!bb(Wo.clientX,Wo.clientY,ke)})($t,o.selection.getRng())&&!$t.isDefaultPrevented()&&o.selection.select(oo)},Ne=$t=>n.hasClass($t,"mce-preview-object")&&ie($t.firstElementChild)?[$t,$t.firstElementChild]:n.is($t,"figure.image")?[$t.querySelector("img")]:[$t],Me=$t=>{const oo=X0(o);return!!oo&&"false"!==$t.getAttribute("data-mce-resize")&&$t!==o.getBody()&&(n.hasClass($t,"mce-preview-object")&&ie($t.firstElementChild)?ai(ve($t.firstElementChild),oo):ai(ve($t),oo))},Fe=($t,oo,Wo)=>{if(ie(Wo)){const ke=Ne($t);Ue(ke,Oe=>{Oe.style[oo]||!o.schema.isValid(Oe.nodeName.toLowerCase(),oo)?n.setStyle(Oe,oo,Wo):n.setAttrib(Oe,oo,""+Wo)})}},ye=($t,oo,Wo)=>{Fe($t,"width",oo),Fe($t,"height",Wo)},Te=$t=>{let oo,Wo,ke,Oe,it;oo=$t.screenX-C,Wo=$t.screenY-E,H=oo*v[2]+R,z=Wo*v[3]+T,H=H<5?5:H,z=z<5?5:z,ke=(Y(d)||ge(d))&&!1!==e1(o)?!Gt.modifierPressed($t):Gt.modifierPressed($t),ke&&(L3(oo)>L3(Wo)?(z=Fn(H*I),H=Fn(z/I)):(H=Fn(z/I),z=Fn(H*I))),ye(u,H,z),Oe=v.startPos.x+oo,it=v.startPos.y+Wo,Oe=Oe>0?Oe:0,it=it>0?it:0,n.setStyles(h,{left:Oe,top:it,display:"block"}),h.innerHTML=H+" &times; "+z,v[2]<0&&u.clientWidth<=H&&n.setStyle(u,"left",void 0+(R-H)),v[3]<0&&u.clientHeight<=z&&n.setStyle(u,"top",void 0+(T-z)),oo=c.scrollWidth-U,Wo=c.scrollHeight-J,oo+Wo!==0&&n.setStyles(h,{left:Oe-oo,top:it-Wo}),N||(o.dispatch("ObjectResizeStart",{target:d,width:R,height:T,origin:"corner-"+v.name}),N=!0)},Be=()=>{const $t=N;N=!1,$t&&(Fe(d,"width",H),Fe(d,"height",z)),n.unbind(s,"mousemove",Te),n.unbind(s,"mouseup",Be),i!==s&&(n.unbind(i,"mousemove",Te),n.unbind(i,"mouseup",Be)),n.remove(u),n.remove(h),n.remove(y),tt(d),$t&&(o.dispatch("ObjectResized",{target:d,width:H,height:z,origin:"corner-"+v.name}),n.setAttrib(d,"style",n.getAttrib(d,"style"))),o.nodeChanged()},tt=$t=>{Mo();const oo=n.getPos($t,c),Wo=oo.x,ke=oo.y,Oe=$t.getBoundingClientRect(),it=Oe.width||Oe.right-Oe.left,mt=Oe.height||Oe.bottom-Oe.top;d!==$t&&(Mt(),d=$t,H=z=0);const ft=o.dispatch("ObjectSelected",{target:$t});Me($t)&&!ft.isDefaultPrevented()?Po(fd,(ro,To)=>{let Yo=n.get("mceResizeHandle"+To);Yo&&n.remove(Yo),Yo=n.add(c,"div",{id:"mceResizeHandle"+To,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+To+"-resize; margin:0; padding:0"}),n.bind(Yo,"mousedown",Ho=>{Ho.stopImmediatePropagation(),Ho.preventDefault(),(Jr=>{const lo=Ne(d)[0];var Cn;C=Jr.screenX,E=Jr.screenY,R=lo.clientWidth,T=lo.clientHeight,I=T/R,v=ro,v.name=To,v.startPos={x:it*ro[0]+Wo,y:mt*ro[1]+ke},U=c.scrollWidth,J=c.scrollHeight,y=n.add(c,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(y,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),u=ge(Cn=d)?n.create("img",{src:Oo.transparentSrc}):Cn.cloneNode(!0),n.addClass(u,"mce-clonedresizable"),n.setAttrib(u,"data-mce-bogus","all"),u.contentEditable="false",n.setStyles(u,{left:Wo,top:ke,margin:0}),ye(u,it,mt),u.removeAttribute(Nh),c.appendChild(u),n.bind(s,"mousemove",Te),n.bind(s,"mouseup",Be),i!==s&&(n.bind(i,"mousemove",Te),n.bind(i,"mouseup",Be)),h=n.add(c,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},R+" &times; "+T)})(Ho)}),ro.elm=Yo,n.setStyles(Yo,{left:it*ro[0]+Wo-Yo.offsetWidth/2,top:mt*ro[1]+ke-Yo.offsetHeight/2})}):Mt(!1)},Zt=ld(tt,0),Mt=($t=!0)=>{Zt.cancel(),Mo(),d&&$t&&d.removeAttribute(Nh),Po(fd,(oo,Wo)=>{const ke=n.get("mceResizeHandle"+Wo);ke&&(n.unbind(ke),n.remove(ke))})},mo=($t,oo)=>n.isChildOf($t,oo),co=$t=>{if(N||o.removed||o.composing)return;const oo="mousedown"===$t.type?$t.target:t.getNode(),Wo=ac(ve(oo),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(Oe=>Oe.dom).filter(Oe=>n.isEditable(Oe.parentElement)||"IMG"===Oe.nodeName&&n.isEditable(Oe)).getOrUndefined(),ke=ie(Wo)?n.getAttrib(Wo,Nh,"1"):"1";if(Ue(n.select(`img[${Nh}],hr[${Nh}]`),Oe=>{Oe.removeAttribute(Nh)}),ie(Wo)&&mo(Wo,c)&&o.hasFocus()){So();const Oe=t.getStart(!0);if(mo(Oe,Wo)&&mo(t.getEnd(!0),Wo))return n.setAttrib(Wo,Nh,ke),void Zt.throttle(Wo)}Mt()},Mo=()=>{Po(fd,$t=>{$t.elm&&(n.unbind($t.elm),delete $t.elm)})},So=()=>{try{o.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return o.on("init",()=>{So(),o.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",co),o.on("keyup compositionend",$t=>{d&&"TABLE"===d.nodeName&&co($t)}),o.on("hide blur",Mt),o.on("contextmenu longpress",Ee,!0)}),o.on("remove",Mo),{isResizable:Me,showResizeRect:tt,hideResizeRect:Mt,updateResizeRect:co,destroy:()=>{Zt.cancel(),d=u=y=null}}},I3=(t,o,n)=>{const s=t.document.createRange();var i,c;return i=s,o.fold(c=>{i.setStartBefore(c.dom)},(c,d)=>{i.setStart(c.dom,d)},c=>{i.setStartAfter(c.dom)}),c=s,n.fold(u=>{c.setEndBefore(u.dom)},(u,h)=>{c.setEnd(u.dom,h)},u=>{c.setEndAfter(u.dom)}),s},Rh=(t,o,n,s,i)=>{const c=t.document.createRange();return c.setStart(o.dom,n),c.setEnd(s.dom,i),c},Un=Ic([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bC=(t,o,n)=>o(ve(n.startContainer),n.startOffset,ve(n.endContainer),n.endOffset),Zy=(t,o,n,s)=>({start:t,soffset:o,finish:n,foffset:s}),kA=document.caretPositionFromPoint?(t,o,n)=>{var s,i;return $.from(null===(i=(s=t.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(s,o,n)).bind(c=>{if(null===c.offsetNode)return $.none();const d=t.dom.createRange();return d.setStart(c.offsetNode,c.offset),d.collapse(),$.some(d)})}:document.caretRangeFromPoint?(t,o,n)=>{var s,i;return $.from(null===(i=(s=t.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(s,o,n))}:$.none,op=Ic([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fc={before:op.before,on:op.on,after:op.after,cata:(t,o,n,s)=>t.fold(o,n,s),getStart:t=>t.fold(fn,fn,fn)},wb=Ic([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),T1={domRange:wb.domRange,relative:wb.relative,exact:wb.exact,exactFromRange:t=>wb.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const o=t.match({domRange:s=>ve(s.startContainer),relative:(s,i)=>fc.getStart(s),exact:(s,i,c,d)=>s});return q(o)},range:Zy},Uy=(t,o)=>{const n=Sn(t);return"input"===n?fc.after(t):zt(["br","img"],n)?0===o?fc.before(t):fc.after(t):fc.on(t,o)},xb=(t,o)=>{const n=t.fold(fc.before,Uy,fc.after),s=o.fold(fc.before,Uy,fc.after);return T1.relative(n,s)},Mh=(t,o,n,s)=>{const i=Uy(t,o),c=Uy(n,s);return T1.relative(i,c)},vC=(t,o)=>{const n=(o||document).createDocumentFragment();return Ue(t,s=>{n.appendChild(s.dom)}),ve(n)},P3=(t,o,n)=>{return(s=q(ve(n)).dom,i=t,c=o,((d,u,h)=>{const v=ve(d.document);return kA(v,u,h).map(y=>Zy(ve(y.startContainer),y.startOffset,ve(y.endContainer),y.endOffset))})(s,i,c)).map(s=>{const i=n.createRange();return i.setStart(s.start.dom,s.soffset),i.setEnd(s.finish.dom,s.foffset),i}).getOrUndefined();var s,i,c},jy=(t,o)=>ie(t)&&ie(o)&&t.startContainer===o.startContainer&&t.startOffset===o.startOffset&&t.endContainer===o.endContainer&&t.endOffset===o.endOffset,F3=(t,o,n)=>null!==((s,i,c)=>{let d=s;for(;d&&d!==i;){if(c(d))return d;d=d.parentNode}return null})(t,o,n),V3=(t,o,n)=>F3(t,o,s=>s.nodeName===n),yC=(t,o)=>Kr(t)&&!F3(t,o,Q),Wy=(t,o,n)=>{const s=o.parentNode;if(s){const i=new tr(o,t.getParent(s,t.isBlock)||t.getRoot());let c;for(;c=i[n?"prev":"next"]();)if(Ln(c))return!0}return!1},Cb=(t,o,n,s,i)=>{const c=t.getRoot(),d=t.schema.getNonEmptyElements(),u=i.parentNode;let h,v;if(!u)return $.none();const y=t.getParent(u,t.isBlock)||c;if(s&&Ln(i)&&o&&t.isEmpty(y))return $.some(qe(u,t.nodeIndex(i)));const C=new tr(i,y);for(;v=C[s?"prev":"next"]();){if("false"===t.getContentEditableParent(v)||yC(v,c))return $.none();if(pt(v)&&v.data.length>0)return V3(v,c,"A")?$.none():$.some(qe(v,s?v.data.length:0));if(t.isBlock(v)||d[v.nodeName.toLowerCase()])return $.none();h=v}return Xe(h)?$.none():n&&h?$.some(qe(h,0)):$.none()},wC=(t,o,n,s)=>{const i=t.getRoot();let c,d=!1,u=n?s.startContainer:s.endContainer,h=n?s.startOffset:s.endOffset;const v=Wt(u)&&h===u.childNodes.length,y=t.schema.getNonEmptyElements();let C=n;if(Kr(u))return $.none();if(Wt(u)&&h>u.childNodes.length-1&&(C=!1),wi(u)&&(u=i,h=0),u===i){if(C&&(c=u.childNodes[h>0?h-1:0],c)&&(Kr(c)||y[c.nodeName]||xl(c)))return $.none();if(u.hasChildNodes()){if(h=Math.min(!C&&h>0?h-1:h,u.childNodes.length-1),u=u.childNodes[h],h=pt(u)&&v?u.data.length:0,!o&&u===i.lastChild&&xl(u)||((E,R)=>{let T=R;for(;T&&T!==E;){if(xr(T))return!0;T=T.parentNode}return!1})(i,u)||Kr(u)||lu(u))return $.none();if(u.hasChildNodes()&&!xl(u)){c=u;const E=new tr(u,i);do{if(xr(c)||Kr(c)){d=!1;break}if(pt(c)&&c.data.length>0){h=C?0:c.data.length,u=c,d=!0;break}if(y[c.nodeName.toLowerCase()]&&!zl(c)){h=t.nodeIndex(c),u=c.parentNode,C||h++,d=!0;break}}while(c=C?E.next():E.prev())}}}return o&&(pt(u)&&0===h&&Cb(t,v,o,!0,u).each(E=>{u=E.container(),h=E.offset(),d=!0}),Wt(u)&&(c=u.childNodes[h],c||(c=u.childNodes[h-1]),!c||!Ln(c)||"A"===(null===(T=c.previousSibling)||void 0===T?void 0:T.nodeName)||Wy(t,c,!1)||Wy(t,c,!0)||Cb(t,v,o,!0,c).each(E=>{u=E.container(),h=E.offset(),d=!0}))),C&&!o&&pt(u)&&h===u.data.length&&Cb(t,v,o,!1,u).each(E=>{u=E.container(),h=E.offset(),d=!0}),d&&u?$.some(qe(u,h)):$.none();var T},Sb=(t,o)=>{const n=o.collapsed,s=o.cloneRange(),i=qe.fromRangeStart(o);return wC(t,n,!0,s).each(c=>{n&&qe.isAbove(i,c)||s.setStart(c.container(),c.offset())}),n||wC(t,n,!1,s).each(c=>{s.setEnd(c.container(),c.offset())}),n&&s.collapse(!0),jy(o,s)?$.none():$.some(s)},kb=(t,o)=>t.splitText(o),Dh=t=>{let o=t.startContainer,n=t.startOffset,s=t.endContainer,i=t.endOffset;if(o===s&&pt(o)){if(n>0&&n<o.data.length)if(s=kb(o,n),o=s.previousSibling,i>n){i-=n;const c=kb(s,i).previousSibling;o=s=c,i=c.data.length,n=0}else i=0}else if(pt(o)&&n>0&&n<o.data.length&&(o=kb(o,n),n=0),pt(s)&&i>0&&i<s.data.length){const c=kb(s,i).previousSibling;s=c,i=c.data.length}return{startContainer:o,startOffset:n,endContainer:s,endOffset:i}},np=t=>({walk:(o,n)=>_1(t,o,n),split:Dh,expand:(o,n={type:"word"})=>{if("word"===n.type){const s=ep(t,o,[{inline:"span"}]),i=t.createRng();return i.setStart(s.startContainer,s.startOffset),i.setEnd(s.endContainer,s.endOffset),i}return o},normalize:o=>Sb(t,o).fold(Do,n=>(o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),!0))});np.compareRanges=jy,np.getCaretRangeFromPoint=P3,np.getSelectedNode=Gu,np.getNode=Ku;const z3=(t=>{const n=i=>{const c=(d=>{const u=d.dom;return Pl(d)?u.getBoundingClientRect().height:u.offsetHeight})(i);if(c<=0||null===c){const d=yl(i,t);return parseFloat(d)||0}return c},s=(i,c)=>lr(c,(d,u)=>{const h=yl(i,u),v=void 0===h?0:parseInt(h,10);return isNaN(v)?d:d+v},0);return{set:(i,c)=>{if(!Ae(c)&&!c.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+c);const d=i.dom;pn(d)&&(d.style[t]=c+"px")},get:n,getOuter:n,aggregate:s,max:(i,c,d)=>{const u=s(i,d);return c>u?c-u:0}}})("height"),xC=()=>ve(document),CC=(t,o)=>t.view(o).fold(Ke([]),n=>{const s=t.owner(n),i=CC(t,s);return[n].concat(i)});var Z3=Object.freeze({__proto__:null,view:t=>{var o;return(t.dom===document?$.none():$.from(null===(o=t.dom.defaultView)||void 0===o?void 0:o.frameElement)).map(ve)},owner:t=>vl(t)});const $y=t=>"textarea"===Sn(t),U3=(t,o)=>{const n=(i=>{const c=i.dom.ownerDocument,d=c.body,u=c.defaultView,h=c.documentElement;if(d===i.dom)return rr(d.offsetLeft,d.offsetTop);const v=ao(u?.pageYOffset,h.scrollTop),y=ao(u?.pageXOffset,h.scrollLeft),C=ao(h.clientTop,d.clientTop),E=ao(h.clientLeft,d.clientLeft);return Ct(i).translate(y-E,v-C)})(t),s=z3.get(t);return{element:t,bottom:n.top+s,height:s,pos:n,cleanup:o}},j3=(t,o,n,s)=>{$3(t,(i,c)=>W3(t,o,n,s),n)},_b=(t,o,n,s,i)=>{const c={elm:s.element.dom,alignToTop:i};t.dispatch("ScrollIntoView",c).isDefaultPrevented()||(n(t,o,Tn(o).top,s,i),t.dispatch("AfterScrollIntoView",c))},W3=(t,o,n,s)=>{ve(t.getBody());const c=ve(t.getDoc()),d=((u,h)=>{const v=((C,E)=>{const R=xt(C);if(0===R.length||$y(C))return{element:C,offset:E};if(E<R.length&&!$y(R[E]))return{element:R[E],offset:0};{const T=R[R.length-1];return $y(T)?{element:C,offset:E}:"img"===Sn(T)?{element:T,offset:1}:En(T)?{element:T,offset:Ie(T).length}:{element:T,offset:xt(T).length}}})(u,h),y=fl('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return pa(v.element,y),U3(y,()=>_e(y))})(ve(n.startContainer),n.startOffset);_b(t,c,o,d,s),d.cleanup()},SC=(t,o,n,s)=>{const i=ve(t.getDoc());_b(t,i,n,U3(ve(o),_o),s)},$3=(t,o,n)=>{const s=n.startContainer,i=n.startOffset,c=n.endContainer,d=n.endOffset;o(ve(s),ve(c));const u=t.dom.createRng();u.setStart(s,i),u.setEnd(c,d),t.selection.setRng(n)},kC=(t,o,n,s,i)=>{const c=o.pos;if(s)so(c.left,c.top,i);else{const d=c.top-n+o.height;so(-t.getBody().getBoundingClientRect().left,d,i)}},q3=(t,o,n,s,i,c)=>{const d=s+n,u=i.pos.top,h=i.bottom,v=h-u>=s;u<n?kC(t,i,s,!1!==c,o):u>d?kC(t,i,s,v?!1!==c:!0===c,o):h>d&&!v&&kC(t,i,s,!0===c,o)},G3=(t,o,n,s,i)=>{const c=q(o).dom.innerHeight;q3(t,o,n,c,s,i)},K3=(t,o,n,s,i)=>{const c=q(o).dom.innerHeight;q3(t,o,n,c,s,i);const d=(h=>{const v=xC(),y=Tn(v),C=((T,I)=>{const N=I.owner(T);return CC(I,N)})(h,Z3),E=Ct(h),R=ka(C,(T,I)=>{const N=Ct(I);return{left:T.left+N.left,top:T.top+N.top}},{left:0,top:0});return rr(R.left+E.left+y.left,R.top+E.top+y.top)})(s.element),u=xn(window);d.top<u.y?cn(s.element,!1!==i):d.top>u.bottom&&cn(s.element,!0===i)},_A=(t,o,n)=>j3(t,G3,o,n),Y3=(t,o,n)=>SC(t,o,G3,n),X3=(t,o,n)=>j3(t,K3,o,n),qy=(t,o,n)=>SC(t,o,K3,n),Eb=(t,o,n)=>{(t.inline?_A:X3)(t,o,n)},Gy=(t,o=!1)=>t.dom.focus({preventScroll:o}),J3=t=>{const o=gn(t).dom;return t.dom===o.activeElement},Ky=(t=xC())=>$.from(t.dom.activeElement).map(ve),_C=(t,o)=>{const n=En(o)?Ie(o).length:xt(o).length+1;return t>n?n:t<0?0:t},Q3=t=>T1.range(t.start,_C(t.soffset,t.start),t.finish,_C(t.foffset,t.finish)),e_=(t,o)=>!fa(o.dom)&&(bl(t,o)||$n(t,o)),t_=t=>o=>e_(t,o.start)&&e_(t,o.finish),Yy=t=>T1.range(ve(t.startContainer),t.startOffset,ve(t.endContainer),t.endOffset),o_=t=>{const o=document.createRange();try{return o.setStart(t.start.dom,t.soffset),o.setEnd(t.finish.dom,t.foffset),$.some(o)}catch{return $.none()}},Xy=t=>{const o=t.inline||Oo.browser.isFirefox()?(n=ve(t.getBody()),(s=>{const i=s.getSelection();return(i&&0!==i.rangeCount?$.from(i.getRangeAt(0)):$.none()).map(Yy)})(q(n).dom).filter(t_(n))):$.none();var n;t.bookmark=o.isSome()?o:t.bookmark},Jy=t=>(t.bookmark?t.bookmark:$.none()).bind(o=>{return n=ve(t.getBody()),$.from(o).filter(t_(n)).map(Q3);var n}).bind(o_),EC={isEditorUIElement:t=>{const o=t.className.toString();return-1!==o.indexOf("tox-")||-1!==o.indexOf("mce-")}},bd={setEditorTimeout:(t,o,n)=>{return Ae(i=n)||(i=0),setTimeout(()=>{t.removed||o()},i);var i},setEditorInterval:(t,o,n)=>{const s=(Ae(c=n)||(c=0),setInterval(()=>{t.removed?clearInterval(s):o()},c));var c;return s}};let O1;const A1=Lr.DOM,Qy=t=>{const o=t.classList;return void 0!==o&&(o.contains("tox-edit-area")||o.contains("tox-edit-area__iframe")||o.contains("mce-content-body"))},Tb=(t,o)=>{const n=Ty(t);return null!==A1.getParent(o,i=>{return Wt(c=i)&&EC.isEditorUIElement(c)||!!n&&t.dom.is(i,n);var c})},TC=t=>{try{const o=gn(ve(t.getElement()));return Ky(o).fold(()=>document.body,n=>n.dom)}catch{return document.body}},EA=(t,o)=>{const n=o.editor;(i=>{const c=ld(()=>{Xy(i)},0);i.on("init",()=>{var d,v;i.inline&&((d,u)=>{const h=()=>{u.throttle()};Lr.DOM.bind(document,"mouseup",h),d.on("remove",()=>{Lr.DOM.unbind(document,"mouseup",h)})})(i,c),v=c,(d=i).on("mouseup touchend",y=>{v.throttle()}),d.on("keyup NodeChange AfterSetSelectionRange",h=>{(v=>"nodechange"===v.type&&v.selectionChange)(h)||Xy(d)})}),i.on("remove",()=>{c.cancel()})})(n);const s=(i,c)=>{u1(i)&&!0!==i.inline&&c(ve(i.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const i=t.focusedEditor;Qy(TC(n))&&s(n,Ll),i!==n&&(i&&i.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:i}),n.focus(!0))}),n.on("focusout",()=>{bd.setEditorTimeout(n,()=>{const i=t.focusedEditor;Qy(TC(n))&&i===n||s(n,Il),Tb(n,TC(n))||i!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),O1||(O1=i=>{const c=t.activeEditor;c&&Ka(i).each(d=>{d.ownerDocument===document&&(d===document.body||Tb(c,d)||t.focusedEditor!==c||(c.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},A1.bind(document,"focusin",O1))},TA=(t,o)=>{t.focusedEditor===o.editor&&(t.focusedEditor=null),!t.activeEditor&&O1&&(A1.unbind(document,"focusin",O1),O1=null)},n_=(t,o)=>{var n,s,i;(n=ve(t.getBody()),s=o,(i=s,i.collapsed?$.from(Ku(i.startContainer,i.startOffset)).map(ve):$.none()).bind(i=>zu(i)?$.some(i):bl(n,i)?$.none():$.some(n))).bind(n=>L(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},OC=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Bh=t=>{return t.inline?(o=>{const n=o.getBody();return n&&(s=ve(n),J3(s)||(i=s,Ky(gn(i)).filter(c=>i.dom.contains(c.dom))).isSome());var s,i})(t):ie((o=t).iframeElement)&&J3(ve(o.iframeElement));var o},AC=t=>Bh(t)||(o=>{const n=gn(ve(o.getElement()));return Ky(n).filter(s=>!Qy(s.dom)&&Tb(o,s.dom)).isSome()})(t),NC=t=>t.editorManager.setActive(t),RC=(t,o)=>o.collapsed?t.isEditable(o.startContainer):t.isEditable(o.startContainer)&&t.isEditable(o.endContainer),MC=(t,o,n,s,i)=>{const d=n?o.startOffset:o.endOffset;return $.from(n?o.startContainer:o.endContainer).map(ve).map(u=>s&&o.collapsed?u:kt(u,i(u,d)).getOr(u)).bind(u=>us(u)?$.some(u):ee(u).filter(us)).map(u=>u.dom).getOr(t)},r_=(t,o,n=!1)=>MC(t,o,!0,n,(s,i)=>Math.min(Ao(s),i)),s_=(t,o,n=!1)=>MC(t,o,!1,n,(s,i)=>i>0?i-1:i),a_=(t,o)=>{const n=t;for(;t&&pt(t)&&0===t.length;)t=o?t.nextSibling:t.previousSibling;return t||n},DC=(t,o)=>no(o,n=>{const s=t.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),OA=["img","br"],i_=t=>{return Cl(t).filter(n=>0!==n.trim().length||n.indexOf(Hs)>-1).isSome()||zt(OA,Sn(t))||Ga(n=t)&&"false"===ss(n,"contenteditable");var n},l_="[data-mce-autocompleter]",c_=t=>ys(t,l_),NA={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},e2=(t,o,n)=>{const s=n?"lastChild":"firstChild",i=n?"prev":"next";if(t[s])return t[s];if(t!==o){let c=t[i];if(c)return c;for(let d=t.parent;d&&d!==o;d=d.parent)if(c=d[i],c)return c}},RA=t=>{var o;const n=null!==(o=t.value)&&void 0!==o?o:"";if(!Ld(n))return!1;const s=t.parent;return!s||"span"===s.name&&!s.attr("style")||!/^[ ]+$/.test(n)},d_=t=>{const o="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||o};class Kt{static create(o,n){const s=new Kt(o,NA[o]||1);return n&&Po(n,(i,c)=>{s.attr(c,i)}),s}constructor(o,n){this.name=o,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(o){const n=this;return o.parent&&o.remove(),n.insert(o,n),n.remove(),n}attr(o,n){const s=this;if(!Xt(o))return ie(o)&&Po(o,(c,d)=>{s.attr(d,c)}),s;const i=s.attributes;if(i){if(void 0!==n){if(null===n){if(o in i.map){delete i.map[o];let c=i.length;for(;c--;)if(i[c].name===o)return i.splice(c,1),s}return s}if(o in i.map){let c=i.length;for(;c--;)if(i[c].name===o){i[c].value=n;break}}else i.push({name:o,value:n});return i.map[o]=n,s}return i.map[o]}}clone(){const o=this,n=new Kt(o.name,o.type),s=o.attributes;if(s){const i=[];i.map={};for(let c=0,d=s.length;c<d;c++){const u=s[c];"id"!==u.name&&(i[i.length]={name:u.name,value:u.value},i.map[u.name]=u.value)}n.attributes=i}return n.value=o.value,n}wrap(o){const n=this;return n.parent&&(n.parent.insert(o,n),o.append(n)),n}unwrap(){const o=this;for(let n=o.firstChild;n;){const s=n.next;o.insert(n,o,!0),n=s}o.remove()}remove(){const o=this,n=o.parent,s=o.next,i=o.prev;return n&&(n.firstChild===o?(n.firstChild=s,s&&(s.prev=null)):i&&(i.next=s),n.lastChild===o?(n.lastChild=i,i&&(i.next=null)):s&&(s.prev=i),o.parent=o.next=o.prev=null),o}append(o){const n=this;o.parent&&o.remove();const s=n.lastChild;return s?(s.next=o,o.prev=s,n.lastChild=o):n.lastChild=n.firstChild=o,o.parent=n,o}insert(o,n,s){o.parent&&o.remove();const i=n.parent||this;return s?(n===i.firstChild?i.firstChild=o:n.prev&&(n.prev.next=o),o.prev=n.prev,o.next=n,n.prev=o):(n===i.lastChild?i.lastChild=o:n.next&&(n.next.prev=o),o.next=n.next,o.prev=n,n.next=o),o.parent=i,o}getAll(o){const n=this,s=[];for(let i=n.firstChild;i;i=e2(i,n))i.name===o&&s.push(i);return s}children(){const o=[];for(let n=this.firstChild;n;n=n.next)o.push(n);return o}empty(){const o=this;if(o.firstChild){const n=[];for(let i=o.firstChild;i;i=e2(i,o))n.push(i);let s=n.length;for(;s--;){const i=n[s];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return o.firstChild=o.lastChild=null,o}isEmpty(o,n={},s){var i;const c=this;let d=c.firstChild;if(d_(c))return!1;if(d)do{if(1===d.type){if(d.attr("data-mce-bogus"))continue;if(o[d.name]||d_(d))return!1}if(8===d.type||3===d.type&&!RA(d)||3===d.type&&d.parent&&n[d.parent.name]&&Ld(null!==(i=d.value)&&void 0!==i?i:"")||s&&s(d))return!1}while(d=e2(d,c));return!0}walk(o){return e2(this,null,o)}}const u_=wt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),BC=t=>Xt(t.nodeValue)&&t.nodeValue.includes(Ps),m_=t=>(0===t.length?"":`${no(t,o=>`[${o}]`).join(",")},`)+'[data-mce-bogus="all"]',t2=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,o=>BC(o)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),g_=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,o=>{if(BC(o)){const n=o.parentNode;return n&&wo(u_,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),o2=t=>null!==t2(t).nextNode(),p_=t=>null!==g_(t).nextNode(),MA=(t,o)=>null!==o.querySelector(m_(t)),Ko=(t,o)=>{Ue(o.querySelectorAll(m_(t)),n=>{const s=ve(n);"all"===ss(s,"data-mce-bogus")?_e(s):Ue(t,i=>{hl(s,i)&&as(s,i)})})},on=t=>{let o=t.nextNode();for(;null!==o;)o.nodeValue=null,o=t.nextNode()},h_=zr(on,t2),DA=zr(on,g_),f_=(t,o)=>{const n=[{condition:at(MA,o),action:at(Ko,o)},{condition:o2,action:h_},{condition:p_,action:DA}];let s=t,i=!1;return Ue(n,({condition:c,action:d})=>{c(s)&&(i||(s=t.cloneNode(!0),i=!0),d(s))}),s},b_=t=>{const o=er(t,"[data-mce-bogus]");Ue(o,n=>{"all"===ss(n,"data-mce-bogus")?_e(n):Sl(n)?(pa(n,Bi("\ufeff")),_e(n)):De(n)})},Io=t=>{const o=er(t,"input");Ue(o,n=>{as(n,"name")})},LC=wt.makeMap,IC=t=>{const o=[],n=(t=t||{}).indent,s=LC(t.indent_before||""),i=LC(t.indent_after||""),c=Gi.getEncodeFunc(t.entity_encoding||"raw",t.entities),d="xhtml"!==t.element_format;return{start:(u,h,v)=>{if(n&&s[u]&&o.length>0){const y=o[o.length-1];y.length>0&&"\n"!==y&&o.push("\n")}if(o.push("<",u),h)for(let y=0,C=h.length;y<C;y++){const E=h[y];o.push(" ",E.name,'="',c(E.value,!0),'"')}if(o[o.length]=!v||d?">":" />",v&&n&&i[u]&&o.length>0){const y=o[o.length-1];y.length>0&&"\n"!==y&&o.push("\n")}},end:u=>{let h;o.push("</",u,">"),n&&i[u]&&o.length>0&&(h=o[o.length-1],h.length>0&&"\n"!==h&&o.push("\n"))},text:(u,h)=>{u.length>0&&(o[o.length]=h?u:c(u))},cdata:u=>{o.push("<![CDATA[",u,"]]>")},comment:u=>{o.push("\x3c!--",u,"--\x3e")},pi:(u,h)=>{h?o.push("<?",u," ",c(h),"?>"):o.push("<?",u,"?>"),n&&o.push("\n")},doctype:u=>{o.push("<!DOCTYPE",u,">",n?"\n":"")},reset:()=>{o.length=0},getContent:()=>o.join("").replace(/\n$/,"")}},rp=(t={},o=fu())=>{const n=IC(t);return t.validate=!("validate"in t)||t.validate,{serialize:s=>{const i=t.validate,c={3:u=>{var h;n.text(null!==(h=u.value)&&void 0!==h?h:"",u.raw)},8:u=>{var h;n.comment(null!==(h=u.value)&&void 0!==h?h:"")},7:u=>{n.pi(u.name,u.value)},10:u=>{var h;n.doctype(null!==(h=u.value)&&void 0!==h?h:"")},4:u=>{var h;n.cdata(null!==(h=u.value)&&void 0!==h?h:"")},11:u=>{let h=u;if(h=h.firstChild)do{d(h)}while(h=h.next)}};n.reset();const d=u=>{var h;const v=c[u.type];if(v)v(u);else{const y=u.name,C=y in o.getVoidElements();let E=u.attributes;if(i&&E&&E.length>1){const R=[];R.map={};const T=o.getElementRule(u.name);if(T){for(let I=0,N=T.attributesOrder.length;I<N;I++){const H=T.attributesOrder[I];if(H in E.map){const z=E.map[H];R.map[H]=z,R.push({name:H,value:z})}}for(let I=0,N=E.length;I<N;I++){const H=E[I].name;if(!(H in R.map)){const z=E.map[H];R.map[H]=z,R.push({name:H,value:z})}}E=R}}if(n.start(y,E,C),Hd(y))Xt(u.value)&&n.text(u.value,!0),n.end(y);else if(!C){let R=u.firstChild;if(R){"pre"!==y&&"textarea"!==y||3!==R.type||"\n"!==(null===(h=R.value)||void 0===h?void 0:h[0])||n.text("\n",!0);do{d(R)}while(R=R.next)}n.end(y)}}};return 1!==s.type||t.inner?3===s.type?c[3](s):c[11](s):d(s),n.getContent()}}},v_=new Set;Ue(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{v_.add(t)});const HC=["font","text-decoration","text-emphasis"],PC=(t,o)=>cr(t.parseStyle(t.getAttrib(o,"style"))),vn=(t,o,n)=>{const s=PC(t,o),i=PC(t,n),c=d=>{var u,h;const v=null!==(u=t.getStyle(o,d))&&void 0!==u?u:"",y=null!==(h=t.getStyle(n,d))&&void 0!==h?h:"";return _n(v)&&_n(y)&&v!==y};return Bn(s,d=>{const u=h=>Bn(h,v=>v===d);if(!u(i)&&u(HC)){const h=Vt(i,v=>Bn(HC,y=>Pt(v,y)));return Bn(h,c)}return c(d)})},FC=(t,o,n)=>$.from(n.container()).filter(pt).exists(s=>{const i=t?0:-1;return o(s.data.charAt(n.offset()+i))}),N1=at(FC,!0,fo),n2=at(FC,!1,fo),y_=t=>{const o=t.container();return pt(o)&&(0===o.data.length||ed(o.data)&&Pc.isBookmarkNode(o.parentNode))},Xm=(t,o)=>n=>Pn(t?0:-1,n).filter(o).isSome(),VC=t=>cc(t)&&"block"===yl(ve(t),"display"),zC=t=>{return xr(t)&&!(Wt(o=t)&&"all"===o.getAttribute("data-mce-bogus"));var o},w_=Xm(!0,VC),BA=Xm(!1,VC),Ab=Xm(!0,In),Nb=Xm(!1,In),x_=Xm(!0,xl),C_=Xm(!1,xl),sm=Xm(!0,zC),am=Xm(!1,zC),S_=(t,o)=>{return i=Do,bl(s=o,n=t)?Ce(n,c=>i(c)||$n(c,s)).slice(0,-1):[];var n,s,i},Jm=(t,o)=>[t].concat(S_(t,o)),ZC=(t,o,n)=>b(t,o,n,y_),k_=(t,o,n)=>wr(Jm(ve(o.container()),t),(s=>i=>s.isBlock(Sn(i)))(n)),UC=(t,o,n,s)=>ZC(t,o.dom,n).forall(i=>k_(o,n,s).fold(()=>!$l(i,n,o.dom),c=>!$l(i,n,o.dom)&&bl(c,ve(i.container())))),sp=(t,o,n,s)=>k_(o,n,s).fold(()=>ZC(t,o.dom,n).forall(i=>!$l(i,n,o.dom)),i=>ZC(t,i.dom,n).isNone()),r2=at(sp,!1),jC=at(sp,!0),LA=at(UC,!1),IA=at(UC,!0),__=t=>nm(t).exists(Sl),Rb=(t,o,n,s)=>{const i=Vt(Jm(ve(n.container()),o),d=>s.isBlock(Sn(d))),c=Nn(i).getOr(o);return cl(t,c.dom,n).filter(__)},Xi=(t,o,n)=>nm(o).exists(Sl)||Rb(!0,t,o,n).isSome(),WC=(t,o,n)=>{return(s=o,$.from(s.getNode(!0)).map(ve)).exists(Sl)||Rb(!1,t,o,n).isSome();var s},Lh=at(Rb,!1),_s=at(Rb,!0),Mb=t=>qe.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),pi=(t,o,n)=>{const s=Vt(Jm(ve(o.container()),t),i=>n.isBlock(Sn(i)));return Nn(s).getOr(t)},im=(t,o,n)=>Mb(o)?n2(o):n2(o)||B(pi(t,o,n).dom,o).exists(n2),pr=(t,o,n)=>Mb(o)?N1(o):N1(o)||_(pi(t,o,n).dom,o).exists(N1),s2=t=>nm(t).bind(o=>Ds(o,us)).exists(o=>{return n=yl(o,"white-space"),zt(["pre","pre-wrap"],n);var n}),$C=(t,o)=>n=>{return s=new tr(n,t)[o](),ie(s)&&xr(s)&&ub(s);var s},E_=(t,o,n)=>{return!s2(o)&&(c=n,B((s=t).dom,i=o).isNone()||_(s.dom,i).isNone()||r2(s,i,c)||jC(s,i,c)||WC(s,i,c)||Xi(s,i,c)||im(t,o,n)||pr(t,o,n));var s,i,c},Db=(t,o,n)=>!s2(o)&&(r2(t,o,n)||LA(t,o,n)||WC(t,o,n)||im(t,o,n)||((s,i)=>{const c=B(s.dom,i).getOr(i),d=$C(s.dom,"prev");return i.isAtStart()&&(d(i.container())||d(c.container()))})(t,o)),Bb=(t,o,n)=>!s2(o)&&(jC(t,o,n)||IA(t,o,n)||Xi(t,o,n)||pr(t,o,n)||((s,i)=>{const c=_(s.dom,i).getOr(i),d=$C(s.dom,"next");return i.isAtEnd()&&(d(i.container())||d(c.container()))})(t,o)),Nl=(t,o,n)=>Db(t,o,n)||Bb(t,(s=>{const i=s.container(),c=s.offset();return pt(i)&&c<i.data.length?qe(i,c+1):s})(o),n),$d=(t,o)=>It(t.charAt(o)),T_=(t,o)=>fo(t.charAt(o)),a2=(t,o,n,s)=>{const i=o.data,c=qe(o,0);return n||!$d(i,0)||Nl(t,c,s)?!!(n&&T_(i,0)&&Db(t,c,s))&&(o.data=Hs+i.slice(1),!0):(o.data=" "+i.slice(1),!0)},i2=(t,o,n,s)=>{const i=o.data,c=qe(o,i.length-1);return n||!$d(i,i.length-1)||Nl(t,c,s)?!!(n&&T_(i,i.length-1)&&Bb(t,c,s))&&(o.data=i.slice(0,-1)+Hs,!0):(o.data=i.slice(0,-1)+" ",!0)},O_=(t,o,n,s)=>{if(0===n)return;const i=ve(t),c=Gr(i,v=>s.isBlock(Sn(v))).getOr(i),d=t.data.slice(o,o+n),u=o+n>=t.data.length&&Bb(c,qe(t,t.data.length),s),h=0===o&&Db(c,qe(t,0),s);t.replaceData(o,n,Id(d,4,h,u))},ap=(t,o,n)=>{const s=t.data.slice(o),i=s.length-rn(s).length;O_(t,o,i,n)},R1=(t,o,n)=>{const s=t.data.slice(0,o),i=s.length-An(s).length;O_(t,o-i,i,n)},Lb=(t,o,n,s,i=!0)=>{const c=An(t.data).length,d=i?t:o,u=i?o:t;return i?d.appendData(u.data):d.insertData(0,u.data),_e(ve(u)),s&&ap(d,c,n),d},PA=(t,o)=>((n,s)=>{const i=n.container(),c=n.offset();return!qe.isTextPosition(n)&&i===s.parentNode&&c>qe.before(s).offset()})(o,t)?qe(o.container(),o.offset()-1):o,qd=t=>{return va(t.previousSibling)?$.some(pt(o=t.previousSibling)?qe(o,o.data.length):qe.after(o)):t.previousSibling?V(t.previousSibling):$.none();var o},A_=t=>{return va(t.nextSibling)?$.some(pt(o=t.nextSibling)?qe(o,0):qe.before(o)):t.nextSibling?L(t.nextSibling):$.none();var o},Fc=(t,o,n)=>{n.fold(()=>{t.focus()},s=>{t.selection.setRng(s.toRange(),o)})},Ib=(t,o)=>o&&wo(t.schema.getBlockElements(),Sn(o)),ip=(t,o,n,s=!0,i=!1)=>{const c=((t,o,n)=>{return(s=t,i=o,c=n,s?(d=i,A_(u=c).orThunk(()=>qd(u)).orThunk(()=>{return _(h=d,qe.after(v=u)).orThunk(()=>B(h,qe.before(v)));var h,v})):((d,u)=>qd(u).orThunk(()=>A_(u)).orThunk(()=>{return h=d,$.from((v=u).previousSibling?v.previousSibling:v.parentNode).bind(y=>B(h,qe.before(y))).orThunk(()=>_(h,qe.after(v)));var h,v}))(i,c)).map(at(PA,n));var s,i,c,d,u})(o,t.getBody(),n.dom),d=Gr(n,at(Ib,t),(u=t.getBody(),v=>v.dom===u));var u;const h=((v,y,C,E)=>{const R=he(v).filter(En),T=Pe(v).filter(En);return _e(v),(I=R,N=T,H=y,z=(U,J,Y)=>{const ge=U.dom,Ee=J.dom,Ne=ge.data.length;return Lb(ge,Ee,C,E),Y.container()===Ee?qe(ge,Ne):Y},I.isSome()&&N.isSome()&&H.isSome()?$.some(z(I.getOrDie(),N.getOrDie(),H.getOrDie())):$.none()).orThunk(()=>(E&&(R.each(U=>R1(U.dom,U.dom.length,C)),T.each(U=>ap(U.dom,0,C))),y));var I,N,H,z})(n,c,t.schema,(y=n,wo(t.schema.getTextInlineElements(),Sn(y))));var y;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):d.bind(v=>((y,C)=>{if(Ss(y)){const E=fl('<br data-mce-bogus="1">');return C?Ue(xt(y),R=>{mC(R)||_e(R)}):re(y),F(y,E),$.some(qe.before(E.dom))}return $.none()})(v,i)).fold(()=>{s&&Fc(t,o,h)},v=>{s&&Fc(t,o,$.some(v))})},Gd=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ar=(t,o)=>ai(ve(o),ih(t))&&!nd(t.schema,o)&&t.dom.isEditable(o),Ih=t=>{var o,n;return"rtl"===Lr.DOM.getStyle(t,"direction",!0)||(n=null!==(o=t.textContent)&&void 0!==o?o:"",Gd.test(n))},Ou=(t,o,n)=>{const s=(i=t,c=o,Vt(Lr.DOM.getParents(n.container(),"*",c),i));var i,c;return $.from(s[s.length-1])},Vc=(t,o)=>{const n=o.container(),s=o.offset();return t?kl(n)?pt(n.nextSibling)?qe(n.nextSibling,0):qe.after(n):du(o)?qe(n,s+1):o:kl(n)?pt(n.previousSibling)?qe(n.previousSibling,n.previousSibling.data.length):qe.before(n):Tc(o)?qe(n,s-1):o},l2=at(Vc,!0),c2=at(Vc,!1),N_=(t,o)=>{const n=s=>s.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(o),t.off("beforeinput input",n)},Hb=t=>N_(t,"Delete"),VA=t=>Qc(t)||Bs(t),Pb=(t,o)=>bl(t,o)?Ds(o,VA,(n=>s=>Mi(ee(s),n,$n))(t)):$.none(),d2=(t,o=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!o})},u2=(t,o,n)=>kr(L(n),V(n),(s,i)=>{const c=Vc(!0,s),d=Vc(!1,i),u=Vc(!1,o);return t?_(n,u).exists(h=>h.isEqual(d)&&o.isEqual(c)):B(n,u).exists(h=>h.isEqual(c)&&o.isEqual(d))}).getOr(!0),qC=t=>{var o;return(8===oc(o=t)||"#comment"===Sn(o)?he(t):Co(t)).bind(qC).orThunk(()=>$.some(t))},Fb=(t,o,n,s=!0)=>{var i;o.deleteContents();const c=qC(n).getOr(n),d=ve(null!==(i=t.dom.getParent(c.dom,t.dom.isBlock))&&void 0!==i?i:n.dom);if(d.dom===t.getBody()?d2(t,s):Ss(d)&&(ol(d),s&&t.selection.setCursorLocation(d.dom,0)),!$n(n,d)){const h=Mi(ee(d),n)?[]:ee(u=d).map(xt).map(v=>Vt(v,y=>!$n(u,y))).getOr([]);Ue(h.concat(xt(n)),v=>{$n(v,d)||bl(v,d)||!Ss(v)||_e(v)})}var u},R_=(t,o)=>Gs(t,o).isSome(),GC=t=>er(t,"td,th"),M_=(t,o)=>or(ve(t),o),KC=(t,o)=>({start:t,end:o}),M1=Ic([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),m2=(t,o)=>ac(ve(t),"td,th",o),D_=t=>!$n(t.start,t.end),YC=(t,o)=>or(t.start,o).bind(n=>or(t.end,o).bind(s=>rs($n(n,s),n))),g2=t=>o=>YC(o,t).map(n=>((s,i,c)=>({rng:s,table:i,cells:c}))(o,n,GC(n))),B_=(t,o,n,s)=>{if(n.collapsed||!t.forall(D_))return $.none();if(o.isSameTable){const i=t.bind(g2(s));return $.some({start:i,end:i})}{const i=m2(n.startContainer,s),c=m2(n.endContainer,s),d=i.bind((h=>v=>or(v,h).bind(y=>Zn(GC(y)).map(C=>KC(v,C))))(s)).bind(g2(s)),u=c.bind((h=>v=>or(v,h).bind(y=>Nn(GC(y)).map(C=>KC(C,v))))(s)).bind(g2(s));return $.some({start:d,end:u})}},L_=(t,o)=>Ui(t,n=>$n(n,o)),p2=t=>kr(L_(t.cells,t.rng.start),L_(t.cells,t.rng.end),(o,n)=>t.cells.slice(o,n+1)),bc=(t,o)=>{const{startTable:n,endTable:s}=o,i=t.cloneRange();return n.each(c=>i.setStartAfter(c.dom)),s.each(c=>i.setEndBefore(c.dom)),i},XC=t=>Ue(t,o=>{as(o,"contenteditable"),ol(o)}),Vb=(t,o,n,s)=>{const i=n.cloneRange();s?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(o.dom.lastChild)):(i.setStartBefore(o.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),zb(t,i,o,!1).each(c=>c())},h2=t=>{const o=Go(t),n=ve(t.selection.getNode());Vu(n.dom)&&Ss(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),o.length>1&&Bn(o,s=>$n(s,n))&&mr(n,"data-mce-selected","1")},JC=(t,o,n)=>$.some(()=>{const s=t.selection.getRng(),i=n.bind(({rng:c,isStartInTable:d})=>{const u=$.from((v=t).dom.getParent(d?c.endContainer:c.startContainer,v.dom.isBlock)).map(ve);var v;c.deleteContents(),((v,y,C)=>{C.each(E=>{y?_e(E):(ol(E),v.selection.setCursorLocation(E.dom,0))})})(t,d,u.filter(Ss));const h=d?o[0]:o[o.length-1];return Vb(t,h,s,d),Ss(h)?$.none():$.some(d?o.slice(1):o.slice(0,-1))}).getOr(o);XC(i),h2(t)}),I_=(t,o,n,s)=>$.some(()=>{const i=t.selection.getRng(),c=o[0],d=n[n.length-1];Vb(t,c,i,!0),Vb(t,d,i,!1);const u=Ss(c)?o:o.slice(1),h=Ss(d)?n:n.slice(0,-1);XC(u.concat(h)),s.deleteContents(),h2(t)}),zb=(t,o,n,s=!0)=>$.some(()=>{Fb(t,o,n,s)}),H_=(t,o)=>$.some(()=>ip(t,!1,o)),vd=(t,o)=>wr(Jm(o,t),Zu),QC=(t,o)=>wr(Jm(o,t),Di("caption")),D1=(t,o)=>$.some(()=>{ol(o),t.selection.setCursorLocation(o.dom,0)}),zc=(t,o)=>t?x_(o):C_(o),lp=(t,o)=>{const n=ve(t.selection.getStart(!0)),s=Go(t);return t.selection.isCollapsed()&&0===s.length?((t,o,n)=>{const s=ve(t.getBody());return QC(s,n).fold(()=>((i,c,d,u)=>{const h=qe.fromRangeStart(i.selection.getRng());return vd(d,u).bind(v=>{return Ss(v)?D1(i,v):(C=d,R=v,T=h,p(c,i.getBody(),T).bind(I=>vd(C,ve(I.getNode())).bind(N=>$n(N,R)?$.none():$.some(_o))));var C,R,T})})(t,o,s,n).orThunk(()=>rs(((i,c)=>{const d=qe.fromRangeStart(i.selection.getRng());return zc(c,d)||cl(c,i.getBody(),d).exists(u=>zc(c,u))})(t,o),_o)),i=>((c,d,u,h)=>{const v=qe.fromRangeStart(c.selection.getRng());return Ss(h)?D1(c,h):(C=u,R=h,T=v,p(E=d,(y=c).getBody(),T).fold(()=>$.some(_o),I=>{return H=E,z=T,U=I,L((N=R).dom).bind(J=>V(N.dom).map(Y=>H?z.isEqual(J)&&U.isEqual(Y):z.isEqual(Y)&&U.isEqual(J))).getOr(!0)?((N,H)=>D1(N,H))(y,R):((N,H,z)=>QC(N,ve(z.getNode())).fold(()=>$.some(_o),U=>rs(!$n(U,H),_o)))(C,R,I);var N,H,z,U}));var y,C,E,R,T})(t,o,s,i))})(t,o,n):((i,c,d)=>{const u=ve(i.getBody()),h=i.selection.getRng();return 0!==d.length?JC(i,d,$.none()):(v=i,C=h,QC(y=u,c).fold(()=>{return R=v,((t,o)=>{const n=(c=>d=>$n(c,d))(t),s=((c,d)=>{const u=m2(c.startContainer,d),h=m2(c.endContainer,d);return kr(u,h,KC)})(o,n),i=((c,d)=>{const u=M_(c.startContainer,d),h=M_(c.endContainer,d),v=u.isSome(),y=h.isSome(),C=kr(u,h,$n).getOr(!1);return kr((E={startTable:u,endTable:h,isStartInTable:v,isEndInTable:y,isSameTable:C,isMultiTable:!C&&v&&y}).startTable,E.endTable,(R,T)=>{const I=R_(R,H=>$n(H,T)),N=R_(T,H=>$n(H,R));return I||N?{...E,startTable:I?$.none():E.startTable,endTable:N?$.none():E.endTable,isSameTable:!1,isMultiTable:!1}:E}).getOr(E);var E})(o,n);return d=o,u=n,s.exists(h=>{return y=u,!D_(v=h)&&YC(v,y).exists(C=>{const E=C.dom.rows;return 1===E.length&&1===E[0].cells.length})&&Xs(h.start,d);var v,y})?s.map(c=>M1.singleCellTable(o,c.start)):i.isMultiTable?((c,d,u,h)=>B_(c,d,u,h).bind(({start:v,end:y})=>{const C=v.bind(p2).getOr([]),E=y.bind(p2).getOr([]);if(C.length>0&&E.length>0){const R=bc(u,d);return $.some(M1.multiTable(C,E,R))}return $.none()}))(s,i,o,n):((c,d,u,h)=>B_(c,d,u,h).bind(({start:v,end:y})=>v.or(y)).bind(v=>{const{isSameTable:y}=d,C=p2(v).getOr([]);if(y&&v.cells.length===C.length)return $.some(M1.fullTable(v.table));if(C.length>0){if(y)return $.some(M1.partialTable(C,$.none()));{const E=bc(u,d);return $.some(M1.partialTable(C,$.some({...d,rng:E})))}}return $.none()}))(s,i,o,n);var d,u})(y,C).bind(N=>N.fold(at(zb,R),at(H_,R),at(JC,R),at(I_,R)));var R},R=>D1(v,R)));var v,y,C})(t,n,s)},Hh=(t,o)=>{let n=o;for(;n&&n!==t;){if(ba(n)||xr(n))return n;n=n.parentNode}return null},B1=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Ir=wt.each,Ph=t=>{const o=t.dom,n=new Set(t.serializer.getTempAttrs()),s=i=>Bn(B1,c=>Pt(i,c))||n.has(i);return{compare:(i,c)=>{if(i.nodeName!==c.nodeName||i.nodeType!==c.nodeType)return!1;const d=h=>{const v={};return Ir(o.getAttribs(h),y=>{const C=y.nodeName.toLowerCase();"style"===C||s(C)||(v[C]=o.getAttrib(h,C))}),v},u=(h,v)=>{for(const y in h)if(wo(h,y)){const C=v[y];if(Bt(C)||h[y]!==C)return!1;delete v[y]}for(const y in v)if(wo(v,y))return!1;return!0};return!(Wt(i)&&Wt(c)&&(!u(d(i),d(c))||!u(o.parseStyle(o.getAttrib(i,"style")),o.parseStyle(o.getAttrib(c,"style"))))||vt(i)||vt(c))},isAttributeInternal:s}},eS=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),tS=(t,o,n,s)=>{const i=n.name;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(u.name===i){const h=s.nodes[i];h?h.nodes.push(n):s.nodes[i]={filter:u,nodes:[n]}}}if(n.attributes)for(let c=0,d=o.length;c<d;c++){const u=o[c],h=u.name;if(h in n.attributes.map){const v=s.attributes[h];v?v.nodes.push(n):s.attributes[h]={filter:u,nodes:[n]}}}},f2=(t,o)=>{const n=(s,i)=>{Po(s,c=>{const d=fr(c.nodes);Ue(c.filter.callbacks,u=>{for(let h=d.length-1;h>=0;h--){const v=d[h];(i?void 0!==v.attr(c.filter.name):v.name===c.filter.name)&&!yr(v.parent)||d.splice(h,1)}d.length>0&&u(d,c.filter.name,o)})})};n(t.nodes,!1),n(t.attributes,!0)},b2=(t,o,n,s={})=>{const i=((c,d,u)=>{const h={nodes:{},attributes:{}};return u.firstChild&&(v=>{let C=v;for(;C=C.walk();)tS(c,d,C,h)})(u),h})(t,o,n);f2(i,s)},Ub=(t,o,n,s)=>{if((t.pad_empty_with_br||o.insert)&&n(s)){const i=new Kt("br",1);o.insert&&i.attr("data-mce-bogus","1"),s.empty().append(i)}else s.empty().append(new Kt("#text",3)).value=Hs},v2=(t,o)=>{const n=t?.firstChild;return ie(n)&&n===t.lastChild&&n.name===o},cp=(t,o,n,s)=>s.isEmpty(o,n,i=>((c,d)=>{const u=c.getElementRule(d.name);return!0===u?.paddEmpty})(t,i)),oS=t=>{let o;for(let n=t;n;n=n.parent){const s=n.attr("contenteditable");if("false"===s)break;"true"===s&&(o=n)}return $.from(o)},y2=(t,o,n=t.parent)=>{if(o.getSpecialElements()[t.name])t.empty().remove();else{const s=t.children();for(const i of s)n&&!o.isValidChild(n.name,i.name)&&y2(i,o,n);t.unwrap()}},w2=(t,o,n,s=_o)=>{const i=o.getTextBlockElements(),c=o.getNonEmptyElements(),d=o.getWhitespaceElements(),u=wt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),h=new Set,v=y=>y!==n&&!u[y.name];for(let y=0;y<t.length;y++){const C=t[y];let E,R,T;if(!C.parent||h.has(C))continue;if(i[C.name]&&"li"===C.parent.name){let N=C.next;for(;N&&i[N.name];)N.name="li",h.add(N),C.parent.insert(N,C.parent),N=N.next;C.unwrap();continue}const I=[C];for(E=C.parent;E&&!o.isValidChild(E.name,C.name)&&v(E);E=E.parent)I.push(E);if(E&&I.length>1)if(x2(o,C,E))y2(C,o);else{I.reverse(),R=I[0].clone(),s(R);let N=R;for(let H=0;H<I.length-1;H++){o.isValidChild(N.name,I[H].name)&&H>0?(T=I[H].clone(),s(T),N.append(T)):T=N;for(let z=I[H].firstChild;z&&z!==I[H+1];){const U=z.next;T.append(z),z=U}N=T}cp(o,c,d,R)?E.insert(C,I[0],!0):(E.insert(R,I[0],!0),E.insert(C,R)),E=I[0],(cp(o,c,d,E)||v2(E,"br"))&&E.empty().remove()}else if(C.parent){if("li"===C.name){let N=C.prev;if(N&&("ul"===N.name||"ol"===N.name)){N.append(C);continue}if(N=C.next,N&&("ul"===N.name||"ol"===N.name)&&N.firstChild){N.insert(C,N.firstChild,!0);continue}const H=new Kt("ul",1);s(H),C.wrap(H);continue}if(o.isValidChild(C.parent.name,"div")&&o.isValidChild("div",C.name)){const N=new Kt("div",1);s(N),C.wrap(N)}else y2(C,o)}}},x2=(t,o,n=o.parent)=>{return!(!n||(!t.children[o.name]||t.isValidChild(n.name,o.name))&&("a"!==o.name||!(s=>{let c=s;for(;c;){if("a"===c.name)return!0;c=c.parent}return!1})(n))&&(s=n,"summary"!==s.name||!eS(o)||n?.firstChild===o&&n?.lastChild===o));var s},C2=t=>t.collapsed?t:(o=>{const n=qe.fromRangeStart(o),s=qe.fromRangeEnd(o),i=o.commonAncestorContainer;return cl(!1,i,s).map(c=>!$l(n,s,i)&&$l(n,c,i)?((d,u,h,v)=>{const y=document.createRange();return y.setStart(d,u),y.setEnd(h,v),y})(n.container(),n.offset(),c.container(),c.offset()):o).getOr(o)})(t),S2=(t,o)=>{const n=t.getParent(o,t.isBlock);return n&&"LI"===n.nodeName?n:null},k2=(t,o)=>{const n=qe.after(t),s=gs(o).prev(n);return s?s.toRange():null},jA=["pre"],_2=Vu,F_=(t,o,n)=>{var s,i;const c=t.selection,d=t.dom,u=t.parser,h=n.merge,v=rp({validate:!0},t.schema),y='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(o=nl(o)),-1===o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,y);let C=c.getRng();const E=C.startContainer,R=t.getBody();var U,J;E===R&&c.isCollapsed()&&d.isBlock(R.firstChild)&&(U=t,ie(J=R.firstChild)&&!U.schema.getVoidElements()[J.nodeName])&&d.isEmpty(R.firstChild)&&(C=d.createRng(),C.setStart(R.firstChild,0),C.setEnd(R.firstChild,0),c.setRng(C)),c.isCollapsed()||(U=>{const J=U.dom,Y=C2(U.selection.getRng());U.selection.setRng(Y);const ge=J.getParent(Y.startContainer,_2);var Ee,Ne,Me;Ee=J,Ne=Y,ie(Me=ge)&&Me===Ee.getParent(Ne.endContainer,_2)&&Xs(ve(Me),Ne)?zb(U,Y,ve(ge)):Y.startContainer===Y.endContainer&&Y.endOffset-Y.startOffset==1&&pt(Y.startContainer.childNodes[Y.startOffset])?Y.deleteContents():U.getDoc().execCommand("Delete",!1)})(t);const T=c.getNode(),I={context:T.nodeName.toLowerCase(),data:n.data,insert:!0},N=u.parse(o,I);if(!0===n.paste&&((t,o)=>{let n=o.firstChild,s=o.lastChild;return n&&"meta"===n.name&&(n=n.next),s&&"mce_marker"===s.attr("id")&&(s=s.prev),((i,c)=>{const d=i.getNonEmptyElements();return ie(c)&&(c.isEmpty(d)||(h=c,i.getBlockElements()[h.name]&&ie((v=h).firstChild)&&v.firstChild===v.lastChild&&(v=>"br"===v.name||v.value===Hs)(h.firstChild)));var h,v})(t,s)&&(s=s?.prev),!(!n||n!==s||"ul"!==n.name&&"ol"!==n.name)})(t.schema,N)&&((U,J)=>!!S2(U,J))(d,T))return C=((t,o,n,s)=>{const i=((C,E,R)=>{const T=E.serialize(R);return(I=>{var N,H;const z=I.firstChild,U=I.lastChild;return z&&"META"===z.nodeName&&(null===(N=z.parentNode)||void 0===N||N.removeChild(z)),U&&"mce_marker"===U.id&&(null===(H=U.parentNode)||void 0===H||H.removeChild(U)),I})(C.createFragment(T))})(o,t,s),c=S2(o,n.startContainer),d=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||ie(null==(o=n)?void 0:o.firstChild)&&o.firstChild===o.lastChild&&((s=o.firstChild).data===Hs||Ln(s)))?t.slice(0,-1):t;var s,o,n})((u=i.firstChild,Vt(null!==(h=u?.childNodes)&&void 0!==h?h:[],C=>"LI"===C.nodeName)));var u,h;const v=o.getRoot(),y=C=>{const E=qe.fromRangeStart(n),R=gs(o.getRoot()),T=1===C?R.prev(E):R.next(E),I=T?.getNode();return!I||S2(o,I)!==c};return c?y(1)?((C,E,R)=>{const T=C.parentNode;return T&&wt.each(E,I=>{T.insertBefore(I,C)}),((I,N)=>{const H=qe.before(I),z=gs(N).next(H);return z?z.toRange():null})(C,R)})(c,d,v):y(2)?(C=c,R=v,o.insertAfter((E=d).reverse(),C),k2(E[0],R)):((C,E,R,T)=>{const I=((H,z)=>{const U=z.cloneRange(),J=z.cloneRange();return U.setStartBefore(H),J.setEndAfter(H),[U.cloneContents(),J.cloneContents()]})(C,T),N=C.parentNode;return N&&(N.insertBefore(I[0],C),wt.each(E,H=>{N.insertBefore(H,C)}),N.insertBefore(I[1],C),N.removeChild(C)),k2(E[E.length-1],R)})(c,d,v,n):null;var C,E,R})(v,d,c.getRng(),N),C&&c.setRng(C),o;!0===n.paste&&((U,J,Y,ge)=>{var Ee;const Ne=J.firstChild,Me=J.lastChild,Fe=Ne===("bookmark"===Me.attr("data-mce-type")?Me.prev:Me),ye=zt(jA,Ne.name);if(Fe&&ye){const Te="false"!==Ne.attr("contenteditable"),Be=(null===(Ee=U.getParent(Y,U.isBlock))||void 0===Ee?void 0:Ee.nodeName.toLowerCase())===Ne.name,tt=$.from(Hh(ge,Y)).forall(ba);return Te&&Be&&tt}return!1})(d,N,T,t.getBody())&&(null===(s=N.firstChild)||void 0===s||s.unwrap()),(U=>{let J=U;for(;J=J.walk();)1===J.type&&J.attr("data-mce-fragment","1")})(N);let H=N.lastChild;if(H&&"mce_marker"===H.attr("id")){const U=H;for(H=H.prev;H;H=H.walk(!0))if(3===H.type||!d.isBlock(H.name)){H.parent&&t.schema.isValidChild(H.parent.name,"span")&&H.parent.insert(U,H,"br"===H.name);break}}if(t._selectionOverrides.showBlockCaretContainer(T),I.invalid||((U,J,Y)=>{var ge;return Bn(Y.children(),eS)&&"SUMMARY"===(null===(ge=U.getParent(J,U.isBlock))||void 0===ge?void 0:ge.nodeName)})(d,T,N)){t.selection.setContent(y);let U,J=c.getNode();const Y=t.getBody();for(wi(J)?J=U=Y:U=J;U&&U!==Y;)J=U,U=U.parentNode;o=J===Y?Y.innerHTML:d.getOuterHTML(J);const ge=u.parse(o),Ee=(Te=>{for(let Be=Te;Be;Be=Be.walk())if("mce_marker"===Be.attr("id"))return $.some(Be);return $.none()})(ge),Ne=Ee.bind(oS).getOr(ge);Ee.each(Te=>Te.replace(N));const Me=N.children(),Fe=null!==(i=N.parent)&&void 0!==i?i:ge;N.unwrap();const ye=Vt(Me,Te=>x2(t.schema,Te,Fe));w2(ye,t.schema,Ne),b2(u.getNodeFilters(),u.getAttributeFilters(),ge),o=v.serialize(ge),J===Y?d.setHTML(Y,o):d.setOuterHTML(J,o)}else o=v.serialize(N),((U,J,Y)=>{var ge;if("all"===Y.getAttribute("data-mce-bogus"))null===(ge=Y.parentNode)||void 0===ge||ge.insertBefore(U.dom.createFragment(J),Y);else{const Ee=Y.firstChild;!Ee||Ee===Y.lastChild&&"BR"===Ee.nodeName?U.dom.setHTML(Y,J):U.selection.setContent(J,{no_events:!0})}})(t,o,T);var z;return((U,J)=>{const Y=U.schema.getTextInlineElements(),ge=U.dom;if(J){const Ee=U.getBody(),Ne=Ph(U);wt.each(ge.select("*[data-mce-fragment]"),Me=>{if(ie(Y[Me.nodeName.toLowerCase()])&&Ar(PC(ge,Me),Te=>!v_.has(Te)))for(let Fe=Me.parentElement;ie(Fe)&&Fe!==Ee&&!vn(ge,Me,Fe);Fe=Fe.parentElement)if(Ne.compare(Fe,Me)){ge.remove(Me,!0);break}})}})(t,h),((U,J)=>{var Y,ge,Ee;let Ne;const Me=U.dom,Fe=U.selection;if(!J)return;Fe.scrollIntoView(J);const ye=Hh(U.getBody(),J);if(ye&&"false"===Me.getContentEditable(ye))return Me.remove(J),void Fe.select(ye);let Te=Me.createRng();const Be=J.previousSibling;if(pt(Be)){Te.setStart(Be,null!==(ge=null===(Y=Be.nodeValue)||void 0===Y?void 0:Y.length)&&void 0!==ge?ge:0);const Zt=J.nextSibling;pt(Zt)&&(Be.appendData(Zt.data),null===(Ee=Zt.parentNode)||void 0===Ee||Ee.removeChild(Zt))}else Te.setStartBefore(J),Te.setEndBefore(J);const tt=Me.getParent(J,Me.isBlock);if(Me.remove(J),tt&&Me.isEmpty(tt)){const Zt=_2(tt);re(ve(tt)),Te.setStart(tt,0),Te.setEnd(tt,0),Zt||tt.getAttribute("data-mce-fragment")||!(Ne=(Mt=>{let mo=qe.fromRangeStart(Mt);return mo=gs(U.getBody()).next(mo),mo?.toRange()})(Te))?Me.add(tt,Me.create("br",Zt?{}:{"data-mce-bogus":"1"})):(Te=Ne,Me.remove(tt))}Fe.setRng(Te)})(t,d.get("mce_marker")),z=t.getBody(),wt.each(z.getElementsByTagName("*"),U=>{U.removeAttribute("data-mce-fragment")}),((U,J,Y)=>{$.from(U.getParent(J,"td,th")).map(ve).each(ge=>{return Ne=Y,void Co(Ee=ge).each(Me=>{he(Me).each(Fe=>{Ne.isBlock(Sn(Ee))&&Sl(Me)&&Ne.isBlock(Sn(Fe))&&_e(Me)})});var Ee,Ne})})(d,c.getStart(),t.schema),((U,J,Y)=>{const ge=Ce(ve(Y),Ee=>$n(Ee,ve(J)));ml(ge,ge.length-2).filter(us).fold(()=>Pd(U,J),Ee=>Pd(U,Ee.dom))})(t.schema,t.getBody(),c.getStart()),o},jb=t=>t instanceof Kt,I1=(t,o,n)=>{var s;t.dom.setHTML(t.getBody(),o),!0!==n&&Bh(s=t)&&L(s.getBody()).each(i=>{const c=i.getNode(),d=xl(c)?L(c).getOr(i):i;s.selection.setRng(d.toRange())})},nS=t=>ht(t)?t:Do,E2=(t,o,n)=>{const s=o(t),i=nS(n);return s.orThunk(()=>i(t)?$.none():((c,d,u)=>{let h=c.dom;const v=nS(u);for(;h.parentNode;){h=h.parentNode;const y=ve(h),C=d(y);if(C.isSome())return C;if(v(y))break}return $.none()})(t,o,i))},T2=dC,rS=(t,o,n)=>{const s=t.formatter.get(n);if(s)for(let i=0;i<s.length;i++){const c=s[i];if(hd(c)&&!1===c.inherit&&t.dom.is(o,c.selector))return!0}return!1},O2=(t,o,n,s,i)=>{const c=t.dom.getRoot();if(o===c)return!1;const d=t.dom.getParent(o,u=>!!rS(t,u,n)||u.parentNode===c||!!Au(t,u,n,s,!0));return!!Au(t,d,n,s,i)},Wb=(t,o,n)=>!(!Ja(n)||!T2(o,n.inline))||!(!bn(n)||!T2(o,n.block))||!!hd(n)&&Wt(o)&&t.is(o,n.selector),sS=(t,o,n,s,i,c)=>{const d=n[s],u="attributes"===s;if(ht(n.onmatch))return n.onmatch(o,n,s);if(d)if(gl(d)){for(let h=0;h<d.length;h++)if(u?t.getAttrib(o,d[h]):Si(t,o,d[h]))return!0}else for(const h in d)if(wo(d,h)){const v=u?t.getAttrib(o,h):Si(t,o,h),y=Qg(d[h],c),C=yr(v)||an(v);if(C&&yr(y))continue;if(i&&C&&!n.exact||(!i||n.exact)&&!T2(v,ql(y,h)))return!1}return!0},Au=(t,o,n,s,i)=>{const c=t.formatter.get(n),d=t.dom;if(c&&Wt(o))for(let u=0;u<c.length;u++){const h=c[u];if(Wb(t.dom,o,h)&&sS(d,o,h,"attributes",i,s)&&sS(d,o,h,"styles",i,s)){const v=h.classes;if(v)for(let y=0;y<v.length;y++)if(!t.dom.hasClass(o,Qg(v[y],s)))return;return h}}},A2=(t,o,n,s,i)=>{if(s)return O2(t,s,o,n,i);if(s=t.selection.getNode(),O2(t,s,o,n,i))return!0;const c=t.selection.getStart();return!(c===s||!O2(t,c,o,n,i))},H1=Ps,N2=t=>{if(t){const o=new tr(t,t);for(let n=o.current();n;n=o.next())if(pt(n))return n}return null},R2=t=>{const o=vs("span");return Oa(o,{id:W,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&F(o,Bi(H1)),o},M2=(t,o,n)=>{const s=t.dom,i=t.selection;if(N3(o))ip(t,!1,ve(o),n,!0);else{const c=i.getRng(),d=s.getParent(o,s.isBlock),u=c.startContainer,h=c.startOffset,v=c.endContainer,y=c.endOffset,C=(E=>{const R=N2(E);return R&&R.data.charAt(0)===H1&&R.deleteData(0,1),R})(o);s.remove(o,!0),u===C&&h>0&&c.setStart(C,h-1),v===C&&y>0&&c.setEnd(C,y-1),d&&s.isEmpty(d)&&ol(ve(d)),i.setRng(c)}},D2=(t,o,n)=>{const s=t.dom,i=t.selection;if(o)M2(t,o,n);else if(!(o=de(t.getBody(),i.getStart())))for(;o=s.get(W);)M2(t,o,n)},aS=(t,o)=>(t.appendChild(o),o),iS=(t,o)=>{var n;const s=ka(t,(c,d)=>aS(c,d.cloneNode(!1)),o),i=null!==(n=s.ownerDocument)&&void 0!==n?n:document;return aS(s,i.createTextNode(H1))},B2=t=>{const o=R2(!1),n=iS(t,o.dom);return{caretContainer:o,caretPosition:qe(n,0)}},$b=(t,o)=>{const{caretContainer:n,caretPosition:s}=B2(o);return pa(ve(t),n),_e(ve(t)),s},qb=(t,o)=>{if(Q(o.dom))return!1;const n=t.schema.getTextInlineElements();return wo(n,Sn(o))&&!Q(o.dom)&&!Aa(o.dom)},dp={},lS=Ec(["pre"]);(t=>{dp[t]||(dp[t]=[]),dp[t].push(n=>{if(!n.selection.getRng().collapsed){const s=n.selection.getSelectedBlocks(),i=Vt(Vt(s,lS),(c=>d=>{const u=d.previousSibling;return lS(u)&&zt(c,u)})(s));Ue(i,c=>{((d,u)=>{const h=ve(u),v=vl(h).dom;_e(h),K(ve(d),[vs("br",v),vs("br",v),...xt(h)])})(c.previousSibling,c)})}})})("pre");const Gb=["fontWeight","fontStyle","color","fontSize","fontFamily"],L2=(t,o)=>{const n=t.get(o);return Nt(n)?wr(n,s=>{return Ja(s)&&"span"===s.inline&&rt((i=s).styles)&&Bn(cr(i.styles),c=>zt(Gb,c));var i}):$.none()},P1=(t,o)=>B(o,qe.fromRangeStart(t)).isNone(),I2=(t,o)=>!1===_(o,qe.fromRangeEnd(t)).exists(n=>!Ln(n.getNode())||_(o,n).isSome()),cS=t=>o=>Md(o)&&t.isEditable(o),Fh=t=>Vt(t.getSelectedBlocks(),cS(t.dom)),Kb=wt.each,Yb=t=>Wt(t)&&!vt(t)&&!Q(t)&&!Aa(t),F1=(t,o)=>{for(let n=t;n;n=n[o]){if(pt(n)&&_n(n.data))return t;if(Wt(n)&&!vt(n))return n}return t},Qm=(t,o,n)=>{const s=Ph(t),i=wl(o)&&t.dom.isEditable(o),c=wl(n)&&t.dom.isEditable(n);if(i&&c){const d=F1(o,"previousSibling"),u=F1(n,"nextSibling");if(s.compare(d,u)){for(let h=d.nextSibling;h&&h!==u;){const v=h;h=h.nextSibling,d.appendChild(v)}return t.dom.remove(u),wt.each(wt.grep(u.childNodes),h=>{d.appendChild(h)}),d}}return n},dS=(t,o,n,s)=>{var i;if(s&&!1!==o.merge_siblings){const c=null!==(i=Qm(t,Ym(s),s))&&void 0!==i?i:s;Qm(t,c,Ym(c,!0))}},uS=(t,o,n)=>{Kb(t.childNodes,s=>{Yb(s)&&(o(s)&&n(s),s.hasChildNodes()&&uS(s,o,n))})},mS=(t,o)=>n=>!(!n||!Si(t,n,o)),gS=(t,o,n)=>s=>{var i,c;t.setStyle(s,o,n),""===s.getAttribute("style")&&s.removeAttribute("style"),i=t,"SPAN"===(c=s).nodeName&&0===i.getAttribs(c).length&&i.remove(c,!0)},eg=Ic([{keep:[]},{rename:["name"]},{removed:[]}]),Nu=/^(src|href|style)$/,Xb=wt.each,Vh=dC,pS=(t,o,n)=>t.isChildOf(o,n)&&o!==n&&!t.isBlock(n),z_=(t,o,n)=>{let s=o[n?"startContainer":"endContainer"],i=o[n?"startOffset":"endOffset"];if(Wt(s)){const c=s.childNodes.length-1;!n&&i&&i--,s=s.childNodes[i>c?c:i]}return pt(s)&&n&&i>=s.data.length&&(s=new tr(s,t.getBody()).next()||s),pt(s)&&!n&&0===i&&(s=new tr(s,t.getBody()).prev()||s),s},hS=(t,o)=>{const n=o?"firstChild":"lastChild",s=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&s?"TR"===t.nodeName&&s[n]||s:t},H2=(t,o,n,s)=>{var i;const c=t.create(n,s);return null===(i=o.parentNode)||void 0===i||i.insertBefore(c,o),c.appendChild(o),c},P2=(t,o,n,s,i)=>{const c=ve(o),d=ve(t.create(s,i)),u=n?ct(c):Ge(c);return K(d,u),n?(pa(c,d),Zr(d,c)):(Fl(c,d),F(d,c)),d.dom},fS=(t,o,n)=>{const s=o.parentNode;let i;const c=t.dom,d=za(t);var u;bn(n)&&s===c.getRoot()&&(n.list_block&&Vh(o,n.list_block)||Ue(fr(o.childNodes),u=>{Th(t,d,u.nodeName.toLowerCase())?i?i.appendChild(u):(i=H2(c,u,d),c.setAttribs(i,Yi(t))):i=null})),hd(u=n)&&Ja(u)&&Mi(wn(u,"mixed"),!0)&&!Vh(n.inline,o)||c.remove(o,!0)},V1=(t,o,n)=>Ae(t)?{name:o,value:null}:{name:t,value:Qg(o,n)},bS=(t,o)=>{""===t.getAttrib(o,"style")&&(o.removeAttribute("style"),o.removeAttribute("data-mce-style"))},vS=(t,o,n,s,i)=>{let c=!1;Xb(n.styles,(d,u)=>{const{name:h,value:v}=V1(u,d,s),y=ql(v,h);(n.remove_similar||Wr(v)||!Wt(i)||Vh(Si(t,i,h),y))&&t.setStyle(o,h,""),c=!0}),c&&bS(t,o)},yS=(t,o,n,s,i)=>{const c=t.dom,d=Ph(t),u=t.schema;if(Ja(o)&&Zp(u,o.inline)&&nd(u,s)&&s.parentElement===t.getBody())return fS(t,s,o),eg.removed();if(!o.ceFalseOverride&&s&&"false"===c.getContentEditableParent(s)||s&&!Wb(c,s,o)&&(!o.links||"A"!==s.nodeName))return eg.keep();const h=s,v=o.preserve_attributes;if(Ja(o)&&"all"===o.remove&&Nt(v)){const y=Vt(c.getAttribs(h),C=>zt(v,C.name.toLowerCase()));if(c.removeAllAttribs(h),Ue(y,C=>c.setAttrib(h,C.name,C.value)),y.length>0)return eg.rename("span")}if("all"!==o.remove){vS(c,h,o,n,i),Xb(o.attributes,(C,E)=>{const{name:R,value:T}=V1(E,C,n);if(o.remove_similar||Wr(T)||!Wt(i)||Vh(c.getAttrib(i,R),T)){if("class"===R){const I=c.getAttrib(h,R);if(I){let N="";if(Ue(I.split(/\s+/),H=>{/mce\-\w+/.test(H)&&(N+=(N?" ":"")+H)}),N)return void c.setAttrib(h,R,N)}}if(Nu.test(R)&&h.removeAttribute("data-mce-"+R),"style"===R&&Ec(["li"])(h)&&"none"===c.getStyle(h,"list-style-type"))return h.removeAttribute(R),void c.setStyle(h,"list-style-type","none");"class"===R&&h.removeAttribute("className"),h.removeAttribute(R)}}),Xb(o.classes,C=>{C=Qg(C,n),Wt(i)&&!c.hasClass(i,C)||c.removeClass(h,C)});const y=c.getAttribs(h);for(let C=0;C<y.length;C++)if(!d.isAttributeInternal(y[C].nodeName))return eg.keep()}return"none"!==o.remove?(fS(t,h,o),eg.removed()):eg.keep()},WA=(t,o,n,s)=>yS(t,o,n,s,s).fold(Ke(s),i=>(t.dom.createFragment().appendChild(s),t.dom.rename(s,i)),Ke(null)),F2=(t,o,n,s,i)=>{(s||t.selection.isEditable())&&((c,d,u,h,v)=>{const y=c.formatter.get(d),C=y[0],E=c.dom,R=c.selection,T=U=>{const J=((Y,ge,Ee,Ne,Me)=>{let Fe;return ge.parentNode&&Ue(Fy(Y.dom,ge.parentNode).reverse(),ye=>{if(!Fe&&Wt(ye)&&"_start"!==ye.id&&"_end"!==ye.id){const Te=Au(Y,ye,Ee,Ne,Me);Te&&!1!==Te.split&&(Fe=ye)}}),Fe})(c,U,d,u,v);return((Y,ge,Ee,Ne,Me,Fe,ye,Te)=>{var Be,tt;let Zt,Mt;const mo=Y.dom;if(Ee){const co=Ee.parentNode;for(let Mo=Ne.parentNode;Mo&&Mo!==co;Mo=Mo.parentNode){let So=mo.clone(Mo,!1);for(let $t=0;$t<ge.length&&(So=WA(Y,ge[$t],Te,So),null!==So);$t++);So&&(Zt&&So.appendChild(Zt),Mt||(Mt=So),Zt=So)}ye.mixed&&mo.isBlock(Ee)||(Ne=null!==(Be=mo.split(Ee,Ne))&&void 0!==Be?Be:Ne),Zt&&Mt&&(null===(tt=Me.parentNode)||void 0===tt||tt.insertBefore(Zt,Me),Mt.appendChild(Me),Ja(ye)&&dS(Y,ye,0,Zt))}return Ne})(c,y,J,U,U,0,C,u)},I=U=>Bn(y,J=>Ru(c,J,u,U,U)),N=U=>{const J=fr(U.childNodes),Y=I(U)||Bn(y,Ee=>Wb(E,U,Ee)),ge=U.parentNode;if(!Y&&ie(ge)&&hb(C)&&I(ge),C.deep&&J.length)for(let Ee=0;Ee<J.length;Ee++)N(J[Ee]);Ue(["underline","line-through","overline"],Ee=>{Wt(U)&&c.dom.getStyle(U,"text-decoration")===Ee&&U.parentNode&&Oh(E,U.parentNode)===Ee&&Ru(c,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ee}},void 0,U)})},H=U=>{const J=E.get(U?"_start":"_end");if(J){let Y=J[U?"firstChild":"lastChild"];return vt(ge=Y)&&Wt(ge)&&("_start"===ge.id||"_end"===ge.id)&&(Y=Y[U?"firstChild":"lastChild"]),pt(Y)&&0===Y.data.length&&(Y=U?J.previousSibling||J.nextSibling:J.nextSibling||J.previousSibling),E.remove(J,!0),Y}var ge;return null},z=U=>{let J,Y,ge=ep(E,U,y,U.collapsed);if(C.split){if(ge=Dh(ge),J=z_(c,ge,!0),Y=z_(c,ge),J!==Y){if(J=hS(J,!0),Y=hS(Y,!1),pS(E,J,Y)){const Ne=$.from(J.firstChild).getOr(J);return T(P2(E,Ne,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void H(!0)}if(pS(E,Y,J)){const Ne=$.from(Y.lastChild).getOr(Y);return T(P2(E,Ne,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void H(!1)}J=H2(E,J,"span",{id:"_start","data-mce-type":"bookmark"}),Y=H2(E,Y,"span",{id:"_end","data-mce-type":"bookmark"});const Ee=E.createRng();Ee.setStartAfter(J),Ee.setEndBefore(Y),_1(E,Ee,Ne=>{Ue(Ne,Me=>{vt(Me)||vt(Me.parentNode)||T(Me)})}),T(J),T(Y),J=H(!0),Y=H()}else J=Y=T(J);ge.startContainer=J.parentNode?J.parentNode:J,ge.startOffset=E.nodeIndex(J),ge.endContainer=Y.parentNode?Y.parentNode:Y,ge.endOffset=E.nodeIndex(Y)+1}_1(E,ge,Ee=>{Ue(Ee,N)})};if(h){if(Tu(h)){const U=E.createRng();U.setStartBefore(h),U.setEndAfter(h),z(U)}else z(h);E1(c,d,h,u)}else R.isCollapsed()&&Ja(C)&&!Go(c).length?((t,o,n,s)=>{const i=t.dom,c=t.selection;let d=!1;const u=t.formatter.get(o);if(!u)return;const h=c.getRng(),v=h.startContainer,y=h.startOffset;let C=v;pt(v)&&(y!==v.data.length&&(d=!0),C=C.parentNode);const E=[];let R;for(;C;){if(Au(t,C,o,n,s)){R=C;break}C.nextSibling&&(d=!0),E.push(C),C=C.parentNode}if(R)if(d){const T=c.getBookmark();h.collapse(!0);let I=ep(i,h,u,!0);I=Dh(I),t.formatter.remove(o,n,I,s),c.moveToBookmark(T)}else{const T=de(t.getBody(),R),I=ie(T)?i.getParents(R.parentNode,zn,T):[],N=R2(!1).dom;((U,J,Y)=>{var ge,Ee;const Ne=U.dom,Me=Ne.getParent(Y,at(lC,U.schema));Me&&Ne.isEmpty(Me)?null===(ge=Y.parentNode)||void 0===ge||ge.replaceChild(J,Y):((Fe=>{const ye=er(Fe,"br"),Te=Vt((Be=>{const tt=[];let Zt=Be.dom;for(;Zt;)tt.push(ve(Zt)),Zt=Zt.lastChild;return tt})(Fe).slice(-1),Sl);ye.length===Te.length&&Ue(Te,_e)})(ve(Y)),Ne.isEmpty(Y)?null===(Ee=Y.parentNode)||void 0===Ee||Ee.replaceChild(J,Y):Ne.insertAfter(J,Y))})(t,N,T??R);const H=((U,J,Y,ge,Ee,Ne)=>{const Me=U.formatter,Fe=U.dom,ye=Vt(cr(Me.get()),Be=>Be!==ge&&!Lt(Be,"removeformat")),Te=(Be=U,tt=Y,lr(ye,(Mt,mo)=>{const co=uC(Be,mo,$t=>{const oo=Wo=>ht(Wo)||Wo.length>1&&"%"===Wo.charAt(0);return Bn(["styles","attributes"],Wo=>wn($t,Wo).exists(ke=>{const Oe=Nt(ke)?ke:Ot(ke);return Bn(Oe,oo)}))});return Be.formatter.matchNode(tt,mo,{},co)?Mt.concat([mo]):Mt},[]));var Be,tt;if(Vt(Te,Be=>!((tt,Zt,Mt)=>{const mo=["inline","block","selector","attributes","styles","classes"],co=Mo=>ws(Mo,(So,$t)=>Bn(mo,oo=>oo===$t));return uC(tt,Zt,Mo=>{const So=co(Mo);return uC(tt,Mt,$t=>{const oo=co($t);return((Wo,ke,Oe=Zo)=>da(Oe).eq(Wo,ke))(So,oo)})})})(U,Be,ge)).length>0){const Be=Y.cloneNode(!1);return Fe.add(J,Be),Me.remove(ge,Ee,Be,Ne),Fe.remove(Be),$.some(Be)}return $.none()})(t,N,R,o,n,s),z=iS([...E,...H.toArray(),...I],N);T&&M2(t,T,ie(T)),c.setCursorLocation(z,1),i.isEmpty(R)&&i.remove(R)}})(c,d,u,v):(Jg(c,()=>ra(c,z),U=>Ja(C)&&A2(c,d,u,U)),c.nodeChanged()),U=c,Y=u,"removeformat"===(J=d)?Ue(Fh(U.selection),ge=>{Ue(Gb,Ee=>U.dom.setStyle(ge,Ee,"")),bS(U.dom,ge)}):L2(U.formatter,J).each(ge=>{Ue(Fh(U.selection),Ee=>vS(U.dom,Ee,ge,Y,null))}),E1(c,d,h,u);var U,J,Y})(t,o,n,s,i)},Ru=(t,o,n,s,i)=>yS(t,o,n,s,i).fold(Do,c=>(t.dom.rename(s,c),!0),zn),Z_=wt.each,V2=wt.each,Jb=(t,o,n,s)=>{if(V2(n.styles,(i,c)=>{t.setStyle(o,c,Qg(i,s))}),n.styles){const i=t.getAttrib(o,"style");i&&t.setAttrib(o,"data-mce-style",i)}},U_=(t,o,n,s)=>{const i=t.formatter.get(o),c=i[0],d=!s&&t.selection.isCollapsed(),u=t.dom,h=t.selection,v=(T,I=c)=>{ht(I.onformat)&&I.onformat(T,I,n,s),Jb(u,T,I,n),V2(I.attributes,(N,H)=>{u.setAttrib(T,H,Qg(N,n))}),V2(I.classes,N=>{const H=Qg(N,n);u.hasClass(T,H)||u.addClass(T,H)})},y=(T,I)=>{let N=!1;return V2(T,H=>!(!hd(H)||("false"!==u.getContentEditable(I)||H.ceFalseOverride)&&(!ie(H.collapsed)||H.collapsed===d)&&u.is(I,H.selector)&&!Q(I)&&(v(I,H),N=!0,1))),N},E=(T,I,N)=>{const H=[];let z=!0;const U=c.inline||c.block,J=(T=>{if(Xt(T)){const I=u.create(T);return v(I),I}return null})(U);_1(T,I,Y=>{let ge;const Ee=Ne=>{let Me=!1,Fe=z,ye=!1;const Te=Ne.parentNode,Be=Te.nodeName.toLowerCase(),tt=T.getContentEditable(Ne);ie(tt)&&(Fe=z,z="true"===tt,Me=!0,ye=cC(t,Ne));const Zt=z&&!Me;if(Ln(Ne)&&!((Mt,mo,co,Mo)=>{if(jd(Mt)&&Ja(mo)&&co.parentNode){const So=Jt(Mt.schema),$t=((t,o)=>((n,s)=>{const i=n.dom;return i.parentNode?(c=ve(i.parentNode),wr(c.dom.childNodes,u=>(c=>!$n(n,c)&&s(c))(ve(u))).map(ve)):$.none();var c})(t,o).isSome())(ve(co),oo=>Q(oo.dom));return ns(So,Mo)&&Ss(ve(co.parentNode),!1)&&!$t}return!1})(t,c,Ne,Be))return ge=null,void(bn(c)&&T.remove(Ne));if(Mt=Ne,bn(mo=c)&&!0===mo.wrapper&&Au(t,Mt,o,n))ge=null;else{if(((Mt,mo,co)=>{const Mo=bn(So=c)&&!0!==So.wrapper&&lC(t.schema,Mt)&&Th(t,mo,U);var So;return co&&Mo})(Ne,Be,Zt)){const Mt=T.rename(Ne,U);return v(Mt),H.push(Mt),void(ge=null)}if(hd(c)){let Mt=y(i,Ne);if(!Mt&&ie(Te)&&hb(c)&&(Mt=y(i,Te)),!Ja(c)||Mt)return void(ge=null)}ie(J)&&((Mt,mo,co,Mo)=>{const So=Mt.nodeName.toLowerCase(),$t=Th(t,U,So)&&Th(t,mo,U),oo=!N&&pt(Mt)&&ed(Mt.data),Wo=Q(Mt),ke=!Ja(c)||!T.isBlock(Mt);return(co||Mo)&&$t&&!oo&&!Wo&&ke})(Ne,Be,Zt,ye)?(ge||(ge=T.clone(J,!1),Te.insertBefore(ge,Ne),H.push(ge)),ye&&Me&&(z=Fe),ge.appendChild(Ne)):(ge=null,Ue(fr(Ne.childNodes),Ee),Me&&(z=Fe),ge=null)}var Mt,mo};Ue(Y,Ee)}),!0===c.links&&Ue(H,Y=>{const ge=Ee=>{"A"===Ee.nodeName&&v(Ee,c),Ue(fr(Ee.childNodes),ge)};ge(Y)}),Ue(H,Y=>{const ge=(Ee=>{let Ne=0;return Ue(Ee.childNodes,Me=>{var Fe;ie(Fe=Me)&&pt(Fe)&&0===Fe.length||vt(Me)||Ne++}),Ne})(Y);var Ee;!(H.length>1)&&T.isBlock(Y)||0!==ge?(Ja(c)||bn(c)&&c.wrapper)&&(c.exact||1!==ge||(Y=wr((Ee=Y).childNodes,Km).filter(Me=>"false"!==T.getContentEditable(Me)&&Wb(T,Me,c)).map(Me=>{const Fe=T.clone(Me,!1);return v(Fe),T.replace(Fe,Ee,!0),T.remove(Me,!0),Fe}).getOr(Ee)),((Ee,Ne,Me,Fe)=>{Z_(Ne,ye=>{var Te,Be,tt;Ja(ye)&&Z_(Ee.dom.select(ye.inline,Fe),Te=>{Yb(Te)&&Ru(Ee,ye,Me,Te,ye.exact?Te:null)}),Te=Ee.dom,tt=Fe,(Be=ye).clear_child_styles&&Kb(Te.select(Be.links?"*:not(a)":"*",tt),Mt=>{Yb(Mt)&&Te.isEditable(Mt)&&Kb(Be.styles,(mo,co)=>{Te.setStyle(Mt,co,"")})})})})(t,i,n,Y),((Ee,Ne,Me,Fe,ye)=>{const Te=ye.parentNode;Au(Ee,Te,Me,Fe)&&Ru(Ee,Ne,Fe,ye)||Ne.merge_with_parents&&Te&&Ee.dom.getParent(Te,Be=>!!Au(Ee,Be,Me,Fe)&&(Ru(Ee,Ne,Fe,ye),!0))})(t,c,o,n,Y),((Ee,Ne,Me,Fe)=>{if(Ne.styles&&Ne.styles.backgroundColor){const ye=mS(Ee,"fontSize");uS(Fe,Te=>ye(Te)&&Ee.isEditable(Te),gS(Ee,"backgroundColor",Qg(Ne.styles.backgroundColor,Me)))}})(T,c,n,Y),((Ee,Ne,Me,Fe)=>{const ye=Te=>{if(wl(Te)&&Wt(Te.parentNode)&&Ee.isEditable(Te)){const Be=Oh(Ee,Te.parentNode);Ee.getStyle(Te,"color")&&Be?Ee.setStyle(Te,"text-decoration",Be):Ee.getStyle(Te,"text-decoration")===Be&&Ee.setStyle(Te,"text-decoration",null)}};Ne.styles&&(Ne.styles.color||Ne.styles.textDecoration)&&(wt.walk(Fe,ye,"childNodes"),ye(Fe))})(T,c,0,Y),((Ee,Ne,Me,Fe)=>{if(Ja(Ne)&&("sub"===Ne.inline||"sup"===Ne.inline)){const ye=mS(Ee,"fontSize");uS(Fe,Be=>ye(Be)&&Ee.isEditable(Be),gS(Ee,"fontSize",""));const Te=Vt(Ee.select("sup"===Ne.inline?"sub":"sup",Fe),Ee.isEditable);Ee.remove(Te,!0)}})(T,c,0,Y),dS(t,c,0,Y)):T.remove(Y,!0)})},R=Tu(s)?s:h.getNode();if("false"===u.getContentEditable(R)&&!cC(t,R))return y(i,s=R),void vb(t,o,s,n);if(c){if(s)if(Tu(s)){if(!y(i,s)){const T=u.createRng();T.setStartBefore(s),T.setEndAfter(s),E(u,ep(u,T,i),!0)}}else E(u,s,!0);else d&&Ja(c)&&!Go(t).length?((T,I,N)=>{let H;const z=T.selection,U=T.formatter.get(I);if(!U)return;const J=z.getRng();let Y=J.startOffset;const ge=J.startContainer.nodeValue;H=de(T.getBody(),z.getStart());const Ee=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(ge&&Y>0&&Y<ge.length&&Ee.test(ge.charAt(Y))&&Ee.test(ge.charAt(Y-1))){const Fe=z.getBookmark();J.collapse(!0);let ye=ep(T.dom,J,U);ye=Dh(ye),T.formatter.apply(I,N,ye),z.moveToBookmark(Fe)}else{let Fe=H?N2(H):null;H&&Fe?.data===H1||(Ne=T.getDoc(),Me=R2(!0).dom,H=Ne.importNode(Me,!0),Fe=H.firstChild,J.insertNode(H),Y=1),T.formatter.apply(I,N,H),z.setCursorLocation(Fe,Y)}var Ne,Me})(t,o,n):(h.setRng(C2(h.getRng())),Jg(t,()=>{ra(t,(T,I)=>{const N=I?T:ep(u,T,i);E(u,N,!1)})},zn),t.nodeChanged()),L2(t.formatter,o).each(T=>{var I;Ue(Vt((N=>{const H=N.getSelectedBlocks(),z=N.getRng();if(N.isCollapsed())return[];if(1===H.length)return P1(z,H[0])&&I2(z,H[0])?H:[];{const U=Nn(H).filter(ge=>P1(z,ge)).toArray(),J=Zn(H).filter(ge=>I2(z,ge)).toArray(),Y=H.slice(1,-1);return U.concat(Y).concat(J)}})(I=t.selection),cS(I.dom)),I=>Jb(u,I,T,n))});I=t,wo(dp,T=o)&&Ue(dp[T],N=>{N(I)})}var T,I;vb(t,o,s,n)},wS=(t,o,n,s)=>{(s||t.selection.isEditable())&&U_(t,o,n,s)},j_=t=>wo(t,"vars"),xS=t=>t.selection.getStart(),up=(t,o,n,s,i)=>qa(o,c=>{const d=t.formatter.matchNode(c,n,i??{},s);return!Bt(d)},c=>!!rS(t,c,n)||!s&&ie(t.formatter.matchNode(c,n,i,!0))),CS=(t,o)=>{const n=o??xS(t);return Vt(Fy(t.dom,n),s=>Wt(s)&&!Aa(s))},SS=(t,o,n)=>{const s=CS(t,o);Po(n,(i,c)=>{const d=u=>{const h=up(t,s,c,u.similar,j_(u)?u.vars:void 0),v=h.isSome();if(u.state.get()!==v){u.state.set(v);const y=h.getOr(o);j_(u)?u.callback(v,{node:y,format:c,parents:s}):Ue(u.callbacks,C=>C(v,{node:y,format:c,parents:s}))}};Ue([i.withSimilar,i.withoutSimilar],d),Ue(i.withVars,d)})},kS=wt.explode,Qb=()=>{const t={};return{addFilter:(o,n)=>{Ue(kS(o),s=>{wo(t,s)||(t[s]={name:s,callbacks:[]}),t[s].callbacks.push(n)})},getFilters:()=>Ot(t),removeFilter:(o,n)=>{Ue(kS(o),s=>{if(wo(t,s))if(ie(n)){const i=t[s],c=Vt(i.callbacks,d=>d!==n);c.length>0?i.callbacks=c:delete t[s]}else delete t[s]})}}},_S=(t,o,n)=>{o.addNodeFilter("br",(s,i,c)=>{const d=wt.extend({},n.getBlockElements()),u=n.getNonEmptyElements(),h=n.getWhitespaceElements();d.body=1;const v=y=>y.name in d||Am(n,y);for(let y=0,C=s.length;y<C;y++){let E=s[y],R=E.parent;if(R&&v(R)&&E===R.lastChild){let T=E.prev;for(;T;){const I=T.name;if("span"!==I||"bookmark"!==T.attr("data-mce-type")){"br"===I&&(E=null);break}T=T.prev}if(E&&(E.remove(),cp(n,u,h,R))){const I=n.getElementRule(R.name);I&&(I.removeEmpty?R.remove():I.paddEmpty&&Ub(t,c,v,R))}}else{let T=E;for(;R&&R.firstChild===T&&R.lastChild===T&&(T=R,!d[R.name]);)R=R.parent;if(T===R){const I=new Kt("#text",3);I.value=Hs,E.replace(I)}}}})},ES=t=>{const[o,...n]=t.split(","),s=n.join(","),i=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(i){const c=";base64"===i[2],d=c?(u=>{const h=/([a-z0-9+\/=\s]+)/i.exec(u);return h?h[1]:""})(s):decodeURIComponent(s);return $.some({type:i[1],data:d,base64Encoded:c})}return $.none()},ev=(t,o,n=!0)=>{let s=o;if(n)try{s=atob(o)}catch{return $.none()}const i=new Uint8Array(s.length);for(let c=0;c<i.length;c++)i[c]=s.charCodeAt(c);return $.some(new Blob([i],{type:t}))},TS=t=>new Promise((o,n)=>{const s=new FileReader;s.onloadend=()=>{o(s.result)},s.onerror=()=>{var i;n(null===(i=s.error)||void 0===i?void 0:i.message)},s.readAsDataURL(t)});let OS=0;const AS=(t,o,n)=>ES(t).bind(({data:s,type:i,base64Encoded:c})=>{if(o&&!c)return $.none();{const d=c?s:btoa(s);return n(d,i)}}),z2=(t,o,n)=>{const s=t.create("blobid"+OS++,o,n);return t.add(s),s},NS=(t,o,n=!1)=>AS(o,n,(s,i)=>$.from(t.getByData(s,i)).orThunk(()=>ev(i,s).map(c=>z2(t,c,s)))),z1=(t,o)=>Pt(t,`${o}/`),{entries:$_,setPrototypeOf:Z2,isFrozen:sa,getPrototypeOf:RS,getOwnPropertyDescriptor:MS}=Object;let{freeze:Qa,seal:Kd,create:q_}=Object,{apply:zh,construct:DS}=typeof Reflect<"u"&&Reflect;zh||(zh=function(t,o,n){return t.apply(o,n)}),Qa||(Qa=function(t){return t}),Kd||(Kd=function(t){return t}),DS||(DS=function(t,o){return new t(...o)});const $A=Yd(Array.prototype.forEach),Z1=Yd(Array.prototype.pop),tv=Yd(Array.prototype.push),lm=Yd(String.prototype.toLowerCase),BS=Yd(String.prototype.toString),mp=Yd(String.prototype.match),ei=Yd(String.prototype.replace),U2=Yd(String.prototype.indexOf),LS=Yd(String.prototype.trim),yd=Yd(RegExp.prototype.test),ov=(nv=TypeError,function(){for(var t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return DS(nv,o)});var nv;function Yd(t){return function(o){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return zh(t,o,s)}}function jn(t,o,n){var s;n=null!==(s=n)&&void 0!==s?s:lm,Z2&&Z2(t,null);let i=o.length;for(;i--;){let c=o[i];if("string"==typeof c){const d=n(c);d!==c&&(sa(o)||(o[i]=d),c=d)}t[c]=!0}return t}function og(t){const o=q_(null);for(const[n,s]of $_(t))o[n]=s;return o}function rv(t,o){for(;null!==t;){const n=MS(t,o);if(n){if(n.get)return Yd(n.get);if("function"==typeof n.value)return Yd(n.value)}t=RS(t)}return function(n){return console.warn("fallback value for",n),null}}const j2=Qa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sv=Qa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ng=Qa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),IS=Qa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),W2=Qa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qA=Qa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),U1=Qa(["#text"]),G_=Qa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),$2=Qa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q2=Qa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),G2=Qa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K_=Kd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y_=Kd(/<%[\w\W]*|[\w\W]*%>/gm),GA=Kd(/\${[\w\W]*}/gm),KA=Kd(/^data-[\-\w.\u00B7-\uFFFF]/),YA=Kd(/^aria-[\-\w]+$/),X_=Kd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),XA=Kd(/^(?:\w+script|data):/i),JA=Kd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J_=Kd(/^html$/i);var Q_=Object.freeze({__proto__:null,MUSTACHE_EXPR:K_,ERB_EXPR:Y_,TMPLIT_EXPR:GA,DATA_ATTR:KA,ARIA_ATTR:YA,IS_ALLOWED_URI:X_,IS_SCRIPT_OR_DATA:XA,ATTR_WHITESPACE:JA,DOCTYPE_NAME:J_}),eE=function t(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=je=>t(je);if(n.version="3.0.5",n.removed=[],!o||!o.document||9!==o.document.nodeType)return n.isSupported=!1,n;const s=o.document,i=s.currentScript;let{document:c}=o;const{DocumentFragment:d,HTMLTemplateElement:u,Node:h,Element:v,NodeFilter:y,NamedNodeMap:C=o.NamedNodeMap||o.MozNamedAttrMap,HTMLFormElement:E,DOMParser:R,trustedTypes:T}=o,I=v.prototype,N=rv(I,"cloneNode"),H=rv(I,"nextSibling"),z=rv(I,"childNodes"),U=rv(I,"parentNode");if("function"==typeof u){const je=c.createElement("template");je.content&&je.content.ownerDocument&&(c=je.content.ownerDocument)}let J,Y="";const{implementation:ge,createNodeIterator:Ee,createDocumentFragment:Ne,getElementsByTagName:Me}=c,{importNode:Fe}=s;let ye={};n.isSupported="function"==typeof $_&&"function"==typeof U&&ge&&void 0!==ge.createHTMLDocument;const{MUSTACHE_EXPR:Te,ERB_EXPR:Be,TMPLIT_EXPR:tt,DATA_ATTR:Zt,ARIA_ATTR:Mt,IS_SCRIPT_OR_DATA:mo,ATTR_WHITESPACE:co}=Q_;let{IS_ALLOWED_URI:Mo}=Q_,So=null;const $t=jn({},[...j2,...sv,...ng,...W2,...U1]);let oo=null;const Wo=jn({},[...G_,...$2,...q2,...G2]);let ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Oe=null,it=null,mt=!0,ft=!0,ro=!1,To=!0,Yo=!1,Ho=!1,Jr=!1,lo=!1,Cn=!1,Mn=!1,nn=!1,Vn=!0,ti=!1,ko=!0,Dn=!1,Ts={},oi=null;const Ei=jn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ul=null;const xc=jn({},["audio","video","img","source","image","track"]);let Ti=null;const Cc=jn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ni="http://www.w3.org/1998/Math/MathML",bm="http://www.w3.org/2000/svg",Ed="http://www.w3.org/1999/xhtml";let eu=Ed,Dp=!1,pf=null;const hf=jn({},[ni,bm,Ed],BS);let ec;const Ux=["application/xhtml+xml","text/html"];let Zs,Fu=null;const Bp=c.createElement("form"),w0=function(je){return je instanceof RegExp||je instanceof Function},w3=function(je){if(!Fu||Fu!==je){if(je&&"object"==typeof je||(je={}),je=og(je),ec=ec=-1===Ux.indexOf(je.PARSER_MEDIA_TYPE)?"text/html":je.PARSER_MEDIA_TYPE,Zs="application/xhtml+xml"===ec?BS:lm,So="ALLOWED_TAGS"in je?jn({},je.ALLOWED_TAGS,Zs):$t,oo="ALLOWED_ATTR"in je?jn({},je.ALLOWED_ATTR,Zs):Wo,pf="ALLOWED_NAMESPACES"in je?jn({},je.ALLOWED_NAMESPACES,BS):hf,Ti="ADD_URI_SAFE_ATTR"in je?jn(og(Cc),je.ADD_URI_SAFE_ATTR,Zs):Cc,ul="ADD_DATA_URI_TAGS"in je?jn(og(xc),je.ADD_DATA_URI_TAGS,Zs):xc,oi="FORBID_CONTENTS"in je?jn({},je.FORBID_CONTENTS,Zs):Ei,Oe="FORBID_TAGS"in je?jn({},je.FORBID_TAGS,Zs):{},it="FORBID_ATTR"in je?jn({},je.FORBID_ATTR,Zs):{},Ts="USE_PROFILES"in je&&je.USE_PROFILES,mt=!1!==je.ALLOW_ARIA_ATTR,ft=!1!==je.ALLOW_DATA_ATTR,ro=je.ALLOW_UNKNOWN_PROTOCOLS||!1,To=!1!==je.ALLOW_SELF_CLOSE_IN_ATTR,Yo=je.SAFE_FOR_TEMPLATES||!1,Ho=je.WHOLE_DOCUMENT||!1,Cn=je.RETURN_DOM||!1,Mn=je.RETURN_DOM_FRAGMENT||!1,nn=je.RETURN_TRUSTED_TYPE||!1,lo=je.FORCE_BODY||!1,Vn=!1!==je.SANITIZE_DOM,ti=je.SANITIZE_NAMED_PROPS||!1,ko=!1!==je.KEEP_CONTENT,Dn=je.IN_PLACE||!1,Mo=je.ALLOWED_URI_REGEXP||X_,eu=je.NAMESPACE||Ed,ke=je.CUSTOM_ELEMENT_HANDLING||{},je.CUSTOM_ELEMENT_HANDLING&&w0(je.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=je.CUSTOM_ELEMENT_HANDLING.tagNameCheck),je.CUSTOM_ELEMENT_HANDLING&&w0(je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=je.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),je.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=je.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yo&&(ft=!1),Mn&&(Cn=!0),Ts&&(So=jn({},[...U1]),oo=[],!0===Ts.html&&(jn(So,j2),jn(oo,G_)),!0===Ts.svg&&(jn(So,sv),jn(oo,$2),jn(oo,G2)),!0===Ts.svgFilters&&(jn(So,ng),jn(oo,$2),jn(oo,G2)),!0===Ts.mathMl&&(jn(So,W2),jn(oo,q2),jn(oo,G2))),je.ADD_TAGS&&(So===$t&&(So=og(So)),jn(So,je.ADD_TAGS,Zs)),je.ADD_ATTR&&(oo===Wo&&(oo=og(oo)),jn(oo,je.ADD_ATTR,Zs)),je.ADD_URI_SAFE_ATTR&&jn(Ti,je.ADD_URI_SAFE_ATTR,Zs),je.FORBID_CONTENTS&&(oi===Ei&&(oi=og(oi)),jn(oi,je.FORBID_CONTENTS,Zs)),ko&&(So["#text"]=!0),Ho&&jn(So,["html","head","body"]),So.table&&(jn(So,["tbody"]),delete Oe.tbody),je.TRUSTED_TYPES_POLICY){if("function"!=typeof je.TRUSTED_TYPES_POLICY.createHTML)throw ov('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof je.TRUSTED_TYPES_POLICY.createScriptURL)throw ov('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=je.TRUSTED_TYPES_POLICY,Y=J.createHTML("")}else void 0===J&&(J=function(uo,zo){if("object"!=typeof uo||"function"!=typeof uo.createPolicy)return null;let _r=null;const Pr="data-tt-policy-suffix";zo&&zo.hasAttribute(Pr)&&(_r=zo.getAttribute(Pr));const Os="dompurify"+(_r?"#"+_r:"");try{return uo.createPolicy(Os,{createHTML:ls=>ls,createScriptURL:ls=>ls})}catch{return console.warn("TrustedTypes policy "+Os+" could not be created."),null}}(T,i)),null!==J&&"string"==typeof Y&&(Y=J.createHTML(""));Qa&&Qa(je),Fu=je}},x3=jn({},["mi","mo","mn","ms","mtext"]),x0=jn({},["foreignobject","desc","title","annotation-xml"]),lA=jn({},["title","style","font","a","script"]),jx=jn({},sv);jn(jx,ng),jn(jx,IS);const Wx=jn({},W2);jn(Wx,qA);const Lp=function(je){tv(n.removed,{element:je});try{je.parentNode.removeChild(je)}catch{je.remove()}},ny=function(je,uo){try{tv(n.removed,{attribute:uo.getAttributeNode(je),from:uo})}catch{tv(n.removed,{attribute:null,from:uo})}if(uo.removeAttribute(je),"is"===je&&!oo[je])if(Cn||Mn)try{Lp(uo)}catch{}else try{uo.setAttribute(je,"")}catch{}},cA=function(je){let uo,zo;if(lo)je="<remove></remove>"+je;else{const Os=mp(je,/^[\r\n\t ]+/);zo=Os&&Os[0]}"application/xhtml+xml"===ec&&eu===Ed&&(je='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+je+"</body></html>");const _r=J?J.createHTML(je):je;if(eu===Ed)try{uo=(new R).parseFromString(_r,ec)}catch{}if(!uo||!uo.documentElement){uo=ge.createDocument(eu,"template",null);try{uo.documentElement.innerHTML=Dp?Y:_r}catch{}}const Pr=uo.body||uo.documentElement;return je&&zo&&Pr.insertBefore(c.createTextNode(zo),Pr.childNodes[0]||null),eu===Ed?Me.call(uo,Ho?"html":"body")[0]:Ho?uo.documentElement:Pr},dA=function(je){return Ee.call(je.ownerDocument||je,je,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},$x=function(je){return"object"==typeof h?je instanceof h:je&&"object"==typeof je&&"number"==typeof je.nodeType&&"string"==typeof je.nodeName},vm=function(je,uo,zo){ye[je]&&$A(ye[je],_r=>{_r.call(n,uo,zo,Fu)})},qx=function(je){let uo;if(vm("beforeSanitizeElements",je,null),(zo=je)instanceof E&&("string"!=typeof zo.nodeName||"string"!=typeof zo.textContent||"function"!=typeof zo.removeChild||!(zo.attributes instanceof C)||"function"!=typeof zo.removeAttribute||"function"!=typeof zo.setAttribute||"string"!=typeof zo.namespaceURI||"function"!=typeof zo.insertBefore||"function"!=typeof zo.hasChildNodes))return Lp(je),!0;var zo;const _r=Zs(je.nodeName);if(vm("uponSanitizeElement",je,{tagName:_r,allowedTags:So}),je.hasChildNodes()&&!$x(je.firstElementChild)&&(!$x(je.content)||!$x(je.content.firstElementChild))&&yd(/<[/\w]/g,je.innerHTML)&&yd(/<[/\w]/g,je.textContent))return Lp(je),!0;if(!So[_r]||Oe[_r]){if(!Oe[_r]&&S3(_r)&&(ke.tagNameCheck instanceof RegExp&&yd(ke.tagNameCheck,_r)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(_r)))return!1;if(ko&&!oi[_r]){const Pr=U(je)||je.parentNode,Os=z(je)||je.childNodes;if(Os&&Pr)for(let ls=Os.length-1;ls>=0;--ls)Pr.insertBefore(N(Os[ls],!0),H(je))}return Lp(je),!0}return je instanceof v&&!function(Pr){let Os=U(Pr);Os&&Os.tagName||(Os={namespaceURI:eu,tagName:"template"});const ls=lm(Pr.tagName),ia=lm(Os.tagName);return!!pf[Pr.namespaceURI]&&(Pr.namespaceURI===bm?Os.namespaceURI===Ed?"svg"===ls:Os.namespaceURI===ni?"svg"===ls&&("annotation-xml"===ia||x3[ia]):!!jx[ls]:Pr.namespaceURI===ni?Os.namespaceURI===Ed?"math"===ls:Os.namespaceURI===bm?"math"===ls&&x0[ia]:!!Wx[ls]:Pr.namespaceURI===Ed?!(Os.namespaceURI===bm&&!x0[ia])&&!(Os.namespaceURI===ni&&!x3[ia])&&!Wx[ls]&&(lA[ls]||!jx[ls]):!("application/xhtml+xml"!==ec||!pf[Pr.namespaceURI]))}(je)?(Lp(je),!0):"noscript"!==_r&&"noembed"!==_r&&"noframes"!==_r||!yd(/<\/no(script|embed|frames)/i,je.innerHTML)?(Yo&&3===je.nodeType&&(uo=je.textContent,uo=ei(uo,Te," "),uo=ei(uo,Be," "),uo=ei(uo,tt," "),je.textContent!==uo&&(tv(n.removed,{element:je.cloneNode()}),je.textContent=uo)),vm("afterSanitizeElements",je,null),!1):(Lp(je),!0)},C3=function(je,uo,zo){if(Vn&&("id"===uo||"name"===uo)&&(zo in c||zo in Bp))return!1;if((!ft||it[uo]||!yd(Zt,uo))&&(!mt||!yd(Mt,uo)))if(!oo[uo]||it[uo]){if(!(S3(je)&&(ke.tagNameCheck instanceof RegExp&&yd(ke.tagNameCheck,je)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(je))&&(ke.attributeNameCheck instanceof RegExp&&yd(ke.attributeNameCheck,uo)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(uo))||"is"===uo&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&yd(ke.tagNameCheck,zo)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(zo))))return!1}else if(!Ti[uo]&&!yd(Mo,ei(zo,co,""))&&("src"!==uo&&"xlink:href"!==uo&&"href"!==uo||"script"===je||0!==U2(zo,"data:")||!ul[je])&&(!ro||yd(mo,ei(zo,co,"")))&&zo)return!1;return!0},S3=function(je){return je.indexOf("-")>0},k3=function(je){let uo,zo,_r,Pr;vm("beforeSanitizeAttributes",je,null);const{attributes:Os}=je;if(!Os)return;const ls={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oo};for(Pr=Os.length;Pr--;){uo=Os[Pr];const{name:ia,namespaceURI:ff}=uo;zo="value"===ia?uo.value:LS(uo.value);const _3=zo;if(_r=Zs(ia),ls.attrName=_r,ls.attrValue=zo,ls.keepAttr=!0,ls.forceKeepAttr=void 0,vm("uponSanitizeAttribute",je,ls),zo=ls.attrValue,ls.forceKeepAttr)continue;if(!ls.keepAttr){ny(ia,je);continue}if(!To&&yd(/\/>/i,zo)){ny(ia,je);continue}Yo&&(zo=ei(zo,Te," "),zo=ei(zo,Be," "),zo=ei(zo,tt," "));const ry=Zs(je.nodeName);if(C3(ry,_r,zo)){if(!ti||"id"!==_r&&"name"!==_r||(ny(ia,je),zo="user-content-"+zo),J&&"object"==typeof T&&"function"==typeof T.getAttributeType&&!ff)switch(T.getAttributeType(ry,_r)){case"TrustedHTML":zo=J.createHTML(zo);break;case"TrustedScriptURL":zo=J.createScriptURL(zo)}if(zo!==_3)try{ff?je.setAttributeNS(ff,ia,zo):je.setAttribute(ia,zo)}catch{ny(ia,je)}}else ny(ia,je)}vm("afterSanitizeAttributes",je,null)},uA=function je(uo){let zo;const _r=dA(uo);for(vm("beforeSanitizeShadowDOM",uo,null);zo=_r.nextNode();)vm("uponSanitizeShadowNode",zo,null),qx(zo)||(zo.content instanceof d&&je(zo.content),k3(zo));vm("afterSanitizeShadowDOM",uo,null)};return n.sanitize=function(je){let uo,zo,_r,Pr,Os=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Dp=!je,Dp&&(je="\x3c!--\x3e"),"string"!=typeof je&&!$x(je)){if("function"!=typeof je.toString)throw ov("toString is not a function");if("string"!=typeof(je=je.toString()))throw ov("dirty is not a string, aborting")}if(!n.isSupported)return je;if(Jr||w3(Os),n.removed=[],"string"==typeof je&&(Dn=!1),Dn){if(je.nodeName){const ff=Zs(je.nodeName);if(!So[ff]||Oe[ff])throw ov("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof h)uo=cA("\x3c!----\x3e"),zo=uo.ownerDocument.importNode(je,!0),1===zo.nodeType&&"BODY"===zo.nodeName||"HTML"===zo.nodeName?uo=zo:uo.appendChild(zo);else{if(!Cn&&!Yo&&!Ho&&-1===je.indexOf("<"))return J&&nn?J.createHTML(je):je;if(uo=cA(je),!uo)return Cn?null:nn?Y:""}uo&&lo&&Lp(uo.firstChild);const ls=dA(Dn?je:uo);for(;_r=ls.nextNode();)qx(_r)||(_r.content instanceof d&&uA(_r.content),k3(_r));if(Dn)return je;if(Cn){if(Mn)for(Pr=Ne.call(uo.ownerDocument);uo.firstChild;)Pr.appendChild(uo.firstChild);else Pr=uo;return(oo.shadowroot||oo.shadowrootmode)&&(Pr=Fe.call(s,Pr,!0)),Pr}let ia=Ho?uo.outerHTML:uo.innerHTML;return Ho&&So["!doctype"]&&uo.ownerDocument&&uo.ownerDocument.doctype&&uo.ownerDocument.doctype.name&&yd(J_,uo.ownerDocument.doctype.name)&&(ia="<!DOCTYPE "+uo.ownerDocument.doctype.name+">\n"+ia),Yo&&(ia=ei(ia,Te," "),ia=ei(ia,Be," "),ia=ei(ia,tt," ")),J&&nn?J.createHTML(ia):ia},n.setConfig=function(je){w3(je),Jr=!0},n.clearConfig=function(){Fu=null,Jr=!1},n.isValidAttribute=function(je,uo,zo){Fu||w3({});const _r=Zs(je),Pr=Zs(uo);return C3(_r,Pr,zo)},n.addHook=function(je,uo){"function"==typeof uo&&(ye[je]=ye[je]||[],tv(ye[je],uo))},n.removeHook=function(je){if(ye[je])return Z1(ye[je])},n.removeHooks=function(je){ye[je]&&(ye[je]=[])},n.removeAllHooks=function(){ye={}},n}();const tE=wt.each,oE=wt.trim,e5=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],j1={ftp:21,http:80,https:443,mailto:25},t5=["img","video"],nE=(t,o,n)=>{const s=(i=>{try{return decodeURIComponent(i)}catch{return unescape(i)}})(o).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!t.allow_html_data_urls&&(/^data:image\//i.test(s)?(c=n,(ie(i=t.allow_svg_data_urls)?!i:!ie(c)||!zt(t5,c))&&/^data:image\/svg\+xml/i.test(s)):/^data:/i.test(s)));var i,c};class wd{static parseDataUri(o){let n;const s=decodeURIComponent(o).split(","),i=/data:([^;]+)/.exec(s[0]);return i&&(n=i[1]),{type:n,data:s[1]}}static isDomSafe(o,n,s={}){if(s.allow_script_urls)return!0;{const i=Gi.decode(o).replace(/[\s\u0000-\u001F]+/g,"");return!nE(s,i,n)}}static getDocumentBaseUrl(o){var n;let s;return s=0!==o.protocol.indexOf("http")&&"file:"!==o.protocol?null!==(n=o.href)&&void 0!==n?n:"":o.protocol+"//"+o.host+o.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(o,n={}){this.path="",this.directory="",o=oE(o),this.settings=n;const s=n.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(o)||/^\s*#/.test(o))return void(i.source=o);const c=0===o.indexOf("//");if(0!==o.indexOf("/")||c||(o=(s&&s.protocol||"http")+"://mce_host"+o),!/^[\w\-]*:?\/\//.test(o)){const u=s?s.path:new wd(document.location.href).directory;if(""===s?.protocol)o="//mce_host"+i.toAbsPath(u,o);else{const h=/([^#?]*)([#?]?.*)/.exec(o);h&&(o=(s&&s.protocol||"http")+"://mce_host"+i.toAbsPath(u,h[1])+h[2])}}o=o.replace(/@@/g,"(mce_at)");const d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);d&&tE(e5,(u,h)=>{let v=d[h];v&&(v=v.replace(/\(mce_at\)/g,"@@")),i[u]=v}),s&&(i.protocol||(i.protocol=s.protocol),i.userInfo||(i.userInfo=s.userInfo),i.port||"mce_host"!==i.host||(i.port=s.port),i.host&&"mce_host"!==i.host||(i.host=s.host),i.source=""),c&&(i.protocol="")}setPath(o){const n=/^(.*?)\/?(\w+)?$/.exec(o);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(o){if("./"===o)return o;const n=new wd(o,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const s=this.getURI(),i=n.getURI();if(s===i||"/"===s.charAt(s.length-1)&&s.substr(0,s.length-1)===i)return s;let c=this.toRelPath(this.path,n.path);return n.query&&(c+="?"+n.query),n.anchor&&(c+="#"+n.anchor),c}toAbsolute(o,n){const s=new wd(o,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(o){if(this.host==o.host&&this.protocol==o.protocol){if(this.port==o.port)return!0;const n=this.protocol?j1[this.protocol]:null;if(n&&(this.port||n)==(o.port||n))return!0}return!1}toRelPath(o,n){let s,i,c=0,d="";const u=o.substring(0,o.lastIndexOf("/")).split("/"),h=n.split("/");if(u.length>=h.length)for(s=0,i=u.length;s<i;s++)if(s>=h.length||u[s]!==h[s]){c=s+1;break}if(u.length<h.length)for(s=0,i=h.length;s<i;s++)if(s>=u.length||u[s]!==h[s]){c=s+1;break}if(1===c)return n;for(s=0,i=u.length-(c-1);s<i;s++)d+="../";for(s=c-1,i=h.length;s<i;s++)d+=s!==c-1?"/"+h[s]:h[s];return d}toAbsPath(o,n){let s=0;const i=/\/$/.test(n)?"/":"",c=o.split("/"),d=n.split("/"),u=[];tE(c,C=>{C&&u.push(C)});const h=[];for(let C=d.length-1;C>=0;C--)0!==d[C].length&&"."!==d[C]&&(".."!==d[C]?s>0?s--:h.push(d[C]):s++);const v=u.length-s;let y;return y=v<=0?nr(h).join("/"):u.slice(0,v).join("/")+"/"+nr(h).join("/"),0!==y.indexOf("/")&&(y="/"+y),i&&y.lastIndexOf("/")!==y.length-1&&(y+=i),y}getURI(o=!1){let n;return this.source&&!o||(n="",o||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const o5=wt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),HS="data-mce-type";let rE=0;const sE=(t,o,n,s,i)=>{var c,d,u,h;const v=o.validate,y=n.getSpecialElements();8===t.nodeType&&!o.allow_conditional_comments&&/^\[if/i.test(null!==(c=t.nodeValue)&&void 0!==c?c:"")&&(t.nodeValue=" "+t.nodeValue);const C=null!==(d=i?.tagName)&&void 0!==d?d:t.nodeName.toLowerCase();if("html"!==s&&n.isValid(s))return void(ie(i)&&(i.allowedTags[C]=!0));if(1!==t.nodeType||"body"===C)return;const E=ve(t),R=hl(E,HS),T=ss(E,"data-mce-bogus");if(!R&&Xt(T))return void("all"===T?_e(E):De(E));const I=n.getElementRule(C);if(!v||I){if(ie(i)&&(i.allowedTags[C]=!0),v&&I&&!R){if(Ue(null!==(u=I.attributesForced)&&void 0!==u?u:[],N=>{mr(E,N.name,"{$uid}"===N.value?"mce_"+rE++:N.value)}),Ue(null!==(h=I.attributesDefault)&&void 0!==h?h:[],N=>{hl(E,N.name)||mr(E,N.name,"{$uid}"===N.value?"mce_"+rE++:N.value)}),I.attributesRequired&&!Bn(I.attributesRequired,N=>hl(E,N))||I.removeEmptyAttrs&&(N=>{const H=N.dom.attributes;return null==H||0===H.length})(E))return void De(E);I.outputName&&I.outputName!==C&&((N,H)=>{const z=((J,Y)=>{const ge=vs(Y),Ee=ou(J);return Oa(ge,Ee),ge})(N,H);Fl(N,z);const U=xt(N);K(z,U),_e(N)})(E,I.outputName)}}else wo(y,C)?_e(E):De(E)},aE=(t,o,n,s,i,c)=>"html"!==n&&!Hd(s)||!(i in o5&&nE(t,c,s))&&(!t.validate||o.isValid(s,i)||Pt(i,"data-")||Pt(i,"aria-")),iE=(t,o)=>t.hasAttribute(HS)&&("id"===o||"class"===o||"style"===o),K2=(t,o)=>t in o.getBoolAttrs(),av=(t,o,n,s)=>{const{attributes:i}=t;for(let c=i.length-1;c>=0;c--){const d=i[c],u=d.name,h=d.value;aE(o,n,s,t.tagName.toLowerCase(),u,h)||iE(t,u)?K2(u,n)&&t.setAttribute(u,u):t.removeAttribute(u)}},iv=t=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(s=>`xlink:${s}`)};return eE().sanitize(t,n),t.innerHTML},W1=wt.makeMap,PS=wt.extend,cE=(t,o,n,s)=>{const i=t.name,c=i in n&&"title"!==i&&"textarea"!==i&&"noscript"!==i,d=o.childNodes;for(let u=0,h=d.length;u<h;u++){const v=d[u],y=new Kt(v.nodeName.toLowerCase(),v.nodeType);if(Wt(v)){const C=v.attributes;for(let E=0,R=C.length;E<R;E++){const T=C[E];y.attr(T.name,T.value)}Hd(y.name)&&(s(v),y.value=v.innerHTML)}else pt(v)?(y.value=v.data,c&&(y.raw=!0)):(Xe(v)||qi(v)||Ip(v))&&(y.value=v.data);Hd(y.name)||cE(y,v,n,s),t.append(y)}},$1=(t={},o=fu())=>{const n=Qb(),s=Qb(),i={validate:!0,root_name:"body",sanitize:!0,...t},c=new DOMParser,d=((I,N)=>{const H=(()=>{let z=[];const U=()=>z[z.length-1];return{track:J=>{Eg(J)&&z.push(J);let Y=U();return Y&&!Y.contains(J)&&(z.pop(),Y=U()),Tf(Y)},current:()=>Tf(U()),reset:()=>{z=[]}}})();if(I.sanitize){const z=((t,o,n)=>{const s=eE();return s.addHook("uponSanitizeElement",(i,c)=>{sE(i,t,o,n.track(i),c)}),s.addHook("uponSanitizeAttribute",(i,c)=>{((d,u,h,v,y)=>{const C=d.tagName.toLowerCase(),{attrName:E,attrValue:R}=y;y.keepAttr=aE(u,h,v,C,E,R),y.keepAttr?(y.allowedAttributes[E]=!0,K2(E,h)&&(y.attrValue=E),u.allow_svg_data_urls&&Pt(R,"data:image/svg+xml")&&(y.forceKeepAttr=!0)):iE(d,E)&&(y.forceKeepAttr=!0)})(i,t,o,n.current(),c)}),s})(I,N,H);return{sanitizeHtmlElement:(J,Y)=>{z.sanitize(J,((ge,Ee)=>{const Ne={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return Ne.PARSER_MEDIA_TYPE=Ee,ge.allow_script_urls?Ne.ALLOWED_URI_REGEXP=/.*/:ge.allow_html_data_urls&&(Ne.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),Ne})(I,Y)),z.removed=[],H.reset()},sanitizeNamespaceElement:iv}}return{sanitizeHtmlElement:(z,U)=>{const J=document.createNodeIterator(z,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let Y;for(;Y=J.nextNode();){const ge=H.track(Y);sE(Y,I,N,ge),Wt(Y)&&av(Y,I,N,ge)}H.reset()},sanitizeNamespaceElement:_o}})(i,o),h=n.getFilters,C=s.getFilters,R=(I,N)=>{const H=Xt(N.attr(HS)),z=1===N.type&&!wo(I,N.name)&&!Am(o,N)&&!Hd(N.name);return 3===N.type||z&&!H},T={schema:o,addAttributeFilter:s.addFilter,getAttributeFilters:C,removeAttributeFilter:s.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:h,removeNodeFilter:n.removeFilter,parse:(I,N={})=>{var H;const z=i.validate,U=null!==(H=N.context)&&void 0!==H?H:i.root_name,J=((Be,tt,Zt="html")=>{const Mt="xhtml"===Zt?"application/xhtml+xml":"text/html",mo=wo(o.getSpecialElements(),tt.toLowerCase()),co=mo?`<${tt}>${Be}</${tt}>`:Be,So=c.parseFromString("xhtml"===Zt?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${co}</body></html>`:`<body>${co}</body>`,Mt).body;return d.sanitizeHtmlElement(So,Mt),mo?So.firstChild:So})(I,U,N.format);Pd(o,J);const Y=new Kt(U,11);cE(Y,J,o.getSpecialElements(),d.sanitizeNamespaceElement),J.innerHTML="";const[ge,Ee]=((Be,tt,Zt,Mt)=>{const mo=Zt.validate,co=tt.getNonEmptyElements(),Mo=tt.getWhitespaceElements(),So=PS(W1("script,style,head,html,body,title,meta,param"),tt.getBlockElements()),$t=Jt(tt),oo=/[ \t\r\n]+/g,Wo=/^[ \t\r\n]+/,ke=/[ \t\r\n]+$/,Oe=ft=>{let ro=ft.parent;for(;ie(ro);){if(ro.name in Mo)return!0;ro=ro.parent}return!1},it=ft=>ft.name in So||Am(tt,ft)||Hd(ft.name)&&ft.parent===Be,mt=(ft,ro)=>!ie(ro?ft.prev:ft.next)&&!yr(ft.parent)&&it(ft.parent)&&(ft.parent!==Be||!0===Mt.isRootContent);return[ft=>{var ro,Yo,Ho;if(3===ft.type&&!Oe(ft)){let To=null!==(ro=ft.value)&&void 0!==ro?ro:"";To=To.replace(oo," "),Ho=it,(ie(Yo=ft.prev)&&(Ho(Yo)||"br"===Yo.name)||mt(ft,!0))&&(To=To.replace(Wo,"")),0===To.length?ft.remove():ft.value=To}},ft=>{var ro,Ho,Jr;if(1===ft.type){const To=tt.getElementRule(ft.name);if(mo&&To){const Yo=cp(tt,co,Mo,ft);To.paddInEmptyBlock&&Yo&&(Ho=>{let Jr=Ho;for(;ie(Jr);){if(Jr.name in $t)return cp(tt,co,Mo,Jr);Jr=Jr.parent}return!1})(ft)?Ub(Zt,Mt,it,ft):To.removeEmpty&&Yo?it(ft)?ft.remove():ft.unwrap():To.paddEmpty&&(Yo||v2(Ho=ft,"#text")&&(null===(Jr=Ho?.firstChild)||void 0===Jr?void 0:Jr.value)===Hs)&&Ub(Zt,Mt,it,ft)}}else if(3===ft.type&&!Oe(ft)){let To=null!==(ro=ft.value)&&void 0!==ro?ro:"";(ft.next&&it(ft.next)||mt(ft,!1))&&(To=To.replace(ke,"")),0===To.length?ft.remove():ft.value=To}}]})(Y,o,i,N),Ne=[],Fe={nodes:{},attributes:{}},ye=Be=>tS(h(),C(),Be,Fe);if(((Be,tt,Zt)=>{const Mt=[];for(let mo=Be,co=mo;mo;co=mo,mo=mo.walk()){const Mo=mo;Ue(tt,So=>So(Mo)),yr(Mo.parent)&&Mo!==Be?mo=co:Mt.push(Mo)}for(let mo=Mt.length-1;mo>=0;mo--){const co=Mt[mo];Ue(Zt,Mo=>Mo(co))}})(Y,[ge,ye],[Ee,z?Be=>{return Zt=Ne,void(x2(o,tt=Be)&&Zt.push(tt));var tt,Zt}:_o]),Ne.reverse(),z&&Ne.length>0)if(N.context){const{pass:Be,fail:tt}=dn(Ne,Zt=>Zt.parent===Y);w2(tt,o,Y,ye),N.invalid=Be.length>0}else w2(Ne,o,Y,ye);const Te=((Be,tt)=>{var Zt;const Mt=null!==(Zt=tt.forced_root_block)&&void 0!==Zt?Zt:Be.forced_root_block;return!1===Mt?"":!0===Mt?"p":Mt})(i,N);return Te&&("body"===Y.name||N.isRootContent)&&((Be,tt)=>{const Zt=PS(W1("script,style,head,html,body,title,meta,param"),o.getBlockElements()),Mt=/^[ \t\r\n]+/,mo=/[ \t\r\n]+$/;let co=Be.firstChild,Mo=null;const So=$t=>{var oo,Wo;$t&&(co=$t.firstChild,co&&3===co.type&&(co.value=null===(oo=co.value)||void 0===oo?void 0:oo.replace(Mt,"")),co=$t.lastChild,co&&3===co.type&&(co.value=null===(Wo=co.value)||void 0===Wo?void 0:Wo.replace(mo,"")))};if(o.isValidChild(Be.name,tt.toLowerCase())){for(;co;){const $t=co.next;R(Zt,co)?(Mo||(Mo=new Kt(tt,1),Mo.attr(i.forced_root_block_attrs),Be.insert(Mo,co)),Mo.append(co)):(So(Mo),Mo=null),co=$t}So(Mo)}})(Y,Te),N.invalid||f2(Fe,N),Y}};return((t,o)=>{const n=t.schema;o.remove_trailing_brs&&_S(o,t,n),t.addAttributeFilter("href",i=>{let c=i.length;const d=u=>{const h=u?wt.trim(u):"";return/\b(noopener)\b/g.test(h)?h:h.split(" ").filter(y=>y.length>0).concat(["noopener"]).sort().join(" ")};if(!o.allow_unsafe_link_target)for(;c--;){const u=i[c];"a"===u.name&&"_blank"===u.attr("target")&&u.attr("rel",d(u.attr("rel")))}}),o.allow_html_in_named_anchor||t.addAttributeFilter("id,name",i=>{let c,d,u,h,v=i.length;for(;v--;)if(h=i[v],"a"===h.name&&h.firstChild&&!h.attr("href"))for(u=h.parent,c=h.lastChild;c&&u;)d=c.prev,u.insert(c,h),c=d}),o.fix_list_elements&&t.addNodeFilter("ul,ol",i=>{let c,d,u=i.length;for(;u--;)if(c=i[u],d=c.parent,d&&("ul"===d.name||"ol"===d.name))if(c.prev&&"li"===c.prev.name)c.prev.append(c);else{const h=new Kt("li",1);h.attr("style","list-style-type: none"),c.wrap(h)}});const s=n.getValidClasses();o.validate&&s&&t.addAttributeFilter("class",i=>{var c;let d=i.length;for(;d--;){const u=i[d],h=null!==(c=u.attr("class"))&&void 0!==c?c:"",v=wt.explode(h," ");let y="";for(let C=0;C<v.length;C++){const E=v[C];let R=!1,T=s["*"];T&&T[E]&&(R=!0),T=s[u.name],!R&&T&&T[E]&&(R=!0),R&&(y&&(y+=" "),y+=E)}y.length||(y=null),u.attr("class",y)}}),((i,c)=>{const{blob_cache:d}=c;if(d){const u=h=>{const v=h.attr("src");var y;(y=h).attr("src")===Oo.transparentSrc||ie(y.attr("data-mce-placeholder"))||(y=>ie(y.attr("data-mce-bogus")))(h)||yr(v)||NS(d,v,!0).each(y=>{h.attr("src",y.blobUri())})};i.addAttributeFilter("src",h=>Ue(h,u))}})(t,o),o.convert_unsafe_embeds&&t.addNodeFilter("object,embed",i=>Ue(i,c=>{c.replace(((d,u,h,v,y)=>{let C;C=Bt(d)?"iframe":z1(d,"image")?"img":z1(d,"video")?"video":z1(d,"audio")?"audio":"iframe";const E=new Kt(C,1);return E.attr("audio"===C?{src:u}:{src:u,width:h,height:v}),"audio"!==C&&"video"!==C||E.attr("controls",""),"iframe"===C&&y&&E.attr("sandbox",""),E})(c.attr("type"),c.attr("object"===c.name?"data":"src"),c.attr("width"),c.attr("height"),o.sandbox_iframes))})),o.sandbox_iframes&&t.addNodeFilter("iframe",i=>Ue(i,c=>c.attr("sandbox","")))})(T,i),(N=i).inline_styles&&((t,o,n)=>{var s;const i=bu();var c,d,u;o.convert_fonts_to_spans&&(c=t,d=i,u=wt.explode(null!==(s=o.font_size_legacy_values)&&void 0!==s?s:""),c.addNodeFilter("font",h=>{Ue(h,v=>{const y=d.parse(v.attr("style")),C=v.attr("color"),E=v.attr("face"),R=v.attr("size");var T;C&&(y.color=C),E&&(y["font-family"]=E),R&&Rr(R).each(T=>{y["font-size"]=u[T-1]}),v.name="span",v.attr("style",d.serialize(y)),T=v,Ue(["color","face","size"],N=>{T.attr(N,null)})})})),((c,d,u)=>{c.addNodeFilter("strike",h=>{const v="html4"!==d.type;Ue(h,y=>{if(v)y.name="s";else{const C=u.parse(y.attr("style"));C["text-decoration"]="line-through",y.name="span",y.attr("style",u.serialize(C))}})})})(t,n,i)})(T,N,o),T;var N},dE=(t,o,n)=>{const s=jb(c=t)?rp({validate:!1}).serialize(c):c,i=o(s);var c;if(i.isDefaultPrevented())return i;if(jb(t)){if(i.content!==s){const c=$1({validate:!1,forced_root_block:!1,...n}).parse(i.content,{context:t.name});return{...i,content:c}}return{...i,content:t}}return i},uE=(t,o)=>{if(o.no_events)return xi.value(o);{const n=t.dispatch("BeforeGetContent",o);return n.isDefaultPrevented()?xi.error(Ah(t,{content:"",...n}).content):xi.value(n)}},FS=(t,o,n)=>n.no_events?o:dE(o,i=>Ah(t,{...n,content:i}),{sanitize:Pm(t),sandbox_iframes:Kg(t)}).content,Y2=(t,o)=>{if(o.no_events)return xi.value(o);{const n=dE(o.content,s=>{return i=t,c={...o,content:s},i.dispatch("BeforeSetContent",c);var i,c},{sanitize:Pm(t),sandbox_iframes:Kg(t)});return n.isDefaultPrevented()?(yb(t,n),xi.error(void 0)):xi.value(n)}},VS=(t,o,n)=>{n.no_events||yb(t,{...n,content:o})},q1=(t,o,n)=>({element:t,width:o,rows:n}),zS=(t,o)=>({element:t,cells:o}),Ua=(t,o)=>({x:t,y:o}),Zh=(t,o)=>$i(t,o).bind(Rr).getOr(1),mE=(t,o,n)=>{const s=t.rows;return!!(s[n]?s[n].cells:[])[o]},X2=t=>lr(t,(o,n)=>n.cells.length>o?n.cells.length:o,0),lv=(t,o)=>{const n=t.rows;for(let s=0;s<n.length;s++){const i=n[s].cells;for(let c=0;c<i.length;c++)if($n(i[c],o))return $.some(Ua(c,s))}return $.none()},rg=(t,o,n,s,i)=>{const c=[],d=t.rows;for(let u=n;u<=i;u++){const h=d[u].cells,v=o<s?h.slice(o,s+1):h.slice(s,o+1);c.push(zS(d[u].element,v))}return c},gp=t=>((o,n)=>{const s=vu(o.element),i=vs("tbody");return K(i,n),F(s,i),s})(t,no(t.rows,n=>{const s=no(n.cells,c=>{const d=I0(c);return as(d,"colspan"),as(d,"rowspan"),d}),i=vu(n.element);return K(i,s),i})),gE=()=>vC([]),sg=(t,o)=>o>=0&&o<t.length&&fo(t.charAt(o)),ZS=t=>nl(t.innerText),J2=t=>Wt(t)?t.outerHTML:pt(t)?Gi.encodeRaw(t.data,!1):Xe(t)?"\x3c!--"+t.data+"--\x3e":"",hE=Nr(()=>document.implementation.createHTMLDocument("undo")),Q2=t=>{const o=t.serializer.getTempAttrs(),n=f_(t.getBody(),o);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:Vt(no(fr(n.childNodes),zr(nl,J2)),s=>s.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:nl(n.innerHTML),bookmark:null,beforeBookmark:null}},US=(t,o,n)=>{const s=n?o.beforeBookmark:o.bookmark;"fragmented"===o.type?((t,o)=>{((n,s)=>{let i=0;Ue(n,c=>{var d,u;0===c[0]?i++:1===c[0]?(((d,u,h)=>{const v=(y=>{let C;const E=document.createElement("div"),R=document.createDocumentFragment();for(y&&(E.innerHTML=y);C=E.firstChild;)R.appendChild(C);return R})(u);d.hasChildNodes()&&h<d.childNodes.length?d.insertBefore(v,d.childNodes[h]):d.appendChild(v)})(s,c[1],i),i++):2===c[0]&&(u=i,(d=s).hasChildNodes()&&u<d.childNodes.length&&d.removeChild(d.childNodes[u]))})})(((n,s)=>{const i=n.length+s.length+2,c=new Array(i),d=new Array(i),u=(C,E,R,T,I)=>{const N=v(C,E,R,T);if(null===N||N.start===E&&N.diag===E-T||N.end===C&&N.diag===C-R){let H=C,z=R;for(;H<E||z<T;)H<E&&z<T&&n[H]===s[z]?(I.push([0,n[H]]),++H,++z):E-C>T-R?(I.push([2,n[H]]),++H):(I.push([1,s[z]]),++z)}else{u(C,N.start,R,N.start-N.diag,I);for(let H=N.start;H<N.end;++H)I.push([0,n[H]]);u(N.end,E,N.end-N.diag,T,I)}},h=(C,E,R,T)=>{let I=C;for(;I-E<T&&I<R&&n[I]===s[I-E];)++I;return((N,H,z)=>({start:N,end:H,diag:z}))(C,I,E)},v=(C,E,R,T)=>{const I=E-C,N=T-R;if(0===I||0===N)return null;const H=I-N,z=N+I,U=(z%2==0?z:z+1)/2;let J,Y,ge,Ee,Ne;for(c[1+U]=C,d[1+U]=E+1,J=0;J<=U;++J){for(Y=-J;Y<=J;Y+=2){for(ge=Y+U,c[ge]=Y===-J||Y!==J&&c[ge-1]<c[ge+1]?c[ge+1]:c[ge-1]+1,Ee=c[ge],Ne=Ee-C+R-Y;Ee<E&&Ne<T&&n[Ee]===s[Ne];)c[ge]=++Ee,++Ne;if(H%2!=0&&H-J<=Y&&Y<=H+J&&d[ge-H]<=c[ge])return h(d[ge-H],Y+C-R,E,T)}for(Y=H-J;Y<=H+J;Y+=2){for(ge=Y+U-H,d[ge]=Y===H-J||Y!==H+J&&d[ge+1]<=d[ge-1]?d[ge+1]-1:d[ge-1],Ee=d[ge]-1,Ne=Ee-C+R-Y;Ee>=C&&Ne>=R&&n[Ee]===s[Ne];)d[ge]=Ee--,Ne--;if(H%2==0&&-J<=Y&&Y<=J&&d[ge]<=c[ge+H])return h(d[ge],Y+C-R,E,T)}}return null},y=[];return u(0,n.length,0,s.length,y),y})(no(fr(o.childNodes),J2),t),o)})(o.fragments,t.getBody()):t.setContent(o.content,{format:"raw",no_selection:!ie(s)||!pe(s)||!s.isFakeCaret}),s&&(t.selection.moveToBookmark(s),t.selection.scrollIntoView())},ew=t=>"fragmented"===t.type?t.fragments.join(""):t.content,jS=t=>{const o=vs("body",hE());return Et(o,ew(t)),Ue(er(o,"*[data-mce-bogus]"),De),Tt(o)},Uh=(t,o)=>{return!(!t||!o)&&(s=o,!(ew(t)!==ew(s))||((n,s)=>jS(n)===jS(s))(t,o));var s},tw=t=>0===t.get(),cv=(t,o,n)=>{tw(n)&&(t.typing=o)},WS=(t,o)=>{t.typing&&(cv(t,!1,o),t.add())},$S=t=>({init:{bindEvents:_o},undoManager:{beforeChange:(o,n)=>{return s=t,c=n,void(tw(o)&&c.set(mi(s.selection)));var s,c},add:(o,n,s,i,c,d)=>((u,h,v,y,C,E,R)=>{const T=Q2(u),I=wt.extend(E||{},T);if(!tw(y)||u.removed)return null;const N=h.data[v.get()];if(u.dispatch("BeforeAddUndo",{level:I,lastLevel:N,originalEvent:R}).isDefaultPrevented()||N&&Uh(N,I))return null;h.data[v.get()]&&C.get().each(U=>{h.data[v.get()].beforeBookmark=U});const H=o1(u);if(H&&h.data.length>H){for(let U=0;U<h.data.length-1;U++)h.data[U]=h.data[U+1];h.data.length--,v.set(h.data.length)}I.bookmark=mi(u.selection),v.get()<h.data.length-1&&(h.data.length=v.get()+1),h.data.push(I),v.set(h.data.length-1);const z={level:I,lastLevel:N,originalEvent:R};return v.get()>0?(u.setDirty(!0),u.dispatch("AddUndo",z),u.dispatch("change",z)):u.dispatch("AddUndo",z),I})(t,o,n,s,i,c,d),undo:(o,n,s)=>((i,c,d,u)=>{let h;return c.typing&&(c.add(),c.typing=!1,cv(c,!1,d)),u.get()>0&&(u.set(u.get()-1),h=c.data[u.get()],US(i,h,!0),i.setDirty(!0),i.dispatch("Undo",{level:h})),h})(t,o,n,s),redo:(o,n)=>((s,i,c)=>{let d;return i.get()<c.length-1&&(i.set(i.get()+1),d=c[i.get()],US(s,d,!1),s.setDirty(!0),s.dispatch("Redo",{level:d})),d})(t,o,n),clear:(o,n)=>{return s=t,c=n,(i=o).data=[],c.set(0),i.typing=!1,void s.dispatch("ClearUndos");var s,i,c},reset:o=>{return(n=o).clear(),void n.add();var n},hasUndo:(o,n)=>{return s=t,i=o,n.get()>0||i.typing&&i.data[0]&&!Uh(Q2(s),i.data[0]);var s,i},hasRedo:(o,n)=>{return s=o,n.get()<s.data.length-1&&!s.typing;var s},transact:(o,n,s)=>{return d=s,WS(i=o,n),i.beforeChange(),i.ignore(d),i.add();var i,d},ignore:(o,n)=>((s,i)=>{try{s.set(s.get()+1),i()}finally{s.set(s.get()-1)}})(o,n),extra:(o,n,s,i)=>((c,d,u,h,v)=>{if(d.transact(h)){const y=d.data[u.get()].bookmark,C=d.data[u.get()-1];US(c,C,!0),d.transact(v)&&(d.data[u.get()-1].beforeBookmark=y)}})(t,o,n,s,i)},formatter:{match:(o,n,s,i)=>A2(t,o,n,s,i),matchAll:(o,n)=>((s,i,c)=>{const d=[],u={},h=s.selection.getStart();return s.dom.getParent(h,v=>{for(let y=0;y<i.length;y++){const C=i[y];!u[C]&&Au(s,v,C,c)&&(u[C]=!0,d.push(C))}},s.dom.getRoot()),d})(t,o,n),matchNode:(o,n,s,i)=>Au(t,o,n,s,i),canApply:o=>((n,s)=>{const i=n.formatter.get(s),c=n.dom;if(i&&n.selection.isEditable()){const d=n.selection.getStart(),u=Fy(c,d);for(let h=i.length-1;h>=0;h--){const v=i[h];if(!hd(v))return!0;for(let y=u.length-1;y>=0;y--)if(c.is(u[y],v.selector))return!0}}return!1})(t,o),closest:o=>((n,s)=>{const i=c=>$n(c,ve(n.getBody()));return $.from(n.selection.getStart(!0)).bind(c=>E2(ve(c),d=>Ni(s,u=>{return Au(n,d.dom,v=u)?$.some(v):$.none();var v}),i)).getOrNull()})(t,o),apply:(o,n,s)=>wS(t,o,n,s),remove:(o,n,s,i)=>F2(t,o,n,s,i),toggle:(o,n,s)=>((i,c,d,u)=>{const h=i.formatter.get(c);h&&(!A2(i,c,d,u)||"toggle"in h[0]&&!h[0].toggle?wS(i,c,d,u):F2(i,c,d,u))})(t,o,n,s),formatChanged:(o,n,s,i,c)=>{return((E,R,T,I,N,H)=>{const z=R.get();Ue(T.split(","),U=>{const J=wn(z,U).getOrThunk(()=>{const ge={withSimilar:{state:Gn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Gn(!1),similar:!1,callbacks:[]},withVars:[]};return z[U]=ge,ge}),Y=()=>{const ge=CS(E);return up(E,ge,U,N,H).isSome()};if(Bt(H)){const ge=N?J.withSimilar:J.withoutSimilar;ge.callbacks.push(I),1===ge.callbacks.length&&ge.state.set(Y())}else J.withVars.push({state:Gn(Y()),similar:N,vars:H,callback:I})}),R.set(z)})(t,u=o,h=n,v=s,i,c),{unbind:()=>((E,R,T)=>{const I=E.get();Ue(R.split(","),N=>wn(I,N).each(H=>{I[N]={withSimilar:{...H.withSimilar,callbacks:Vt(H.withSimilar.callbacks,z=>z!==T)},withoutSimilar:{...H.withoutSimilar,callbacks:Vt(H.withoutSimilar.callbacks,z=>z!==T)},withVars:Vt(H.withVars,z=>z.callback!==T)}})),E.set(I)})(u,h,v)};var u,h,v}},editor:{getContent:o=>{return s=o,$.from((n=t).getBody()).fold(Ke("tree"===s.format?new Kt("body",11):""),i=>((t,o,n)=>{let s;return s="raw"===o.format?wt.trim(nl(f_(n,t.serializer.getTempAttrs()).innerHTML)):"text"===o.format?((i,c)=>{const d=i.getDoc(),u=gn(ve(i.getBody())),h=vs("div",d);mr(h,"data-mce-bogus","all"),au(h,{position:"fixed",left:"-9999999px",top:"0"}),Et(h,c.innerHTML),b_(h),Io(h);const v=Lo(C=u)?C:ve(vl(C).dom.body);var C;F(v,h);const y=nl(h.dom.innerText);return _e(h),y})(t,n):"tree"===o.format?t.serializer.serialize(n,o):((i,c)=>{const d=za(i),u=new RegExp(`^(<${d}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${d}>[\r\n]*|<br \\/>[\r\n]*)$`);return c.replace(u,"")})(t,t.serializer.serialize(n,o)),"text"!==o.format&&!ho(ve(n))&&Xt(s)?wt.trim(s):s})(n,s,i));var n,s},setContent:(o,n)=>{return i=o,c=n,$.from((s=t).getBody()).map(d=>jb(i)?((u,h,v,y)=>{b2(u.parser.getNodeFilters(),u.parser.getAttributeFilters(),v);const C=rp({validate:!1},u.schema).serialize(v),E=nl(ho(ve(h))?C:wt.trim(C));return I1(u,E,y.no_selection),{content:v,html:E}})(s,d,i,c):((u,h,v,y)=>{if(0===(v=nl(v)).length||/^\s+$/.test(v)){const C='<br data-mce-bogus="1">';"TABLE"===h.nodeName?v="<tr><td>"+C+"</td></tr>":/^(UL|OL)$/.test(h.nodeName)&&(v="<li>"+C+"</li>");const E=za(u);return u.schema.isValidChild(h.nodeName.toLowerCase(),E.toLowerCase())?(v=C,v=u.dom.createHTML(E,Yi(u),v)):v||(v=C),I1(u,v,y.no_selection),{content:v,html:v}}{"raw"!==y.format&&(v=rp({validate:!1},u.schema).serialize(u.parser.parse(v,{isRootContent:!0,insert:!0})));const C=ho(ve(h))?v:wt.trim(v);return I1(u,C,y.no_selection),{content:C,html:C}}})(s,d,i,c)).getOr({content:i,html:jb(c.content)?"":c.content});var s,i,c},insertContent:(o,n)=>F_(t,o,n),addVisual:o=>((n,s)=>{const i=n.dom,c=ie(s)?s:n.getBody();Ue(i.select("table,a",c),d=>{switch(d.nodeName){case"TABLE":const u=a1(n),h=i.getAttrib(d,"border");h&&"0"!==h||!n.hasVisual?i.removeClass(d,u):i.addClass(d,u);break;case"A":if(!i.getAttrib(d,"href")){const v=i.getAttrib(d,"name")||d.id,y=mh(n);v&&n.hasVisual?i.addClass(d,y):i.removeClass(d,y)}}}),n.dispatch("VisualAid",{element:s,hasVisual:n.hasVisual})})(t,o)},selection:{getContent:(o,n)=>((s,i,c={})=>{const d=(u=c,h=i,{...u,format:h,get:!0,selection:!0,getInner:!0});var u,h;return uE(s,d).fold(fn,u=>{const h=((v,y)=>{if("text"===y.format)return $.from((C=v).selection.getRng()).map(E=>{var R;const T=$.from(C.dom.getParent(E.commonAncestorContainer,C.dom.isBlock)),I=C.getBody(),N=T.map(ge=>ge.nodeName).getOr("div").toLowerCase(),H=ve(E.cloneContents());b_(H),Io(H);const z=C.dom.add(I,N,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},H.dom),U=ZS(z),J=nl(null!==(R=z.textContent)&&void 0!==R?R:"");if(C.dom.remove(z),sg(J,0)||sg(J,J.length-1)){const Y=T.getOr(I),ge=ZS(Y),Ee=ge.indexOf(U);return-1===Ee?U:(sg(ge,Ee-1)?" ":"")+U+(sg(ge,Ee+U.length)?" ":"")}return U}).getOr("");var C;{const C=((E,R)=>{const T=E.selection.getRng(),I=E.dom.create("body"),N=E.selection.getSel(),H=DC(E,Vo(N)),z=R.contextual?((t,o,n)=>{const s=hn(o,t);return s.length>0?((t,o)=>{return(n=t,s=o[0],sc(s,"table",at($n,n))).bind(n=>{const s=o[0],i=o[o.length-1],c=(d=>{const u=q1(vu(d),0,[]);return Ue(er(d,"tr"),(h,v)=>{Ue(er(h,"td,th"),(y,C)=>{((E,R,T,I,N)=>{const H=Zh(N,"rowspan"),z=Zh(N,"colspan"),U=E.rows;for(let J=T;J<T+H;J++){U[J]||(U[J]=zS(I0(I),[]));for(let Y=R;Y<R+z;Y++)U[J].cells[Y]=J===T&&Y===R?N:vu(N)}})(u,((E,R,T)=>{for(;mE(E,R,T);)R++;return R})(u,C,v),v,h,y)})}),q1(u.element,X2(u.rows),u.rows)})(n);return(d=c,u=s,h=i,lv(d,u).bind(v=>lv(d,h).map(y=>((C,E,R)=>{const T=E.x,I=E.y,N=R.x,H=R.y,z=I<H?rg(C,T,I,N,H):rg(C,T,H,N,I);return q1(C.element,X2(z),z)})(d,v,y)))).map(d=>vC([gp(d)]));var d,u,h}).getOrThunk(gE);var n,s})(t,s):(i=t,d=n,(c=o).length>0&&c[0].collapsed?gE():(u=i,v=d,((y,C)=>{const E=lr(C,(R,T)=>(F(T,R),T),y);return C.length>0?vC([E]):E})(ve((h=c[0]).cloneContents()),((t,o,n)=>{const s=ve(o.commonAncestorContainer),i=Jm(s,t),c=Vt(i,h=>n.isWrapper(Sn(h))),d=(v=o,wr(h=i,y=>"li"===Sn(y)&&Xs(y,v)).fold(Ke([]),y=>{return(C=h,wr(C,E=>"ul"===Sn(E)||"ol"===Sn(E))).map(C=>{const E=vs(Sn(C)),R=ws(Sg(C),(T,I)=>Pt(I,"list-style"));return au(E,R),[vs("li"),E]}).getOr([]);var C})),u=c.concat(d.length?d:(h=>Bs(h)?ee(h).filter(Na).fold(Ke([]),v=>[h,v]):Na(h)?[h]:[])(s));var h,v;return no(u,vu)})(u,h,v))));var i,c,d,u,h,v})(ve(E.getBody()),H,E.schema).dom:T.cloneContents();return z&&I.appendChild(z),E.selection.serializer.serialize(I,R)})(v,y);return"tree"===y.format?C:v.selection.isCollapsed()?"":C}})(s,u);return FS(s,h,u)})})(t,o,n)},autocompleter:{addDecoration:o=>((t,o)=>{if(c_(ve(t.getBody())).isNone()){const s=fl('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());F(s,ve(o.extractContents())),o.insertNode(s.dom),ee(s).each(i=>i.dom.normalize()),(n=s,((i,c)=>{const d=u=>{const h=xt(u);for(let v=h.length-1;v>=0;v--){const y=h[v];if(c(y))return $.some(y);const C=d(y);if(C.isSome())return C}return $.none()};return d(i)})(n,i_)).map(i=>{var c;t.selection.setCursorLocation(i.dom,"img"===Sn(c=i)?1:Cl(c).fold(()=>xt(c).length,d=>d.length))})}var n})(t,o),removeDecoration:()=>{return o=t,n=ve(t.getBody()),c_(n).each(s=>{const i=o.selection.getBookmark();De(s),o.selection.moveToBookmark(i)});var o,n}},raw:{getModel:()=>$.none()}}),Mu=t=>wo(t.plugins,"rtc"),ow=t=>t.rtcInstance?t.rtcInstance:$S(t),wa=t=>{const o=t.rtcInstance;if(o)return o;throw new Error("Failed to get RTC instance not yet initialized.")},qS=t=>wa(t).init.bindEvents(),GS=t=>0===t.dom.length?(_e(t),$.none()):$.some(t),nw=(t,o,n,s,i)=>{t.bind(c=>((s?R1:ap)(c.dom,s?c.dom.length:0,i),o.filter(En).map(d=>((u,h,v,y,C)=>{const E=u.dom,R=h.dom,T=y?E.length:R.length;y?(Lb(E,R,C,!1,!y),v.setStart(R,T)):(Lb(R,E,C,!1,!y),v.setEnd(R,T))})(c,d,n,s,i)))).orThunk(()=>{return(d=o,u=s,d.filter(h=>Pc.isBookmarkNode(h.dom)).bind(u?Pe:he)).or(o).filter(En).map(d=>((u,h,v)=>{ee(u).each(y=>{const C=u.dom;h&&Db(y,qe(C,0),v)?ap(C,0,v):!h&&Bb(y,qe(C,C.length),v)&&R1(C,C.length,v)})})(d,s,i));var d,u})},Y1=(t,o,n)=>{if(wo(t,o)){const s=Vt(t[o],i=>i!==n);0===s.length?delete t[o]:t[o]=s}},KS=t=>!(!t||!t.ownerDocument)&&bl(ve(t.ownerDocument),ve(t)),YS=(t,o,n,s)=>{let i,c;const{selectorChangedWithUnbind:d}=((N,H)=>{let z,U;const J=(ge,Ee)=>wr(Ee,Ne=>N.is(Ne,ge)),Y=ge=>N.getParents(ge,void 0,N.getRoot());return{selectorChangedWithUnbind:(ge,Ee)=>(z||(z={},U={},H.on("NodeChange",Ne=>{const Me=Ne.element,Fe=Y(Me),ye={};Po(z,(Te,Be)=>{J(Be,Fe).each(tt=>{U[Be]||(Ue(Te,Zt=>{Zt(!0,{node:tt,selector:Be,parents:Fe})}),U[Be]=Te),ye[Be]=Te})}),Po(U,(Te,Be)=>{ye[Be]||(delete U[Be],Ue(Te,tt=>{tt(!1,{node:Me,selector:Be,parents:Fe})}))})})),z[ge]||(z[ge]=[]),z[ge].push(Ee),J(ge,Y(H.selection.getStart())).each(()=>{U[ge]=z[ge]}),{unbind:()=>{Y1(z,ge,Ee),Y1(U,ge,Ee)}})}})(t,s),u=(N,H)=>((z,U,J={})=>{const Y=(ge=J,Ee=U,{format:"html",...ge,set:!0,selection:!0,content:Ee});var ge,Ee;Y2(z,Y).each(ge=>{const Ee=((Me,Fe)=>{if("raw"!==Fe.format){const ye=Me.selection.getRng(),Te=Me.dom.getParent(ye.commonAncestorContainer,Me.dom.isBlock),Be=Te?{context:Te.nodeName.toLowerCase()}:{},tt=Me.parser.parse(Fe.content,{forced_root_block:!1,...Be,...Fe});return rp({validate:!1},Me.schema).serialize(tt)}return Fe.content})(z,ge),Ne=z.selection.getRng();((Me,Fe,ye)=>{const Te=$.from(Fe.firstChild).map(ve),Be=$.from(Fe.lastChild).map(ve);Me.deleteContents(),Me.insertNode(Fe);const tt=Te.bind(he).filter(En).bind(GS),Zt=Be.bind(Pe).filter(En).bind(GS);nw(tt,Te,Me,!0,ye),nw(Zt,Be,Me,!1,ye),Me.collapse(!1)})(Ne,Ne.createContextualFragment(Ee),z.schema),z.selection.setRng(Ne),Eb(z,Ne),VS(z,Ee,ge)})})(s,N,H),h=N=>{const H=y();H.collapse(!!N),C(H)},v=()=>o.getSelection?o.getSelection():o.document.selection,y=()=>{let N;const H=(U,J,Y)=>{try{return J.compareBoundaryPoints(U,Y)}catch{return-1}},z=o.document;if(ie(s.bookmark)&&!Bh(s)){const U=Jy(s);if(U.isSome())return U.map(J=>DC(s,[J])[0]).getOr(z.createRange())}try{const U=v();U&&!fa(U.anchorNode)&&(N=U.rangeCount>0?U.getRangeAt(0):z.createRange(),N=DC(s,[N])[0])}catch{}if(N||(N=z.createRange()),wi(N.startContainer)&&N.collapsed){const U=t.getRoot();N.setStart(U,0),N.setEnd(U,0)}return i&&c&&(0===H(N.START_TO_START,N,i)&&0===H(N.END_TO_END,N,i)?N=c:(i=null,c=null)),N},C=(N,H)=>{if(!((U=N)&&KS(U.startContainer)&&KS(U.endContainer)))return;var U;const z=v();if(N=s.dispatch("SetSelectionRange",{range:N,forward:H}).range,z){c=N;try{z.removeAllRanges(),z.addRange(N)}catch{}!1===H&&z.extend&&(z.collapse(N.endContainer,N.endOffset),z.extend(N.startContainer,N.startOffset)),i=z.rangeCount>0?z.getRangeAt(0):null}if(!N.collapsed&&N.startContainer===N.endContainer&&z?.setBaseAndExtent&&N.endOffset-N.startOffset<2&&N.startContainer.hasChildNodes()){const U=N.startContainer.childNodes[N.startOffset];U&&"IMG"===U.nodeName&&(z.setBaseAndExtent(N.startContainer,N.startOffset,N.endContainer,N.endOffset),z.anchorNode===N.startContainer&&z.focusNode===N.endContainer||z.setBaseAndExtent(U,0,U,1))}s.dispatch("AfterSetSelectionRange",{range:N,forward:H})},E=()=>{const N=v(),H=N?.anchorNode,z=N?.focusNode;if(!N||!H||!z||fa(H)||fa(z))return!0;const U=t.createRng(),J=t.createRng();try{U.setStart(H,N.anchorOffset),U.collapse(!0),J.setStart(z,N.focusOffset),J.collapse(!0)}catch{return!0}return U.compareBoundaryPoints(U.START_TO_START,J)<=0},R={dom:t,win:o,serializer:n,editor:s,expand:(N={type:"word"})=>C(np(t).expand(y(),N)),collapse:h,setCursorLocation:(N,H)=>{const z=t.createRng();ie(N)&&ie(H)?(z.setStart(N,H),z.setEnd(N,H),C(z),h(!1)):(Vi(t,z,s.getBody(),!0),C(z))},getContent:N=>((H,z={})=>{return J=z.format?z.format:"html",Y=z,wa(H).selection.getContent(J,Y);var J,Y})(s,N),setContent:u,getBookmark:(N,H)=>T.getBookmark(N,H),moveToBookmark:N=>T.moveToBookmark(N),select:(N,H)=>{return(z=t,U=N,J=H,$.from(U).bind(Y=>$.from(Y.parentNode).map(ge=>{const Ee=z.nodeIndex(Y),Ne=z.createRng();return Ne.setStart(ge,Ee),Ne.setEnd(ge,Ee+1),J&&(Vi(z,Ne,Y,!0),Vi(z,Ne,Y,!1)),Ne}))).each(C),N;var z,U,J},isCollapsed:()=>{const N=y(),H=v();return!(!N||N.item)&&(N.compareEndPoints?0===N.compareEndPoints("StartToEnd",N):!H||N.collapsed)},isEditable:()=>{const N=y(),H=s.getBody().querySelectorAll('[data-mce-selected="1"]');return H.length>0?Ar(H,z=>t.isEditable(z.parentElement)):RC(t,N)},isForward:E,setNode:N=>(u(t.getOuterHTML(N)),N),getNode:()=>((N,H)=>{if(!H)return N;let z=H.startContainer,U=H.endContainer;const J=H.startOffset,Y=H.endOffset;let ge=H.commonAncestorContainer;H.collapsed||(z===U&&Y-J<2&&z.hasChildNodes()&&(ge=z.childNodes[J]),pt(z)&&pt(U)&&(z=z.length===J?a_(z.nextSibling,!0):z.parentNode,U=0===Y?a_(U.previousSibling,!1):U.parentNode,z&&z===U&&(ge=z)));const Ee=pt(ge)?ge.parentNode:ge;return wl(Ee)?Ee:N})(s.getBody(),y()),getSel:v,setRng:C,getRng:y,getStart:N=>r_(s.getBody(),y(),N),getEnd:N=>s_(s.getBody(),y(),N),getSelectedBlocks:(N,H)=>((z,U,J,Y)=>{const ge=[],Ee=z.getRoot(),Ne=z.getParent(J||r_(Ee,U,U.collapsed),z.isBlock),Me=z.getParent(Y||s_(Ee,U,U.collapsed),z.isBlock);if(Ne&&Ne!==Ee&&ge.push(Ne),Ne&&Me&&Ne!==Me){let Fe;const ye=new tr(Ne,Ee);for(;(Fe=ye.next())&&Fe!==Me;)z.isBlock(Fe)&&ge.push(Fe)}return Me&&Ne!==Me&&Me!==Ee&&ge.push(Me),ge})(t,y(),N,H),normalize:()=>{const N=y(),H=v();if(!(Vo(H).length>1)&&Jn(s)){const z=Sb(t,N);return z.each(U=>{C(U,E())}),z.getOr(N)}return N},selectorChanged:(N,H)=>(d(N,H),R),selectorChangedWithUnbind:d,getScrollContainer:()=>{let N,H=t.getRoot();for(;H&&"BODY"!==H.nodeName;){if(H.scrollHeight>H.clientHeight){N=H;break}H=H.parentNode}return N},scrollIntoView:(N,H)=>{var z;ie(N)?((z=s).inline?Y3:qy)(z,N,H):Eb(s,y(),H)},placeCaretAt:(N,H)=>C(P3(N,H,s.getDoc())),getBoundingClientRect:()=>{const N=y();return N.collapsed?qe.fromRangeStart(N).getClientRects()[0]:N.getBoundingClientRect()},destroy:()=>{o=i=c=null,I.destroy()}},T=Pc(R),I=tp(R,s);return R.bookmarkManager=T,R.controlSelection=I,R},rw=(t,o,n)=>{-1===wt.inArray(o,n)&&(t.addAttributeFilter(n,(s,i)=>{let c=s.length;for(;c--;)s[c].attr(i,null)}),o.push(n))},fE=(t,o)=>{const n=((t,o)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},i=o&&o.dom?o.dom:Lr.DOM,c=o&&o.schema?o.schema:fu(s),d=$1(s,c);return h=s,v=i,(u=d).addAttributeFilter("data-mce-tabindex",(y,C)=>{let E=y.length;for(;E--;){const R=y[E];R.attr("tabindex",R.attr("data-mce-tabindex")),R.attr(C,null)}}),u.addAttributeFilter("src,href,style",(y,C)=>{const E="data-mce-"+C,R=h.url_converter,T=h.url_converter_scope;let I=y.length;for(;I--;){const N=y[I];let H=N.attr(E);void 0!==H?(N.attr(C,H.length>0?H:null),N.attr(E,null)):(H=N.attr(C),"style"===C?H=v.serializeStyle(v.parseStyle(H),N.name):R&&(H=R.call(T,H,C,N.name)),N.attr(C,H.length>0?H:null))}}),u.addAttributeFilter("class",y=>{let C=y.length;for(;C--;){const E=y[C];let R=E.attr("class");R&&(R=R.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),E.attr("class",R.length>0?R:null))}}),u.addAttributeFilter("data-mce-type",(y,C,E)=>{let R=y.length;for(;R--;){const T=y[R];"bookmark"===T.attr("data-mce-type")&&!E.cleanup&&($.from(T.firstChild).exists(N=>{var H;return!ed(null!==(H=N.value)&&void 0!==H?H:"")})?T.unwrap():T.remove())}}),u.addNodeFilter("script,style",(y,C)=>{var E;const R=I=>I.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let T=y.length;for(;T--;){const I=y[T],N=I.firstChild,H=null!==(E=N?.value)&&void 0!==E?E:"";if("script"===C){const z=I.attr("type");z&&I.attr("type","mce-no/type"===z?null:z.replace(/^mce\-/,"")),"xhtml"===h.element_format&&N&&H.length>0&&(N.value="// <![CDATA[\n"+R(H)+"\n// ]]>")}else"xhtml"===h.element_format&&N&&H.length>0&&(N.value="\x3c!--\n"+R(H)+"\n--\x3e")}}),u.addNodeFilter("#comment",y=>{let C=y.length;for(;C--;){const E=y[C],R=E.value;h.preserve_cdata&&0===R?.indexOf("[CDATA[")?(E.name="#cdata",E.type=4,E.value=v.decode(R.replace(/^\[CDATA\[|\]\]$/g,""))):0===R?.indexOf("mce:protected ")&&(E.name="#text",E.type=3,E.raw=!0,E.value=unescape(R).substr(14))}}),u.addNodeFilter("xml:namespace,input",(y,C)=>{let E=y.length;for(;E--;){const R=y[E];7===R.type?R.remove():1===R.type&&("input"!==C||R.attr("type")||R.attr("type","text"))}}),u.addAttributeFilter("data-mce-type",y=>{Ue(y,C=>{"format-caret"===C.attr("data-mce-type")&&(C.isEmpty(u.schema.getNonEmptyElements())?C.remove():C.unwrap())})}),u.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(y,C)=>{let E=y.length;for(;E--;)y[E].attr(C,null)}),h.remove_trailing_brs&&_S(h,u,u.schema),{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,serialize:(u,h={})=>{const v={format:"html",...h},y=(T=u,H=I=v,ie(N=R=o)&&N.hasEventListeners("PreProcess")&&!H.no_events?((N,H,z)=>{let U;const J=N.dom;let Y=H.cloneNode(!0);const ge=document.implementation;if(ge.createHTMLDocument){const Ee=ge.createHTMLDocument("");wt.each("BODY"===Y.nodeName?Y.childNodes:[Y],Ne=>{Ee.body.appendChild(Ee.importNode(Ne,!0))}),Y="BODY"!==Y.nodeName?Ee.body.firstChild:Ee.body,U=J.doc,J.doc=Ee}return Ne={...z,node:Y},N.dispatch("PreProcess",Ne),U&&(J.doc=U),Y;var Ne})(R,T,I):T),C=((R,T,I)=>{const N=nl(I.getInner?T.innerHTML:R.getOuterHTML(T));return I.selection||ho(ve(T))?N:wt.trim(N)})(i,y,v),E=((R,T,I)=>{const N=I.selection?{forced_root_block:!1,...I}:I,H=R.parse(T,N);return(z=>{const U=Y=>"br"===Y?.name,J=z.lastChild;if(U(J)){const Y=J.prev;U(Y)&&(J.remove(),Y.remove())}})(H),H})(d,C,v);var R,T,I,N,H;return"tree"===v.format?E:((R,T,I,N,H)=>{var Y;return((U,J,Y)=>{return!J.no_events&&U?(Ee=U,Ne={...J,content:Y},Ee.dispatch("PostProcess",Ne)).content:Y;var Ee,Ne})(R,H,(Y=N,rp(T,I).serialize(Y)))})(o,s,c,E,v)},addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:at(rw,d,n),getTempAttrs:Ke(n),getNodeFilters:d.getNodeFilters,getAttributeFilters:d.getAttributeFilters,removeNodeFilter:d.removeNodeFilter,removeAttributeFilter:d.removeAttributeFilter};var u,h,v})(t,o);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},cm=(t,o,n={})=>{const s=(i=n,c=o,{format:"html",...i,set:!0,content:c});var i,c;return Y2(t,s).map(i=>{const c=(u=i.content,h=i,ow(t).editor.setContent(u,h));var u,h;return VS(t,c.html,i),c.content}).getOr(o)},XS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),bE="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dv="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),JS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],sw=(t,o)=>{const n=Vt(o,s=>wo(t,s));return Sr(n)},aw=(t,o)=>{const n=wt.makeMap(t.plugins," "),s=Vt(o,i=>wo(n,i));return Sr(s)},iw=t=>wr(JS,o=>o.name===t).fold(()=>t,o=>o.replacedWith?`${t}, replaced by ${o.replacedWith}`:t),ki=Lr.DOM,jh=t=>$.from(t).each(o=>o.destroy()),dm=(()=>{const t={};return{add:(o,n)=>{t[o]=n},get:o=>t[o]?t[o]:{icons:{}},has:o=>wo(t,o)}})(),Wh=ks.ModelManager,Kl=(t,o)=>o.dom[t],pp=(t,o)=>parseInt(yl(o,t),10),xE=at(Kl,"clientWidth"),CE=at(Kl,"clientHeight"),SE=at(pp,"margin-top"),uv=at(pp,"margin-left"),lw=t=>{const o=[],n=()=>{const h=t.theme;return h&&h.getNotificationManagerImpl?h.getNotificationManagerImpl():(()=>{const v=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:v,close:v,getArgs:v}})()},s=()=>$.from(o[0]),i=()=>{Ue(o,h=>{h.reposition()})},c=h=>{Ui(o,v=>v===h).each(v=>{o.splice(v,1)})},d=(h,v=!0)=>{return t.removed||!(C=(y=t).inline?y.getBody():y.getContentAreaContainer(),$.from(C).map(ve)).map(Pl).getOr(!1)?{}:(v&&t.dispatch("BeforeOpenNotification",{notification:h}),wr(o,y=>{return!((C=n().getArgs(y)).type!==(E=h).type||C.text!==E.text||C.progressBar||C.timeout||E.progressBar||E.timeout);var C,E}).getOrThunk(()=>{t.editorManager.setActive(t);const y=n().open(h,()=>{c(y),i(),AC(t)&&s().fold(()=>t.focus(),C=>Gy(ve(C.getEl())))});return(C=>{o.push(C)})(y),i(),t.dispatch("OpenNotification",{notification:{...y}}),y}));var y,C},u=Ke(o);return(h=t).on("SkinLoaded",()=>{const v=J0(h);v&&d({text:v,type:"warning",timeout:0},!1),i()}),h.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(i)}),h.on("remove",()=>{Ue(o.slice(),v=>{n().close(v)})}),{open:d,close:()=>{s().each(h=>{n().close(h),c(h),i()})},getNotifications:u};var h},$h=ks.PluginManager,qh=ks.ThemeManager,cw=t=>{let o=[];const n=()=>{const d=t.theme;return d&&d.getWindowManagerImpl?d.getWindowManagerImpl():(()=>{const u=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:u,openUrl:u,alert:u,confirm:u,close:u}})()},s=(d,u)=>(...h)=>u?u.apply(d,h):void 0,i=d=>{t.dispatch("CloseWindow",{dialog:d}),o=Vt(o,u=>u!==d),0===o.length&&t.focus()},c=d=>{t.editorManager.setActive(t),Xy(t),t.ui.show();const u=d();return o.push(h=u),t.dispatch("OpenWindow",{dialog:h}),u;var h};return t.on("remove",()=>{Ue(o,d=>{n().close(d)})}),{open:(d,u)=>c(()=>n().open(d,u,i)),openUrl:d=>c(()=>n().openUrl(d,i)),alert:(d,u,h)=>{const v=n();v.alert(d,s(h||v,u))},confirm:(d,u,h)=>{const v=n();v.confirm(d,s(h||v,u))},close:()=>{$.from(o[o.length-1]).each(d=>{n().close(d),i(d)})}}},dw=(t,o)=>{t.notificationManager.open({type:"error",text:o})},uw=(t,o)=>{t._skinLoaded?dw(t,o):t.on("SkinLoaded",()=>{dw(t,o)})},Zc=(t,o,n)=>{Gl(t,o,{message:n}),console.error(n)},Gh=(t,o,n)=>n?`Failed to load ${t}: ${n} from url ${o}`:`Failed to load ${t} url: ${o}`,Kh=(t,...o)=>{const n=window.console;n&&(n.error?n.error(t,...o):n.log(t,...o))},mv=t=>"content/"+t+"/content.css",QS=(t,o)=>{const n=t.editorManager.baseURL+"/skins/content",s=`content${t.editorManager.suffix}.css`;return no(o,i=>tinymce.Resource.has(mv(i))?i:/^[a-z0-9\-]+$/i.test(i)&&!t.inline?`${n}/${i}/${s}`:t.documentBaseURI.toAbsolute(i))},ek=()=>{let t={};const o=(s,i)=>({status:s,resultUri:i}),n=s=>s in t;return{hasBlobUri:n,getResultUri:s=>{const i=t[s];return i?i.resultUri:null},isPending:s=>!!n(s)&&1===t[s].status,isUploaded:s=>!!n(s)&&2===t[s].status,markPending:s=>{t[s]=o(1,null)},markUploaded:(s,i)=>{t[s]=o(2,i)},removeFailed:s=>{delete t[s]},destroy:()=>{t={}}}};let a5=0;const tk=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),ok=(t,o)=>((t,o)=>{const n={},s=(h,v)=>new Promise((y,C)=>{const E=new XMLHttpRequest;E.open("POST",o.url),E.withCredentials=o.credentials,E.upload.onprogress=T=>{v(T.loaded/T.total*100)},E.onerror=()=>{C("Image upload failed due to a XHR Transport error. Code: "+E.status)},E.onload=()=>{if(E.status<200||E.status>=300)return void C("HTTP Error: "+E.status);const T=JSON.parse(E.responseText);var I,N;T&&Xt(T.location)?y((N=T.location,(I=o.basePath)?I.replace(/\/$/,"")+"/"+N.replace(/^\//,""):N)):C("Invalid JSON: "+E.responseText)};const R=new FormData;R.append("file",h.blob(),h.filename()),E.send(R)}),i=ht(o.handler)?o.handler:s,c=(h,v)=>({url:v,blobInfo:h,status:!0}),d=(h,v)=>({url:"",blobInfo:h,status:!1,error:v}),u=(h,v)=>{wt.each(n[h],y=>{y(v)}),delete n[h]};return{upload:(h,v)=>{return o.url||i!==s?(C=v,y=wt.grep(y=h,E=>!t.isUploaded(E.blobUri())),Promise.all(wt.map(y,E=>{return t.isPending(E.blobUri())?(R=>{const T=R.blobUri();return new Promise(I=>{n[T]=n[T]||[],n[T].push(I)})})(E):(T=i,I=C,t.markPending((R=E).blobUri()),new Promise(N=>{let H,z;try{const U=()=>{H&&(H.close(),z=_o)},J=ge=>{U(),t.markUploaded(R.blobUri(),ge),u(R.blobUri(),c(R,ge)),N(c(R,ge))},Y=ge=>{U(),t.removeFailed(R.blobUri()),u(R.blobUri(),d(R,ge)),N(d(R,ge))};z=ge=>{ge<0||ge>100||$.from(H).orThunk(()=>$.from(I).map(Cr)).each(Ee=>{H=Ee,Ee.progressBar.value(ge)})},T(R,z).then(J,ge=>{Y(Xt(ge)?{message:ge}:ge)})}catch(U){N(d(R,U))}}));var R,T,I}))):new Promise(y=>{y([])});var y,C}}})(o,{url:Sy(t),basePath:nC(t),credentials:sh(t),handler:ky(t)}),mw={remove_similar:!0,inherit:!1},Yh={selector:"td,th",...mw},rk={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Yh},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Yh},tablecellbordercolor:{styles:{borderColor:"%value"},...Yh},tablecellclass:{classes:["%value"],...Yh},tableclass:{selector:"table",classes:["%value"],...mw},tablecellborderstyle:{styles:{borderStyle:"%value"},...Yh},tablecellborderwidth:{styles:{borderWidth:"%value"},...Yh}},_E=Ke(rk),gv=wt.each,vc=Lr.DOM,gw=t=>ie(t)&&rt(t),sk=(t,o)=>{const n=o&&o.schema||fu({}),s=d=>{const u=Xt(d)?{name:d,classes:[],attrs:{}}:d,h=vc.create(u.name);return v=h,(y=u).classes.length>0&&vc.addClass(v,y.classes.join(" ")),vc.setAttribs(v,y.attrs),h;var v,y},i=(d,u,h)=>{let v;const y=u[0],C=gw(y)?y.name:void 0,E=((I,N)=>{const H=n.getElementRule(I.nodeName.toLowerCase()),z=H?.parentsRequired;return!(!z||!z.length)&&(N&&zt(z,N)?N:z[0])})(d,C);if(E)C===E?(v=y,u=u.slice(1)):v=E;else if(y)v=y,u=u.slice(1);else if(!h)return d;const R=v?s(v):vc.create("div");R.appendChild(d),h&&wt.each(h,I=>{const N=s(I);R.insertBefore(N,d)});const T=gw(v)?v.siblings:void 0;return i(R,u,T)},c=vc.create("div");if(t.length>0){const d=t[0],u=s(d),h=gw(d)?d.siblings:void 0;c.appendChild(i(u,t.slice(1),h))}return c},EE=t=>{let o="div";const n={name:o,classes:[],attrs:{},selector:t=wt.trim(t)};return"*"!==t&&(o=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,i,c,d,u)=>{switch(i){case"#":n.attrs.id=c;break;case".":n.classes.push(c);break;case":":-1!==wt.inArray("checked disabled enabled read-only required".split(" "),c)&&(n.attrs[c]=c)}if("["===d){const h=u.match(/([\w\-]+)(?:\=\"([^\"]+))?/);h&&(n.attrs[h[1]]=h[2])}return""})),n.name=o||"div",n},ak=(t,o)=>{let n="",s=rC(t);if(""===s)return"";const i=R=>Xt(R)?R.replace(/%(\w+)/g,""):"",c=(R,T)=>vc.getStyle(T??t.getBody(),R,!0);if(Xt(o)){const R=t.formatter.get(o);if(!R)return"";o=R[0]}if("preview"in o){const R=o.preview;if(!1===R)return"";s=R||s}let d,u=o.block||o.inline||"span";const h=Xt(v=o.selector)?(v=(v=v.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),wt.map(v.split(/(?:>|\s+(?![^\[\]]+\]))/),R=>{const T=wt.map(R.split(/(?:~\+|~|\+)/),EE),I=T.pop();return T.length&&(I.siblings=T),I}).reverse()):[];var v;h.length>0?(h[0].name||(h[0].name=u),u=o.selector,d=sk(h,t)):d=sk([u],t);const y=vc.select(u,d)[0]||d.firstChild;gv(o.styles,(R,T)=>{const I=i(R);I&&vc.setStyle(y,T,I)}),gv(o.attributes,(R,T)=>{const I=i(R);I&&vc.setAttrib(y,T,I)}),gv(o.classes,R=>{const T=i(R);vc.hasClass(y,T)||vc.addClass(y,T)}),t.dispatch("PreviewFormats"),vc.setStyles(d,{position:"absolute",left:-65535}),t.getBody().appendChild(d);const C=c("fontSize"),E=/px$/.test(C)?parseInt(C,10):0;return gv(s.split(" "),R=>{let T=c(R,y);if(!("background-color"===R&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(T)&&(T=c(R),"#ffffff"===Nm(T).toLowerCase())||"color"===R&&"#000000"===Nm(T).toLowerCase())){if("font-size"===R&&/em|%$/.test(T)){if(0===E)return;T=parseFloat(T)/(/%$/.test(T)?100:1)*E+"px"}"border"===R&&T&&(n+="padding:0 2px;"),n+=R+":"+T+";"}}),t.dispatch("AfterPreviewFormats"),vc.remove(d),n},TE=t=>{const o=(s=>{const i={},c=(d,u)=>{d&&(Xt(d)?(Nt(u)||(u=[u]),Ue(u,h=>{Bt(h.deep)&&(h.deep=!hd(h)),Bt(h.split)&&(h.split=!hd(h)||Ja(h)),Bt(h.remove)&&hd(h)&&!Ja(h)&&(h.remove="none"),hd(h)&&Ja(h)&&(h.mixed=!0,h.block_expand=!0),Xt(h.classes)&&(h.classes=h.classes.split(/\s+/))}),i[d]=u):Po(d,(h,v)=>{c(v,h)}))};return c((d=>{const u=d.dom,h=d.schema.type,v={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:y=>{u.setStyle(y,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:y=>{u.setStyle(y,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const y={inline:"span",styles:{textDecoration:"line-through"},exact:!0},C={inline:"strike",remove:"all",preserve_attributes:["class","style"]},E={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==h?[E,y,C]:[y,E,C]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(y,C,E)=>Wt(y)&&y.hasAttribute("href"),onformat:(y,C,E)=>{wt.each(E,(R,T)=>{u.setAttrib(y,T,R)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":y=>{var C;return null!==(C=y?.customValue)&&void 0!==C?C:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return wt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),y=>{v[y]={block:y,remove:"all"}}),v})(s)),c(_E()),c(Lm(s)),{get:d=>ie(d)?i[d]:i,has:d=>wo(i,d),register:c,unregister:d=>(d&&i[d]&&delete i[d],i)}})(t),n=Gn({});return(s=>{s.addShortcut("meta+b","","Bold"),s.addShortcut("meta+i","","Italic"),s.addShortcut("meta+u","","Underline");for(let i=1;i<=6;i++)s.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(s=t).on("mouseup keydown",i=>{var c;((d,u,h)=>{const v=d.selection,y=d.getBody();D2(d,null,h),8!==u&&46!==u||!v.isCollapsed()||v.getStart().innerHTML!==H1||D2(d,de(y,v.getStart()),!0),37!==u&&39!==u||D2(d,de(y,v.getStart()),!0)})(s,i.keyCode,(c=s.selection.getRng().endContainer,pt(c)&&Dt(c.data,Hs)))}),Mu(t)||((s,i)=>{s.set({}),i.on("NodeChange",c=>{SS(i,c.element,s.get())}),i.on("FormatApply FormatRemove",c=>{const d=$.from(c.node).map(u=>Tu(u)?u:u.startContainer).bind(u=>Wt(u)?$.some(u):$.from(u.parentElement)).getOrThunk(()=>xS(i));SS(i,d,s.get())})})(n,t),{get:o.get,has:o.has,register:o.register,unregister:o.unregister,apply:(s,i,c)=>{var u,h,v;u=s,h=i,v=c,wa(t).formatter.apply(u,h,v)},remove:(s,i,c,d)=>{var h,v,y,C;h=s,v=i,y=c,C=d,wa(t).formatter.remove(h,v,y,C)},toggle:(s,i,c)=>{var u,h,v;u=s,h=i,v=c,wa(t).formatter.toggle(u,h,v)},match:(s,i,c,d)=>{return h=s,v=i,y=c,C=d,wa(t).formatter.match(h,v,y,C);var h,v,y,C},closest:s=>{return c=s,wa(t).formatter.closest(c);var c},matchAll:(s,i)=>{return d=s,u=i,wa(t).formatter.matchAll(d,u);var d,u},matchNode:(s,i,c,d)=>{return h=s,v=i,y=c,C=d,wa(t).formatter.matchNode(h,v,y,C);var h,v,y,C},canApply:s=>{return c=s,wa(t).formatter.canApply(c);var c},formatChanged:(s,i,c,d)=>{return h=n,v=s,y=i,C=c,E=d,wa(t).formatter.formatChanged(h,v,y,C,E);var h,v,y,C,E},getCssText:at(ak,t)};var s},pv=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},ik=t=>{const o=Ki(),n=Gn(0),s=Gn(0),i={data:[],typing:!1,beforeChange:()=>{var d,u;d=n,u=o,wa(t).undoManager.beforeChange(d,u)},add:(c,d)=>{return h=i,v=s,y=n,C=o,E=c,R=d,wa(t).undoManager.add(h,v,y,C,E,R);var h,v,y,C,E,R},dispatchChange:()=>{t.setDirty(!0);const c=Q2(t);c.bookmark=mi(t.selection),t.dispatch("change",{level:c,lastLevel:ml(i.data,s.get()).getOrUndefined()})},undo:()=>{return d=i,u=n,h=s,wa(t).undoManager.undo(d,u,h);var d,u,h},redo:()=>{return d=s,u=i.data,wa(t).undoManager.redo(d,u);var d,u},clear:()=>{var d,u;d=i,u=s,wa(t).undoManager.clear(d,u)},reset:()=>{var d;d=i,wa(t).undoManager.reset(d)},hasUndo:()=>{return d=i,u=s,wa(t).undoManager.hasUndo(d,u);var d,u},hasRedo:()=>{return d=i,u=s,wa(t).undoManager.hasRedo(d,u);var d,u},transact:c=>{return u=i,h=n,v=c,wa(t).undoManager.transact(u,h,v);var u,h,v},ignore:c=>{var u,h;u=n,h=c,wa(t).undoManager.ignore(u,h)},extra:(c,d)=>{var h,v,y,C;h=i,v=s,y=c,C=d,wa(t).undoManager.extra(h,v,y,C)}};return Mu(t)||((c,d,u)=>{const h=Gn(!1),v=y=>{cv(d,!1,u),d.add({},y)};c.on("init",()=>{d.add()}),c.on("BeforeExecCommand",y=>{pv(y.command)||(WS(d,u),d.beforeChange())}),c.on("ExecCommand",y=>{pv(y.command)||v(y)}),c.on("ObjectResizeStart cut",()=>{d.beforeChange()}),c.on("SaveContent ObjectResized blur",v),c.on("dragend",v),c.on("keyup",y=>{const C=y.keyCode;if(y.isDefaultPrevented())return;const E=Oo.os.isMacOS()&&"Meta"===y.key;(C>=33&&C<=36||C>=37&&C<=40||45===C||y.ctrlKey||E)&&(v(),c.nodeChanged()),46!==C&&8!==C||c.nodeChanged(),h.get()&&d.typing&&!Uh(Q2(c),d.data[0])&&(c.isDirty()||c.setDirty(!0),c.dispatch("TypingUndo"),h.set(!1),c.nodeChanged())}),c.on("keydown",y=>{const C=y.keyCode;if(!y.isDefaultPrevented()){if(!(C>=33&&C<=36||C>=37&&C<=40||45===C))return!(C<16||C>20)||224===C||91===C||d.typing||y.ctrlKey&&!y.altKey||y.metaKey?void((Oo.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&d.beforeChange()):(d.beforeChange(),cv(d,!0,u),d.add({},y),void h.set(!0));d.typing&&v(y)}}),c.on("mousedown",y=>{d.typing&&v(y)}),c.on("input",y=>{var C,E;y.inputType&&("insertReplacementText"===y.inputType||"insertText"===(C=y).inputType&&null===C.data||"insertFromPaste"===(E=y).inputType||"insertFromDrop"===E.inputType)&&v(y)}),c.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||c.nodeChanged()})})(t,i,n),(c=t).addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo"),i;var c},OE=[9,27,Gt.HOME,Gt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Gt.DOWN,Gt.UP,Gt.LEFT,Gt.RIGHT].concat(Oo.browser.isFirefox()?[224]:[]),AE="data-mce-placeholder",NE=t=>"keydown"===t.type||"keyup"===t.type,lk=t=>{const o=t.keyCode;return o===Gt.BACKSPACE||o===Gt.DELETE},l5=(t,o)=>({from:t,to:o}),pw=(t,o)=>{const n=ve(t),s=ve(o.container());return Pb(n,s).map(i=>((c,d)=>({block:c,position:d}))(i,o))},RE=(t,o)=>Ds(o,n=>Zu(n)||ba(n.dom),n=>$n(n,t)).filter(us).getOr(t),ME=(t,o)=>{const n=((s,i)=>{const c=xt(s);return Ui(c,d=>i.isBlock(Sn(d))).fold(Ke(c),d=>c.slice(0,d))})(t,o);return Ue(n,_e),n},DE=(t,o)=>{const n=Jm(o,t);return wr(n.reverse(),s=>Ss(s)).each(_e)},zs=(t,o,n,s,i)=>{if(Ss(n))return ol(n),L(n.dom);0===Vt(Ge(i),d=>!Ss(d)).length&&Ss(o)&&pa(i,vs("br"));const c=B(n.dom,qe.before(i.dom));return Ue(ME(o,s),d=>{pa(i,d)}),DE(t,o),c},ck=(t,o,n,s)=>{if(Ss(n)){if(Ss(o)){const d=ka((u=>{const h=(v,y)=>vo(v).fold(()=>y,C=>s.isInline(Sn(C))?h(C,y.concat(vu(C))):y);return h(u,[])})(n),(u,h)=>(G(u,h),h),tl());re(o),F(o,d)}return _e(n),L(o.dom)}const i=V(n.dom);return Ue(ME(o,s),c=>{F(n,c)}),DE(t,o),i},BE=(t,o)=>{S(t,o.dom).bind(n=>$.from(n.getNode())).map(ve).filter(Sl).each(_e)},LE=(t,o,n,s)=>{return BE(!0,o),BE(!1,n),(i=o,c=n,bl(c,i)?((d,u)=>{const h=Jm(u,d);return $.from(h[h.length-1])})(c,i):$.none()).fold(at(ck,t,o,n,s),at(zs,t,o,n,s));var i,c},Xh=(t,o,n,s,i)=>o?LE(t,s,n,i):LE(t,n,s,i),um=(t,o)=>{const n=ve(t.getBody());return(i=n.dom,c=o,d=t.selection.getRng(),d.collapsed?((u,h,v)=>{const y=pw(u,qe.fromRangeStart(v)),C=y.bind(E=>cl(h,u,E.position).bind(R=>pw(u,R).map(T=>{return I=u,N=h,Ln((H=T).position.getNode())&&!Ss(H.block)?S(!1,H.block.dom).bind(z=>z.isEqual(H.position)?cl(N,I,z).bind(U=>pw(I,U)):$.some(H)).getOr(H):H;var I,N,H})));return kr(y,C,l5).filter(E=>{return!$n((R=E).from.block,R.to.block)&&((R,T)=>{const I=ve(R);return $n(RE(I,T.from.block),RE(I,T.to.block))})(u,E)&&(R=>!1===xr(R.from.block.dom)&&!1===xr(R.to.block.dom))(E)&&(R=>{const T=I=>Qc(I)||Om(I.dom);return T(R.from.block)&&T(R.to.block)})(E);var R})})(i,c,d):$.none()).map(i=>()=>{Xh(n,o,i.from.block,i.to.block,t.schema).each(c=>{t.selection.setRng(c.toRange())})});var i,c,d},mm=(t,o)=>{const n=ve(o),s=at($n,t);return Gr(n,Zu,s).isSome()},hw=(t,o)=>t.selection.isCollapsed()?$.none():(t=>{const o=ve(t.getBody());return((n,s)=>{const i=B(n.dom,qe.fromRangeStart(s)).isNone(),c=_(n.dom,qe.fromRangeEnd(s)).isNone();return!(mm(d=n,(u=s).startContainer)||mm(d,u.endContainer))&&i&&c;var d,u})(o,t.selection.getRng())?(n=t,$.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,s,i)=>{const c=s.getRng();return kr(Pb(n,ve(c.startContainer)),Pb(n,ve(c.endContainer)),(d,u)=>$n(d,u)?$.none():$.some(()=>{c.deleteContents(),Xh(n,!0,d,u,i).each(h=>{s.setRng(h.toRange())})})).getOr($.none())})(o,t.selection,t.schema);var n})(t),gm=(t,o,n,s,i)=>$.from(o._selectionOverrides.showCaret(t,n,s,i)),hp=(t,o)=>t.dispatch("BeforeObjectSelected",{target:o}).isDefaultPrevented()?$.none():$.some((n=>{const s=n.ownerDocument.createRange();return s.selectNode(n),s})(o)),dk=(t,o,n)=>o.collapsed?((s,i,c)=>{const d=w1(1,s.getBody(),i),u=qe.fromRangeStart(d),h=u.getNode();if(zm(h))return gm(1,s,h,!u.isAtEnd(),!1);const v=u.getNode(!0);if(zm(v))return gm(1,s,v,!1,!1);const y=Hh(s.dom.getRoot(),u.getNode());return zm(y)?gm(1,s,y,!1,c):$.none()})(t,o,n).getOr(o):o,uk=t=>sm(t)||Ab(t),HE=t=>am(t)||Nb(t),mk=(t,o,n,s,i,c)=>{var d,u;gm(s,t,c.getNode(!i),i,!0).each(d=>{if(o.collapsed){const u=o.cloneRange();i?u.setEnd(d.startContainer,d.startOffset):u.setStart(d.endContainer,d.endOffset),u.deleteContents()}else o.deleteContents();t.selection.setRng(d)}),d=t.dom,pt(u=n)&&0===u.data.length&&d.remove(u)},hv=(t,o)=>((n,s)=>{const i=n.selection.getRng();if(!pt(i.commonAncestorContainer))return $.none();const c=s?Ba.Forwards:Ba.Backwards,d=gs(n.getBody()),u=at(Ch,s?d.next:d.prev),h=s?uk:HE,v=$m(c,n.getBody(),i),y=u(v),C=y&&Vc(s,y);if(!C||!Sh(v,C))return $.none();if(h(C))return $.some(()=>mk(n,i,v.getNode(),c,s,C));const E=u(C);return E&&h(E)&&Sh(C,E)?$.some(()=>mk(n,i,v.getNode(),c,s,E)):$.none()})(t,o),fw=(t,o)=>{const n=t.getBody();return o?L(n).filter(sm):V(n).filter(am)},fv=t=>{const o=t.selection.getRng();return!o.collapsed&&(fw(t,!0).exists(n=>n.isEqual(qe.fromRangeStart(o)))||fw(t,!1).exists(n=>n.isEqual(qe.fromRangeEnd(o))))},xd=Ic([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),PE=(t,o,n,s)=>cl(o,t,n).bind(i=>{return c=i.getNode(),ie(c)&&(Zu(ve(c))||Bs(ve(c)))||((d,u,h,v,y)=>{const C=E=>y.isInline(E.nodeName.toLowerCase())&&!$l(h,v,d);return xh(!u,h).fold(()=>xh(u,v).fold(Do,C),C)})(t,o,n,i,s)?$.none():o&&xr(i.getNode())||!o&&xr(i.getNode(!0))?((d,u,h,v)=>{const y=v.getNode(!u);return Pb(ve(d),ve(h.getNode())).map(C=>Ss(C)?xd.remove(C.dom):xd.moveToElement(y)).orThunk(()=>$.some(xd.moveToElement(y)))})(t,o,n,i):o&&am(n)||!o&&sm(n)?$.some(xd.moveToPosition(i)):$.none();var c}),Uc=(t,o)=>$.from(Hh(t.getBody(),o)),VE=t=>{const o=t.dom,n=t.selection,s=Hh(t.getBody(),n.getNode());if(ba(s)&&o.isBlock(s)&&o.isEmpty(s)){const i=o.create("br",{"data-mce-bogus":"1"});o.setHTML(s,""),s.appendChild(i),n.setRng(qe.before(i).toRange())}return!0},gk=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=t.selection.getNode();return Uc(t,n).filter(xr).fold(()=>((s,i,c,d)=>{const u=w1(i?1:-1,s,c),h=qe.fromRangeStart(u),v=ve(s);return!i&&am(h)?$.some(xd.remove(h.getNode(!0))):i&&sm(h)?$.some(xd.remove(h.getNode())):!i&&sm(h)&&WC(v,h,d)?Lh(v,h,d).map(y=>xd.remove(y.getNode())):i&&am(h)&&Xi(v,h,d)?_s(v,h,d).map(y=>xd.remove(y.getNode())):(y=s,R=d,((T,I)=>{const N=I.getNode(!T),H=T?"after":"before";return Wt(N)&&N.getAttribute("data-mce-caret")===H})(C=i,E=h)?(T=C,I=E.getNode(!C),yr(I)?$.none():T&&xr(I.nextSibling)?$.some(xd.moveToElement(I.nextSibling)):!T&&xr(I.previousSibling)?$.some(xd.moveToElement(I.previousSibling)):$.none()).orThunk(()=>PE(y,C,E,R)):PE(y,C,E,R).bind(T=>((I,N,H)=>H.fold(z=>$.some(xd.remove(z)),z=>$.some(xd.moveToElement(z)),z=>$l(N,z,I)?$.none():$.some(xd.moveToPosition(z))))(y,E,T)));var y,C,E,R,T,I})(t.getBody(),o,t.selection.getRng(),t.schema).map(s=>()=>s.fold(((i,c)=>d=>(i._selectionOverrides.hideFakeCaret(),ip(i,c,ve(d)),!0))(t,o),((i,c)=>d=>{const u=c?qe.before(d):qe.after(d);return i.selection.setRng(u.toRange()),!0})(t,o),(i=>c=>(i.selection.setRng(c.toRange()),!0))(t))),()=>$.some(_o))})(t,o):((n,s)=>{const i=n.selection.getNode();return xr(i)&&!Vu(i)?Uc(n,i.parentNode).filter(xr).fold(()=>$.some(()=>{var c;c=ve(n.getBody()),Ue(er(c,".mce-offscreen-selection"),_e),ip(n,s,ve(n.selection.getNode())),d2(n)}),()=>$.some(_o)):fv(n)?$.some(()=>{Fb(n,n.selection.getRng(),ve(n.getBody()))}):$.none()})(t,o),X1=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=qe.fromRangeStart(n.selection.getRng());return cl(s,n.getBody(),i).filter(c=>s?w_(c):BA(c)).bind(c=>Pn(s?0:-1,c)).map(c=>()=>n.selection.select(c))})(t,o):$.none(),J1=pt,zE=t=>J1(t)&&t.data[0]===Ps,pk=t=>J1(t)&&t.data[t.data.length-1]===Ps,bw=t=>{var o;return(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createTextNode(Ps)},vw=(t,o)=>t?(n=>{var s;if(J1(n.previousSibling))return pk(n.previousSibling)||n.previousSibling.appendData(Ps),n.previousSibling;if(J1(n))return zE(n)||n.insertData(0,Ps),n;{const i=bw(n);return null===(s=n.parentNode)||void 0===s||s.insertBefore(i,n),i}})(o):(n=>{var s,i;if(J1(n.nextSibling))return zE(n.nextSibling)||n.nextSibling.insertData(0,Ps),n.nextSibling;if(J1(n))return pk(n)||n.appendData(Ps),n;{const c=bw(n);return n.nextSibling?null===(s=n.parentNode)||void 0===s||s.insertBefore(c,n.nextSibling):null===(i=n.parentNode)||void 0===i||i.appendChild(c),c}})(o),c5=at(vw,!0),ZE=at(vw,!1),hk=(t,o)=>pt(t.container())?vw(o,t.container()):vw(o,t.getNode()),fp=(t,o)=>{const n=o.get();return n&&t.container()===n&&kl(n)},bp=(t,o)=>o.fold(n=>{ud(t.get());const s=c5(n);return t.set(s),$.some(qe(s,s.length-1))},n=>L(n).map(s=>{if(fp(s,t)){const i=t.get();return qe(i,1)}{ud(t.get());const i=hk(s,!0);return t.set(i),qe(i,1)}}),n=>V(n).map(s=>{if(fp(s,t)){const i=t.get();return qe(i,i.length-1)}{ud(t.get());const i=hk(s,!1);return t.set(i),qe(i,i.length-1)}}),n=>{ud(t.get());const s=ZE(n);return t.set(s),$.some(qe(s,1))}),Q1=(t,o)=>{for(let n=0;n<t.length;n++){const s=t[n].apply(null,o);if(s.isSome())return s}return $.none()},dl=Ic([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),fk=(t,o)=>Wl(o,t)||t,d5=(t,o,n)=>{const s=l2(n),i=fk(o,s.container());return Ou(t,i,s).fold(()=>_(i,s).bind(at(Ou,t,i)).map(c=>dl.before(c)),$.none)},UE=(t,o)=>null===de(t,o),e0=(t,o,n)=>Ou(t,o,n).filter(at(UE,o)),jE=(t,o,n)=>{const s=c2(n);return e0(t,o,s).bind(i=>B(i,s).isNone()?$.some(dl.start(i)):$.none())},WE=(t,o,n)=>{const s=l2(n);return e0(t,o,s).bind(i=>_(i,s).isNone()?$.some(dl.end(i)):$.none())},$E=(t,o,n)=>{const s=c2(n),i=fk(o,s.container());return Ou(t,i,s).fold(()=>B(i,s).bind(at(Ou,t,i)).map(c=>dl.after(c)),$.none)},qE=t=>!Ih(bv(t)),zi=(t,o,n)=>Q1([d5,jE,WE,$E],[t,o,n]).filter(qE),bv=t=>t.fold(fn,fn,fn,fn),GE=t=>t.fold(Ke("before"),Ke("start"),Ke("end"),Ke("after")),yw=t=>t.fold(dl.before,dl.before,dl.after,dl.after),ir=t=>t.fold(dl.start,dl.start,dl.end,dl.end),u5=(t,o,n,s,i,c)=>kr(Ou(o,n,s),Ou(o,n,i),(d,u)=>d!==u&&((h,v,y)=>{const C=Wl(v,h),E=Wl(y,h);return ie(C)&&C===E})(n,d,u)?dl.after(t?d:u):c).getOr(c),m5=(t,o)=>t.fold(zn,n=>{return i=o,!(GE(s=n)===GE(i)&&bv(s)===bv(i));var s,i}),Es=(t,o)=>t?o.fold(zr($.some,dl.start),$.none,zr($.some,dl.after),$.none):o.fold($.none,zr($.some,dl.before),$.none,zr($.some,dl.end)),KE=(t,o,n)=>{const s=t?1:-1;return o.setRng(qe(n.container(),n.offset()+s).toRange()),o.getSel().modify("move",t?"forward":"backward","word"),!0};var jc;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(jc||(jc={}));const ww=(t,o)=>t===Ba.Backwards?nr(o):o,YE=(t,o,n)=>t===Ba.Forwards?o.next(n):o.prev(n),vp=(t,o,n,s)=>Ln(s.getNode(o===Ba.Forwards))?jc.Br:!1===$l(n,s)?jc.Block:jc.Wrap,Yl=(t,o,n,s)=>{const i=gs(n);let c=s;const d=[];for(;c;){const u=YE(o,i,c);if(!u)break;if(Ln(u.getNode(!1)))return o===Ba.Forwards?{positions:ww(o,d).concat([u]),breakType:jc.Br,breakAt:$.some(u)}:{positions:ww(o,d),breakType:jc.Br,breakAt:$.some(u)};if(u.isVisible()){if(t(c,u)){const h=vp(0,o,c,u);return{positions:ww(o,d),breakType:h,breakAt:$.some(u)}}d.push(u),c=u}else c=u}return{positions:ww(o,d),breakType:jc.Eol,breakAt:$.none()}},t0=(t,o,n,s)=>o(n,s).breakAt.map(i=>{const c=o(n,i).positions;return t===Ba.Backwards?c.concat(i):[i].concat(c)}).getOr([]),pm=(t,o)=>lr(t,(n,s)=>n.fold(()=>$.some(s),i=>kr(Nn(i.getClientRects()),Nn(s.getClientRects()),(c,d)=>{const u=Math.abs(o-c.left);return Math.abs(o-d.left)<=u?s:i}).or(n)),$.none()),Cd=(t,o)=>Nn(o.getClientRects()).bind(n=>pm(t,n.left)),ag=at(Yl,qe.isAbove,-1),Jh=at(Yl,qe.isBelow,1),xw=at(t0,-1,ag),bk=at(t0,1,Jh),vk=(t,o)=>ag(t,o).breakAt.isNone(),XE=(t,o)=>Jh(t,o).breakAt.isNone(),g5=(t,o)=>Cd(xw(t,o),o),JE=(t,o)=>Cd(bk(t,o),o),QE=xr,yk=(t,o)=>Math.abs(t.left-o),wk=(t,o)=>Math.abs(t.right-o),Cw=(t,o)=>Ea(t,(n,s)=>{const i=Math.min(yk(n,o),wk(n,o)),c=Math.min(yk(s,o),wk(s,o));return c===i&&ns(s,"node")&&QE(s.node)||c<i?s:n}),p5=t=>{const o=n=>no(n,s=>{const i=Xr(s);return i.node=t,i});if(Wt(t))return o(t.getClientRects());if(pt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),o(n.getClientRects())}return[]},eT=t=>ps(t,p5);var vv;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(vv||(vv={}));const Du=(t,o,n,s,i,c)=>{let d=0;const u=[],h=C=>{let E=eT([C]);-1===t&&(E=E.reverse());for(let R=0;R<E.length;R++){const T=E[R];if(!n(T,v)){if(u.length>0&&o(T,xs(u))&&d++,T.line=d,i(T))return!0;u.push(T)}}return!1},v=xs(c.getClientRects());if(!v)return u;const y=c.getNode();return y&&(h(y),((C,E,R,T)=>{let I=T;for(;I=ll(I,C,Sm,E);)if(R(I))return})(t,s,h,y)),u},yv=at(Du,vv.Up,yu,Ys),tT=at(Du,vv.Down,Ys,yu),xk=t=>xs(t.getClientRects()),Ck=t=>o=>o.line>t,Sk=t=>o=>o.line===t,Xl=(t,o)=>{t.selection.setRng(o),Eb(t,t.selection.getRng())},kk=(t,o,n)=>$.some(dk(t,o,n)),oT=(t,o,n,s,i,c)=>{const d=o===Ba.Forwards,u=gs(t.getBody()),h=at(Ch,d?u.next:u.prev),v=d?s:i;if(!n.collapsed){const T=Gu(n);if(c(T))return gm(o,t,T,o===Ba.Backwards,!1);if(fv(t)){const I=n.cloneRange();return I.collapse(o===Ba.Backwards),$.from(I)}}const y=$m(o,t.getBody(),n);if(v(y))return hp(t,y.getNode(!d));let C=h(y);const E=Fp(n);if(!C)return E?$.some(n):$.none();if(C=Vc(d,C),v(C))return gm(o,t,C.getNode(!d),d,!1);const R=h(C);return R&&v(R)&&Sh(C,R)?gm(o,t,R.getNode(!d),d,!1):E?kk(t,C.toRange(),!1):$.none()},nT=(t,o,n,s,i,c)=>{const d=$m(o,t.getBody(),n),u=xs(d.getClientRects()),h=o===vv.Down,v=t.getBody();if(!u)return $.none();if(fv(t)){const I=h?qe.fromRangeEnd(n):qe.fromRangeStart(n);return(h?JE:g5)(v,I).orThunk(()=>$.from(I)).map(N=>N.toRange())}const y=(h?tT:yv)(v,Ck(1),d),C=Vt(y,Sk(1)),E=u.left,R=Cw(C,E);if(R&&c(R.node)){const I=Math.abs(E-R.left),N=Math.abs(E-R.right);return gm(o,t,R.node,I<N,!1)}let T;if(T=s(d)?d.getNode():i(d)?d.getNode(!0):Gu(n),T){const I=((H,z,U,J)=>{const Y=gs(z);let ge,Ee,Ne,Me;const Fe=[];let ye=0;1===H?(ge=Y.next,Ee=Ys,Ne=yu,Me=qe.after(J)):(ge=Y.prev,Ee=yu,Ne=Ys,Me=qe.before(J));const Te=xk(Me);do{if(!Me.isVisible())continue;const Be=xk(Me);if(Ne(Be,Te))continue;Fe.length>0&&Ee(Be,xs(Fe))&&ye++;const tt=Xr(Be);if(tt.position=Me,tt.line=ye,U(tt))return Fe;Fe.push(tt)}while(Me=ge(Me));return Fe})(o,v,Ck(1),T);let N=Cw(Vt(I,Sk(1)),E);if(N||(N=xs(Vt(I,Sk(0))),N))return kk(t,N.position.toRange(),!1)}return 0===C.length?_k(t,h).filter(h?i:s).map(I=>dk(t,I.toRange(),!1)):$.none()},_k=(t,o)=>{const n=t.selection.getRng(),s=o?qe.fromRangeEnd(n):qe.fromRangeStart(n),i=(c=s.container(),d=t.getBody(),Gr(ve(c),u=>Zm(u.dom),u=>u.dom===d).map(u=>u.dom).getOr(d));var c,d;if(o){const u=Jh(i,s);return Zn(u.positions)}{const u=ag(i,s);return Nn(u.positions)}},rT=(t,o,n)=>_k(t,o).filter(n).exists(s=>(t.selection.setRng(s.toRange()),!0)),Sw=(t,o)=>{const n=t.dom.createRng();n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),t.selection.setRng(n)},sT=(t,o)=>{t?o.setAttribute("data-mce-selected","inline-boundary"):o.removeAttribute("data-mce-selected")},aT=(t,o,n)=>bp(o,n).map(s=>(Sw(t,s),n)),wv=(t,o,n)=>!!pc(t)&&((t,o,n)=>{const s=t.getBody(),i=((c,d,u)=>{const h=qe.fromRangeStart(c);if(c.collapsed)return h;{const v=qe.fromRangeEnd(c);return u?B(d,v).getOr(v):_(d,h).getOr(h)}})(t.selection.getRng(),s,n);return((c,d,u,h)=>{const v=Vc(c,h),y=zi(d,u,v);return zi(d,u,v).bind(at(Es,c)).orThunk(()=>((C,E,R,T,I)=>{const N=Vc(C,I);return cl(C,R,N).map(at(Vc,C)).fold(()=>T.map(yw),H=>zi(E,R,H).map(at(u5,C,E,R,N,H)).filter(at(m5,T))).filter(qE)})(c,d,u,y,h))})(n,at(ar,t),s,i).bind(c=>aT(t,o,c))})(t,o,n).isSome(),iT=(t,o,n)=>!!pc(o)&&((s,i)=>{const c=i.selection.getRng(),d=s?qe.fromRangeEnd(c):qe.fromRangeStart(c);return!!ht(i.selection.getSel().modify)&&(s&&du(d)?KE(!0,i.selection,d):!(s||!Tc(d))&&KE(!1,i.selection,d))})(t,o),Ek=at(iT,!0),Qh=at(iT,!1),hm=(t,o,n)=>{if(pc(t)){const s=_k(t,o).getOrThunk(()=>{const i=t.selection.getRng();return o?qe.fromRangeEnd(i):qe.fromRangeStart(i)});return zi(at(ar,t),t.getBody(),s).exists(i=>{const c=yw(i);return bp(n,c).exists(d=>(Sw(t,d),!0))})}return!1},Cv=(t,o)=>n=>bp(o,n).map(s=>()=>Sw(t,s)),Sv=(t,o,n,s)=>{const i=t.getBody(),c=at(ar,t);t.undoManager.ignore(()=>{t.selection.setRng(((d,u)=>{const h=document.createRange();return h.setStart(d.container(),d.offset()),h.setEnd(u.container(),u.offset()),h})(n,s)),Hb(t),zi(c,i,qe.fromRangeStart(t.selection.getRng())).map(ir).bind(Cv(t,o)).each($r)}),t.nodeChanged()},ig=(t,o,n)=>{if(t.selection.isCollapsed()&&pc(t)){const s=qe.fromRangeStart(t.selection.getRng());return((i,c,d,u)=>{const h=(C=i.getBody(),E=u.container(),Wl(E,C)||C),v=at(ar,i),y=zi(v,h,u);var C,E;return y.bind(C=>d?C.fold(Ke($.some(ir(C))),$.none,Ke($.some(yw(C))),$.none):C.fold($.none,Ke($.some(yw(C))),$.none,Ke($.some(ir(C))))).map(Cv(i,c)).getOrThunk(()=>{const C=p(d,h,u),E=C.bind(R=>zi(v,h,R));return kr(y,E,()=>Ou(v,h,u).bind(R=>{return kr(L(T=R),V(T),(I,N)=>{const H=Vc(!0,I),z=Vc(!1,N);return _(T,H).forall(U=>U.isEqual(z))}).getOr(!0)?$.some(()=>{ip(i,d,ve(R))}):$.none();var T})).getOrThunk(()=>E.bind(()=>C.map(R=>()=>{d?Sv(i,c,u,R):Sv(i,c,R,u)})))})})(t,o,n,s)}return $.none()},yp=(t,o)=>{const n=ve(t.getBody()),s=ve(t.selection.getStart()),i=Jm(s,n);return Ui(i,o).fold(Ke(i),c=>i.slice(0,c))},kw=t=>1===Ao(t),kv=(t,o)=>{const n=at(qb,t);return ps(o,s=>n(s)?[s.dom]:[])},Tk=t=>{const o=yp(n=t,s=>n.schema.isBlock(Sn(s)));var n;return kv(t,o)},_w=(t,o)=>{const n=t.selection.getStart(),s=((i,c)=>{const d=c.parentElement;return Ln(c)&&!Wr(d)&&i.dom.isEmpty(d)})(t,n)||mC(ve(n))?$b(n,o):((i,c)=>{const{caretContainer:d,caretPosition:u}=B2(c);return i.insertNode(d.dom),u})(t.selection.getRng(),o);t.selection.setRng(s.toRange())},Ak=t=>pt(t.startContainer),wp=(t,o)=>t.selection.isCollapsed()?((t,o)=>{const n=Vt(yp(s=t,i=>s.schema.isBlock(Sn(i))||Ao(i)>1),kw);var s;return Zn(n).bind(s=>{const i=qe.fromRangeStart(t.selection.getRng());return u2(o,i,s.dom)&&!mC(s)?$.some(()=>((c,d,u,h)=>{const v=kv(d,h);if(0===v.length)ip(d,c,u);else{const y=$b(u.dom,v);d.selection.setRng(y.toRange())}})(o,t,s,n)):$.none()})})(t,o):(n=>{if((t=>{const o=t.selection.getRng();return 0===(n=o).startOffset&&Ak(n)&&((n,s)=>{const i=s.startContainer.parentElement;return!Wr(i)&&qb(n,ve(i))})(t,o)&&(n=>{return(i=>{const c=i.startContainer.parentNode,d=i.endContainer.parentNode;return!Wr(c)&&!Wr(d)&&c.isEqualNode(d)})(s=n)&&(i=>{const c=i.endContainer;return i.endOffset===(pt(c)?c.length:c.childNodes.length)})(s)||(s=>!s.endContainer.isEqualNode(s.commonAncestorContainer))(n);var s})(o);var n})(n)){const s=Tk(n);return $.some(()=>{Hb(n),((i,c)=>{const d=Ha(c,Tk(i));d.length>0&&_w(i,d)})(n,s)})}return $.none()})(t),o0=t=>((o=>{const n=o.selection.getRng();return n.collapsed&&(Ak(n)||o.dom.isEmpty(n.startContainer))&&!((t,o)=>Gr(t,n=>Q(n.dom),n=>o.isBlock(Sn(n))).isSome())(ve((s=o).selection.getStart()),s.schema);var s})(t)&&_w(t,[]),!0),Ew=(t,o,n)=>ie(n)?$.some(()=>{t._selectionOverrides.hideFakeCaret(),ip(t,o,ve(n))}):$.none(),n0=(t,o)=>t.selection.isCollapsed()?((n,s)=>{const i=s?Ab:Nb,d=$m(s?Ba.Forwards:Ba.Backwards,n.getBody(),n.selection.getRng());return i(d)?Ew(n,s,d.getNode(!s)):$.from(Vc(s,d)).filter(u=>i(u)&&Sh(d,u)).bind(u=>Ew(n,s,u.getNode(!s)))})(t,o):((n,s)=>{const i=n.selection.getNode();return In(i)?Ew(n,s,i):$.none()})(t,o),Tw=t=>Rr(t??"").getOr(0),Nk=(t,o)=>(t||"table"===Sn(o)?"margin":"padding")+("rtl"===yl(o,"direction")?"-right":"-left"),Rk=t=>{const o=fm(t);return!t.mode.isReadOnly()&&(o.length>1||(n=t,Ar(o,i=>{const c=Nk(Ur(n),i),d=ic(i,c).map(Tw).getOr(0);return"false"!==n.dom.getContentEditable(i.dom)&&d>0})));var n},Mk=t=>Na(t)||Bs(t),fm=t=>Vt(dt(t.selection.getSelectedBlocks()),o=>!Mk(o)&&!ee(o).exists(Mk)&&Ds(o,n=>ba(n.dom)||xr(n.dom)).exists(n=>ba(n.dom))),lg=(t,o)=>{var n,s;const{dom:i}=t,c=_y(t),d=null!==(s=null===(n=/[a-z%]+$/i.exec(c))||void 0===n?void 0:n[0])&&void 0!==s?s:"px",u=Tw(c),h=Ur(t);Ue(fm(t),v=>{((y,C,E,R,T,I)=>{const N=Nk(E,ve(I)),H=Tw(y.getStyle(I,N));if("outdent"===C){const z=Math.max(0,H-R);y.setStyle(I,N,z?z+T:"")}else y.setStyle(I,N,H+R+T)})(i,o,h,u,d,v.dom)})},Sd=t=>lg(t,"outdent"),Ow=t=>{if(t.selection.isCollapsed()&&Rk(t)){const o=t.dom,n=t.selection.getRng(),s=qe.fromRangeStart(n),i=o.getParent(n.startContainer,o.isBlock);if(null!==i&&r2(ve(i),s,t.schema))return $.some(()=>Sd(t))}return $.none()},Aw=(t,o,n)=>Ni([Ow,gk,hv,(s,i)=>ig(s,o,i),um,lp,X1,n0,hw,wp],s=>s(t,n)).filter(s=>t.selection.isEditable()),Dk=t=>void 0===t.touches||1!==t.touches.length?$.none():$.some(t.touches[0]),Nw=(t,o)=>wo(t,o.nodeName),Bk=(t,o)=>!!pt(o)||!!Wt(o)&&!(Nw(t.getBlockElements(),o)||vt(o)||nd(t,o)||Eg(o)),uT=(t,o)=>{if(pt(o)){if(0===o.data.length)return!0;if(/^\s+$/.test(o.data))return!o.nextSibling||Nw(t,o.nextSibling)||Eg(o.nextSibling)}return!1},Lk=t=>t.dom.create(za(t),Yi(t)),Ik=t=>{const o=t.dom,n=t.selection,s=t.schema,i=s.getBlockElements(),c=n.getStart(),d=t.getBody();let u,h,v=!1;const y=za(t);if(!c||!Wt(c))return;const C=d.nodeName.toLowerCase();if(!s.isValidChild(C,y.toLowerCase())||(U=i,J=d,Bn(S_(ve(c),ve(J)),ge=>Nw(U,ge.dom))))return;var U,J;const E=n.getRng(),{startContainer:R,startOffset:T,endContainer:I,endOffset:N}=E,H=Bh(t);let z=d.firstChild;for(;z;)if(Wt(z)&&gy(s,z),Bk(s,z)){if(uT(i,z)){h=z,z=z.nextSibling,o.remove(h);continue}u||(u=Lk(t),d.insertBefore(u,z),v=!0),h=z,z=z.nextSibling,u.appendChild(h)}else u=null,z=z.nextSibling;v&&H&&(E.setStart(R,T),E.setEnd(I,N),n.setRng(E),t.nodeChanged())},Bu=(t,o,n)=>{const s=ve(Lk(t)),i=tl();F(s,i),n(o,s);const c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c},kd=t=>o=>-1!==(" "+o.attr("class")+" ").indexOf(t),Rw=(t,o,n)=>function(s){const i=arguments,c=i[i.length-2],d=c>0?o.charAt(c-1):"";if('"'===d)return s;if(">"===d){const u=o.lastIndexOf("<",c);if(-1!==u&&-1!==o.substring(u,c).indexOf('contenteditable="false"'))return s}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(i[0])+'">'+t.dom.encode("string"==typeof i[1]?i[1]:i[0])+"</span>"},mT=(t,o)=>Ar(t,n=>{const s=o.match(n);return null!==s&&s[0].length===o.length}),_v=(t,o)=>{o.hasAttribute("data-mce-caret")&&(kg(o),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(o))},gT=(t,o)=>{const n=ys(ve(t.getBody()),"*[data-mce-caret]").map(i=>i.dom).getOrNull();if(n)return"compositionstart"===o.type?(o.preventDefault(),o.stopPropagation(),void _v(t,n)):void(td(n)&&(_v(t,n),t.undoManager.add()))},Hk=xr,Pk=(t,o,n)=>{const s=gs(t.getBody()),i=at(Ch,1===o?s.next:s.prev);if(n.collapsed){const c=t.dom.getParent(n.startContainer,"PRE");if(!c)return;if(!i(qe.fromRangeStart(n))){const d=ve((u=>{const h=u.dom.create(za(u));return h.innerHTML='<br data-mce-bogus="1">',h})(t));1===o?Fl(ve(c),d):pa(ve(c),d),t.selection.select(d.dom,!0),t.selection.collapse()}}},Fk=(t,o)=>((n,s)=>{const i=s?Ba.Forwards:Ba.Backwards,c=n.selection.getRng();return(d=i,u=n,h=c,oT(u,d,h,sm,am,Hk)).orThunk(()=>(Pk(n,i,c),$.none()));var d,u,h})(t,((n,s)=>{const i=s?n.getEnd(!0):n.getStart(!0);return Ih(i)?!s:s})(t.selection,o)).exists(n=>(Xl(t,n),!0)),Vk=(t,o)=>((n,s)=>{const i=s?1:-1,c=n.selection.getRng();return(d=i,u=n,h=c,nT(u,d,h,v=>sm(v)||x_(v),v=>am(v)||C_(v),Hk)).orThunk(()=>(Pk(n,i,c),$.none()));var d,u,h})(t,o).exists(n=>(Xl(t,n),!0)),zk=(t,o)=>rT(t,o,o?am:sm),ef=(t,o)=>fw(t,!o).map(n=>{const s=n.toRange(),i=t.selection.getRng();return o?s.setStart(i.startContainer,i.startOffset):s.setEnd(i.endContainer,i.endOffset),s}).exists(n=>(Xl(t,n),!0)),Zk=t=>zt(["figcaption"],Sn(t)),Uk=(t,o)=>!!t.selection.isCollapsed()&&((n,s)=>{const i=ve(n.getBody()),c=qe.fromRangeStart(n.selection.getRng());return((d,u,h)=>{const v=at($n,u);return Ds(ve(d.container()),y=>h.isBlock(Sn(y)),v).filter(Zk)})(c,i,n.schema).exists(()=>{if(d=i,h=c,s?XE(d.dom,h):vk(d.dom,h)){const d=Bu(n,i,s?F:Zr);return n.selection.setRng(d),!0}var d,h;return!1})})(t,o),Mw=(t,o)=>{return n=t,o?$.from(n.dom.getParent(n.selection.getNode(),"details")).map(i=>((c,d)=>{const u=c.selection.getRng(),h=qe.fromRangeStart(u);return!(c.getBody().lastChild!==d||!XE(d,h)||(c.execCommand("InsertNewBlockAfter"),0))})(n,i)).getOr(!1):$.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(i=>$.from(n.dom.getParent(i,"details")).map(c=>((d,u,h)=>{const v=d.selection.getRng(),y=qe.fromRangeStart(v);return!(d.getBody().firstChild!==u||!vk(h,y)||(d.execCommand("InsertNewBlockBefore"),0))})(n,c,i))).getOr(!1);var n},pT={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},hT=(t,o)=>o.keyCode===t.keyCode&&o.shiftKey===t.shiftKey&&o.altKey===t.altKey&&o.ctrlKey===t.ctrlKey&&o.metaKey===t.metaKey,jo=(t,...o)=>()=>t.apply(null,o),Ev=(t,o)=>{return wr((s=o,ps(no(t,c=>({...pT,...c})),i=>hT(i,s)?[i]:[])),n=>n.action());var s},fT=(t,o)=>{return Ni((s=o,ps(no(t,c=>({...pT,...c})),i=>hT(i,s)?[i]:[])),n=>n.action());var s},bT=(t,o)=>{const n=o?Ba.Forwards:Ba.Backwards,s=t.selection.getRng();return oT(t,n,s,Ab,Nb,In).exists(i=>(Xl(t,i),!0))},Tv=(t,o)=>{const n=o?1:-1,s=t.selection.getRng();return nT(t,n,s,Ab,Nb,In).exists(i=>(Xl(t,i),!0))},Dw=(t,o)=>rT(t,o,o?Nb:Ab),jk=Ic([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),tf={...jk,none:t=>jk.none(t)},vT=(t,o,n)=>ps(xt(t),s=>ai(s,o)?n(s)?[s]:[]:vT(s,o,n)),yT=(t,o)=>ac(t,"table",o),Wk=(t,o,n,s,i=zn)=>{const c=1===s;if(!c&&n<=0)return tf.first(t[0]);if(c&&n>=t.length-1)return tf.last(t[t.length-1]);{const d=n+s,u=t[d];return i(u)?tf.middle(o,u):Wk(t,o,d,s,i)}},wT=(t,o)=>yT(t,o).bind(n=>{const s=vT(n,"th,td",zn);return Ui(s,i=>$n(t,i)).map(i=>({index:i,all:s}))}),xT=(t,o,n,s,i)=>{const c=er(ve(n),"td,th,caption").map(u=>u.dom);var u;return((u,h,v)=>lr(u,(y,C)=>y.fold(()=>$.some(C),E=>{const R=Math.sqrt(Math.abs(E.x-h)+Math.abs(E.y-v)),T=Math.sqrt(Math.abs(C.x-h)+Math.abs(C.y-v));return $.some(T<R?C:E)}),$.none()))(Vt((u=t,ps(c,v=>{const y={left:(C=Xr(v.getBoundingClientRect())).left- -1,top:C.top- -1,right:C.right+-2,bottom:C.bottom+-2,width:C.width+-1,height:C.height+-1};var C;return[{x:y.left,y:u(y),cell:v},{x:y.right,y:u(y),cell:v}]})),u=>o(u,i)),s,i).map(u=>u.cell)},f5=at(xT,t=>t.bottom,(t,o)=>t.y<o),Bw=at(xT,t=>t.top,(t,o)=>t.y>o),Ov=(t,o,n)=>{const s=t(o,n);return(i=s).breakType===jc.Wrap&&0===i.positions.length||!Ln(n.getNode())&&(i=>i.breakType===jc.Br&&1===i.positions.length)(s)?!((i,c,d)=>d.breakAt.exists(u=>i(c,u).breakAt.isSome()))(t,o,s):s.breakAt.isNone();var i},Lw=at(Ov,ag),b5=at(Ov,Jh),v5=(t,o,n,s)=>{const i=t.selection.getRng(),c=o?1:-1;return!(!yh()||!((d,u,h)=>{const v=qe.fromRangeStart(u);return S(!d,h).exists(y=>y.isEqual(v))})(o,i,n)||(gm(c,t,n,!o,!1).each(d=>{Xl(t,d)}),0))},CT=(t,o,n)=>{const s=((c,d)=>{const u=d.getNode(c);return xl(u)?$.some(u):$.none()})(!!o,n),i=!1===o;s.fold(()=>Xl(t,n.toRange()),c=>S(i,t.getBody()).filter(d=>d.isEqual(n)).fold(()=>Xl(t,n.toRange()),d=>{return u=o,v=c,void(h=t).undoManager.transact(()=>{const y=u?Fl:pa,C=Bu(h,ve(v),y);Xl(h,C)});var u,h,v}))},y5=(t,o,n,s)=>{const i=t.selection.getRng(),c=qe.fromRangeStart(i),d=t.getBody();if(!o&&Lw(s,c)){const u=(h=d,(C=v=n,E=y=c,Nn(E.getClientRects()).bind(R=>f5(C,R.left,R.top)).bind(R=>{return Cd(V(T=R).map(I=>ag(T,I).positions.concat(I)).getOr([]),E);var T})).orThunk(()=>Nn(y.getClientRects()).bind(C=>pm(xw(h,qe.before(v)),C.left))).getOr(qe.before(v)));return CT(t,o,u),!0}var h,v,y,C,E;if(o&&b5(s,c)){const u=((h,v,y)=>((C,E)=>Zn(E.getClientRects()).bind(R=>Bw(C,R.left,R.top)).bind(R=>{return Cd(L(T=R).map(I=>[I].concat(Jh(T,I).positions)).getOr([]),E);var T}))(v,y).orThunk(()=>Nn(y.getClientRects()).bind(C=>pm(bk(h,qe.after(v)),C.left))).getOr(qe.after(v)))(d,n,c);return CT(t,o,u),!0}return!1},ST=(t,o,n)=>$.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(s=>$.from(t.dom.getParent(s,"table")).map(i=>n(t,o,i,s))).getOr(!1),kT=(t,o)=>ST(t,o,v5),Wc=(t,o)=>ST(t,o,y5),Iw=(t,o,n)=>n.fold($.none,$.none,(s,i)=>{return(c=i,Gs(c,i_)).map(d=>{return(t=>{const o=T1.getWin(t).dom,n=(i,c,d,u)=>Rh(o,i,c,d,u),s=t.match({domRange:c=>{const d=ve(c.startContainer),u=ve(c.endContainer);return Mh(d,c.startOffset,u,c.endOffset)},relative:xb,exact:Mh});return((i,c)=>{var u;return((u,h)=>{const v=h.ltr();return v.collapsed?h.rtl().filter(y=>!1===y.collapsed).map(y=>Un.rtl(ve(y.endContainer),y.endOffset,ve(y.startContainer),y.startOffset)).getOrThunk(()=>bC(0,Un.ltr,v)):bC(0,Un.ltr,v)})(0,(u=i,c.match({domRange:v=>({ltr:Ke(v),rtl:$.none}),relative:(v,y)=>({ltr:Nr(()=>I3(u,v,y)),rtl:Nr(()=>$.some(I3(u,y,v)))}),exact:(v,y,C,E)=>({ltr:Nr(()=>Rh(u,v,y,C,E)),rtl:Nr(()=>$.some(Rh(u,C,E,v,y)))})})))})(o,s).match({ltr:n,rtl:n})})(T1.exact(u=d,0,u,0));var u});var c},s=>(t.execCommand("mceTableInsertRowAfter"),$k(t,o,s))),$k=(t,o,n)=>{return Iw(t,o,(i=Yc,wT(s=n,void 0).fold(()=>tf.none(s),c=>Wk(c.all,s,c.index,1,i))));var s,i},_T=(t,o,n)=>{return Iw(t,o,(i=Yc,wT(s=n,void 0).fold(()=>tf.none(),c=>Wk(c.all,s,c.index,-1,i))));var s,i},qk=(t,o)=>{const n=["table","li","dl"],s=ve(t.getBody()),i=d=>{const u=Sn(d);return $n(d,s)||zt(n,u)},c=t.selection.getRng();return(d=ve(o?c.endContainer:c.startContainer),u=i,((h,v,y=Do)=>y(v)?$.none():zt(h,Sn(v))?$.some(v):sc(v,h.join(","),C=>ai(C,"table")||y(C)))(["td","th"],d,u)).map(d=>(yT(d,i).each(u=>{t.model.table.clearSelectedCells(u.dom)}),t.selection.collapse(!o),(o?$k:_T)(t,i,d).each(u=>{t.selection.setRng(u)}),!0)).getOr(!1);var d,u},Lu=(t,o)=>({container:t,offset:o}),Av=Lr.DOM,Hw=t=>o=>t===o?-1:0,xp=(t,o,n)=>{if(pt(t)&&o>=0)return $.some(Lu(t,o));{const s=al(Av);return $.from(s.backwards(t,o,Hw(t),n)).map(i=>Lu(i.container,i.container.data.length))}},Pw=(t,o,n)=>{if(!pt(t))return $.none();if(o>=0&&o<=t.data.length)return $.some(Lu(t,o));{const i=al(Av);return $.from(i.backwards(t,o,Hw(t),n)).bind(c=>Pw(c.container,o+c.container.data.length,n))}},Gk=(t,o,n)=>{if(!pt(t))return $.none();const s=t.data;if(o<=s.length)return $.some(Lu(t,o));{const i=al(Av);return $.from(i.forwards(t,o,Hw(t),n)).bind(c=>Gk(c.container,o-s.length,n))}},Fw=(t,o,n,s,i)=>{const c=al(t,(d=>u=>d.isBlock(u)||zt(["BR","IMG","HR","INPUT"],u.nodeName)||"false"===d.getContentEditable(u))(t));return $.from(c.backwards(o,n,s,i))},Vw=t=>nl(t.toString().replace(/\u00A0/g," ")),ET=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),Kk=(t,o)=>t.substring(o.length),cg=(t,o,n,s=0)=>{return(i=ve(o.startContainer),ac(i,l_)).fold(()=>((c,d,u,h=0)=>{if(!(v=d).collapsed||!pt(v.startContainer))return $.none();var v;const y={text:"",offset:0},C=c.getParent(d.startContainer,c.isBlock)||c.getRoot();return Fw(c,d.startContainer,d.startOffset,(E,R,T)=>(y.text=T+y.text,y.offset+=R,((I,N,H)=>{let z;const U=H.charAt(0);for(z=N-1;z>=0;z--){const J=I.charAt(z);if(ET(J))return $.none();if(U===J&&Lt(I,H,z,N))break}return $.some(z)})(y.text,y.offset,u).getOr(R)),C).bind(E=>{const R=d.cloneRange();if(R.setStart(E.container,E.offset),R.setEnd(d.endContainer,d.endOffset),R.collapsed)return $.none();const T=Vw(R);return 0!==T.lastIndexOf(u)||Kk(T,u).length<h?$.none():$.some({text:Kk(T,u),range:R,trigger:u})})})(t,o,n,s),c=>{const d=t.createRng();d.selectNode(c.dom);const u=Vw(d);return $.some({range:d,text:Kk(u,n),trigger:n})});var i},zw=t=>{if(3===t.nodeType)return Lu(t,t.data.length);{const o=t.childNodes;return o.length>0?zw(o[o.length-1]):Lu(t,o.length)}},TT=(t,o)=>{const n=t.childNodes;return n.length>0&&o<n.length?TT(n[o],0):n.length>0&&1===t.nodeType&&n.length===o?zw(n[n.length-1]):Lu(t,o)},OT=(t,o,n,s={})=>{var i;const c=o(),d=null!==(i=t.selection.getRng().startContainer.nodeValue)&&void 0!==i?i:"",u=Vt(c.lookupByTrigger(n.trigger),v=>n.text.length>=v.minChars&&v.matches.getOrThunk(()=>(y=>C=>{const E=TT(C.startContainer,C.startOffset);return!((R,T)=>{var I;const N=null!==(I=R.getParent(T.container,R.isBlock))&&void 0!==I?I:R.getRoot();return Fw(R,T.container,T.offset,(H,z)=>0===z?-1:z,N).filter(H=>{const z=H.container.data.charAt(H.offset-1);return!ET(z)}).isSome()})(y,E)})(t.dom))(n.range,d,n.text));if(0===u.length)return $.none();const h=Promise.all(no(u,v=>v.fetch(n.text,v.maxResults,s).then(y=>({matchText:n.text,items:y,columns:v.columns,onAction:v.onAction,highlightOn:v.highlightOn}))));return $.some({lookupData:h,context:n})};var Jl;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Jl||(Jl={}));const Zw=(t,o,n)=>t.stype===Jl.Error?o(t.serror):n(t.svalue),dg=t=>({stype:Jl.Value,svalue:t}),Nv=t=>({stype:Jl.Error,serror:t}),w5=Zw,Iu=t=>rt(t)&&cr(t).length>100?" removed due to size":JSON.stringify(t,null,2),r0=(t,o)=>Nv([{path:t,getErrorInfo:o}]),Uw=t=>(...o)=>{if(0===o.length)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<o.length;s++){const i=o[s];for(const c in i)wo(i,c)&&(n[c]=t(n[c],i[c]))}return n},jw=Uw((t,o)=>Ut(t)&&Ut(o)?jw(t,o):o),Xk=(Uw((t,o)=>o),t=>({tag:"defaultedThunk",process:Ke(t)})),NT=(t,o,n)=>{switch(t.tag){case"field":return o(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},of=t=>({extract:(o,n)=>{return(s=t(n)).stype===Jl.Error?r0(o,Ke(s.serror)):s;var s},toString:Ke("val")}),Ww=of(dg),Jk=(t,o,n,s)=>s(wn(t,o).getOrThunk(()=>n(t))),RT=(t,o,n,s,i)=>{const c=u=>i.extract(o.concat([s]),u),d=u=>u.fold(()=>dg($.none()),h=>{return(y=i.extract(o.concat([s]),h)).stype===Jl.Value?{stype:Jl.Value,svalue:(0,$.some)(y.svalue)}:y;var y});switch(t.tag){case"required":return u=o,y=c,wn(h=n,v=s).fold(()=>{return E=v,R=h,r0(u,()=>'Could not find valid *required* value for "'+E+'" in '+Iu(R));var E,R},y);case"defaultedThunk":return Jk(n,s,t.process,c);case"option":return((u,h,v)=>v(wn(u,h)))(n,s,d);case"defaultedOptionThunk":return((u,h,v,y)=>y(wn(u,h).map(C=>!0===C?v(u):C)))(n,s,t.process,d);case"mergeWithThunk":return Jk(n,s,Ke({}),u=>{const h=jw(t.process(n),u);return c(h)})}var u,h,v,y},$w=t=>({extract:(o,n)=>((s,i,c)=>{const d={},u=[];for(const h of c)NT(h,(v,y,C,E)=>{const R=RT(C,s,i,v,E);w5(R,T=>{u.push(...T)},T=>{d[y]=T})},(v,y)=>{d[v]=y(i)});return u.length>0?Nv(u):dg(d)})(o,n,t),toString:()=>"obj{\n"+no(t,n=>NT(n,(s,i,c,d)=>s+" -> "+d.toString(),(s,i)=>"state("+s+")")).join("\n")+"}"}),Qk=t=>({extract:(o,n)=>(t=>{const o=(s=>{const i=[],c=[];return Ue(s,d=>{Zw(d,u=>c.push(u),u=>i.push(u))}),{values:i,errors:c}})(t);return o.errors.length>0?(n=o.errors,zr(Nv,ji)(n)):dg(o.values);var n})(no(n,(i,c)=>t.extract(o.concat(["["+c+"]"]),i))),toString:()=>"array("+t.toString()+")"}),Gw=(t,o)=>((t,o)=>({extract:(n,s)=>wn(s,t).fold(()=>{return c=t,r0(n,()=>'Choice schema did not contain choice key: "'+c+'"');var c},i=>{return c=n,d=s,wn(u=o,h=i).fold(()=>{return y=u,C=h,r0(c,()=>'The chosen schema: "'+C+'" did not exist in branches: '+Iu(y));var y,C},v=>v.extract(c.concat(["branch: "+h]),d));var c,d,u,h}),toString:()=>"chooseOn("+t+"). Possible values: "+cr(o)}))(t,ga(o,$w)),Rv=Ke(Ww),Kw=(t,o)=>of(n=>{const s=typeof n;return t(n)?dg(n):Nv(`Expected type: ${o} but got: ${s}`)}),MT=Kw(Ae,"number"),Yw=Kw(Xt,"string"),x5=Kw(yt,"boolean"),Xw=Kw(ht,"function"),s0=(t,o,n,s)=>({tag:"field",key:t,newKey:o,presence:n,prop:s}),DT=(t,o)=>({tag:"custom",newKey:t,instantiator:o}),e4=(t,o)=>s0(t,t,{tag:"required",process:{}},o),Cp=t=>e4(t,Yw),t4=t=>e4(t,Xw),Mv=(t,o)=>s0(t,t,{tag:"option",process:{}},o),Dv=t=>Mv(t,Yw),Sp=(t,o,n)=>s0(t,t,Xk(o),n),ug=(t,o)=>Sp(t,o,MT),o4=(t,o,n)=>{return Sp(t,o,(s=n,i=c=>zt(s,c)?xi.value(c):xi.error(`Unsupported value: "${c}", choose one of "${s.join(", ")}".`),of(c=>i(c).fold(Nv,dg))));var s,i},yc=(t,o)=>Sp(t,o,x5),mg=(t,o)=>Sp(t,o,Xw),n4=Cp("type"),BT=t4("fetch"),r4=t4("onAction"),LT=mg("onSetup",()=>_o),a0=Dv("text"),s4=Dv("icon"),IT=Dv("tooltip"),HT=Dv("label"),a4=yc("active",!1),C5=yc("enabled",!0),PT=yc("primary",!1),i0=t=>Sp("type",t,Yw),S5=$w([n4,Cp("trigger"),ug("minChars",1),(t=>s0(t,t,Xk(1),Rv()))("columns"),ug("maxResults",10),Mv("matches",Xw),BT,r4,(wc=Yw,Sp("highlightOn",[],Qk(wc)))]);var wc;const Bv=[C5,IT,s4,a0,LT],i4=[a4].concat(Bv),l4=[mg("predicate",Do),o4("scope","node",["node","editor"]),o4("position","selection",["node","selection","line"])],FT=Bv.concat([i0("contextformbutton"),PT,r4,DT("original",fn)]),Lv=i4.concat([i0("contextformbutton"),PT,r4,DT("original",fn)]),gg=Bv.concat([i0("contextformbutton")]),nf=i4.concat([i0("contextformtogglebutton")]),Jw=Gw("type",{contextformbutton:FT,contextformtogglebutton:Lv});$w([i0("contextform"),mg("initValue",Ke("")),HT,((t,o)=>s0(t,t,{tag:"required",process:{}},Qk(o)))("commands",Jw),Mv("launch",Gw("type",{contextformbutton:gg,contextformtogglebutton:nf}))].concat(l4));const d4=t=>{const o=Ki(),n=Gn(!1),s=o.isSet,i=()=>{s()&&(wa(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),o.clear())},c=Nr(()=>(t=>{const o=t.ui.registry.getAll().popups,n=ga(o,c=>{return(d=c,((t,o,n)=>{return s=(u=o.extract([t],d=n)).stype===Jl.Error?{stype:Jl.Error,serror:(u=>({input:d,errors:u}))(u.serror)}:u,Zw(s,xi.error,xi.value);var d,u,s})("Autocompleter",S5,{trigger:d.ch,...d})).fold(u=>{throw new Error("Errors: \n"+(v=>{const y=v.length>10?v.slice(0,10).concat([{path:[],getErrorInfo:Ke("... (only showing first ten failures)")}]):v;return no(y,C=>"Failed path: ("+C.path.join(" > ")+")\n"+C.getErrorInfo())})((h=u).errors).join("\n")+"\n\nInput object: "+Iu(h.input));var h},fn);var d}),s=Qn(os(n,c=>c.trigger)),i=Ot(n);return{dataset:n,triggers:s,lookupByTrigger:c=>Vt(i,d=>d.trigger===c)}})(t)),d=u=>{var h;(h=u,o.get().map(v=>cg(t.dom,t.selection.getRng(),v.trigger).bind(y=>OT(t,c,y,h))).getOrThunk(()=>((v,y)=>{const C=y(),E=v.selection.getRng();return(R=v.dom,T=E,I=C,Ni(I.triggers,N=>cg(R,T,N))).bind(R=>OT(v,y,R));var R,T,I})(t,c))).fold(i,h=>{var v,C;v=h.context,s()||(C=v.range,wa(t).autocompleter.addDecoration(C),o.set({trigger:v.trigger,matchLength:v.text.length})),h.lookupData.then(v=>{o.get().map(y=>{const C=h.context;y.trigger===C.trigger&&(C.text.length-y.matchLength>=10?i():(o.set({...y,matchLength:C.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:v}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:v}))))})})})};t.addCommand("mceAutocompleterReload",(u,h)=>{const v=rt(h)?h.fetchOptions:{};d(v)}),t.addCommand("mceAutocompleterClose",i),((u,h)=>{const v=qp(h.load,50);u.on("keypress compositionend",y=>{27!==y.which&&v.throttle()}),u.on("keydown",y=>{const C=y.which;8===C?v.throttle():27===C&&h.cancelIfNecessary()}),u.on("remove",v.cancel)})(t,{cancelIfNecessary:i,load:d})},VT=yi().browser.isSafari(),zT=t=>ol(ve(t)),u4=(t,o)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=o.textContent)||void 0===n?void 0:n.length)},Iv=(t,o)=>$.from(t.getParent(o.container(),"details")),m4=(t,o)=>Iv(t,o).isSome(),g4=(t,o)=>{const n=o.getNode();Bt(n)||t.selection.setCursorLocation(n,o.offset())},ZT=(t,o,n)=>{const s=t.dom.getParent(o.container(),"details");if(s&&!s.open){const i=t.dom.select("summary",s)[0];i&&(n?L(i):V(i)).each(c=>g4(t,c))}else g4(t,o)},UT=(t,o,n)=>{const{dom:s,selection:i}=t,c=t.getBody();if("character"===n){const d=qe.fromRangeStart(i.getRng()),u=s.getParent(d.container(),s.isBlock),h=Iv(s,d),v=u&&s.isEmpty(u),y=Wr(u?.previousSibling),C=Wr(u?.nextSibling);return!!(v&&(o?C:y)&&p(!o,c,d).exists(E=>m4(s,E)&&!cs(h,Iv(s,E))))||p(o,c,d).fold(Do,E=>{const R=Iv(s,E);if(m4(s,E)&&!cs(h,R)){if(o||ZT(t,E,!1),u&&v){if(o&&y||!o&&C)return!0;ZT(t,E,o),t.dom.remove(u)}return!0}return!1})}return!1},_i=(t,o,n)=>{return i=o,c=n,((d,u)=>{const h=$.from(d.getParent(u.startContainer,"details")),v=$.from(d.getParent(u.endContainer,"details"));if(h.isSome()||v.isSome()){const y=h.bind(C=>$.from(d.select("summary",C)[0]));return $.some({startSummary:y,startDetails:h,endDetails:v})}return $.none()})((s=t).dom,s.selection.getRng()).fold(()=>UT(s,i,c),d=>((t,o,n,s)=>{const i=t.selection.getRng(),c=qe.fromRangeStart(i),d=t.getBody();return"selection"===s?((u,h)=>{const v=h.startSummary.exists(E=>E.contains(u.startContainer)),y=h.startSummary.exists(E=>E.contains(u.endContainer)),C=h.startDetails.forall(E=>h.endDetails.forall(R=>E!==R));return(v||y)&&!(v&&y)||C})(i,o):n?(u=c,o.startSummary.exists(v=>{return y=u,V(C=v).exists(E=>Ln(E.getNode())&&B(C,E).exists(R=>R.isEqual(y))||E.isEqual(y));var y,C})||((u,h,v)=>v.startDetails.exists(y=>_(u,h).forall(C=>!y.contains(C.container()))))(d,c,o)):((u,h)=>h.startSummary.exists(v=>{return y=u,L(v).exists(E=>E.isEqual(y));var y}))(c,o)||((u,h)=>h.startDetails.exists(v=>B(v,u).forall(y=>h.startSummary.exists(C=>!C.contains(u.container())&&C.contains(y.container())))))(c,o);var u})(s,d,i,c)||UT(s,i,c))||VT&&((s,i,c)=>{const d=s.selection,u=d.getNode(),h=d.getRng(),v=qe.fromRangeStart(h);return!!li(u)&&("selection"===c&&u4(h,u)||u2(i,v,u)?zT(u):s.undoManager.transact(()=>{const y=d.getSel();let{anchorNode:C,anchorOffset:E,focusNode:R,focusOffset:T}=y??{};const I=()=>{ie(C)&&ie(E)&&ie(R)&&ie(T)&&y?.setBaseAndExtent(C,E,R,T)},N=(z,U)=>{Ue(z.childNodes,J=>{Tu(J)&&U.appendChild(J)})},H=s.dom.create("span",{"data-mce-bogus":"1"});N(u,H),u.appendChild(H),I(),"word"!==c&&"line"!==c||null==y||y.modify("extend",i?"right":"left",c),!d.isCollapsed()&&u4(d.getRng(),H)?zT(u):(s.execCommand(i?"ForwardDelete":"Delete"),C=y?.anchorNode,E=y?.anchorOffset,R=y?.focusNode,T=y?.focusOffset,N(H,u),I()),s.dom.remove(H)}),!0)})(t,o,n)?$.some(_o):$.none();var s,i,c},p4=t=>(o,n,s={})=>{const i=o.getBody(),c={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:_o,inputType:n},d=$p(new InputEvent(t));return o.dispatch(t,{...d,...c,...s})},pg=p4("input"),Qw=p4("beforeinput"),h4=yi(),f4=h4.os,ex=f4.isMacOS()||f4.isiOS(),jT=h4.browser.isFirefox(),l0=(t,o)=>{const n=t.dom,s=t.schema.getMoveCaretBeforeOnEnterElements();if(!o)return;if(/^(LI|DT|DD)$/.test(o.nodeName)){const c=(d=>{for(;d;){if(Wt(d)||pt(d)&&d.data&&/[\r\n\s]/.test(d.data))return d;d=d.nextSibling}return null})(o.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&o.insertBefore(n.doc.createTextNode(Hs),o.firstChild)}const i=n.createRng();if(o.normalize(),o.hasChildNodes()){const c=new tr(o,o);let d,u=o;for(;d=c.current();){if(pt(d)){i.setStart(d,0),i.setEnd(d,0);break}if(s[d.nodeName.toLowerCase()]){i.setStartBefore(d),i.setEndBefore(d);break}u=d,d=c.next()}d||(i.setStart(u,0),i.setEnd(u,0))}else Ln(o)?o.nextSibling&&n.isBlock(o.nextSibling)?(i.setStartBefore(o),i.setEndBefore(o)):(i.setStartAfter(o),i.setEndAfter(o)):(i.setStart(o,0),i.setEnd(o,0));t.selection.setRng(i),Eb(t,i)},Hv=(t,o)=>{const n=t.getRoot();let s,i=o;for(;i!==n&&i&&"false"!==t.getContentEditable(i);){if("true"===t.getContentEditable(i)){s=i;break}i=i.parentNode}return i!==n?s:n},b4=t=>$.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),Pv=t=>{t.innerHTML='<br data-mce-bogus="1">'},Fv=(t,o)=>{za(t).toLowerCase()===o.tagName.toLowerCase()&&((n,s,i)=>{const c=n.dom;$.from(i.style).map(c.parseStyle).each(y=>{const C={...Sg(ve(s)),...y};c.setStyles(s,C)});const d=$.from(i.class).map(y=>y.split(/\s+/)),u=$.from(s.className).map(y=>Vt(y.split(/\s+/),C=>""!==C));kr(d,u,(y,C)=>{const E=Vt(C,T=>!zt(y,T)),R=[...y,...E];c.setAttrib(s,"class",R.join(" "))});const h=["style","class"],v=ws(i,(y,C)=>!zt(h,C));c.setAttribs(s,v)})(t,o,Yi(t))},WT=(t,o,n,s,i=!0,c,d)=>{const u=t.dom,h=t.schema,v=za(t),y=n?n.nodeName.toUpperCase():"";let C=o;const E=h.getTextInlineElements();let R;R=c||"TABLE"===y||"HR"===y?u.create(c||v,d||{}):n.cloneNode(!1);let T=R;if(i){do{if(E[C.nodeName]){if(Q(C)||vt(C))continue;const I=C.cloneNode(!1);u.setAttrib(I,"id",""),R.hasChildNodes()?(I.appendChild(R.firstChild),R.appendChild(I)):(T=I,R.appendChild(I))}}while((C=C.parentNode)&&C!==s)}else u.setAttrib(R,"style",null),u.setAttrib(R,"class",null);return Fv(t,R),Pv(T),R},v4=(t,o)=>{const n=t?.parentNode;return ie(n)&&n.nodeName===o},$T=t=>ie(t)&&/^(OL|UL|LI)$/.test(t.nodeName),y4=t=>ie(t)&&/^(LI|DT|DD)$/.test(t.nodeName),c0=t=>{const o=t.parentNode;return y4(o)?o:t},rf=(t,o,n)=>{let s=t[n?"firstChild":"lastChild"];for(;s&&!Wt(s);)s=s[n?"nextSibling":"previousSibling"];return s===o},w4=t=>lr(os(Sg(ve(t)),(o,n)=>`${n}: ${o};`),(o,n)=>o+n,""),qT=(t,o)=>o&&"A"===o.nodeName&&t.isEmpty(o),Vv=(t,o)=>t.nodeName===o||t.previousSibling&&t.previousSibling.nodeName===o,x4=(t,o)=>ie(o)&&t.isBlock(o)&&!/^(TD|TH|CAPTION|FORM)$/.test(o.nodeName)&&!/^(fixed|absolute)/i.test(o.style.position)&&t.isEditable(o.parentNode)&&"false"!==t.getContentEditable(o),C4=(t,o,n)=>pt(o)?t?1===n&&o.data.charAt(n-1)===Ps?0:n:n===o.data.length-1&&o.data.charAt(n)===Ps?o.data.length:n:n,GT={insert:(t,o)=>{let n,s,i,c,d=!1;const u=t.dom,h=t.schema.getNonEmptyElements(),v=t.selection.getRng(),y=za(t),C=ve(v.startContainer),E=kt(C,v.startOffset),R=E.exists(Me=>Ga(Me)&&!Yc(Me)),T=v.collapsed&&R,I=(Me,Fe)=>WT(t,n,Y,J,G0(t),Me,Fe),N=Me=>{const Fe=C4(Me,n,s);if(pt(n)&&(Me?Fe>0:Fe<n.data.length))return!1;if(n.parentNode===Y&&d&&!Me||Me&&Wt(n)&&n===Y.firstChild)return!0;if(Vv(n,"TABLE")||Vv(n,"HR"))return d&&!Me||!d&&Me;const ye=new tr(n,Y);let Te;for(pt(n)&&(Me&&0===Fe?ye.prev():Me||Fe!==n.data.length||ye.next());Te=ye.current();){if(Wt(Te)){if(!Te.getAttribute("data-mce-bogus")){const Be=Te.nodeName.toLowerCase();if(h[Be]&&"br"!==Be)return!1}}else if(pt(Te)&&!Ld(Te.data))return!1;Me?ye.prev():ye.next()}return!0},H=()=>{let Me;return Me=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==ge?I(y):I(),((Fe,ye)=>{const Te=rh(Fe);return!yr(ye)&&(Xt(Te)?zt(wt.explode(Te),ye.nodeName.toLowerCase()):Te)})(t,c)&&x4(u,c)&&u.isEmpty(Y,void 0,{includeZwsp:!0})?Me=u.split(c,Y):u.insertAfter(Me,Y),l0(t,Me),Me};Sb(u,v).each(Me=>{v.setStart(Me.startContainer,Me.startOffset),v.setEnd(Me.endContainer,Me.endOffset)}),n=v.startContainer,s=v.startOffset;const z=!(!o||!o.shiftKey),U=!(!o||!o.ctrlKey);Wt(n)&&n.hasChildNodes()&&!T&&(d=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,s=d&&pt(n)?n.data.length:0);const J=Hv(u,n);if(!J||((Me,Fe)=>{const ye=Me.dom.getParent(Fe,"ol,ul,dl");return null!==ye&&"false"===Me.dom.getContentEditableParent(ye)})(t,n))return;z||(n=((Me,Fe,ye,Te,Be)=>{var tt,Zt;const Mt=Me.dom,mo=null!==(tt=Hv(Mt,Te))&&void 0!==tt?tt:Mt.getRoot();let co=Mt.getParent(Te,Mt.isBlock);if(!co||!x4(Mt,co)){if(co=co||mo,!co.hasChildNodes()){const oo=Mt.create(Fe);return Fv(Me,oo),co.appendChild(oo),ye.setStart(oo,0),ye.setEnd(oo,0),oo}let Mo,So=Te;for(;So&&So.parentNode!==co;)So=So.parentNode;for(;So&&!Mt.isBlock(So);)Mo=So,So=So.previousSibling;const $t=null===(Zt=Mo?.parentElement)||void 0===Zt?void 0:Zt.nodeName;if(Mo&&$t&&Me.schema.isValidChild($t,Fe.toLowerCase())){const oo=Mo.parentNode,Wo=Mt.create(Fe);for(Fv(Me,Wo),oo.insertBefore(Wo,Mo),So=Mo;So&&!Mt.isBlock(So);){const ke=So.nextSibling;Wo.appendChild(So),So=ke}ye.setStart(Te,Be),ye.setEnd(Te,Be)}}return Te})(t,y,v,n,s));let Y=u.getParent(n,u.isBlock)||u.getRoot();c=ie(Y?.parentNode)?u.getParent(Y.parentNode,u.isBlock):null,i=Y?Y.nodeName.toUpperCase():"";const ge=c?c.nodeName.toUpperCase():"";if("LI"!==ge||U||(Y=c,c=c.parentNode,i=ge),Wt(c)&&(Me=t,ye=Y,!z&&ye.nodeName.toLowerCase()===za(Me)&&Me.dom.isEmpty(ye)&&((Te,Be)=>{let Zt=Be;for(;Zt&&Zt!==Te&&Wr(Zt.nextSibling);){const mo=Zt.parentElement;if(!mo||(Mt=mo,!wo(Me.schema.getTextBlockElements(),Mt.nodeName.toLowerCase())))return lu(mo);Zt=mo}var Mt;return!1})(Me.getBody(),ye)))return((Me,Fe,ye)=>{var Te,Be,tt;const Zt=Fe(za(Me)),Mt=Me.dom.getParent(ye,lu);Mt&&(Me.dom.insertAfter(Zt,Mt),l0(Me,Zt),(null!==(tt=null===(Be=null===(Te=ye.parentElement)||void 0===Te?void 0:Te.childNodes)||void 0===Be?void 0:Be.length)&&void 0!==tt?tt:0)>1&&Me.dom.remove(ye))})(t,I,Y);var Me,ye;if(/^(LI|DT|DD)$/.test(i)&&Wt(c)&&u.isEmpty(Y))return void((Me,Fe,ye,Te,Be)=>{const tt=Me.dom,Zt=Me.selection.getRng(),Mt=ye.parentNode;if(ye===Me.getBody()||!Mt)return;var mo;$T(mo=ye)&&$T(mo.parentNode)&&(Be="LI");const co=y4(Te)?w4(Te):void 0;let Mo=y4(Te)&&co?Fe(Be,{style:w4(Te)}):Fe(Be);if(rf(ye,Te,!0)&&rf(ye,Te,!1))if(v4(ye,"LI")){const So=c0(ye);tt.insertAfter(Mo,So),(null===(oo=($t=ye).parentNode)||void 0===oo?void 0:oo.firstChild)===$t?tt.remove(So):tt.remove(ye)}else tt.replace(Mo,ye);else if(rf(ye,Te,!0))v4(ye,"LI")?(tt.insertAfter(Mo,c0(ye)),Mo.appendChild(tt.doc.createTextNode(" ")),Mo.appendChild(ye)):Mt.insertBefore(Mo,ye),tt.remove(Te);else if(rf(ye,Te,!1))tt.insertAfter(Mo,c0(ye)),tt.remove(Te);else{ye=c0(ye);const So=Zt.cloneRange();So.setStartAfter(Te),So.setEndAfter(ye);const $t=So.extractContents();if("LI"===Be&&(oo=>oo.firstChild&&"LI"===oo.firstChild.nodeName)($t)){const oo=Vt(no(Mo.children,ve),bi(Di("br")));Mo=$t.firstChild,tt.insertAfter($t,ye),Ue(oo,Wo=>Zr(ve(Mo),Wo)),co&&Mo.setAttribute("style",co)}else tt.insertAfter($t,ye),tt.insertAfter(Mo,ye);tt.remove(Te)}var $t,oo;l0(Me,Mo)})(t,I,c,Y,y);if(!(T||Y!==t.getBody()&&x4(u,Y)))return;const Ee=Y.parentNode;let Ne;if(T)Ne=I(y),E.fold(()=>{F(C,ve(Ne))},Me=>{pa(Me,ve(Ne))}),t.selection.setCursorLocation(Ne,0);else if(Cm(Y))Ne=kg(Y),u.isEmpty(Y)&&Pv(Y),Fv(t,Ne),l0(t,Ne);else if(N(!1))Ne=H();else if(N(!0)&&Ee){Ne=Ee.insertBefore(I(),Y);const Me=ve(v.startContainer).dom.hasChildNodes()&&v.collapsed;l0(t,Vv(Y,"HR")||Me?Ne:Y)}else{const Me=(ye=>{const Te=ye.cloneRange();return Te.setStart(ye.startContainer,C4(!0,ye.startContainer,ye.startOffset)),Te.setEnd(ye.endContainer,C4(!1,ye.endContainer,ye.endOffset)),Te})(v).cloneRange();Me.setEndAfter(Y);const Fe=Me.extractContents();(ye=>{Ue(gr(ve(ye),En),Te=>{const Be=Te.dom;Be.nodeValue=nl(Be.data)})})(Fe),(ye=>{let Te=ye;do{pt(Te)&&(Te.data=Te.data.replace(/^[\r\n]+/,"")),Te=Te.firstChild}while(Te)})(Fe),Ne=Fe.firstChild,u.insertAfter(Fe,Y),((ye,Te,Be)=>{var tt;const Zt=[];if(!Be)return;let Mt=Be;for(;Mt=Mt.firstChild;){if(ye.isBlock(Mt))return;Wt(Mt)&&!Te[Mt.nodeName.toLowerCase()]&&Zt.push(Mt)}let mo=Zt.length;for(;mo--;)Mt=Zt[mo],(!Mt.hasChildNodes()||Mt.firstChild===Mt.lastChild&&""===(null===(tt=Mt.firstChild)||void 0===tt?void 0:tt.nodeValue)||qT(ye,Mt))&&ye.remove(Mt)})(u,h,Ne),((ye,Te)=>{Te.normalize();const Be=Te.lastChild;(!Be||Wt(Be)&&/^(left|right)$/gi.test(ye.getStyle(Be,"float",!0)))&&ye.add(Te,"br")})(u,Y),u.isEmpty(Y)&&Pv(Y),Ne.normalize(),u.isEmpty(Ne)?(u.remove(Ne),H()):(Fv(t,Ne),l0(t,Ne))}u.setAttrib(Ne,"id",""),t.dispatch("NewBlock",{newBlock:Ne})},fakeEventName:"insertParagraph"},kp=(t,o,n)=>{const s=t.dom.createRng();n?(s.setStartBefore(o),s.setEndBefore(o)):(s.setStartAfter(o),s.setEndAfter(o)),t.selection.setRng(s),Eb(t,s)},_5=(t,o)=>{const n=vs("br");pa(ve(o),n),t.undoManager.add()},tx=(t,o)=>{E5(t.getBody(),o)||Fl(ve(o),vs("br"));const n=vs("br");Fl(ve(o),n),kp(t,n.dom,!1),t.undoManager.add()},E5=(t,o)=>{return n=qe.after(o),!!Ln(n.getNode())||_(t,qe.after(o)).map(s=>Ln(s.getNode())).getOr(!1);var n},ox=t=>t&&"A"===t.nodeName&&"href"in t,KT=t=>t.fold(Do,ox,ox,Do),YT=(t,o)=>{o.fold(_o,at(_5,t),at(tx,t),_o)},S4={insert:(t,o)=>{const n=(s=>{const i=at(ar,s),c=qe.fromRangeStart(s.selection.getRng());return zi(i,s.getBody(),c).filter(KT)})(t);n.isSome()?n.each(at(YT,t)):((s,i)=>{const d=s.dom,u=s.selection.getRng();let h,v=!1;Sb(d,u).each(N=>{u.setStart(N.startContainer,N.startOffset),u.setEnd(N.endContainer,N.endOffset)});let y=u.startOffset,C=u.startContainer;if(Wt(C)&&C.hasChildNodes()){const N=y>C.childNodes.length-1;C=C.childNodes[Math.min(y,C.childNodes.length-1)]||C,y=N&&pt(C)?C.data.length:0}let E=d.getParent(C,d.isBlock);const R=E&&E.parentNode?d.getParent(E.parentNode,d.isBlock):null;"LI"!==(R?R.nodeName.toUpperCase():"")||!(!i||!i.ctrlKey)||(E=R),pt(C)&&y>=C.data.length&&(((N,H,z)=>{const U=new tr(H,z);let J;const Y=N.getNonEmptyElements();for(;J=U.next();)if(Y[J.nodeName.toLowerCase()]||pt(J)&&J.length>0)return!0;return!1})(s.schema,C,E||d.getRoot())||(h=d.create("br"),u.insertNode(h),u.setStartAfter(h),u.setEndAfter(h),v=!0)),h=d.create("br"),Qp(d,u,h),kp(s,h,v),s.undoManager.add()})(t,o)},fakeEventName:"insertLineBreak"},zv=(t,o)=>b4(t).filter(n=>o.length>0&&ai(ve(n),o)).isSome(),$c=Ic([{br:[]},{block:[]},{none:[]}]),T5=(t,o)=>{return zv(n=t,jl(n));var n},nx=t=>(o,n)=>b4(o).filter(i=>Bs(ve(i))).isSome()===t,k4=(t,o)=>(n,s)=>b4(n).fold(Ke(""),d=>d.nodeName.toUpperCase())===t.toUpperCase()===o,O5=t=>{const o=Hv(t.dom,t.selection.getStart());return yr(o)},Zv=t=>k4("pre",t),rx=t=>(o,n)=>q0(o)===t,A5=(t,o)=>{return zv(n=t,nh(n));var n},d0=(t,o)=>o,XT=t=>{const o=za(t),n=Hv(t.dom,t.selection.getStart());return ie(n)&&t.schema.isValidChild(n.nodeName,o)},N5=t=>{const o=t.selection.getRng(),n=ve(o.startContainer),s=kt(n,o.startOffset).map(i=>Ga(i)&&!Yc(i));return o.collapsed&&s.getOr(!0)},_d=(t,o)=>(n,s)=>lr(t,(i,c)=>i&&c(n,s),!0)?$.some(o):$.none(),aa=(t,o,n)=>{o.selection.isCollapsed()||o.execCommand("delete"),ie(n)&&Qw(o,t.fakeEventName).isDefaultPrevented()||(t.insert(o,n),ie(n)&&pg(o,t.fakeEventName))},JT=(t,o)=>{const n=()=>aa(S4,t,o),s=()=>aa(GT,t,o),i=(c=t,d=o,Q1([_d([T5],$c.none()),_d([Zv(!0),O5],$c.none()),_d([k4("summary",!0)],$c.br()),_d([Zv(!0),rx(!1),d0],$c.br()),_d([Zv(!0),rx(!1)],$c.block()),_d([Zv(!0),rx(!0),d0],$c.block()),_d([Zv(!0),rx(!0)],$c.br()),_d([nx(!0),d0],$c.br()),_d([nx(!0)],$c.block()),_d([A5],$c.br()),_d([d0],$c.br()),_d([XT],$c.block()),_d([N5],$c.block())],[c,!(!d||!d.shiftKey)]).getOr($c.none()));var c,d;switch(Hc(t)){case"linebreak":i.fold(n,n,_o);break;case"block":i.fold(s,s,_o);break;case"invert":i.fold(s,n,_o);break;default:i.fold(n,s,_o)}},QT=yi(),eO=QT.os.isiOS()&&QT.browser.isSafari(),sx=(t,o)=>{var n;o.isDefaultPrevented()||(o.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact(()=>{JT(t,o)}))},tO=yi(),hg=t=>t.stopImmediatePropagation(),ax=t=>t.keyCode===Gt.PAGE_UP||t.keyCode===Gt.PAGE_DOWN,_4=(t,o,n)=>{n&&!t.get()?o.on("NodeChange",hg,!0):!n&&t.get()&&o.off("NodeChange",hg),t.set(n)},ix=(t,o)=>{const n=o.container(),s=o.offset();return pt(n)?(n.insertData(s,t),$.some(qe(n,s+t.length))):nm(o).map(i=>{const c=Bi(t);return o.isAtEnd()?Fl(i,c):pa(i,c),qe(c.dom,t.length)})},lx=at(ix,Hs),cx=at(ix," "),E4=t=>o=>{t.selection.setRng(o.toRange()),t.nodeChanged()},dx=t=>{const o=qe.fromRangeStart(t.selection.getRng()),n=ve(t.getBody());if(t.selection.isCollapsed()){const s=at(ar,t),i=qe.fromRangeStart(t.selection.getRng());return zi(s,t.getBody(),i).bind((c=>d=>d.fold(u=>B(c.dom,qe.before(u)),u=>L(u),u=>V(u),u=>_(c.dom,qe.after(u))))(n)).map(c=>()=>((d,u,h)=>v=>E_(d,v,h)?lx(u):cx(u))(n,o,t.schema)(c).each(E4(t)))}return $.none()},ux=t=>{return rs(Oo.browser.isFirefox()&&t.selection.isEditable()&&(o=t.dom,n=t.selection.getRng().startContainer,o.isEditable(o.getParent(n,"summary"))),()=>{const s=ve(t.getBody());var i,c,d;t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),(i=s,c=qe.fromRangeStart(t.selection.getRng()),d=t.schema,E_(i,c,d)?lx(c):cx(c)).each(E4(t))});var o,n},Uv=t=>By(t)?[{keyCode:Gt.TAB,action:jo(qk,t,!0)},{keyCode:Gt.TAB,shiftKey:!0,action:jo(qk,t,!1)}]:[],jv=t=>{if(t.addShortcut("Meta+P","","mcePrint"),d4(t),Mu(t))return Gn(null);{const o=(t=>{const o=Gn(null),n=at(ar,t);return t.on("NodeChange",s=>{pc(t)&&(((i,c,d)=>{const u=no(er(ve(c.getRoot()),'*[data-mce-selected="inline-boundary"]'),y=>y.dom),h=Vt(u,i),v=Vt(d,i);Ue(Ha(h,v),at(sT,!1)),Ue(Ha(v,h),at(sT,!0))})(n,t.dom,s.parents),((i,c)=>{const d=c.get();if(i.selection.isCollapsed()&&!i.composing&&d){const u=qe.fromRangeStart(i.selection.getRng());qe.isTextPosition(u)&&!du(h=u)&&!Tc(h)&&(Sw(i,((t,o)=>{return qe.isTextPosition(o)?(s=o,lb(n=t)&&s.container()===n?((i,c)=>{const d=p1(i.data.substr(0,c.offset())),u=p1(i.data.substr(c.offset()));return(d.text+u.text).length>0?(cb(i),qe(i,c.offset()-d.count)):c})(n,s):gi(n,s)):((n,s)=>s.container()===n.parentNode?((i,c)=>{const d=c.container(),u=((h,v)=>{const y=ri(h,v);return-1===y?$.none():$.some(y)})(fr(d.childNodes),i).map(h=>h<c.offset()?qe(d,c.offset()-1):c).getOr(c);return ud(i),u})(n,s):gi(n,s))(t,o);var n,s})(d,u)),c.set(null))}var h})(t,o),((i,c,d,u)=>{if(c.selection.isCollapsed()){const h=Vt(u,i);Ue(h,v=>{const y=qe.fromRangeStart(c.selection.getRng());zi(i,c.getBody(),y).bind(C=>aT(c,d,C))})}})(n,t,o,s.parents))}),o})(t);return(n=t).on("beforeinput",s=>{n.selection.isEditable()&&!Bn(s.getTargetRanges(),i=>!RC(n.dom,i))||s.preventDefault()}),(n=>{n.on("keyup compositionstart",at(gT,n))})(t),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const h=Oo.os.isMacOS()||Oo.os.isiOS();Ev([{keyCode:Gt.RIGHT,action:jo(Fk,c,!0)},{keyCode:Gt.LEFT,action:jo(Fk,c,!1)},{keyCode:Gt.UP,action:jo(Vk,c,!1)},{keyCode:Gt.DOWN,action:jo(Vk,c,!0)},...h?[{keyCode:Gt.UP,action:jo(ef,c,!1),metaKey:!0,shiftKey:!0},{keyCode:Gt.DOWN,action:jo(ef,c,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Gt.RIGHT,action:jo(kT,c,!0)},{keyCode:Gt.LEFT,action:jo(kT,c,!1)},{keyCode:Gt.UP,action:jo(Wc,c,!1)},{keyCode:Gt.DOWN,action:jo(Wc,c,!0)},{keyCode:Gt.UP,action:jo(Wc,c,!1)},{keyCode:Gt.UP,action:jo(Mw,c,!1)},{keyCode:Gt.DOWN,action:jo(Mw,c,!0)},{keyCode:Gt.RIGHT,action:jo(bT,c,!0)},{keyCode:Gt.LEFT,action:jo(bT,c,!1)},{keyCode:Gt.UP,action:jo(Tv,c,!1)},{keyCode:Gt.DOWN,action:jo(Tv,c,!0)},{keyCode:Gt.RIGHT,action:jo(wv,c,d,!0)},{keyCode:Gt.LEFT,action:jo(wv,c,d,!1)},{keyCode:Gt.RIGHT,ctrlKey:!h,altKey:h,action:jo(Ek,c,d)},{keyCode:Gt.LEFT,ctrlKey:!h,altKey:h,action:jo(Qh,c,d)},{keyCode:Gt.UP,action:jo(Uk,c,!1)},{keyCode:Gt.DOWN,action:jo(Uk,c,!0)}],u).each(v=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{let i=!1;n.on("keydown",c=>{i=c.keyCode===Gt.BACKSPACE,c.isDefaultPrevented()||((d,u,h)=>{const v=h.keyCode===Gt.BACKSPACE?"deleteContentBackward":"deleteContentForward",y=d.selection.isCollapsed(),C=y?"character":"selection",E=R=>y?R?"word":"line":"selection";fT([{keyCode:Gt.BACKSPACE,action:jo(Ow,d)},{keyCode:Gt.BACKSPACE,action:jo(gk,d,!1)},{keyCode:Gt.DELETE,action:jo(gk,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(hv,d,!1)},{keyCode:Gt.DELETE,action:jo(hv,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(ig,d,u,!1)},{keyCode:Gt.DELETE,action:jo(ig,d,u,!0)},{keyCode:Gt.BACKSPACE,action:jo(lp,d,!1)},{keyCode:Gt.DELETE,action:jo(lp,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(_i,d,!1,C)},{keyCode:Gt.DELETE,action:jo(_i,d,!0,C)},...ex?[{keyCode:Gt.BACKSPACE,altKey:!0,action:jo(_i,d,!1,E(!0))},{keyCode:Gt.DELETE,altKey:!0,action:jo(_i,d,!0,E(!0))},{keyCode:Gt.BACKSPACE,metaKey:!0,action:jo(_i,d,!1,E(!1))}]:[{keyCode:Gt.BACKSPACE,ctrlKey:!0,action:jo(_i,d,!1,E(!0))},{keyCode:Gt.DELETE,ctrlKey:!0,action:jo(_i,d,!0,E(!0))}],{keyCode:Gt.BACKSPACE,action:jo(X1,d,!1)},{keyCode:Gt.DELETE,action:jo(X1,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(n0,d,!1)},{keyCode:Gt.DELETE,action:jo(n0,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(hw,d,!1)},{keyCode:Gt.DELETE,action:jo(hw,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(um,d,!1)},{keyCode:Gt.DELETE,action:jo(um,d,!0)},{keyCode:Gt.BACKSPACE,action:jo(wp,d,!1)},{keyCode:Gt.DELETE,action:jo(wp,d,!0)}],h).filter(R=>d.selection.isEditable()).each(R=>{h.preventDefault(),Qw(d,v).isDefaultPrevented()||(R(),pg(d,v))})})(n,s,c)}),n.on("keyup",c=>{var d,u,h;c.isDefaultPrevented()||(u=c,h=i,Ev([{keyCode:Gt.BACKSPACE,action:jo(VE,d=n)},{keyCode:Gt.DELETE,action:jo(VE,d)},...ex?[{keyCode:Gt.BACKSPACE,altKey:!0,action:jo(o0,d)},{keyCode:Gt.DELETE,altKey:!0,action:jo(o0,d)},...h?[{keyCode:jT?224:91,action:jo(o0,d)}]:[]]:[{keyCode:Gt.BACKSPACE,ctrlKey:!0,action:jo(o0,d)},{keyCode:Gt.DELETE,ctrlKey:!0,action:jo(o0,d)}]],u)),i=!1})})(t,o),(n=>{let s=$.none();n.on("keydown",i=>{var c;i.keyCode===Gt.ENTER&&(eO&&(c=>{if(!c.collapsed)return!1;const d=c.startContainer;if(pt(d)){const u=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,h=d.data.charAt(c.startOffset-1);return u.test(h)}return!1})(n.selection.getRng())?(s=$.some((c=n).selection.getBookmark()),c.undoManager.add()):sx(n,i))}),n.on("keyup",i=>{i.keyCode===Gt.ENTER&&s.each(()=>{return d=i,(c=n).undoManager.undo(),s.fold(_o,u=>c.selection.moveToBookmark(u)),sx(c,d),void(s=$.none());var c,d})})})(t),(n=>{n.on("keydown",s=>{var i,c;s.isDefaultPrevented()||(c=s,fT([{keyCode:Gt.SPACEBAR,action:jo(dx,i=n)},{keyCode:Gt.SPACEBAR,action:jo(ux,i)}],c).each(d=>{c.preventDefault(),Qw(i,"insertText",{data:" "}).isDefaultPrevented()||(d(),pg(i,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",s=>{s.isComposing||(i=>{const c=ve(i.getBody());i.selection.isCollapsed()&&((t,o,n)=>{const s=o.container();if(!pt(s))return $.none();if((i=>{const c=i.container();return pt(c)&&Lt(c.data,Hs)})(o)){const i=a2(t,s,!1,n)||(c=>{const d=c.data,u=(h=>{const v=h.split("");return no(v,(y,C)=>It(y)&&C>0&&C<v.length-1&&Xn(v[C-1])&&Xn(v[C+1])?" ":y).join("")})(d);return u!==d&&(c.data=u,!0)})(s)||i2(t,s,!1,n);return rs(i,o)}if(Nl(t,o,n)){const i=a2(t,s,!0,n)||i2(t,s,!0,n);return rs(i,o)}return $.none()})(c,qe.fromRangeStart(i.selection.getRng()),i.schema).each(d=>{i.selection.setRng(d.toRange())})})(n)})})(t),(n=>{n.on("keydown",s=>{var c;s.isDefaultPrevented()||(c=s,Ev([...Uv(n)],c).each(d=>{c.preventDefault()}))})})(t),((n,s)=>{n.on("keydown",i=>{i.isDefaultPrevented()||((c,d,u)=>{const h=Oo.os.isMacOS()||Oo.os.isiOS();Ev([{keyCode:Gt.END,action:jo(zk,c,!0)},{keyCode:Gt.HOME,action:jo(zk,c,!1)},...h?[]:[{keyCode:Gt.HOME,action:jo(ef,c,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Gt.END,action:jo(ef,c,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Gt.END,action:jo(Dw,c,!0)},{keyCode:Gt.HOME,action:jo(Dw,c,!1)},{keyCode:Gt.END,action:jo(hm,c,!0,d)},{keyCode:Gt.HOME,action:jo(hm,c,!1,d)}],u).each(v=>{u.preventDefault()})})(n,s,i)})})(t,o),((n,s)=>{if(tO.os.isMacOS())return;const i=Gn(!1);n.on("keydown",c=>{ax(c)&&_4(i,n,!0)}),n.on("keyup",c=>{var d,u,h;c.isDefaultPrevented()||(h=c,Ev([{keyCode:Gt.PAGE_UP,action:jo(hm,d=n,!1,u=s)},{keyCode:Gt.PAGE_DOWN,action:jo(hm,d,!0,u)}],h)),ax(c)&&i.get()&&(_4(i,n,!1),n.nodeChanged())})})(t,o),o}var n};class Xd{constructor(o){let n;this.lastPath=[],this.editor=o;const s=this;"onselectionchange"in o.getDoc()||o.on("NodeChange click mouseup keyup focus",i=>{const c=o.selection.getRng(),d={startContainer:c.startContainer,startOffset:c.startOffset,endContainer:c.endContainer,endOffset:c.endOffset};"nodechange"!==i.type&&jy(d,n)||o.dispatch("SelectionChange"),n=d}),o.on("contextmenu",()=>{o.dispatch("SelectionChange")}),o.on("SelectionChange",()=>{const i=o.selection.getStart(!0);i&&Jn(o)&&!s.isSameElementPath(i)&&o.dom.isChildOf(i,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("mouseup",i=>{!i.isDefaultPrevented()&&Jn(o)&&("IMG"===o.selection.getNode().nodeName?bd.setEditorTimeout(o,()=>{o.nodeChanged()}):o.nodeChanged())})}nodeChanged(o={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!sC(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();s=n.getStart(!0)||i,s.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(s,i)||(s=i);const c=[];this.editor.dom.getParent(s,d=>d===i||(c.push(d),!1)),this.editor.dispatch("NodeChange",{...o,element:s,parents:c})}}isSameElementPath(o){let n;const s=this.editor,i=nr(s.dom.getParents(o,zn,s.getBody()));if(i.length===this.lastPath.length){for(n=i.length;n>=0&&i[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=i,!0}return this.lastPath=i,!1}}const u0=sl("image"),mx=sl("event"),Wv=t=>o=>{o[mx]=t},oO=Wv(0),nO=Wv(2),R5=Wv(1),sf=sl("mode"),gx=t=>o=>{o[sf]=t},rO=(t,o)=>gx(o)(t),sO=gx(0),T4=gx(2),D5=gx(1),aO=t=>o=>$.from(o[sf]).exists(s=>s===t),m0=aO(0),iO=aO(1),B5=["none","copy","link","move"],L5=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],O4=()=>{const t=new window.DataTransfer;let o="move",n="all";const s={get dropEffect(){return o},set dropEffect(i){zt(B5,i)&&(o=i)},get effectAllowed(){return n},set effectAllowed(i){(t=>$.from(t[mx]).exists(n=>0===n))(s)&&zt(L5,i)&&(n=i)},get items(){return i=s,c=t.items,{...c,get length(){return c.length},add:(d,u)=>{if(m0(i)){if(!Xt(d))return c.add(d);if(!Bt(u))return c.add(d,u)}return null},remove:d=>{m0(i)&&c.remove(d)},clear:()=>{m0(i)&&c.clear()}};var i,c},get files(){return iO(s)?Object.freeze({length:0,item:i=>null}):t.files},get types(){return t.types},setDragImage:(i,c,d)=>{m0(s)&&(s[u0]={image:i,x:c,y:d},t.setDragImage(i,c,d))},getData:i=>iO(s)?"":t.getData(i),setData:(i,c)=>{m0(s)&&t.setData(i,c)},clearData:i=>{m0(s)&&t.clearData(i)}};return sO(s),s},A4=(t,o)=>t.setData("text/html",o),N4="x-tinymce/html",$v=Ke(N4),px="\x3c!-- "+N4+" --\x3e",lO=t=>px+t,R4=t=>-1!==t.indexOf(px),M4="%MCEPASTEBIN%",D4=t=>t.dom.get("mcepastebin"),cO=t=>ie(t)&&"mcepastebin"===t.id,dO=t=>t===M4,uO=(t,o)=>(wt.each(o,n=>{t=kn(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),B4=t=>uO(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,n,s)=>n||s?Hs:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),L4=(t,o)=>({content:t,cancelled:o}),I4=(t,o)=>(t.insertContent(o,{merge:nb(t),paste:!0}),!0),hx=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),mO=(t,o,n)=>{return!(t.selection.isCollapsed()||!hx(o)||(s=t,i=o,c=n,s.undoManager.extra(()=>{c(s,i)},()=>{s.execCommand("mceInsertLink",!1,i)}),0));var s,i,c},I5=(t,o,n)=>{return s=t,!(!hx(i=o)||!Bn(ib(s),c=>Dt(i.toLowerCase(),`.${c.toLowerCase()}`)))&&((s,i,c)=>(s.undoManager.extra(()=>{c(s,i)},()=>{s.insertContent('<img src="'+i+'">')}),!0))(t,o,n);var s,i},H5=(()=>{let o=0;return()=>"mceclip"+o++})(),P5=t=>{const o=O4();return A4(o,t),T4(o),o},gO=(t,o,n,s,i)=>{const c=((v,y,C)=>{const E=v.dispatch("PastePreProcess",{content:y,internal:C}),R=((T,I)=>{const N=$1({sanitize:Pm(T),sandbox_iframes:Kg(T)},T.schema);N.addNodeFilter("meta",z=>{wt.each(z,U=>{U.remove()})});const H=N.parse(I,{forced_root_block:!1,isRootContent:!0});return rp({validate:!0},T.schema).serialize(H)})(v,E.content);return v.hasEventListeners("PastePostProcess")&&!E.isDefaultPrevented()?((T,I,N)=>{const H=T.dom.create("div",{style:"display:none"},I),z=T.dispatch("PastePostProcess",{node:H,internal:N});return L4(z.node.innerHTML,z.isDefaultPrevented())})(v,R,C):L4(R,E.isDefaultPrevented())})(t,o,n);if(!c.cancelled){const d=c.content,u=()=>{return h=t,v=d,void(s||!aC(h)?I4(h,v):(C=h,E=v,wt.each([mO,I5,I4],R=>!R(C,E,I4))));var h,v,C,E};i?Qw(t,"insertFromPaste",{dataTransfer:P5(d)}).isDefaultPrevented()||(u(),pg(t,"insertFromPaste")):u()}},fx=(t,o,n,s)=>{const i=n||R4(o);gO(t,o.replace(px,""),i,!1,s)},g0=(t,o,n)=>{const s=t.dom.encode(o).replace(/\r\n/g,"\n"),i=((c,d,u)=>{const h=c.split(/\n\n/),v=((E,R)=>{let T="<"+E;const I=os(R,(N,H)=>H+'="'+Gi.encodeAllRaw(N)+'"');return I.length&&(T+=" "+I.join(" ")),T+">"})(d,u),y="</"+d+">",C=no(h,E=>E.split(/\n/).join("<br />"));return 1===C.length?C[0]:no(C,E=>v+E+y).join("")})(Id(s,rb(t)),za(t),Yi(t));gO(t,i,!1,!0,n)},H4=t=>{const o={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const s=t.types[n];try{o[s]=t.getData(s)}catch{o[s]=""}}return o},fg=(t,o)=>o in t&&t[o].length>0,P4=t=>fg(t,"text/html")||fg(t,"text/plain"),pO=(t,o,n)=>{const s="paste"===o.type?o.clipboardData:o.dataTransfer;var i;if(gh(t)&&s){const c=((d,u)=>{const h=u.items?ps(fr(u.items),y=>"file"===y.kind?[y.getAsFile()]:[]):[],v=u.files?fr(u.files):[];return Vt(h.length>0?h:v,(y=>{const C=ib(y);return E=>Pt(E.type,"image/")&&Bn(C,R=>(T=>{const I=T.toLowerCase(),N={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return wt.hasOwn(N,I)?"image/"+N[I]:"image/"+I})(R)===E.type)})(d))})(t,s);if(c.length>0)return o.preventDefault(),(i=c,Promise.all(no(i,d=>TS(d).then(u=>({file:d,uri:u}))))).then(d=>{n&&t.selection.setRng(n),Ue(d,u=>{var h,v;h=t,ES((v=u).uri).each(({data:y,type:C,base64Encoded:E})=>{const R=E?y:btoa(y),T=v.file,I=h.editorUpload.blobCache,H=I.getByData(R,C)??((z,U,J,Y)=>{const ge=H5(),Ee=Jf(z)&&ie(J.name),Ne=Ee?((ye,Te)=>{const Be=Te.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ie(Be)?ye.dom.encode(Be[1]):void 0})(z,J.name):ge,Fe=U.create(ge,J,Y,Ne,Ee?J.name:void 0);return U.add(Fe),Fe})(h,I,T,R);fx(h,`<img src="${H.blobUri()}">`,!1,!0)})})}),!0}return!1},F4=(t,o,n,s,i)=>{let c=B4(n);const d=fg(o,$v())||R4(n),u=!d&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(c),h=hx(c);(dO(c)||!c.length||u&&!h)&&(s=!0),(s||h)&&(c=fg(o,"text/plain")&&u?o["text/plain"]:(v=>{const y=fu(),C=$1({},y);let E="";const R=y.getVoidElements(),T=wt.makeMap("script noscript style textarea video audio iframe object"," "),I=y.getBlockElements(),N=H=>{const z=H.name,U=H;if("br"!==z){if("wbr"!==z)if(R[z]&&(E+=" "),T[z])E+=" ";else{if(3===H.type&&(E+=H.value),!(H.name in y.getVoidElements())){let J=H.firstChild;if(J)do{N(J)}while(J=J.next)}I[z]&&U.next&&(E+="\n","p"===z&&(E+="\n"))}}else E+="\n"};return v=uO(v,[/<!\[[^\]]+\]>/g]),N(C.parse(v)),E})(c)),dO(c)||(s?g0(t,c,i):fx(t,c,d,i))},fO=(t,o,n,s)=>{((i,c,d)=>{if(!i)return!1;try{return i.clearData(),i.setData("text/html",c),i.setData("text/plain",d),i.setData($v(),c),!0}catch{return!1}})(t.clipboardData,o.html,o.text)?(t.preventDefault(),s()):n(o.html,s)},bx=t=>(o,n)=>{const{dom:s,selection:i}=t,c=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),d=s.create("div",{contenteditable:"true"},o);s.setStyles(c,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),c.appendChild(d),s.add(t.getBody(),c);const u=i.getRng();d.focus();const h=s.createRng();h.selectNodeContents(d),i.setRng(h),bd.setEditorTimeout(t,()=>{i.setRng(u),s.remove(c),n()},0)},V4=t=>({html:lO(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),bO=t=>{return!t.selection.isCollapsed()||!!(o=t).dom.getParent(o.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",o.getBody());var o},ja=(t,o)=>{var n,s;return np.getCaretRangeFromPoint(null!==(n=o.clientX)&&void 0!==n?n:0,null!==(s=o.clientY)&&void 0!==s?s:0,t.getDoc())},Hu=(t,o)=>{t.focus(),o&&t.selection.setRng(o)},F5=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,vO=t=>wt.trim(t).replace(F5,Nm).toLowerCase(),V5=(t,o,n)=>{const s=Ry(t);if(n||"all"===s||!My(t))return o;const i=s?s.split(/[, ]/):[];if(i&&"none"!==s){const c=t.dom,d=t.selection.getNode();o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(u,h,v,y)=>{const C=c.parseStyle(c.decode(v)),E={};for(let T=0;T<i.length;T++){const I=C[i[T]];let N=I,H=c.getStyle(d,i[T],!0);/color/.test(i[T])&&(N=vO(N),H=vO(H)),H!==N&&(E[i[T]]=I)}const R=c.serializeStyle(E,"span");return R?h+' style="'+R+'"'+y:h+y})}else o=o.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return o.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(c,d,u,h)=>d+' style="'+u+'"'+h)},p0=Ln,wO=pt,Pu=t=>xr(t.dom),xO=t=>o=>$n(ve(t),o),CO=(t,o)=>Ds(ve(t),Pu,xO(o)),z4=(t,o,n)=>{const s=new tr(t,o),i=n?s.next.bind(s):s.prev.bind(s);let c=t;for(let d=n?t:i();d&&!p0(d);d=i())va(d)&&(c=d);return c};var h0;!function(t){t.Before="before",t.After="after"}(h0||(h0={}));const Z4=(t,o)=>Math.abs(t.left-o),kO=(t,o)=>Math.abs(t.right-o),Z5=(t,o,n)=>o>t.left&&o<t.right?0:Math.min(Math.abs(t.left-o),Math.abs(t.right-o)),vx=(t,o,n,s)=>{const i=y=>va(y.node)?$.some(y):Wt(y.node)?vx(fr(y.node.childNodes),o,n,!1):$.none(),c=(y,C)=>{const E=Sr(y,(R,T)=>C(R,o,n)-C(T,o,n));return Ni(E,i).map(R=>{return s&&!pt(R.node)&&E.length>1?(T=R,I=E[1],N=C,i(I).filter(H=>Math.abs(N(T,o,n)-N(H,o,n))<2&&pt(H.node))).getOr(R):R;var T,I,N})},[d,u]=((t,o)=>{return(n=Vt(t,n=>{return(s=o)>=(i=n).top&&s<=i.bottom;var s,i}),lr(n,(s,i)=>s.fold(()=>$.some(i),c=>{const d=Math.min(i.left,c.left),u=Math.min(i.top,c.top),h=Math.max(i.right,c.right),v=Math.max(i.bottom,c.bottom);return $.some({top:u,right:h,bottom:v,left:d,width:h-d,height:v-u})}),$.none())).fold(()=>[[],t],n=>{const{pass:s,fail:i}=dn(t,c=>((d,u)=>{const h=(v=d,y=u,Math.max(0,Math.min(v.bottom,y.bottom)-Math.max(v.top,y.top))/Math.min(d.height,u.height));var v,y;return((v,y)=>v.top<y.bottom&&v.bottom>y.top)(d,u)&&h>.5})(c,n));return[s,i]});var n})(eT(t),n),{pass:h,fail:v}=dn(u,y=>y.top<n);return c(d,Z5).orThunk(()=>c(v,Zd)).orThunk(()=>c(h,Zd))},U4=(t,o,n)=>((s,i,c)=>{const d=ve(s),h=((t,o,n)=>$.from(t.dom.elementFromPoint(o,n)).map(_c))(vl(d),i,c).filter(v=>bl(d,v)).getOr(d);return((v,y,C,E)=>{const R=(T,I)=>{const N=Vt(T.dom.childNodes,bi(H=>Wt(H)&&H.classList.contains("mce-drag-container")));return I.fold(()=>vx(N,C,E,!0),H=>{const z=Vt(N,U=>U!==H.dom);return vx(z,C,E,!0)}).orThunk(()=>($n(T,v)?$.none():ce(T)).bind(H=>R(H,$.some(T))))};return R(y,$.none())})(d,h,i,c)})(t,o,n).filter(s=>hc(s.node)).map(s=>{return{node:(i=s).node,position:Z4(i,c=o)<kO(i,c)?h0.Before:h0.After};var i,c}),yx=t=>{var o,n;const s=t.getBoundingClientRect(),i=t.ownerDocument,c=i.documentElement,d=i.defaultView;return{top:s.top+(null!==(o=d?.scrollY)&&void 0!==o?o:0)-c.clientTop,left:s.left+(null!==(n=d?.scrollX)&&void 0!==n?n:0)-c.clientLeft}},wx=t=>({target:t,srcElement:t}),xx=xr,_O=((...t)=>o=>{for(let n=0;n<t.length;n++)if(t[n](o))return!0;return!1})(xx,ba),EO=(t,o,n,s)=>{const i=t.dom,c=o.cloneNode(!0);i.setStyles(c,{width:n,height:s}),i.setAttrib(c,"data-mce-selected",null);const d=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(d,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),i.setStyles(c,{margin:0,boxSizing:"border-box"}),d.appendChild(c),d},f0=(t,o)=>n=>()=>{const s="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:s+o,behavior:"smooth"})},TO=f0("left",-32),W4=f0("left",32),Cx=f0("top",-32),$4=f0("top",32),q4=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_p=(t,o,n,s,i)=>{"dragstart"===o&&A4(s,t.dom.getOuterHTML(n));const c=((t,o,n,s)=>{const i=((c,d)=>{const u=(h=>{const v=O4(),y=$.from(h[sf]);return T4(h),oO(v),v.dropEffect=h.dropEffect,v.effectAllowed=h.effectAllowed,(C=h,$.from(C[u0])).each(C=>v.setDragImage(C.image,C.x,C.y)),Ue(h.types,C=>{"Files"!==C&&v.setData(C,h.getData(C))}),Ue(h.files,C=>v.items.add(C)),(C=>$.from(C[mx]))(h).each(C=>{var E;E=v,Wv(C)(E)}),y.each(C=>{rO(h,C),rO(v,C)}),v;var C})(c);return"dragstart"===d?(oO(u),sO(u)):"drop"===d?(nO(u),T4(u)):(R5(u),D5(u)),u})(n,t);return Bt(s)?((c,d,u)=>{const h=Kn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:c,composedPath:h,initEvent:h,preventDefault:_o,stopImmediatePropagation:_o,stopPropagation:_o,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:h,initMouseEvent:h,getModifierState:h,dataTransfer:u,...wx(d)}})(t,o,i):(c=t,d=s,u=o,h=i,{...d,dataTransfer:h,type:c,...wx(u)});var c,d,u,h})(o,n,s,i);return t.dispatch(o,c)},G4=(t,o,n)=>{t.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>_p(o,"dragend",s.element,s.dataTransfer),i=>_p(o,"dragend",s.element,s.dataTransfer,i))}),AO(t)},AO=t=>{t.on(o=>{o.intervalId.clear(),q4(o.ghost)}),t.clear()},qv=xr,NO=(t,o)=>Hh(t.getBody(),o),j5=t=>{const o=t.selection,n=t.dom,s=t.getBody(),i=((t,o,n,s)=>{const i=Ki();let c,d;const u=za(t),h=t.dom,v=()=>{(y=>{var C,E;const R=er(ve(y),"*[contentEditable=false],video,audio,embed,object");for(let T=0;T<R.length;T++){const I=R[T].dom;let N=I.previousSibling;if(ci(N)){const H=N.data;1===H.length?null===(C=N.parentNode)||void 0===C||C.removeChild(N):N.deleteData(H.length-1,1)}N=I.nextSibling,Dd(N)&&(1===N.data.length?null===(E=N.parentNode)||void 0===E||E.removeChild(N):N.deleteData(0,1))}})(o),d&&(ud(d),d=null),i.on(y=>{h.remove(y.caret),i.clear()}),c&&(clearInterval(c),c=void 0)};return{show:(y,C)=>{let E;if(v(),vh(C))return null;if(!n(C))return d=((R,T)=>{var I;const N=(null!==(I=R.ownerDocument)&&void 0!==I?I:document).createTextNode(Ps),H=R.parentNode;if(T){const z=R.previousSibling;if(Uu(z)){if(Kr(z))return z;if(ci(z))return z.splitText(z.data.length-1)}H?.insertBefore(N,R)}else{const z=R.nextSibling;if(Uu(z)){if(Kr(z))return z;if(Dd(z))return z.splitText(1),z}R.nextSibling?H?.insertBefore(N,R.nextSibling):H?.appendChild(N)}return N})(C,y),E=C.ownerDocument.createRange(),zm(d.nextSibling)?(E.setStart(d,0),E.setEnd(d,0)):(E.setStart(d,1),E.setEnd(d,1)),E;{const R=((N,H,z)=>{var U;const J=(null!==(U=H.ownerDocument)&&void 0!==U?U:document).createElement(N);J.setAttribute("data-mce-caret",z?"before":"after"),J.setAttribute("data-mce-bogus","all"),J.appendChild(tl().dom);const Y=H.parentNode;return z?Y?.insertBefore(J,H):H.nextSibling?Y?.insertBefore(J,H.nextSibling):Y?.appendChild(J),J})(u,C,y),T=tm(o,C,y);h.setStyle(R,"top",T.top),d=R;const I=h.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});h.setStyles(I,{...T}),h.add(o,I),i.set({caret:I,element:C,before:y}),y&&h.addClass(I,"mce-visual-caret-before"),c=setInterval(()=>{i.on(N=>{s()?h.toggleClass(N.caret,"mce-visual-caret-hidden"):h.addClass(N.caret,"mce-visual-caret-hidden")})},500),E=C.ownerDocument.createRange(),E.setStart(R,0),E.setEnd(R,0)}return E},hide:v,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{i.on(y=>{const C=tm(o,y.element,y.before);h.setStyles(y.caret,{...C})})},destroy:()=>clearInterval(c)}})(t,s,n.isBlock,()=>Bh(t)),c="sel-"+n.uniqueId(),d="data-mce-selected";let u;const h=N=>N!==s&&(qv(N)||In(N))&&n.isChildOf(N,s)&&n.isEditable(N.parentNode),v=(N,H,z,U=!0)=>t.dispatch("ShowCaret",{target:H,direction:N,before:z}).isDefaultPrevented()?null:(U&&o.scrollIntoView(H,-1===N),i.show(z,H)),y=N=>Kr(N)||Dd(N)||ci(N),C=N=>y(N.startContainer)||y(N.endContainer),R=(N,H)=>{if(!N)return null;if(N.collapsed){if(!C(N)){const Y=H?1:-1,ge=$m(Y,s,N),Ee=ge.getNode(!H);if(ie(Ee)){if(hc(Ee))return v(Y,Ee,!!H&&!ge.isAtEnd(),!1);if(kl(Ee)&&xr(Ee.nextSibling)){const Me=n.createRng();return Me.setStart(Ee,0),Me.setEnd(Ee,0),Me}}const Ne=ge.getNode(H);if(ie(Ne)){if(hc(Ne))return v(Y,Ne,!H&&!ge.isAtEnd(),!1);if(kl(Ne)&&xr(Ne.previousSibling)){const Me=n.createRng();return Me.setStart(Ne,1),Me.setEnd(Ne,1),Me}}}return null}let z=N.startContainer,U=N.startOffset;const J=N.endOffset;if(pt(z)&&0===U&&qv(z.parentNode)&&(z=z.parentNode,U=n.nodeIndex(z),z=z.parentNode),!Wt(z))return null;if(J===U+1&&z===N.endContainer){const Y=z.childNodes[U];if(h(Y))return(ge=>{const Ee=ge.cloneNode(!0),Ne=t.dispatch("ObjectSelected",{target:ge,targetClone:Ee});if(Ne.isDefaultPrevented())return null;const Me=((ye,Te)=>{const Be=ve(t.getBody()),tt=t.getDoc(),Zt=ys(Be,"#"+c).getOrThunk(()=>{const co=fl('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',tt);return mr(co,"id",c),F(Be,co),co}),Mt=n.createRng();re(Zt),K(Zt,[Bi(Hs,tt),ve(Te),Bi(Hs,tt)]),Mt.setStart(Zt.dom.firstChild,1),Mt.setEnd(Zt.dom.lastChild,0),au(Zt,{top:n.getPos(ye,t.getBody()).y+"px"}),Gy(Zt);const mo=o.getSel();return mo&&(mo.removeAllRanges(),mo.addRange(Mt)),Mt})(ge,Ne.targetClone),Fe=ve(ge);return Ue(er(ve(t.getBody()),`*[${d}]`),ye=>{$n(Fe,ye)||as(ye,d)}),n.getAttrib(ge,d)||ge.setAttribute(d,"1"),u=ge,I(),Me})(Y)}return null},T=()=>{u&&u.removeAttribute(d),ys(ve(t.getBody()),"#"+c).each(_e),u=null},I=()=>{i.hide()};return Mu(t)||(t.on("click",N=>{n.isEditable(N.target)||(N.preventDefault(),t.focus())}),t.on("blur NewBlock",T),t.on("ResizeWindow FullscreenStateChanged",i.reposition),t.on("tap",N=>{const H=N.target,z=NO(t,H);qv(z)?(N.preventDefault(),hp(t,z).each(R)):h(H)&&hp(t,H).each(R)},!0),t.on("mousedown",N=>{const H=N.target;if(H!==s&&"HTML"!==H.nodeName&&!n.isChildOf(H,s)||!((U,J,Y)=>{const ge=ve(U.getBody()),Ee=U.inline?ge:ve(vl(ge).dom.documentElement),Ne=((Me,Fe,ye,Te)=>{const Be=Fe.dom.getBoundingClientRect();return{x:ye-(Me?Be.left+Fe.dom.clientLeft+uv(Fe):0),y:Te-(Me?Be.top+Fe.dom.clientTop+SE(Fe):0)}})(U.inline,Ee,J,Y);return((Me,Fe,ye)=>{const Te=xE(Me),Be=CE(Me);return Fe>=0&&ye>=0&&Fe<=Te&&ye<=Be})(Ee,Ne.x,Ne.y)})(t,N.clientX,N.clientY))return;T(),I();const z=NO(t,H);qv(z)?(N.preventDefault(),hp(t,z).each(R)):U4(s,N.clientX,N.clientY).each(U=>{var J;N.preventDefault(),(J=v(1,U.node,U.position===h0.Before,!1))&&o.setRng(J),wl(z)?z.focus():t.getBody().focus()})}),t.on("keypress",N=>{Gt.modifierPressed(N)||qv(o.getNode())&&N.preventDefault()}),t.on("GetSelectionRange",N=>{let H=N.range;if(u){if(!u.parentNode)return void(u=null);H=H.cloneRange(),H.selectNode(u),N.range=H}}),t.on("SetSelectionRange",N=>{N.range=(N=>{const H=t.schema.getVoidElements(),z=n.createRng(),U=N.startContainer,J=N.startOffset,Y=N.endContainer,ge=N.endOffset;return wo(H,U.nodeName.toLowerCase())?0===J?z.setStartBefore(U):z.setStartAfter(U):z.setStart(U,J),wo(H,Y.nodeName.toLowerCase())?0===ge?z.setEndBefore(Y):z.setEndAfter(Y):z.setEnd(Y,ge),z})(N.range);const H=R(N.range,N.forward);H&&(N.range=H)}),t.on("AfterSetSelectionRange",N=>{const H=N.range,z=H.startContainer.parentElement;var U,J;C(H)||Wt(U=z)&&"mcepastebin"===U.id||I(),ie(J=z)&&n.hasClass(J,"mce-offscreen-selection")||T()}),(t=>{const o=Ki(),n=Lr.DOM,s=document,i=((h,v)=>y=>{if(0===y.button){const C=wr(v.dom.getParents(y.target),_O).getOr(null);if(ie(C)&&(E=v.dom,R=v.getBody(),xx(T=C)&&T!==R&&E.isEditable(T.parentElement))){const E=v.dom.getPos(C),R=v.getBody(),T=v.getDoc().documentElement;h.set({element:C,dataTransfer:O4(),dragging:!1,screenX:y.screenX,screenY:y.screenY,maxX:(v.inline?R.scrollWidth:T.offsetWidth)-2,maxY:(v.inline?R.scrollHeight:T.offsetHeight)-2,relX:y.pageX-E.x,relY:y.pageY-E.y,width:C.offsetWidth,height:C.offsetHeight,ghost:EO(v,C,C.offsetWidth,C.offsetHeight),intervalId:Ff(100)})}}var E,R,T})(o,t),c=((t,o)=>{const n=ld((i,c)=>{return u=i,h=c,(d=o)._selectionOverrides.hideFakeCaret(),void U4(d.getBody(),u,h).fold(()=>d.selection.placeCaretAt(u,h),v=>{const y=d._selectionOverrides.showCaret(1,v.node,v.position===h0.Before,!1);y?d.selection.setRng(y):d.selection.placeCaretAt(u,h)});var d,u,h},0);o.on("remove",n.cancel);const s=t;return i=>t.on(c=>{const d=Math.max(Math.abs(i.screenX-c.screenX),Math.abs(i.screenY-c.screenY));if(!c.dragging&&d>10){const v=_p(o,"dragstart",c.element,c.dataTransfer,i);if(ie(v.dataTransfer)&&(c.dataTransfer=v.dataTransfer),v.isDefaultPrevented())return;c.dragging=!0,o.focus()}if(c.dragging){const v=i.currentTarget===o.getDoc().documentElement,y=((C,E)=>({pageX:E.pageX-C.relX,pageY:E.pageY+5}))(c,(E=i,R=(N=C=o).inline?yx(N.getBody()):{left:0,top:0},T=(N=>{const H=N.getBody();return N.inline?{left:H.scrollLeft,top:H.scrollTop}:{left:0,top:0}})(C),I=((N,H)=>{if(H.target.ownerDocument!==N.getDoc()){const z=yx(N.getContentAreaContainer()),U=(J=>{const Y=J.getBody(),ge=J.getDoc().documentElement;return J.inline?{left:Y.scrollLeft,top:Y.scrollTop}:{left:Y.scrollLeft||ge.scrollLeft,top:Y.scrollTop||ge.scrollTop}})(N);return{left:H.pageX-z.left+U.left,top:H.pageY-z.top+U.top}}return{left:H.pageX,top:H.pageY}})(C,E),{pageX:I.left-R.left+T.left,pageY:I.top-R.top+T.top}));u=c.ghost,h=o.getBody(),u.parentNode!==h&&h.appendChild(u),((C,E,R,T,I,N,H,z,U,J,Y,ge)=>{let Ee=0,Ne=0;C.style.left=E.pageX+"px",C.style.top=E.pageY+"px",E.pageX+R>I&&(Ee=E.pageX+R-I),E.pageY+T>N&&(Ne=E.pageY+T-N),C.style.width=R-Ee+"px",C.style.height=T-Ne+"px";const Me=U.clientHeight,Fe=U.clientWidth,ye=H+U.getBoundingClientRect().top,Te=z+U.getBoundingClientRect().left;Y.on(Be=>{Be.intervalId.clear(),Be.dragging&&ge&&(H+8>=Me?Be.intervalId.set($4(J)):H-8<=0?Be.intervalId.set(Cx(J)):z+8>=Fe?Be.intervalId.set(W4(J)):z-8<=0?Be.intervalId.set(TO(J)):ye+16>=window.innerHeight?Be.intervalId.set($4(window)):ye-16<=0?Be.intervalId.set(Cx(window)):Te+16>=window.innerWidth?Be.intervalId.set(W4(window)):Te-16<=0&&Be.intervalId.set(TO(window)))})})(c.ghost,y,c.width,c.height,c.maxX,c.maxY,i.clientY,i.clientX,o.getContentAreaContainer(),o.getWin(),s,v),n.throttle(i.clientX,i.clientY)}var C,E,N,R,T,I,u,h})})(o,t),d=((h,v)=>y=>{h.on(C=>{var E,R,T,I;if(C.intervalId.clear(),C.dragging){if(R=v,T=(R=>{const T=R.getSel();if(ie(T)){const I=T.getRangeAt(0).startContainer;return pt(I)?I.parentNode:I}return null})(v.selection),I=C.element,!yr(T)&&T!==I&&!R.dom.isChildOf(T,I)&&R.dom.isEditable(T)){const R=null!==(E=v.getDoc().elementFromPoint(y.clientX,y.clientY))&&void 0!==E?E:v.getBody();_p(v,"drop",R,C.dataTransfer,y).isDefaultPrevented()||v.undoManager.transact(()=>{((T,I)=>{const N=T.getParent(I.parentNode,T.isBlock);q4(I),N&&N!==T.getRoot()&&T.isEmpty(N)&&ol(ve(N))})(v.dom,C.element),(T=>{const I=T.getData("text/html");return""===I?$.none():$.some(I)})(C.dataTransfer).each(T=>v.insertContent(T)),v._selectionOverrides.hideFakeCaret()})}_p(v,"dragend",v.getBody(),C.dataTransfer,y)}}),AO(h)})(o,t),u=((h,v)=>y=>G4(h,v,$.some(y)))(o,t);t.on("mousedown",i),t.on("mousemove",c),t.on("mouseup",d),n.bind(s,"mousemove",c),n.bind(s,"mouseup",u),t.on("remove",()=>{n.unbind(s,"mousemove",c),n.unbind(s,"mouseup",u)}),t.on("keydown",h=>{h.keyCode===Gt.ESC&&G4(o,t,$.none())})})(N=t),qg(N)&&(H=>{const z=Y=>{if(!Y.isDefaultPrevented()){const ge=Y.dataTransfer;ge&&(zt(ge.types,"Files")||ge.files.length>0)&&(Y.preventDefault(),"drop"===Y.type&&uw(H,"Dropped file type is not supported"))}},U=Y=>{Tb(H,Y.target)&&z(Y)},J=()=>{const Y=Lr.DOM,ge=H.dom,Ee=document,Ne=H.inline?H.getBody():H.getDoc(),Me=["drop","dragover"];Ue(Me,Fe=>{Y.bind(Ee,Fe,U),ge.bind(Ne,Fe,z)}),H.on("remove",()=>{Ue(Me,Fe=>{Y.unbind(Ee,Fe,U),ge.unbind(Ne,Fe,z)})})};H.on("init",()=>{bd.setEditorTimeout(H,J,0)})})(N),(N=>{const H=ld(()=>{if(!N.removed&&N.getBody().contains(document.activeElement)){const z=N.selection.getRng();if(z.collapsed){const U=dk(N,z,!1);N.selection.setRng(U)}}},0);N.on("focus",()=>{H.throttle()}),N.on("blur",()=>{H.cancel()})})(t),(N=>{N.on("init",()=>{N.on("focusin",H=>{const z=H.target;if(In(z)){const U=Hh(N.getBody(),z),J=xr(U)?U:z;N.selection.getNode()!==J&&hp(N,J).each(Y=>N.selection.setRng(Y))}})})})(t)),{showCaret:v,showBlockCaretContainer:N=>{N.hasAttribute("data-mce-caret")&&(kg(N),o.scrollIntoView(N))},hideFakeCaret:I,destroy:()=>{i.destroy(),u=null}};var N},Js=(t,o)=>{let n=o;for(let s=t.previousSibling;pt(s);s=s.previousSibling)n+=s.data.length;return n},Sx=(t,o,n,s,i)=>{if(pt(n)&&(s<0||s>n.data.length))return[];const c=i&&pt(n)?[Js(n,s)]:[s];let d=n;for(;d!==o&&d.parentNode;)c.push(t.nodeIndex(d,i)),d=d.parentNode;return d===o?c.reverse():[]},Jd=(t,o,n,s,i,c,d=!1)=>({start:Sx(t,o,n,s,d),end:Sx(t,o,i,c,d)}),K4=(t,o)=>{const n=o.slice(),s=n.pop();return Ae(s)?lr(n,(i,c)=>i.bind(d=>$.from(d.childNodes[c])),$.some(t)).bind(i=>pt(i)&&(s<0||s>i.data.length)?$.none():$.some({node:i,offset:s})):$.none()},Y4=(t,o)=>K4(t,o.start).bind(({node:n,offset:s})=>K4(t,o.end).map(({node:i,offset:c})=>{const d=document.createRange();return d.setStart(n,s),d.setEnd(i,c),d})),bg=(t,o,n)=>{if(o&&t.isEmpty(o)&&!n(o)){const s=o.parentNode;t.remove(o,pt(o.firstChild)&&Ld(o.firstChild.data)),bg(t,s,n)}},b0=(t,o,n,s=!0)=>{const i=o.startContainer.parentNode,c=o.endContainer.parentNode;o.deleteContents(),s&&!n(o.startContainer)&&(pt(o.startContainer)&&0===o.startContainer.data.length&&t.remove(o.startContainer),pt(o.endContainer)&&0===o.endContainer.data.length&&t.remove(o.endContainer),bg(t,i,n),i!==c&&bg(t,c,n))},kx=(t,o)=>$.from(t.dom.getParent(o.startContainer,t.dom.isBlock)),X4=(t,o,n)=>{const s=t.dynamicPatternsLookup({text:n,block:o});return{...t,blockPatterns:oh(s).concat(t.blockPatterns),inlinePatterns:zg(s).concat(t.inlinePatterns)}},J4=(t,o,n,s)=>{const i=t.createRng();return i.setStart(o,0),i.setEnd(n,s),i.toString()},RO=(t,o,n)=>{((s,i,c)=>{if(pt(s)&&0>=s.length)return $.some(Lu(s,0));{const d=al(Av);return $.from(d.forwards(s,0,Hw(s),c)).map(u=>Lu(u.container,0))}})(o,0,o).each(s=>{const i=s.container;Gk(i,n.start.length,o).each(u=>{const h=t.createRng();h.setStart(i,0),h.setEnd(u.container,u.offset),b0(t,h,v=>v===o)});const c=ve(i),d=Ie(c);var u,h;/^\s[^\s]/.test(d)&&(u=c,h=d.slice(1),el.set(u,h))})},MO=(t,o)=>t.create("span",{"data-mce-type":"bookmark",id:o}),_x=(t,o)=>{const n=t.createRng();return n.setStartAfter(o.start),n.setEndBefore(o.end),n},Q4=(t,o,n)=>{const s=Y4(t.getRoot(),n).getOrDie("Unable to resolve path range"),i=s.startContainer,c=s.endContainer,d=0===s.endOffset?c:c.splitText(s.endOffset),u=0===s.startOffset?i:i.splitText(s.startOffset),h=u.parentNode;return{prefix:o,end:d.parentNode.insertBefore(MO(t,o+"-end"),d),start:h.insertBefore(MO(t,o+"-start"),u)}},e3=(t,o,n)=>{bg(t,t.get(o.prefix+"-end"),n),bg(t,t.get(o.prefix+"-start"),n)},t3=t=>0===t.start.length,Ex=(t,o,n,s)=>{const i=o.start;var c;return Fw(t,s.container,s.offset,(c=i,(d,u)=>{const h=d.data.substring(0,u),v=h.lastIndexOf(c.charAt(c.length-1)),y=h.lastIndexOf(c);return-1!==y?y+c.length:-1!==v?v+1:-1}),n).bind(d=>{var u,h;const v=null!==(h=null===(u=n.textContent)||void 0===u?void 0:u.indexOf(i))&&void 0!==h?h:-1;if(-1!==v&&d.offset>=v+i.length){const y=t.createRng();return y.setStart(d.container,d.offset-i.length),y.setEnd(d.container,d.offset),$.some(y)}return Pw(d.container,d.offset-i.length,n).map(C=>{const E=t.createRng();return E.setStart(C.container,C.offset),E.setEnd(d.container,d.offset),E}).filter(C=>C.toString()===i).orThunk(()=>Ex(t,o,n,Lu(d.container,0)))})},DO=(t,o,n,s)=>{const i=t.dom,c=i.getRoot(),d=n.pattern,u=n.position.container,h=n.position.offset;return Pw(u,h-n.pattern.end.length,o).bind(v=>{const y=Jd(i,c,v.container,v.offset,u,h,s);if(t3(d))return $.some({matches:[{pattern:d,startRng:y,endRng:y}],position:v});{const C=Tx(t,n.remainingPatterns,v.container,v.offset,o,s),E=C.getOr({matches:[],position:v}),R=E.position;return((I,N,H,z,U,J=!1)=>{if(0===N.start.length&&!J){const Y=I.createRng();return Y.setStart(H,z),Y.setEnd(H,z),$.some(Y)}return xp(H,z,U).bind(Y=>Ex(I,N,U,Y).bind(ge=>{var Ee;return J&&(ge.endContainer===Y.container&&ge.endOffset===Y.offset||0===Y.offset&&(null===(Ee=ge.endContainer.textContent)||void 0===Ee?void 0:Ee.length)===ge.endOffset)?$.none():$.some(ge)}))})(i,d,R.container,R.offset,o,C.isNone()).map(I=>{const N=((H,z,U,J=!1)=>Jd(H,z,U.startContainer,U.startOffset,U.endContainer,U.endOffset,J))(i,c,I,s);return{matches:E.matches.concat([{pattern:d,startRng:N,endRng:y}]),position:Lu(I.startContainer,I.startOffset)}})}})},Tx=(t,o,n,s,i,c)=>{const d=t.dom;return xp(n,s,d.getRoot()).bind(u=>{const h=J4(d,i,n,s);for(let v=0;v<o.length;v++){const y=o[v];if(!Dt(h,y.end))continue;const C=o.slice();C.splice(v,1);const E=DO(t,i,{pattern:y,remainingPatterns:C,position:u},c);if(E.isNone()&&s>0)return Tx(t,o,n,s-1,i,c);if(E.isSome())return E}return $.none()})},o3=(t,o,n)=>{t.selection.setRng(n),"inline-format"===o.type?Ue(o.format,s=>{t.formatter.apply(s)}):t.execCommand(o.cmd,!1,o.value)},BO=(t,o,n,s,i,c)=>{var d;return((u,h)=>{const v=Ar(u,y=>Bn(h,C=>y.pattern.start===C.pattern.start&&y.pattern.end===C.pattern.end));return u.length===h.length?v?u:h:u.length>h.length?u:h})(Tx(t,i.inlinePatterns,n,s,o,c).fold(()=>[],u=>u.matches),Tx(t,(d=i.inlinePatterns,Sr(d,(u,h)=>h.end.length-u.end.length)),n,s,o,c).fold(()=>[],u=>u.matches))},LO=(t,o)=>{if(0===o.length)return;const n=t.dom,s=t.selection.getBookmark(),i=((c,d)=>{const u=sl("mce_textpattern"),h=ka(d,(v,y)=>{const C=Q4(c,u+`_end${v.length}`,y.endRng);return v.concat([{...y,endMarker:C}])},[]);return ka(h,(v,y)=>{const C=h.length-v.length-1,E=t3(y.pattern)?y.endMarker:Q4(c,u+`_start${C}`,y.startRng);return v.concat([{...y,startMarker:E}])},[])})(n,o);Ue(i,c=>{const d=n.getParent(c.startMarker.start,n.isBlock),u=h=>h===d;t3(c.pattern)?((h,v,y,C)=>{const E=_x(h.dom,y);b0(h.dom,E,C),o3(h,v,E)})(t,c.pattern,c.endMarker,u):((h,v,y,C,E)=>{const R=h.dom,T=_x(R,C),I=_x(R,y);b0(R,I,E),b0(R,T,E);const H=_x(R,{prefix:y.prefix,start:y.end,end:C.start});o3(h,v,H)})(t,c.pattern,c.startMarker,c.endMarker,u),e3(n,c.endMarker,u),e3(n,c.startMarker,u)}),t.selection.moveToBookmark(s)},IO=(t,o,n)=>{for(let s=0;s<t.length;s++)if(n(t[s],o))return!0;return!1},n3=Lr.DOM,$5=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,v0=t=>ws(t,o=>!1===Bt(o)),HO=t=>{const o=t.options.get,n=t.editorUpload.blobCache;return v0({allow_conditional_comments:o("allow_conditional_comments"),allow_html_data_urls:o("allow_html_data_urls"),allow_svg_data_urls:o("allow_svg_data_urls"),allow_html_in_named_anchor:o("allow_html_in_named_anchor"),allow_script_urls:o("allow_script_urls"),allow_unsafe_link_target:o("allow_unsafe_link_target"),convert_unsafe_embeds:o("convert_unsafe_embeds"),convert_fonts_to_spans:o("convert_fonts_to_spans"),fix_list_elements:o("fix_list_elements"),font_size_legacy_values:o("font_size_legacy_values"),forced_root_block:o("forced_root_block"),forced_root_block_attrs:o("forced_root_block_attrs"),preserve_cdata:o("preserve_cdata"),inline_styles:o("inline_styles"),root_name:$5(t),sandbox_iframes:o("sandbox_iframes"),sanitize:o("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},Ox=t=>{const o=t.options.get;return v0({custom_elements:o("custom_elements"),extended_valid_elements:o("extended_valid_elements"),invalid_elements:o("invalid_elements"),invalid_styles:o("invalid_styles"),schema:o("schema"),valid_children:o("valid_children"),valid_classes:o("valid_classes"),valid_elements:o("valid_elements"),valid_styles:o("valid_styles"),verify_html:o("verify_html"),padd_empty_block_inline_children:o("format_empty_lines")})},Gv=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,PO=t=>{const o=Gv(t),n=Y0(t),s=t.contentCSS,i=()=>{o.unloadAll(s),t.inline||t.ui.styleSheetLoader.unloadAll(n)},c=()=>{t.removed?i():t.on("remove",i)};if(t.contentStyles.length>0){let h="";wt.each(t.contentStyles,v=>{h+=v+"\r\n"}),t.dom.addStyle(h)}const d=Promise.all(((h,v,y)=>{const{pass:C,fail:E}=dn(v,I=>tinymce.Resource.has(mv(I))),T=[...C.map(I=>{const N=tinymce.Resource.get(mv(I));return Xt(N)?Promise.resolve(Gv(h).loadRawCss(I,N)):Promise.resolve()}),Gv(h).loadAll(E)];return h.inline?T:T.concat([h.ui.styleSheetLoader.loadAll(y)])})(t,s,n)).then(c).catch(c),u=ah(t);return u&&((h,v)=>{const y=ve(h.getBody()),C=qn(gn(y)),E=vs("style");mr(E,"type","text/css"),F(E,Bi(v)),F(C,E),h.on("remove",()=>{_e(E)})})(t,u),d},r3=t=>{var o;!0!==t.removed&&(Mu(o=t)||o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),(o=>{o.bindPendingEventDelegates(),o.initialized=!0,o.dispatch("Init"),o.focus(!0),(s=>{const i=s.dom.getRoot();s.inline||Jn(s)&&s.selection.getStart(!0)!==i||L(i).each(c=>{const d=c.getNode(),u=xl(d)?L(d).getOr(c):c;s.selection.setRng(u.toRange())})})(o),o.nodeChanged({initial:!0});const n=dd(o);ht(n)&&n.call(o,o),(s=>{const i=Ny(s);i&&bd.setEditorTimeout(s,()=>{let c;c=!0===i?s:s.editorManager.get(i),c&&!c.destroyed&&(c.focus(),c.selection.scrollIntoView())},100)})(o)})(t))},Qd=t=>{const o=t.getElement();let n=t.getDoc();t.inline&&(n3.addClass(o,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=o,t.contentAreaContainer=o);const s=t.getBody();var d,u;s.disabled=!0,t.readonly=em(t),t._editableRoot=n1(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===n3.getStyle(s,"position",!0)&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,t.editorUpload=(t=>{const o=(()=>{let I=[];const N=U=>{if(!U.blob||!U.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const J=U.id||"blobid"+a5+++(()=>{const Ne=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+Ne()+Ne()+Ne()})(),Y=U.name||J,ge=U.blob;var Ee;return{id:Ke(J),name:Ke(Y),filename:Ke(U.filename||Y+"."+(Ee=ge.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[Ee.toLowerCase()]||"dat")),blob:Ke(ge),base64:Ke(U.base64),blobUri:Ke(U.blobUri||URL.createObjectURL(ge)),uri:Ke(U.uri)}},H=U=>wr(I,U).getOrUndefined(),z=U=>H(J=>J.id()===U);return{create:(U,J,Y,ge,Ee)=>{if(Xt(U))return N({id:U,name:ge,filename:Ee,blob:J,base64:Y});if(rt(U))return N(U);throw new Error("Unknown input type")},add:U=>{z(U.id())||I.push(U)},get:z,getByUri:U=>H(J=>J.blobUri()===U),getByData:(U,J)=>H(Y=>Y.base64()===U&&Y.blob().type===J),findFirst:H,removeByUri:U=>{I=Vt(I,J=>J.blobUri()!==U||(URL.revokeObjectURL(J.blobUri()),!1))},destroy:()=>{Ue(I,U=>{URL.revokeObjectURL(U.blobUri())}),I=[]}}})();let n,s;const i=ek(),c=[],d=I=>N=>t.selection?I(N):[],u=(I,N,H)=>{let z=0;do{z=I.indexOf(N,z),-1!==z&&(I=I.substring(0,z)+H+I.substr(z+N.length),z+=H.length-N.length+1)}while(-1!==z);return I},h=(I,N,H)=>(I=u(I,`src="${N}"`,`src="${H}"${H===Oo.transparentSrc?' data-mce-placeholder="1"':""}`),u(I,'data-mce-src="'+N+'"','data-mce-src="'+H+'"')),v=(I,N)=>{Ue(t.undoManager.data,H=>{"fragmented"===H.type?H.fragments=no(H.fragments,z=>h(z,I,N)):H.content=h(H.content,I,N)})},y=()=>(n||(n=ok(t,i)),R().then(d(I=>{const N=no(I,H=>H.blobInfo);return n.upload(N,tk(t)).then(d(H=>{const z=[];let U=!1;const J=no(H,(Y,ge)=>{const{blobInfo:Ee,image:Ne}=I[ge];let Me=!1;return Y.status&&Qf(t)?(Y.url&&!Lt(Ne.src,Y.url)&&(U=!0),o.removeByUri(Ne.src),Mu(t)||((Fe,ye)=>{const Te=t.convertURL(ye,"src");var Be;v(Fe.src,ye),Oa(ve(Fe),{src:Jf(t)?(Be=ye,Be+(-1===Be.indexOf("?")?"?":"&")+(new Date).getTime()):ye,"data-mce-src":Te})})(Ne,Y.url)):Y.error&&(Y.error.remove&&(v(Ne.src,Oo.transparentSrc),z.push(Ne),Me=!0),uw(t,Ii.translate(["Failed to upload image: {0}",Y.error.message]))),{element:Ne,status:Y.status,uploadUri:Y.url,blobInfo:Ee,removed:Me}});return z.length>0&&!Mu(t)?t.undoManager.transact(()=>{Ue(dt(z),Y=>{const ge=ee(Y);_e(Y),ge.each((Ee=>Ne=>{var Me,Fe;(Me=Ee).dom.isEmpty((Fe=Ne).dom)&&ie(Me.schema.getTextBlockElements()[Sn(Fe)])&&F(Ne,fl('<br data-mce-bogus="1" />'))})(t)),o.removeByUri(Y.dom.src)})}):U&&t.undoManager.dispatchChange(),J}))}))),C=()=>Xf(t)?y():Promise.resolve([]),E=I=>Ar(c,N=>N(I)),R=()=>(s||(s=((t,o)=>{const n={};return{findAll:(s,i=zn)=>{const c=Vt((u=s)?fr(u.getElementsByTagName("img")):[],u=>{const h=u.src;return!u.hasAttribute("data-mce-bogus")&&!u.hasAttribute("data-mce-placeholder")&&!(!h||h===Oo.transparentSrc)&&(Pt(h,"blob:")?!t.isUploaded(h)&&i(u):!!Pt(h,"data:")&&i(u))}),d=no(c,u=>{const h=u.src;if(wo(n,h))return n[h].then(v=>Xt(v)?v:{image:u,blobInfo:v.blobInfo});{const v=((y,C)=>{const E=()=>Promise.reject("Invalid data URI");if(Pt(C,"blob:")){const I=y.getByUri(C);return ie(I)?Promise.resolve(I):(R=C,Pt(R,"blob:")?(N=R,fetch(N).then(H=>H.ok?H.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${N} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Pt(R,"data:")?(T=R,new Promise((N,H)=>{ES(T).bind(({type:z,data:U,base64Encoded:J})=>ev(z,U,J)).fold(()=>H("Invalid data URI"),N)})):Promise.reject("Unknown URI format")).then(N=>TS(N).then(H=>AS(H,!1,z=>$.some(z2(y,N,z))).getOrThunk(E)))}var N,R,T;return Pt(C,"data:")?NS(y,C).fold(E,I=>Promise.resolve(I)):Promise.reject("Unknown image data format")})(o,h).then(y=>(delete n[h],{image:u,blobInfo:y})).catch(y=>(delete n[h],y));return n[h]=v,v}});var u;return Promise.all(d)}}})(i,o)),s.findAll(t.getBody(),E).then(d(I=>{const N=Vt(I,H=>Xt(H)?(uw(t,H),!1):"blob"!==H.uriType);return Mu(t)||Ue(N,H=>{v(H.image.src,H.blobInfo.blobUri()),H.image.src=H.blobInfo.blobUri(),H.image.removeAttribute("data-mce-src")}),N}))),T=I=>I.replace(/src="(blob:[^"]+)"/g,(N,H)=>{const z=i.getResultUri(H);if(z)return'src="'+z+'"';let U=o.getByUri(H);return U||(U=lr(t.editorManager.get(),(J,Y)=>J||Y.editorUpload&&Y.editorUpload.blobCache.getByUri(H),void 0)),U?'src="data:'+U.blob().type+";base64,"+U.base64()+'"':N});return t.on("SetContent",()=>{Xf(t)?C():R()}),t.on("RawSaveContent",I=>{I.content=T(I.content)}),t.on("GetContent",I=>{I.source_view||"raw"===I.format||"tree"===I.format||(I.content=T(I.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",I=>{Ue(I,N=>{const H=N.attr("src");if(!H||o.getByUri(H))return;const z=i.getResultUri(H);z&&N.attr("src",z)})})}),{blobCache:o,addFilter:I=>{c.push(I)},uploadImages:y,uploadImagesAuto:C,scanForImages:R,destroy:()=>{o.destroy(),i.destroy(),s=n=null}}})(t),t.schema=fu(Ox(t)),t.dom=Lr(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Ug(t),referrerPolicy:Ci(t),onSetAttrib:d=>{t.dispatch("SetAttrib",d)},force_hex_color:iC(t)}),t.parser=(d=>{const u=$1(HO(d),d.schema);return u.addAttributeFilter("src,href,style,tabindex",(h,v)=>{const y=d.dom,C="data-mce-"+v;let E=h.length;for(;E--;){const R=h[E];let T=R.attr(v);if(T&&!R.attr(C)){if(0===T.indexOf("data:")||0===T.indexOf("blob:"))continue;"style"===v?(T=y.serializeStyle(y.parseStyle(T),R.name),T.length||(T=null),R.attr(C,T),R.attr(v,T)):"tabindex"===v?(R.attr(C,T),R.attr(v,null)):R.attr(C,d.convertURL(T,v,R.name))}}}),u.addNodeFilter("script",h=>{let v=h.length;for(;v--;){const y=h[v],C=y.attr("type")||"no/type";0!==C.indexOf("mce-")&&y.attr("type","mce-"+C)}}),Hm(d)&&u.addNodeFilter("#cdata",h=>{var v;let y=h.length;for(;y--;){const C=h[y];C.type=8,C.name="#comment",C.value="[CDATA["+d.dom.encode(null!==(v=C.value)&&void 0!==v?v:"")+"]]"}}),u.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",h=>{let v=h.length;const y=d.schema.getNonEmptyElements();for(;v--;){const C=h[v];C.isEmpty(y)&&0===C.getAll("br").length&&C.append(new Kt("br",1))}}),u})(t),t.serializer=fE((d=>{const u=d.options.get;return{...HO(d),...Ox(d),...v0({remove_trailing_brs:u("remove_trailing_brs"),pad_empty_with_br:u("pad_empty_with_br"),url_converter:u("url_converter"),url_converter_scope:u("url_converter_scope"),element_format:u("element_format"),entities:u("entities"),entity_encoding:u("entity_encoding"),indent:u("indent"),indent_after:u("indent_after"),indent_before:u("indent_before")})}})(t),t),t.selection=YS(t.dom,t.getWin(),t.serializer,t),t.annotator=rm(t),t.formatter=TE(t),t.undoManager=ik(t),t._nodeChangeDispatcher=new Xd(t),t._selectionOverrides=j5(t),(d=>{const u=Ki(),h=Gn(!1),v=qp(y=>{d.dispatch("longpress",{...y,type:"longpress"}),h.set(!0)},400);d.on("touchstart",y=>{Dk(y).each(C=>{v.cancel();const E={x:C.clientX,y:C.clientY,target:y.target};v.throttle(y),h.set(!1),u.set(E)})},!0),d.on("touchmove",y=>{v.cancel(),Dk(y).each(C=>{u.on(E=>{((R,T)=>{const I=Math.abs(R.clientX-T.x),N=Math.abs(R.clientY-T.y);return I>5||N>5})(C,E)&&(u.clear(),h.set(!1),d.dispatch("longpresscancel"))})})},!0),d.on("touchend touchcancel",y=>{v.cancel(),"touchcancel"!==y.type&&u.get().filter(C=>C.target.isEqualNode(y.target)).each(()=>{h.get()?y.preventDefault():d.dispatch("tap",{...y,type:"tap"})})},!0)})(t),(u=d=t).on("click",h=>{u.dom.getParent(h.target,"details")&&h.preventDefault()}),(u=>{u.parser.addNodeFilter("details",h=>{const v=bh(u);Ue(h,y=>{"expanded"===v?y.attr("open","open"):"collapsed"===v&&y.attr("open",null)})}),u.serializer.addNodeFilter("details",h=>{const v=Vm(u);Ue(h,y=>{"expanded"===v?y.attr("open","open"):"collapsed"===v&&y.attr("open",null)})})})(d),(d=>{const u="contenteditable",h=" "+wt.trim(sb(d))+" ",v=" "+wt.trim(fh(d))+" ",y=kd(h),C=kd(v),E=ab(d);E.length>0&&d.on("BeforeSetContent",R=>{((T,I,N)=>{let H=I.length,z=N.content;if("raw"!==N.format){for(;H--;)z=z.replace(I[H],Rw(T,z,fh(T)));N.content=z}})(d,E,R)}),d.parser.addAttributeFilter("class",R=>{let T=R.length;for(;T--;){const I=R[T];y(I)?I.attr(u,"true"):C(I)&&I.attr(u,"false")}}),d.serializer.addAttributeFilter(u,R=>{let T=R.length;for(;T--;){const I=R[T];if(!y(I)&&!C(I))continue;const N=I.attr("data-mce-content");E.length>0&&N?mT(E,N)?(I.name="#text",I.type=3,I.raw=!0,I.value=N):I.remove():I.attr(u,null)}})})(t),Mu(t)||((d=>{d.on("mousedown",u=>{u.detail>=3&&(u.preventDefault(),(t=>{const o=((n,s,i)=>{const c=qe.fromRangeStart(n).getNode(),d=(C=s,E=i,Ds(ve(c),R=>ba(R.dom)||E.isBlock(Sn(R)),xO(C)).getOr(ve(C)).dom),u=z4(c,d,!1),h=z4(c,d,!0),v=document.createRange();var C,E;return CO(u,d).fold(()=>{wO(u)?v.setStart(u,0):v.setStartBefore(u)},y=>v.setStartBefore(y.dom)),CO(h,d).fold(()=>{wO(h)?v.setEnd(h,h.data.length):v.setEndAfter(h)},y=>v.setEndAfter(y.dom)),v})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(C2(o))})(d))})})(t),(d=>{(u=>{const h=[",",".",";",":","!","?"],v=[32],y=()=>{return R=hh(u),T=Dy(u),{inlinePatterns:zg(R),blockPatterns:oh(R),dynamicPatternsLookup:T};var R,T},C=()=>u.options.isSet("text_patterns_lookup");u.on("keydown",R=>{if(13===R.keyCode&&!Gt.modifierPressed(R)&&u.selection.isCollapsed()){const T=y();(T.inlinePatterns.length>0||T.blockPatterns.length>0||C())&&((t,o)=>{const n=t.selection.getRng();return kx(t,n).map(s=>{var i;const c=Math.max(0,n.startOffset),d=X4(o,s,null!==(i=s.textContent)&&void 0!==i?i:""),u=BO(t,s,n.startContainer,c,d,!0),h=((v,y,C)=>{var R;const T=v.dom,I=za(v);if(!T.is(y,I))return[];const N=null!==(R=y.textContent)&&void 0!==R?R:"";return((H,z)=>{const U=Sr(H,(ge,Ee)=>Ee.start.length-ge.start.length),J=z.replace(Hs," ");return wr(U,Y=>0===z.indexOf(Y.start)||0===J.indexOf(Y.start))})(C.blockPatterns,N).map(H=>wt.trim(N).length===H.start.length?[]:[{pattern:H,range:Jd(T,T.getRoot(),y,0,y,0,!0)}]).getOr([])})(t,s,d);return(h.length>0||u.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent(Ps,{preserve_zwsp:!0}),LO(t,u),((C,E)=>{if(0===E.length)return;const R=C.selection.getBookmark();Ue(E,T=>((I,N)=>{const z=N.pattern,U=Y4(I.dom.getRoot(),N.range).getOrDie("Unable to resolve path range");return kx(I,U).each(J=>{"block-format"===z.type?((Y,ge)=>{const Ee=ge.get(Y);return Nt(Ee)&&Nn(Ee).exists(Ne=>wo(Ne,"block"))})(z.format,I.formatter)&&I.undoManager.transact(()=>{RO(I.dom,J,z),I.formatter.apply(z.format)}):"block-command"===z.type&&I.undoManager.transact(()=>{RO(I.dom,J,z),I.execCommand(z.cmd,!1,z.value)})}),!0})(C,T)),C.selection.moveToBookmark(R)})(t,h);const v=t.selection.getRng(),y=xp(v.startContainer,v.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),y.each(C=>{const E=C.container;"\ufeff"===E.data.charAt(C.offset-1)&&(E.deleteData(C.offset-1,1),bg(t.dom,E.parentNode,R=>R===t.dom.getRoot()))})}),!0)}).getOr(!1)})(u,T)&&R.preventDefault()}},!0);const E=()=>{if(u.selection.isCollapsed()){const R=y();(R.inlinePatterns.length>0||C())&&((T,I)=>{const N=T.selection.getRng();kx(T,N).map(H=>{const z=Math.max(0,N.startOffset-1),U=J4(T.dom,H,N.startContainer,z),J=X4(I,H,U),Y=BO(T,H,N.startContainer,z,J,!1);Y.length>0&&T.undoManager.transact(()=>{LO(T,Y)})})})(u,R)}};u.on("keyup",R=>{IO(v,R,(T,I)=>T===I.keyCode&&!Gt.modifierPressed(I))&&E()}),u.on("keypress",R=>{IO(h,R,(T,I)=>T.charCodeAt(0)===I.charCode)&&bd.setEditorTimeout(u,E)})})(d)})(t));const i=jv(t);((t,o)=>{t.addCommand("delete",()=>{var n;Aw(n=t,o,!1).fold(()=>{n.selection.isEditable()&&(Hb(n),d2(n))},$r)}),t.addCommand("forwardDelete",()=>{var n;Aw(n=t,o,!0).fold(()=>{n.selection.isEditable()&&N_(n,"ForwardDelete")},$r)})})(t,i),(d=>{d.on("NodeChange",at(Ik,d))})(t),(d=>{var u;const h=d.dom,v=za(d),y=null!==(u=$g(d))&&void 0!==u?u:"",C=(E,R)=>{if((N=>{if(NE(N)){const H=N.keyCode;return!lk(N)&&(Gt.metaKeyPressed(N)||N.altKey||H>=112&&H<=123||zt(OE,H))}return!1})(E))return;const T=d.getBody(),I=!(NE(N=E)&&!(lk(N)||"keyup"===N.type&&229===N.keyCode))&&((N,H,z)=>{if(Ss(ve(H),!1)){const U=H.firstElementChild;return!U||!N.getStyle(H.firstElementChild,"padding-left")&&!N.getStyle(H.firstElementChild,"padding-right")&&z===U.nodeName.toLowerCase()}return!1})(h,T,v);var N;(""!==h.getAttrib(T,AE)!==I||R)&&(h.setAttrib(T,AE,I?y:null),h.setAttrib(T,"aria-placeholder",I?y:null),((N,H)=>{N.dispatch("PlaceholderToggle",{state:H})})(d,I),d.on(I?"keydown":"keyup",C),d.off(I?"keyup":"keydown",C))};_n(y)&&d.on("init",E=>{C(E,!0),d.on("change SetContent ExecCommand",C),d.on("paste",R=>bd.setEditorTimeout(d,()=>C(R)))})})(t),(t=>{const o=Gn(!1),n=Gn(d1(t)?"text":"html"),s=(i=>{const c=Gn(null);return{create:()=>((d,u)=>{const{dom:h,selection:v}=d,y=d.getBody();u.set(v.getRng());const C=h.add(d.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},M4);Oo.browser.isFirefox()&&h.setStyle(C,"left","rtl"===h.getStyle(y,"direction",!0)?65535:-65535),h.bind(C,"beforedeactivate focusin focusout",E=>{E.stopPropagation()}),C.focus(),v.select(C,!0)})(i,c),remove:()=>((d,u)=>{const h=d.dom;if(D4(d)){let v;const y=u.get();for(;v=D4(d);)h.remove(v),h.unbind(v);y&&d.selection.setRng(y)}u.set(null)})(i,c),getEl:()=>D4(i),getHtml:()=>(d=>{const u=d.dom,h=(E,R)=>{E.appendChild(R),u.remove(R,!0)},[v,...y]=Vt(d.getBody().childNodes,cO);Ue(y,E=>{h(v,E)});const C=u.select("div[id=mcepastebin]",v);for(let E=C.length-1;E>=0;E--){const R=u.create("div");v.insertBefore(R,C[E]),h(R,C[E])}return v?v.innerHTML:""})(i),getLastRng:c.get}})(t);var i,c,d;i=t,(Oo.browser.isChromium()||Oo.browser.isSafari())&&(d=V5,(c=i).on("PastePreProcess",u=>{u.content=d(c,u.content,u.internal)})),((i,c)=>{i.addCommand("mceTogglePlainTextPaste",()=>{((d,u)=>{"text"===u.get()?(u.set("html"),B3(d,!1)):(u.set("text"),B3(d,!0)),d.focus()})(i,c)}),i.addCommand("mceInsertClipboardContent",(d,u)=>{u.html&&fx(i,u.html,u.internal,!1),u.text&&g0(i,u.text,!1)})})(t,n),(i=>{const c=h=>v=>{h(i,v)},d=c1(i);ht(d)&&i.on("PastePreProcess",c(d));const u=ob(i);ht(u)&&i.on("PastePostProcess",c(u))})(t),t.on("PreInit",()=>{(i=>{i.on("cut",(c=>d=>{!d.isDefaultPrevented()&&bO(c)&&c.selection.isEditable()&&fO(d,V4(c),bx(c),()=>{if(Oo.browser.isChromium()||Oo.browser.isFirefox()){const u=c.selection.getRng();bd.setEditorTimeout(c,()=>{c.selection.setRng(u),c.execCommand("Delete")},0)}else c.execCommand("Delete")})})(i)),i.on("copy",(c=>d=>{!d.isDefaultPrevented()&&bO(c)&&fO(d,V4(c),bx(c),_o)})(i))})(t),((i,c)=>{Im(i)&&i.on("dragend dragover draggesture dragdrop drop drag",d=>{d.preventDefault(),d.stopPropagation()}),gh(i)||i.on("drop",d=>{const u=d.dataTransfer;u&&Bn(u.files,v=>/^image\//.test(v.type))&&d.preventDefault()}),i.on("drop",d=>{if(d.isDefaultPrevented())return;const u=ja(i,d);if(yr(u))return;const h=H4(d.dataTransfer),v=fg(h,$v());if((!P4(h)||(T=>{const I=T["text/plain"];return!!I&&0===I.indexOf("file://")})(h))&&pO(i,d,u))return;const y=h[$v()],C=y||h["text/html"]||h["text/plain"],E=((T,I,N,H)=>{const z=T.getParent(N,U=>nd(I,U));if(!Wr(T.getParent(N,"summary")))return!0;if(z&&wo(H,"text/html")){const U=(new DOMParser).parseFromString(H["text/html"],"text/html").body;return!Wr(U.querySelector(z.nodeName.toLowerCase()))}return!1})(i.dom,i.schema,u.startContainer,h),R=c.get();R&&!E||C&&(d.preventDefault(),bd.setEditorTimeout(i,()=>{i.undoManager.transact(()=>{(y||R&&E)&&i.execCommand("Delete"),Hu(i,u);const T=B4(C);h["text/html"]?fx(i,T,v,!0):g0(i,T,!0)})}))}),i.on("dragstart",d=>{c.set(!0)}),i.on("dragover dragend",d=>{gh(i)&&!c.get()&&(d.preventDefault(),Hu(i,ja(i,d))),"dragend"===d.type&&c.set(!1)}),(d=>{d.on("input",u=>{const h=v=>Wr(v.querySelector("summary"));if("deleteByDrag"===u.inputType){const v=Vt(d.dom.select("details"),h);Ue(v,y=>{Ln(y.firstChild)&&y.firstChild.remove();const C=d.dom.create("summary");C.appendChild(tl().dom),y.prepend(C)})}})})(i)})(t,o),((t,o,n)=>{((s,i,c)=>{let d;s.on("keydown",u=>{var h;(Gt.metaKeyPressed(h=u)&&86===h.keyCode||h.shiftKey&&45===h.keyCode)&&!u.isDefaultPrevented()&&(d=u.shiftKey&&86===u.keyCode)}),s.on("paste",u=>{if(u.isDefaultPrevented()||(y=u,Oo.os.isAndroid()&&0===(null===(E=null===(C=y.clipboardData)||void 0===C?void 0:C.items)||void 0===E?void 0:E.length)))return;var y,C,E;const h="text"===c.get()||d;d=!1;const v=H4(u.clipboardData);!P4(v)&&pO(s,u,i.getLastRng()||s.selection.getRng())||(fg(v,"text/html")?(u.preventDefault(),F4(s,v,v["text/html"],h,!0)):fg(v,"text/plain")&&fg(v,"text/uri-list")?(u.preventDefault(),F4(s,v,v["text/plain"],h,!0)):(i.create(),bd.setEditorTimeout(s,()=>{const y=i.getHtml();i.remove(),F4(s,v,y,h,!1)},0)))})})(t,o,n),(s=>{const i=d=>Pt(d,"webkit-fake-url"),c=d=>Pt(d,"data:");s.parser.addNodeFilter("img",(d,u,h)=>{if(!gh(s)&&!0===(null===(y=h.data)||void 0===y?void 0:y.paste))for(const v of d){const y=v.attr("src");Xt(y)&&!v.attr("data-mce-object")&&y!==Oo.transparentSrc&&(i(y)||!ph(s)&&c(y))&&v.remove()}var y})})(t)})(t,s,n)})})(t);const c=(d=>{const u=d;return(h=d,wn(h.plugins,"rtc").bind(v=>$.from(v.setup))).fold(()=>(u.rtcInstance=$S(d),$.none()),h=>(u.rtcInstance=(()=>{const v=Ke(null),y=Ke("");return{init:{bindEvents:_o},undoManager:{beforeChange:_o,add:v,undo:v,redo:v,clear:_o,reset:_o,hasUndo:Do,hasRedo:Do,transact:v,ignore:_o,extra:_o},formatter:{match:Do,matchAll:Ke([]),matchNode:Ke(void 0),canApply:Do,closest:y,apply:_o,remove:_o,toggle:_o,formatChanged:Ke({unbind:_o})},editor:{getContent:y,setContent:Ke({content:"",html:""}),insertContent:Ke(""),addVisual:_o},selection:{getContent:y},autocompleter:{addDecoration:_o,removeDecoration:_o},raw:{getModel:Ke($.none())}}})(),$.some(()=>h().then(v=>(u.rtcInstance=(y=>{const C=U=>rt(U)?U:{},{init:E,undoManager:R,formatter:T,editor:I,selection:N,autocompleter:H,raw:z}=y;return{init:{bindEvents:E.bindEvents},undoManager:{beforeChange:R.beforeChange,add:R.add,undo:R.undo,redo:R.redo,clear:R.clear,reset:R.reset,hasUndo:R.hasUndo,hasRedo:R.hasRedo,transact:(U,J,Y)=>R.transact(Y),ignore:(U,J)=>R.ignore(J),extra:(U,J,Y,ge)=>R.extra(Y,ge)},formatter:{match:(U,J,Y,ge)=>T.match(U,C(J),ge),matchAll:T.matchAll,matchNode:T.matchNode,canApply:U=>T.canApply(U),closest:U=>T.closest(U),apply:(U,J,Y)=>T.apply(U,C(J)),remove:(U,J,Y,ge)=>T.remove(U,C(J)),toggle:(U,J,Y)=>T.toggle(U,C(J)),formatChanged:(U,J,Y,ge,Ee)=>T.formatChanged(J,Y,ge,Ee)},editor:{getContent:U=>I.getContent(U),setContent:(U,J)=>({content:I.setContent(U,J),html:""}),insertContent:(U,J)=>(I.insertContent(U),""),addVisual:I.addVisual},selection:{getContent:(U,J)=>N.getContent(J)},autocompleter:{addDecoration:H.addDecoration,removeDecoration:H.removeDecoration},raw:{getModel:()=>$.some(z.getRawModel())}}})(v),v.rtc.isRemote)))));var h})(t);(d=>{const u=d.getDoc(),h=d.getBody();d.dispatch("PreInit"),l1(d)||(u.body.spellcheck=!1,n3.setAttrib(h,"spellcheck","false")),d.quirks=(t=>{const o=wt.each,n=Gt.BACKSPACE,s=Gt.DELETE,i=t.dom,c=t.selection,d=t.parser,u=Oo.browser,h=u.isFirefox(),v=u.isChromium()||u.isSafari(),y=Oo.deviceType.isiPhone()||Oo.deviceType.isiPad(),C=Oo.os.isMacOS()||Oo.os.isiOS(),E=(ye,Te)=>{try{t.getDoc().execCommand(ye,!1,String(Te))}catch{}},R=ye=>ye.isDefaultPrevented(),T=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},I=()=>{t.inline||i.bind(t.getDoc(),"mousedown mouseup",ye=>{let Te;if(ye.target===t.getDoc().documentElement)if(Te=c.getRng(),t.getBody().focus(),"mousedown"===ye.type){if(Kr(Te.startContainer))return;c.placeCaretAt(ye.clientX,ye.clientY)}else c.setRng(Te)})},N=()=>{Range.prototype.getClientRects||t.on("mousedown",ye=>{if(!R(ye)&&"HTML"===ye.target.nodeName){const Te=t.getBody();Te.blur(),bd.setEditorTimeout(t,()=>{Te.focus()})}})},H=()=>{const ye=mh(t);t.on("click",Te=>{const Be=Te.target;/^(IMG|HR)$/.test(Be.nodeName)&&i.isEditable(Be)&&(Te.preventDefault(),t.selection.select(Be),t.nodeChanged()),"A"===Be.nodeName&&i.hasClass(Be,ye)&&0===Be.childNodes.length&&i.isEditable(Be.parentNode)&&(Te.preventDefault(),c.select(Be))})},z=()=>{t.on("keydown",ye=>{if(!R(ye)&&ye.keyCode===n&&c.isCollapsed()&&0===c.getRng().startOffset){const Te=c.getNode().previousSibling;if(Te&&Te.nodeName&&"table"===Te.nodeName.toLowerCase())return ye.preventDefault(),!1}return!0})},U=()=>{em(t)||t.on("BeforeExecCommand mousedown",()=>{E("StyleWithCSS",!1),E("enableInlineTableEditing",!1),X0(t)||E("enableObjectResizing",!1)})},J=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Y=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},ge=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",ye=>{let Te;"HTML"===ye.target.nodeName&&(Te=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(Te),t.selection.normalize(),t.nodeChanged())}))},Ee=()=>{C&&t.on("keydown",ye=>{!Gt.metaKeyPressed(ye)||ye.shiftKey||37!==ye.keyCode&&39!==ye.keyCode||(ye.preventDefault(),t.selection.getSel().modify("move",37===ye.keyCode?"backward":"forward","lineboundary"))})},Ne=()=>{t.on("click",ye=>{let Te=ye.target;do{if("A"===Te.tagName)return void ye.preventDefault()}while(Te=Te.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Me=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",ye=>{ye.preventDefault()})})},Fe=_o;return Mu(t)?(v&&(I(),H(),Me(),T(),y&&(Y(),ge(),Ne())),h&&(N(),U(),J(),Ee())):(t.on("keydown",ye=>{if(R(ye)||ye.keyCode!==Gt.BACKSPACE)return;let Te=c.getRng();const Be=Te.startContainer,tt=Te.startOffset,Zt=i.getRoot();let Mt=Be;if(Te.collapsed&&0===tt){for(;Mt.parentNode&&Mt.parentNode.firstChild===Mt&&Mt.parentNode!==Zt;)Mt=Mt.parentNode;"BLOCKQUOTE"===Mt.nodeName&&(t.formatter.toggle("blockquote",void 0,Mt),Te=i.createRng(),Te.setStart(Be,0),Te.setEnd(Be,0),c.setRng(Te))}}),(()=>{const ye=Te=>{const Be=i.create("body"),tt=Te.cloneContents();return Be.appendChild(tt),c.serializer.serialize(Be,{format:"html"})};t.on("keydown",Te=>{const Be=Te.keyCode;if(!R(Te)&&(Be===s||Be===n)&&t.selection.isEditable()){const tt=t.selection.isCollapsed(),Zt=t.getBody();if(tt&&!Ss(ve(Zt))||!tt&&!(Mt=>{const mo=ye(Mt),co=i.createRng();return co.selectNode(t.getBody()),mo===ye(co)})(t.selection.getRng()))return;Te.preventDefault(),t.setContent(""),Zt.firstChild&&i.isBlock(Zt.firstChild)?t.selection.setCursorLocation(Zt.firstChild,0):t.selection.setCursorLocation(Zt,0),t.nodeChanged()}})})(),Oo.windowsPhone||t.on("keyup focusin mouseup",ye=>{Gt.modifierPressed(ye)||(Te=>{const Be=Te.getBody(),tt=Te.selection.getRng();return tt.startContainer===tt.endContainer&&tt.startContainer===Be&&0===tt.startOffset&&tt.endOffset===Be.childNodes.length})(t)||c.normalize()},!0),v&&(I(),H(),t.on("init",()=>{E("DefaultParagraphSeparator",za(t))}),Me(),z(),d.addNodeFilter("br",ye=>{let Te=ye.length;for(;Te--;)"Apple-interchange-newline"===ye[Te].attr("class")&&ye[Te].remove()}),y?(Y(),ge(),Ne()):T()),h&&(t.on("keydown",ye=>{if(!R(ye)&&ye.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&0===c.getRng().startOffset){const Te=c.getNode(),Be=Te.previousSibling;if("HR"===Te.nodeName)return i.remove(Te),void ye.preventDefault();Be&&Be.nodeName&&"hr"===Be.nodeName.toLowerCase()&&(i.remove(Be),ye.preventDefault())}}}),N(),(()=>{const ye=()=>{const Be=i.getAttribs(c.getStart().cloneNode(!1));return()=>{const tt=c.getStart();tt!==t.getBody()&&(i.setAttrib(tt,"style",null),o(Be,Zt=>{tt.setAttributeNode(Zt.cloneNode(!0))}))}},Te=()=>!c.isCollapsed()&&i.getParent(c.getStart(),i.isBlock)!==i.getParent(c.getEnd(),i.isBlock);t.on("keypress",Be=>{let tt;return!(!(R(Be)||8!==Be.keyCode&&46!==Be.keyCode)&&Te()&&(tt=ye(),t.getDoc().execCommand("delete",!1),tt(),Be.preventDefault(),1))}),i.bind(t.getDoc(),"cut",Be=>{if(!R(Be)&&Te()){const tt=ye();bd.setEditorTimeout(t,()=>{tt()})}})})(),U(),t.on("SetContent ExecCommand",ye=>{"setcontent"!==ye.type&&"mceInsertLink"!==ye.command||o(i.select("a:not([data-mce-block])"),Te=>{var Be;let tt=Te.parentNode;const Zt=i.getRoot();if(tt?.lastChild===Te){for(;tt&&!i.isBlock(tt);){if((null===(Be=tt.parentNode)||void 0===Be?void 0:Be.lastChild)!==tt||tt===Zt)return;tt=tt.parentNode}i.add(tt,"br",{"data-mce-bogus":1})}})}),J(),Ee(),z(),t.on("drop",ye=>{var Te;const Be=null===(Te=ye.dataTransfer)||void 0===Te?void 0:Te.getData("text/html");Xt(Be)&&/^<img[^>]*>$/.test(Be)&&t.dispatch("dragend",new window.DragEvent("dragend",ye))}))),{refreshContentEditable:Fe,isHidden:()=>{if(!h||t.removed)return!1;const ye=t.selection.getSel();return!ye||!ye.rangeCount||0===ye.rangeCount}}})(d),d.dispatch("PostRender");const v=Wg(d);void 0!==v&&(h.dir=v);const y=tb(d);y&&d.on("BeforeSetContent",C=>{wt.each(y,E=>{C.content=C.content.replace(E,R=>"\x3c!--mce:protected "+escape(R)+"--\x3e")})}),d.on("SetContent",()=>{d.addVisual(d.getBody())}),d.on("compositionstart compositionend",C=>{d.composing="compositionstart"===C.type})})(t),c.fold(()=>{const d=(u=>{let h=!1;const v=setTimeout(()=>{h||u.setProgressState(!0)},500);return()=>{clearTimeout(v),h=!0,u.setProgressState(!1)}})(t);PO(t).then(()=>{r3(t),d()})},d=>{t.setProgressState(!0),PO(t).then(()=>{d().then(u=>{t.setProgressState(!1),r3(t),qS(t)},u=>{t.notificationManager.open({type:"error",text:String(u)}),r3(t),qS(t)})})})},FO=zn,s3=Lr.DOM,Ax=Lr.DOM,a3=(t,o)=>({editorContainer:t,iframeContainer:o,api:{}}),Kv=t=>{const o=t.getElement();return t.inline?a3(null):(n=>{const s=Ax.create("div");return Ax.insertAfter(s,n),a3(s,s)})(o)},VO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const s=wt.trim(Cy(n)),i=n.ui.registry.getAll().icons,c={...dm.get("default").icons,...dm.get(s).icons};Po(c,(d,u)=>{wo(i,u)||n.ui.registry.addIcon(u,d)})})(t),(n=>{const s=ku(n);if(Xt(s)){const i=qh.get(s);n.theme=i(n,qh.urls[s])||{},ht(n.theme.init)&&n.theme.init(n,qh.urls[s]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const s=gc(n),i=Wh.get(s);n.model=i(n,Wh.urls[s])})(t),(n=>{const s=[];Ue(s1(n),i=>{((c,d,u)=>{const h=$h.get(u),v=$h.urls[u]||c.documentBaseUrl.replace(/\/$/,"");if(u=wt.trim(u),h&&-1===wt.inArray(d,u)){if(c.plugins[u])return;try{const y=h(c,v)||{};c.plugins[u]=y,ht(y.init)&&(y.init(c,v),d.push(u))}catch(y){((C,E,R)=>{const T=Ii.translate(["Failed to initialize plugin: {0}",E]);Gl(C,"PluginLoadError",{message:T}),Kh(T,R),uw(C,T)})(c,u,y)}}})(n,s,i.replace(/^\-/,""))})})(t);const o=await(n=>{const s=n.getElement();return n.orgDisplay=s.style.display,Xt(ku(n))?(i=>{const c=i.theme.renderUI;return c?c():Kv(i)})(n):ht(ku(n))?(i=>{const c=i.getElement(),d=ku(i)(i,c);return d.editorContainer.nodeType&&(d.editorContainer.id=d.editorContainer.id||i.id+"_parent"),d.iframeContainer&&d.iframeContainer.nodeType&&(d.iframeContainer.id=d.iframeContainer.id||i.id+"_iframecontainer"),d.height=d.iframeHeight?d.iframeHeight:c.offsetHeight,d})(n):Kv(n)})(t);var n,s;((n,s)=>{const i={show:$.from(s.show).getOr(_o),hide:$.from(s.hide).getOr(_o),isEnabled:$.from(s.isEnabled).getOr(zn),setEnabled:c=>{n.mode.isReadOnly()||$.from(s.setEnabled).each(d=>d(c))}};n.ui={...n.ui,...i}})(t,$.from(o.api).getOr({})),t.editorContainer=o.editorContainer,(n=t).contentCSS=n.contentCSS.concat(QS(s=n,Pi(s)),(s=>QS(s,Y0(s)))(n)),t.inline?Qd(t):((n,s)=>{((i,c)=>{const d=i.translate("Rich Text Area"),u=$i(ve(i.getElement()),"tabindex").bind(Rr),h=((v,y,C,E)=>{const R=vs("iframe");return E.each(T=>mr(R,"tabindex",T)),Oa(R,C),Oa(R,{id:v+"_ifr",frameBorder:"0",allowTransparency:"true",title:y}),Ll(R,"tox-edit-area__iframe"),R})(i.id,d,Kf(i),u).dom;h.onload=()=>{h.onload=null,i.dispatch("load")},i.contentAreaContainer=c.iframeContainer,i.iframeElement=h,i.iframeHTML=(v=>{let y=Zg(v)+"<html><head>";Yf(v)!==v.documentBaseUrl&&(y+='<base href="'+v.documentBaseURI.getURI()+'" />'),y+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const C=il(v),E=oC(v),R=v.translate(i1(v));return Ul(v)&&(y+='<meta http-equiv="Content-Security-Policy" content="'+Ul(v)+'" />'),y+=`</head><body id="${C}" class="mce-content-body ${E}" data-id="${v.id}" aria-label="${R}"><br></body></html>`,y})(i),s3.add(c.iframeContainer,h)})(n,s),s.editorContainer&&(s.editorContainer.style.display=n.orgDisplay,n.hidden=s3.isHidden(s.editorContainer)),n.getElement().style.display="none",s3.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(i=>{const c=i.iframeElement,d=()=>{i.contentDocument=c.contentDocument,Qd(i)};if(Fm(i)||Oo.browser.isFirefox()){const h=i.getDoc();h.open(),h.write(i.iframeHTML),h.close(),d()}else{const h=((t,o,n)=>((i,c,d,u)=>{const v=((y,C)=>E=>{y(E)&&C((R=>{const T=ve(Ka(R).getOr(R.target)),I=()=>R.stopPropagation(),N=()=>R.preventDefault(),H=zr(N,I);return((z,U,J,Y,ge,Ee,Ne)=>({target:z,x:U,y:J,stop:Y,prevent:ge,kill:Ee,raw:Ne}))(T,R.clientX,R.clientY,I,N,H,R)})(E))})(d,u);return i.dom.addEventListener(c,v,!1),{unbind:at(qt,i,c,v,!1)}})(t,"load",n,()=>{h.unbind(),d()}))(ve(c),0,FO);c.srcdoc=i.iframeHTML}})(n)})(t,{editorContainer:o.editorContainer,iframeContainer:o.iframeContainer})},Ep=Lr.DOM,i3=t=>"-"===t.charAt(0),zO=(t,o,n)=>$.from(o).filter(s=>_n(s)&&!dm.has(s)).map(s=>({url:`${t.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:$.some(s)})),Nx=yi().deviceType,ZO=Nx.isPhone(),G5=Nx.isTablet(),Tp=t=>{if(yr(t))return[];{const o=Nt(t)?t:t.split(/[ ,]/),n=no(o,bo);return Vt(n,_n)}},Yv=(t,o)=>wo(t.sections(),o),UO=(t,o)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:wn(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...o?{menubar:!1}:{}}),Op=(t,o)=>{var n;const s=null!==(n=o.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?wt.extend({},t.external_plugins,s):s},Rx=(t,o)=>{const n=t.selection,s=t.dom;return/^ | $/.test(o)?((i,c,d,u)=>{const h=ve(i.getRoot());return d=Db(h,qe.fromRangeStart(c),u)?d.replace(/^ /,"&nbsp;"):d.replace(/^&nbsp;/," "),Bb(h,qe.fromRangeEnd(c),u)?d.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):d.replace(/&nbsp;(<br( \/)?>)?$/," ")})(s,n.getRng(),o,t.schema):o},Xv=(t,o)=>{if(t.selection.isEditable()){const{content:n,details:s}=(i=>{if("string"!=typeof i){const c=wt.extend({paste:i.paste,data:{paste:i.paste}},i);return{content:i.content,details:c}}return{content:i,details:{}}})(o);Y2(t,{...s,content:Rx(t,n),format:"html",set:!1,selection:!0}).each(i=>{const c=(u=i.content,h=s,ow(t).editor.insertContent(u,h));var u,h;VS(t,c,i),t.addVisual()})}},jO={"font-size":"size","font-family":"face"},WO=Di("font"),$O=t=>(o,n)=>$.from(n).map(ve).filter(us).bind(s=>{return(i=t,c=o,d=s.dom,E2(ve(d),u=>{return ic(h=u,i).orThunk(()=>WO(h)?wn(jO,i).bind(v=>$i(h,v)):$.none());var h},u=>$n(ve(c),u))).or(((i,c)=>$.from(Lr.DOM.getStyle(c,i,!0)))(t,s.dom));var i,c,d}).getOr(""),X5=$O("font-size"),qO=zr(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),$O("font-family")),c3=t=>L(t.getBody()).bind(o=>{const n=o.container();return $.from(pt(n)?n.parentNode:n)}),Jv=(t,o)=>{return n=t,s=Er($.some,o),(i=n,$.from(i.selection.getRng()).bind(c=>{const d=i.getBody();return c.startContainer===d&&0===c.startOffset?$.none():$.from(i.selection.getStart(!0))})).orThunk(at(c3,n)).map(ve).filter(us).bind(s);var n,s,i},d3=(t,o)=>{if(/^[0-9.]+$/.test(o)){const n=parseInt(o,10);if(n>=1&&n<=7){const s=wt.explode(t.options.get("font_size_style_values")),i=wt.explode(t.options.get("font_size_classes"));return i.length>0?i[n-1]||o:s[n-1]||o}return o}return o},Mx=t=>{const o=t.split(/\s*,\s*/);return no(o,n=>-1===n.indexOf(" ")||Pt(n,'"')||Pt(n,"'")?n:`'${n}'`).join(",")},u3=(t,o)=>{const n=t.dom,s=t.selection.getRng(),i=o?t.selection.getStart():t.selection.getEnd(),c=o?s.startContainer:s.endContainer,d=Hv(n,c);if(!d||!d.isContentEditable)return;const u=o?pa:Fl,h=za(t);((v,y,C,E)=>{const R=v.dom,T=N=>R.isBlock(N)&&N.parentElement===C,I=T(y)?y:R.getParent(E,T,C);return $.from(I).map(ve)})(t,i,d,c).each(v=>{const y=WT(t,c,v.dom,d,!1,h);u(v,ve(y)),t.selection.setCursorLocation(y,0),t.dispatch("NewBlock",{newBlock:y}),pg(t,"insertParagraph")})},J5=["toggleview"],KO=t=>zt(J5,t.toLowerCase());class Dx{constructor(o){this.commands={state:{},exec:{},value:{}},this.editor=o}execCommand(o,n=!1,s,i){const c=this.editor,d=o.toLowerCase(),u=i?.skip_focus;if(c.removed||("mcefocus"!==d&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(d)||u?Jy(v=c).each(y=>v.selection.setRng(y)):c.focus()),c.dispatch("BeforeExecCommand",{command:o,ui:n,value:s}).isDefaultPrevented()))return!1;var v;const h=this.commands.exec[d];return!!ht(h)&&(h(d,n,s),c.dispatch("ExecCommand",{command:o,ui:n,value:s}),!0)}queryCommandState(o){if(!KO(o)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=o.toLowerCase(),s=this.commands.state[n];return!!ht(s)&&s(n)}queryCommandValue(o){if(!KO(o)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=o.toLowerCase(),s=this.commands.value[n];return ht(s)?s(n):""}addCommands(o,n="exec"){const s=this.commands;Po(o,(i,c)=>{Ue(c.toLowerCase().split(","),d=>{s[n][d]=i})})}addCommand(o,n,s){const i=o.toLowerCase();this.commands.exec[i]=(c,d,u)=>n.call(s??this.editor,d,u)}queryCommandSupported(o){const n=o.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(o,n,s){this.commands.state[o.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(o,n,s){this.commands.value[o.toLowerCase()]=()=>n.call(s??this.editor)}}const Ap="data-mce-contenteditable",Bx=(t,o,n)=>{try{t.getDoc().execCommand(o,!1,String(n))}catch{}},Lx=(t,o)=>{t.dom.contentEditable=o?"true":"false"},af=t=>t.readonly,YO=t=>{t.parser.addAttributeFilter("contenteditable",o=>{af(t)&&Ue(o,n=>{n.attr(Ap,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Ap,o=>{af(t)&&Ue(o,n=>{n.attr("contenteditable",n.attr(Ap))})}),t.serializer.addTempAttr(Ap)},XO=["copy"],JO=wt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class m3{static isNative(o){return!!JO[o.toLowerCase()]}constructor(o){this.bindings={},this.settings=o||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Do}fire(o,n){return this.dispatch(o,n)}dispatch(o,n){const s=o.toLowerCase(),i=Bg(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const c=this.bindings[s];if(c)for(let d=0,u=c.length;d<u;d++){const h=c[d];if(!h.removed){if(h.once&&this.off(s,h.func),i.isImmediatePropagationStopped())return i;if(!1===h.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(o,n,s,i){if(!1===n&&(n=Do),n){const c={func:n,removed:!1};i&&wt.extend(c,i);const d=o.toLowerCase().split(" ");let u=d.length;for(;u--;){const h=d[u];let v=this.bindings[h];v||(v=[],this.toggleEvent(h,!0)),v=s?[c,...v]:[...v,c],this.bindings[h]=v}}return this}off(o,n){if(o){const s=o.toLowerCase().split(" ");let i=s.length;for(;i--;){const c=s[i];let d=this.bindings[c];if(!c)return Po(this.bindings,(u,h)=>{this.toggleEvent(h,!1),delete this.bindings[h]}),this;if(d){if(n){const u=dn(d,h=>h.func===n);d=u.fail,this.bindings[c]=d,Ue(u.pass,h=>{h.removed=!0})}else d.length=0;d.length||(this.toggleEvent(o,!1),delete this.bindings[c])}}}else Po(this.bindings,(s,i)=>{this.toggleEvent(i,!1)}),this.bindings={};return this}once(o,n,s){return this.on(o,n,s,{once:!0})}has(o){o=o.toLowerCase();const n=this.bindings[o];return!(!n||0===n.length)}}const Qv=t=>(t._eventDispatcher||(t._eventDispatcher=new m3({scope:t,toggleEvent:(o,n)=>{m3.isNative(o)&&t.toggleNativeEvent&&t.toggleNativeEvent(o,n)}})),t._eventDispatcher),Np={fire(t,o,n){return this.dispatch(t,o,n)},dispatch(t,o,n){const s=this;if(s.removed&&"remove"!==t&&"detach"!==t)return Bg(t.toLowerCase(),o??{},s);const i=Qv(s).dispatch(t,o);if(!1!==n&&s.parent){let c=s.parent();for(;c&&!i.isPropagationStopped();)c.dispatch(t,i,!1),c=c.parent?c.parent():void 0}return i},on(t,o,n){return Qv(this).on(t,o,n)},off(t,o){return Qv(this).off(t,o)},once(t,o){return Qv(this).once(t,o)},hasEventListeners(t){return Qv(this).has(t)}},Ix=Lr.DOM;let lf;const ey=(t,o)=>{if("selectionchange"===o)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(o))return t.getDoc().documentElement;const n=Qu(t);return n?(t.eventRoot||(t.eventRoot=Ix.select(n)[0]),t.eventRoot):t.getBody()},g3=(t,o,n)=>{var s;(s=t).hidden||af(s)?af(t)&&((s,i)=>{if("click"!==i.type||Gt.metaKeyPressed(i))zt(XO,i.type)&&s.dispatch(i.type,i);else{const c=ve(i.target);(d=s,u=c,ac(u,"a",h=>$n(h,ve(d.getBody()))).bind(h=>$i(h,"href"))).each(d=>{if(i.preventDefault(),/^#/.test(d)){const u=s.dom.select(`${d},[name="${$e(d,"#")}"]`);u.length&&s.selection.scrollIntoView(u[0],!0)}else window.open(d,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var d,u})(t,n):t.dispatch(o,n)},ty=(t,o)=>{if(t.delegates||(t.delegates={}),t.delegates[o]||t.removed)return;const n=ey(t,o);if(Qu(t)){if(lf||(lf={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||lf&&(Po(lf,(i,c)=>{t.dom.unbind(ey(t,c))}),lf=null)})),lf[o])return;const s=i=>{const c=i.target,d=t.editorManager.get();let u=d.length;for(;u--;){const h=d[u].getBody();(h===c||Ix.isChildOf(c,h))&&g3(d[u],o,i)}};lf[o]=s,Ix.bind(n,o,s)}else{const s=i=>{g3(t,o,i)};Ix.bind(n,o,s),t.delegates[o]=s}},QO={...Np,bindPendingEventDelegates(){const t=this;wt.each(t._pendingNativeEvents,o=>{ty(t,o)})},toggleNativeEvent(t,o){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(o?n.initialized?ty(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(ey(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,o=t.getBody(),n=t.dom;t.delegates&&(Po(t.delegates,(s,i)=>{t.dom.unbind(ey(t,i),i,s)}),delete t.delegates),!t.inline&&o&&n&&(o.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(o),n.unbind(t.getContainer()))}},Q5=t=>Xt(t)?{value:t.split(/[ ,]/),valid:!0}:hr(t,Xt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},eA=(t,o)=>t+(an(o.message)?"":`. ${o.message}`),tA=t=>t.valid,p3=(t,o,n="")=>{const s=o(t);return yt(s)?s?{value:t,valid:!0}:{valid:!1,message:n}:s},eN=["design","readonly"],oA=(t,o,n,s)=>{const i=n[o.get()],c=n[s];try{c.activate()}catch(d){return void console.error(`problem while activating editor mode ${s}:`,d)}var d;i.deactivate(),i.editorReadOnly!==c.editorReadOnly&&((d,u)=>{const h=ve(d.getBody());var v,y,C;C=u,Kc(v=h,y="mce-content-readonly")&&!C?Il(v,y):C&&Ll(v,y),u?(d.selection.controlSelection.hideResizeRect(),d._selectionOverrides.hideFakeCaret(),(v=>{$.from(v.selection.getNode()).each(y=>{y.removeAttribute("data-mce-selected")})})(d),d.readonly=!0,Lx(h,!1),Ue(er(h,'*[contenteditable="true"]'),v=>{mr(v,Ap,"true"),Lx(v,!1)})):(d.readonly=!1,d.hasEditableRoot()&&Lx(h,!0),Ue(er(h,`*[${Ap}="true"]`),v=>{as(v,Ap),Lx(v,!0)}),Bx(d,"StyleWithCSS",!1),Bx(d,"enableInlineTableEditing",!1),Bx(d,"enableObjectResizing",!1),AC(d)&&d.focus(),(v=>{v.selection.setRng(v.selection.getRng())})(d),d.nodeChanged())})(t,c.editorReadOnly),o.set(s),(d=t).dispatch("SwitchMode",{mode:s})},h3=wt.each,f3=wt.explode,tN={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Hr=wt.makeMap("alt,ctrl,shift,meta,access"),nA=t=>{const o={},n=Oo.os.isMacOS()||Oo.os.isiOS();h3(f3(t.toLowerCase(),"+"),c=>{c in Hr?o[c]=!0:/^[0-9]{2,}$/.test(c)?o.keyCode=parseInt(c,10):(o.charCode=c.charCodeAt(0),o.keyCode=tN[c]||c.toUpperCase().charCodeAt(0))});const s=[o.keyCode];let i;for(i in Hr)o[i]?s.push(i):o[i]=!1;return o.id=s.join(","),o.access&&(o.alt=!0,n?o.ctrl=!0:o.shift=!0),o.meta&&(n?o.meta=!0:(o.ctrl=!0,o.meta=!1)),o};class Hx{constructor(o){this.shortcuts={},this.pendingPatterns=[],this.editor=o;const n=this;o.on("keyup keypress keydown",s=>{!n.hasModifier(s)&&!n.isFunctionKey(s)||s.isDefaultPrevented()||(h3(n.shortcuts,i=>{n.matchShortcut(s,i)&&(n.pendingPatterns=i.subpatterns.slice(0),"keydown"===s.type&&n.executeShortcutAction(i))}),n.matchShortcut(s,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===s.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(o,n,s,i){const c=this,d=c.normalizeCommandFunc(s);return h3(f3(wt.trim(o)),u=>{const h=c.createShortcut(u,n,d,i);c.shortcuts[h.id]=h}),!0}remove(o){const n=this.createShortcut(o);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(o){const n=this,s=o;return"string"==typeof s?()=>{n.editor.execCommand(s,!1,null)}:wt.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(o,n,s,i){const c=wt.map(f3(o,">"),nA);return c[c.length-1]=wt.extend(c[c.length-1],{func:s,scope:i||this.editor}),wt.extend(c[0],{desc:this.editor.translate(n),subpatterns:c.slice(1)})}hasModifier(o){return o.altKey||o.ctrlKey||o.metaKey}isFunctionKey(o){return"keydown"===o.type&&o.keyCode>=112&&o.keyCode<=123}matchShortcut(o,n){return!!n&&n.ctrl===o.ctrlKey&&n.meta===o.metaKey&&n.alt===o.altKey&&n.shift===o.shiftKey&&!!(o.keyCode===n.keyCode||o.charCode&&o.charCode===n.charCode)&&(o.preventDefault(),!0)}executeShortcutAction(o){return o.func?o.func.call(o.scope):null}}const rA=()=>{const t=(()=>{const o={},n={},s={},i={},c={},d={},u={},h={},v=(y,C)=>(E,R)=>{y[E.toLowerCase()]={...R,type:C}};return{addButton:v(o,"button"),addGroupToolbarButton:v(o,"grouptoolbarbutton"),addToggleButton:v(o,"togglebutton"),addMenuButton:v(o,"menubutton"),addSplitButton:v(o,"splitbutton"),addMenuItem:v(n,"menuitem"),addNestedMenuItem:v(n,"nestedmenuitem"),addToggleMenuItem:v(n,"togglemenuitem"),addAutocompleter:v(s,"autocompleter"),addContextMenu:v(c,"contextmenu"),addContextToolbar:v(d,"contexttoolbar"),addContextForm:v(d,"contextform"),addSidebar:v(u,"sidebar"),addView:v(h,"views"),addIcon:(y,C)=>i[y.toLowerCase()]=C,getAll:()=>({buttons:o,menuItems:n,icons:i,popups:s,contextMenus:c,contextToolbars:d,sidebars:u,views:h})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},Rp=Lr.DOM,Px=wt.extend,oN=wt.each;class Fx{constructor(o,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Px(this,QO);const i=this;this.id=o,this.hidden=!1;const c=((t,o,n,s,i)=>{var c;const d=t?{mobile:UO(null!==(c=i.mobile)&&void 0!==c?c:{},o)}:{},u=((t,o)=>{const n=(c=>{const u={},h={};return Fo(c,(v,y)=>zt(t,y),jt(u),jt(h)),{t:u,f:h}})(o);return i=n.f,{sections:Ke(n.t),options:Ke(i)};var i})(["mobile"],jw(d,i)),h=wt.extend(n,s,u.options(),t&&Yv(u,"mobile")?((v,y,C={})=>{const E=v.sections(),R=wn(E,y).getOr({});return wt.extend({},C,R)})(u,"mobile"):{},{external_plugins:Op(s,u.options())});return((v,y,C,E)=>{const R=Tp(C.forced_plugins),T=Tp(E.plugins),I=Yv(z=y,"mobile")?z.sections().mobile:{},N=((z,U,J,Y)=>z&&Yv(U,"mobile")?Y:J)(v,y,T,I.plugins?Tp(I.plugins):T),H=((z,U)=>[...Tp(z),...Tp(U)])(R,N);var z;return wt.extend(E,{forced_plugins:R,plugins:H})})(t,u,s,h)})(ZO||G5,ZO,T=n,s.defaultOptions,T);var T;this.options=((R,T)=>{const I={},N={},H=(U,J,Y)=>{const ge=p3(J,Y);return tA(ge)?(N[U]=ge.value,!0):(console.warn(eA(`Invalid value passed for the ${U} option`,ge)),!1)},z=U=>wo(I,U);return{register:(U,J)=>{const Y=Xt(J.processor)?(Ee=>{const Ne=(()=>{switch(Ee){case"array":return Nt;case"boolean":return yt;case"function":return ht;case"number":return Ae;case"object":return rt;case"string":return Xt;case"string[]":return Q5;case"object[]":return Me=>hr(Me,rt);case"regexp":return Me=>kn(Me,RegExp);default:return zn}})();return Me=>p3(Me,Ne,`The value must be a ${Ee}.`)})(J.processor):J.processor,ge=((Ee,Ne,Me)=>{if(!Bt(Ne)){const Fe=p3(Ne,Me);if(tA(Fe))return Fe.value;console.error(eA(`Invalid default value passed for the "${Ee}" option`,Fe))}})(U,J.default,Y);I[U]={...J,default:ge,processor:Y},wn(N,U).orThunk(()=>wn(T,U)).each(Ee=>H(U,Ee,Y))},isRegistered:z,get:U=>wn(N,U).orThunk(()=>wn(I,U).map(J=>J.default)).getOrUndefined(),set:(U,J)=>{if(z(U)){const Y=I[U];return Y.immutable?(console.error(`"${U}" is an immutable option and cannot be updated`),!1):H(U,J,Y.processor)}return console.warn(`"${U}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:U=>{const J=z(U);return J&&delete N[U],J},isSet:U=>wo(N,U)}})(0,c),(R=>{const T=R.options.register;T("id",{processor:"string",default:R.id}),T("selector",{processor:"string"}),T("target",{processor:"object"}),T("suffix",{processor:"string"}),T("cache_suffix",{processor:"string"}),T("base_url",{processor:"string"}),T("referrer_policy",{processor:"string",default:""}),T("language_load",{processor:"boolean",default:!0}),T("inline",{processor:"boolean",default:!1}),T("iframe_attrs",{processor:"object",default:{}}),T("doctype",{processor:"string",default:"<!DOCTYPE html>"}),T("document_base_url",{processor:"string",default:R.documentBaseUrl}),T("body_id",{processor:Da(R,"tinymce"),default:"tinymce"}),T("body_class",{processor:Da(R),default:""}),T("content_security_policy",{processor:"string",default:""}),T("br_in_pre",{processor:"boolean",default:!0}),T("forced_root_block",{processor:I=>{const N=Xt(I)&&_n(I);return N?{value:I,valid:N}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),T("forced_root_block_attrs",{processor:"object",default:{}}),T("newline_behavior",{processor:I=>{const N=zt(["block","linebreak","invert","default"],I);return N?{value:I,valid:N}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),T("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),T("no_newline_selector",{processor:"string",default:""}),T("keep_styles",{processor:"boolean",default:!0}),T("end_container_on_empty_block",{processor:I=>yt(I)||Xt(I)?{valid:!0,value:I}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),T("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),T("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),T("font_size_classes",{processor:"string",default:""}),T("automatic_uploads",{processor:"boolean",default:!0}),T("images_reuse_filename",{processor:"boolean",default:!1}),T("images_replace_blob_uris",{processor:"boolean",default:!0}),T("icons",{processor:"string",default:""}),T("icons_url",{processor:"string",default:""}),T("images_upload_url",{processor:"string",default:""}),T("images_upload_base_path",{processor:"string",default:""}),T("images_upload_credentials",{processor:"boolean",default:!1}),T("images_upload_handler",{processor:"function"}),T("language",{processor:"string",default:"en"}),T("language_url",{processor:"string",default:""}),T("entity_encoding",{processor:"string",default:"named"}),T("indent",{processor:"boolean",default:!0}),T("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),T("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),T("indent_use_margin",{processor:"boolean",default:!1}),T("indentation",{processor:"string",default:"40px"}),T("content_css",{processor:I=>{const N=!1===I||Xt(I)||hr(I,Xt);return N?Xt(I)?{value:no(I.split(","),bo),valid:N}:Nt(I)?{value:I,valid:N}:!1===I?{value:[],valid:N}:{value:I,valid:N}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:cd(R)?[]:["default"]}),T("content_style",{processor:"string"}),T("content_css_cors",{processor:"boolean",default:!1}),T("font_css",{processor:I=>{const N=Xt(I)||hr(I,Xt);return N?{value:Nt(I)?I:no(I.split(","),bo),valid:N}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),T("inline_boundaries",{processor:"boolean",default:!0}),T("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),T("object_resizing",{processor:I=>{const N=yt(I)||Xt(I);return N?!1===I||W0.isiPhone()||W0.isiPad()?{value:"",valid:N}:{value:!0===I?"table,img,figure.image,div,video,iframe":I,valid:N}:{valid:!1,message:"Must be boolean or a string"}},default:!$0}),T("resize_img_proportional",{processor:"boolean",default:!0}),T("event_root",{processor:"object"}),T("service_message",{processor:"string"}),T("theme",{processor:I=>!1===I||Xt(I)||ht(I),default:"silver"}),T("theme_url",{processor:"string"}),T("formats",{processor:"object"}),T("format_empty_lines",{processor:"boolean",default:!1}),T("format_noneditable_selector",{processor:"string",default:""}),T("preview_styles",{processor:I=>{const N=!1===I||Xt(I);return N?{value:!1===I?"":I,valid:N}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),T("custom_ui_selector",{processor:"string",default:""}),T("hidden_input",{processor:"boolean",default:!0}),T("submit_patch",{processor:"boolean",default:!0}),T("encoding",{processor:"string"}),T("add_form_submit_trigger",{processor:"boolean",default:!0}),T("add_unload_trigger",{processor:"boolean",default:!0}),T("custom_undo_redo_levels",{processor:"number",default:0}),T("disable_nodechange",{processor:"boolean",default:!1}),T("readonly",{processor:"boolean",default:!1}),T("editable_root",{processor:"boolean",default:!0}),T("plugins",{processor:"string[]",default:[]}),T("external_plugins",{processor:"object"}),T("forced_plugins",{processor:"string[]"}),T("model",{processor:"string",default:R.hasPlugin("rtc")?"plugin":"dom"}),T("model_url",{processor:"string"}),T("block_unsupported_drop",{processor:"boolean",default:!0}),T("visual",{processor:"boolean",default:!0}),T("visual_table_class",{processor:"string",default:"mce-item-table"}),T("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),T("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),T("setup",{processor:"function"}),T("init_instance_callback",{processor:"function"}),T("url_converter",{processor:"function",default:R.convertURL}),T("url_converter_scope",{processor:"object",default:R}),T("urlconverter_callback",{processor:"function"}),T("allow_conditional_comments",{processor:"boolean",default:!1}),T("allow_html_data_urls",{processor:"boolean",default:!1}),T("allow_svg_data_urls",{processor:"boolean"}),T("allow_html_in_named_anchor",{processor:"boolean",default:!1}),T("allow_script_urls",{processor:"boolean",default:!1}),T("allow_unsafe_link_target",{processor:"boolean",default:!1}),T("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),T("fix_list_elements",{processor:"boolean",default:!1}),T("preserve_cdata",{processor:"boolean",default:!1}),T("remove_trailing_brs",{processor:"boolean",default:!0}),T("pad_empty_with_br",{processor:"boolean",default:!1}),T("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),T("element_format",{processor:"string",default:"html"}),T("entities",{processor:"string"}),T("schema",{processor:"string",default:"html5"}),T("convert_urls",{processor:"boolean",default:!0}),T("relative_urls",{processor:"boolean",default:!0}),T("remove_script_host",{processor:"boolean",default:!0}),T("custom_elements",{processor:"string"}),T("extended_valid_elements",{processor:"string"}),T("invalid_elements",{processor:"string"}),T("invalid_styles",{processor:Gf}),T("valid_children",{processor:"string"}),T("valid_classes",{processor:Gf}),T("valid_elements",{processor:"string"}),T("valid_styles",{processor:Gf}),T("verify_html",{processor:"boolean",default:!0}),T("auto_focus",{processor:I=>Xt(I)||!0===I}),T("browser_spellcheck",{processor:"boolean",default:!1}),T("protect",{processor:"array"}),T("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),T("deprecation_warnings",{processor:"boolean",default:!0}),T("a11y_advanced_options",{processor:"boolean",default:!1}),T("api_key",{processor:"string"}),T("paste_block_drop",{processor:"boolean",default:!1}),T("paste_data_images",{processor:"boolean",default:!0}),T("paste_preprocess",{processor:"function"}),T("paste_postprocess",{processor:"function"}),T("paste_webkit_styles",{processor:"string",default:"none"}),T("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),T("paste_merge_formats",{processor:"boolean",default:!0}),T("smart_paste",{processor:"boolean",default:!0}),T("paste_as_text",{processor:"boolean",default:!1}),T("paste_tab_spaces",{processor:"number",default:4}),T("text_patterns",{processor:I=>hr(I,rt)||!1===I?{value:wy(!1===I?[]:I),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),T("text_patterns_lookup",{processor:I=>{return ht(I)?{value:(N=I,H=>{const z=N(H);return wy(z)}),valid:!0}:{valid:!1,message:"Must be a single function"};var N},default:I=>[]}),T("noneditable_class",{processor:"string",default:"mceNonEditable"}),T("editable_class",{processor:"string",default:"mceEditable"}),T("noneditable_regexp",{processor:I=>hr(I,qf)?{value:I,valid:!0}:qf(I)?{value:[I],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),T("table_tab_navigation",{processor:"boolean",default:!0}),T("highlight_on_focus",{processor:"boolean",default:!1}),T("xss_sanitization",{processor:"boolean",default:!0}),T("details_initial_state",{processor:I=>{const N=zt(["inherited","collapsed","expanded"],I);return N?{value:I,valid:N}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),T("details_serialized_state",{processor:I=>{const N=zt(["inherited","collapsed","expanded"],I);return N?{value:I,valid:N}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),T("init_content_sync",{processor:"boolean",default:!1}),T("newdocument_content",{processor:"string",default:""}),T("force_hex_color",{processor:I=>{const N=["always","rgb_only","off"],H=zt(N,I);return H?{value:I,valid:H}:{valid:!1,message:`Must be one of: ${N.join(", ")}.`}},default:"off"}),T("sandbox_iframes",{processor:"boolean",default:!1}),T("convert_unsafe_embeds",{processor:"boolean",default:!1}),R.on("ScriptsLoaded",()=>{T("directionality",{processor:"string",default:Ii.isRtl()?"rtl":void 0}),T("placeholder",{processor:"string",default:xy.getAttrib(R.getElement(),"placeholder")})})})(i);const d=this.options.get;d("deprecation_warnings")&&((R,T)=>{((I,N)=>{const H=(t=>{const o=sw(t,XS),n=t.forced_root_block;return!1!==n&&""!==n||o.push("forced_root_block (false only)"),Sr(o)})(I),z=(t=>aw(t,dv))(N),U=z.length>0,J=H.length>0,Y="mobile"===N.theme;if(U||J||Y){const ge="\n- ",Ee=Y?`\n\nThemes:${ge}mobile`:"",Ne=U?`\n\nPlugins:${ge}${z.join(ge)}`:"",Me=J?`\n\nOptions:${ge}${H.join(ge)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+Ee+Ne+Me)}})(R,T),((I,N)=>{const H=(t=>sw(t,bE))(I),z=(t=>aw(t,JS.map(o=>o.name)))(N),U=z.length>0,J=H.length>0;if(U||J){const Y="\n- ",ge=U?`\n\nPlugins:${Y}${z.map(iw).join(Y)}`:"",Ee=J?`\n\nOptions:${Y}${H.join(Y)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+ge+Ee)}})(R,T)})(n,c);const u=d("suffix");u&&(s.suffix=u),this.suffix=s.suffix;const h=d("base_url");h&&s._setBaseUrl(h),this.baseUri=s.baseURI;const v=Ci(i);v&&(id.ScriptLoader._setReferrerPolicy(v),Lr.DOM.styleSheetLoader._setReferrerPolicy(v));const y=r1(i);ie(y)&&Lr.DOM.styleSheetLoader._setContentCssCors(y),ks.languageLoad=d("language_load"),ks.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new wd(Yf(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=cd(i),this.hasVisual=eb(i),this.shortcuts=new Hx(this),this.editorCommands=new Dx(this),(t=>{var o;(t=>{(o=>{const n=s=>()=>{Ue("left,center,right,justify".split(","),i=>{s!==i&&o.formatter.remove("align"+i)}),"none"!==s&&(o.formatter.toggle("align"+s,void 0),o.nodeChanged())};o.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(o=>{const n=s=>()=>{const i=o.selection,c=i.isCollapsed()?[o.dom.getParent(i.getNode(),o.dom.isBlock)]:i.getSelectedBlocks();return Bn(c,d=>ie(o.formatter.matchNode(d,s)))};o.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(o=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=o.getDoc();let i;try{s.execCommand(n)}catch{i=!0}if("paste"!==n||s.queryCommandEnabled(n)||(i=!0),i||!s.queryCommandSupported(n)){let c=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Oo.os.isMacOS()||Oo.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:c,type:"error"})}}}),(o=>{o.editorCommands.addCommands({mceAddUndoLevel:()=>{o.undoManager.add()},mceEndUndoLevel:()=>{o.undoManager.add()},Undo:()=>{o.undoManager.undo()},Redo:()=>{o.undoManager.redo()}})})(t),(o=>{o.editorCommands.addCommands({mceSelectNodeDepth:(n,s,i)=>{let c=0;o.dom.getParent(o.selection.getNode(),d=>!Wt(d)||c++!==i||(o.selection.select(d),!1),o.getBody())},mceSelectNode:(n,s,i)=>{o.selection.select(i)},selectAll:()=>{const n=o.dom.getParent(o.selection.getStart(),ba);if(n){const s=o.dom.createRng();s.selectNodeContents(n),o.selection.setRng(s)}}})})(t),(o=>{o.editorCommands.addCommands({mceCleanup:()=>{const n=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(n)},insertImage:(n,s,i)=>{Xv(o,o.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{o.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,i)=>{Xv(o,o.dom.encode(i))},insertHTML:(n,s,i)=>{Xv(o,i)},mceInsertContent:(n,s,i)=>{Xv(o,i)},mceSetContent:(n,s,i)=>{o.setContent(i)},mceReplaceContent:(n,s,i)=>{o.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceNewDocument:()=>{o.setContent(Fi(o))}})})(t),(o=>{const n=(s,i,c)=>{const d=Xt(c)?{href:c}:c,u=o.dom.getParent(o.selection.getNode(),"a");rt(d)&&Xt(d.href)&&(d.href=d.href.replace(/ /g,"%20"),u&&d.href||o.formatter.remove("link"),d.href&&o.formatter.apply("link",d,u))};o.editorCommands.addCommands({unlink:()=>{if(o.selection.isEditable()){if(o.selection.isCollapsed()){const s=o.dom.getParent(o.selection.getStart(),"a");return void(s&&o.dom.remove(s,!0))}o.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(t),(o=>{o.editorCommands.addCommands({Indent:()=>{lg(o,"indent")},Outdent:()=>{Sd(o)}}),o.editorCommands.addCommands({Outdent:()=>Rk(o)},"state")})(t),(o=>{o.editorCommands.addCommands({InsertNewBlockBefore:()=>{u3(o,!0)},InsertNewBlockAfter:()=>{u3(o,!1)}})})(t),(o=>{o.editorCommands.addCommands({insertParagraph:()=>{aa(GT,o)},mceInsertNewLine:(n,s,i)=>{JT(o,i)},InsertLineBreak:(n,s,i)=>{aa(S4,o)}})})(t),(o=>{var n;(n=o).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{n.getDoc().execCommand(s);const i=n.dom.getParent(n.selection.getNode(),"ol,ul");if(i){const c=i.parentNode;if(c&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){const d=n.selection.getBookmark();n.dom.split(c,i),n.selection.moveToBookmark(d)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":s=>{const i=n.dom.getParent(n.selection.getNode(),"ul,ol");return i&&("insertunorderedlist"===s&&"UL"===i.tagName||"insertorderedlist"===s&&"OL"===i.tagName)}},"state")})(o)})(t),(o=>{(n=>{const s=(i,c)=>{n.formatter.toggle(i,c),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>{s(i)},"ForeColor,HiliteColor":(i,c,d)=>{s(i,{value:d})},BackColor:(i,c,d)=>{s("hilitecolor",{value:d})},FontName:(i,c,d)=>{((u,h)=>{const v=d3(u,h);u.formatter.toggle("fontname",{value:Mx(v)}),u.nodeChanged()})(n,d)},FontSize:(i,c,d)=>{var u;(u=n).formatter.toggle("fontsize",{value:d3(u,d)}),u.nodeChanged()},LineHeight:(i,c,d)=>{var u;(u=n).formatter.toggle("lineheight",{value:String(d)}),u.nodeChanged()},Lang:(i,c,d)=>{var u;s(i,{value:d.code,customValue:null!==(u=d.customCode)&&void 0!==u?u:null})},RemoveFormat:i=>{n.formatter.remove(i)},mceBlockQuote:()=>{s("blockquote")},FormatBlock:(i,c,d)=>{s(Xt(d)?d:"p")},mceToggleFormat:(i,c,d)=>{s(d)}})})(o),(n=>{const s=i=>n.formatter.match(i);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":i=>s(i),mceBlockQuote:()=>s("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Jv(i=n,c=>qO(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Jv(i=n,c=>X5(i.getBody(),c.dom)).getOr("");var i}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Jv(i=n,c=>{const d=ve(i.getBody());return E2(c,h=>ic(h,"line-height"),at($n,d)).getOrThunk(()=>{const h=parseFloat(yl(c,"line-height")),v=parseFloat(yl(c,"font-size"));return String(h/v)})}).getOr("");var i})})(o)})(t),(o=>{o.editorCommands.addCommands({mceRemoveNode:(n,s,i)=>{const c=i??o.selection.getNode();if(c!==o.getBody()){const d=o.selection.getBookmark();o.dom.remove(c,!0),o.selection.moveToBookmark(d)}},mcePrint:()=>{o.getWin().print()},mceFocus:(n,s,i)=>{var c;(c=o).removed||(!0===i?NC(c):(u=>{const h=u.selection,v=u.getBody();let y=h.getRng();u.quirks.refreshContentEditable(),ie(u.bookmark)&&!Bh(u)&&Jy(u).each(E=>{u.selection.setRng(E),y=E});const C=(E=u,R=h.getNode(),E.dom.getParent(R,T=>"true"===E.dom.getContentEditable(T)));var E,R;if(C&&u.dom.isChildOf(C,v))return OC(C),n_(u,y),void NC(u);u.inline||(Oo.browser.isOpera()||OC(v),u.getWin().focus()),(Oo.browser.isFirefox()||u.inline)&&(OC(v),n_(u,y)),NC(u)})(c))},mceToggleVisualAid:()=>{o.hasVisual=!o.hasVisual,o.addVisual()}})})(t)})(this);const C=d("cache_suffix");C&&(Oo.cacheSuffix=C.replace(/^[\?\&]+/,"")),this.ui={registry:rA(),styleSheetLoader:void 0,show:_o,hide:_o,setEnabled:_o,isEnabled:zn},this.mode=(R=>{const T=Gn("design"),I=Gn({design:{activate:_o,deactivate:_o,editorReadOnly:!1},readonly:{activate:_o,deactivate:_o,editorReadOnly:!0}});return(N=R).serializer?YO(N):N.on("PreInit",()=>{YO(N)}),(N=>{N.on("ShowCaret",H=>{af(N)&&H.preventDefault()}),N.on("ObjectSelected",H=>{af(N)&&H.preventDefault()})})(R),{isReadOnly:()=>af(R),set:N=>((H,z,U,J)=>{if(J!==U.get()){if(!wo(z,J))throw new Error(`Editor mode '${J}' is invalid`);H.initialized?oA(H,U,z,J):H.on("init",()=>oA(H,U,z,J))}})(R,I.get(),T,N),get:()=>T.get(),register:(N,H)=>{I.set(((z,U,J)=>{if(zt(eN,U))throw new Error(`Cannot override default mode ${U}`);return{...z,[U]:{...J,deactivate:()=>{try{J.deactivate()}catch(Y){console.error(`problem while deactivating editor mode ${U}:`,Y)}}}}})(I.get(),N,H))}};var N})(i),s.dispatch("SetupEditor",{editor:this});const E=Ay(i);ht(E)&&E.call(i,i)}render(){(o=>{const n=o.id;Ii.setCode(Su(o));const s=()=>{Ep.unbind(window,"ready",s),o.render()};if(!zd.Event.domLoaded)return void Ep.bind(window,"ready",s);if(!o.getElement())return;const i=ve(o.getElement()),c=ou(i);var h;o.on("remove",()=>{ma(i.dom.attributes,u=>as(i,u.name)),Oa(i,c)}),o.ui.styleSheetLoader=Nf.forElement(i,{contentCssCors:r1(h=o),referrerPolicy:Ci(h)}),cd(o)?o.inline=!0:(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden");const d=o.getElement().form||Ep.getParent(n,"form");d&&(o.formElement=d,dh(o)&&!kf(o.getElement())&&(Ep.insertAfter(Ep.create("input",{type:"hidden",name:n}),n),o.hasHiddenInput=!0),o.formEventDelegate=u=>{o.dispatch(u.type,u)},Ep.bind(d,"submit reset",o.formEventDelegate),o.on("reset",()=>{o.resetContent()}),!t1(o)||d.submit.nodeType||d.submit.length||d._mceOldSubmit||(d._mceOldSubmit=d.submit,d.submit=()=>(o.editorManager.triggerSave(),o.setDirty(!1),d._mceOldSubmit(d)))),o.windowManager=cw(o),o.notificationManager=lw(o),"xml"===o.options.get("encoding")&&o.on("GetContent",u=>{u.save&&(u.content=Ep.encode(u.content))}),Oy(o)&&o.on("submit",()=>{o.initialized&&o.save()}),Q0(o)&&(o._beforeUnload=()=>{!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0,set_dirty:!1})},o.editorManager.on("BeforeUnload",o._beforeUnload)),o.editorManager.add(o),((t,o)=>{const n=id.ScriptLoader,s=()=>{!t.removed&&(i=>{const c=ku(i);return!Xt(c)||ie(qh.get(c))})(t)&&(i=>{const c=gc(i);return ie(Wh.get(c))})(t)&&VO(t)};((i,c)=>{const d=ku(i);if(Xt(d)&&!i3(d)&&!wo(qh.urls,d)){const u=Ey(i),h=u?i.documentBaseURI.toAbsolute(u):`themes/${d}/theme${c}.js`;qh.load(d,h).catch(()=>{Zc(i,"ThemeLoadError",Gh("theme",h,d))})}})(t,o),((i,c)=>{const d=gc(i);if("plugin"!==d&&!wo(Wh.urls,d)){const u=lh(i),h=Xt(u)?i.documentBaseURI.toAbsolute(u):`models/${d}/model${c}.js`;Wh.load(d,h).catch(()=>{Zc(i,"ModelLoadError",Gh("model",h,d))})}})(t,o),((i,c)=>{const d=Su(c),u=jg(c);if(!Ii.hasCode(d)&&"en"!==d){const h=_n(u)?u:`${c.editorManager.baseURL}/langs/${d}.js`;i.add(h).catch(()=>{Zc(c,"LanguageLoadError",Gh("language",h,d))})}})(n,t),((i,c,d)=>{const u=zO(c,"default",d),h=(v=c,$.from(K0(v)).filter(_n).map(y=>({url:y,name:$.none()}))).orThunk(()=>zO(c,Cy(c),""));var v;Ue((v=>{const y=[],C=E=>{y.push(E)};for(let E=0;E<v.length;E++)v[E].each(C);return y})([u,h]),v=>{i.add(v.url).catch(()=>{var y,C,E;y=c,C=v.url,E=v.name.getOrUndefined(),Zc(y,"IconsLoadError",Gh("icons",C,E))})})})(n,t,o),((i,c)=>{const d=(u,h)=>{$h.load(u,h).catch(()=>{Zc(i,"PluginLoadError",Gh("plugin",h,u))})};Po(uh(i),(u,h)=>{d(h,u),i.options.set("plugins",s1(i).concat(h))}),Ue(s1(i),u=>{!(u=wt.trim(u))||$h.urls[u]||i3(u)||d(u,`plugins/${u}/plugin${c}.js`)})})(t,o),n.loadQueue().then(s,s)})(o,o.suffix)})(this)}focus(o){this.execCommand("mceFocus",!1,o)}hasFocus(){return Bh(this)}translate(o){return Ii.translate(o)}getParam(o,n,s){const i=this.options;return i.isRegistered(o)||(ie(s)?i.register(o,{processor:s,default:n}):i.register(o,{processor:zn,default:n})),i.isSet(o)||Bt(n)?i.get(o):n}hasPlugin(o,n){return!(!zt(s1(this),o)||n&&void 0===$h.get(o))}nodeChanged(o){this._nodeChangeDispatcher.nodeChanged(o)}addCommand(o,n,s){this.editorCommands.addCommand(o,n,s)}addQueryStateHandler(o,n,s){this.editorCommands.addQueryStateHandler(o,n,s)}addQueryValueHandler(o,n,s){this.editorCommands.addQueryValueHandler(o,n,s)}addShortcut(o,n,s,i){this.shortcuts.add(o,n,s,i)}execCommand(o,n,s,i){return this.editorCommands.execCommand(o,n,s,i)}queryCommandState(o){return this.editorCommands.queryCommandState(o)}queryCommandValue(o){return this.editorCommands.queryCommandValue(o)}queryCommandSupported(o){return this.editorCommands.queryCommandSupported(o)}show(){const o=this;o.hidden&&(o.hidden=!1,o.inline?o.getBody().contentEditable="true":(Rp.show(o.getContainer()),Rp.hide(o.id)),o.load(),o.dispatch("show"))}hide(){const o=this;o.hidden||(o.save(),o.inline?(o.getBody().contentEditable="false",o===o.editorManager.focusedEditor&&(o.editorManager.focusedEditor=null)):(Rp.hide(o.getContainer()),Rp.setStyle(o.id,"display",o.orgDisplay)),o.hidden=!0,o.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(o,n){this.dispatch("ProgressState",{state:o,time:n})}load(o={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const i={...o,load:!0},c=kf(s)?s.value:s.innerHTML,d=n.setContent(c,i);return i.no_events||n.dispatch("LoadContent",{...i,element:s}),d}return""}save(o={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const i={...o,save:!0,element:s};let c=n.getContent(i);const d={...i,content:c};if(d.no_events||n.dispatch("SaveContent",d),"raw"===d.format&&n.dispatch("RawSaveContent",d),c=d.content,kf(s))s.value=c;else{!o.is_removing&&n.inline||(s.innerHTML=c);const u=Rp.getParent(n.id,"form");u&&oN(u.elements,h=>h.name!==n.id||(h.value=c,!1))}return d.element=i.element=s=null,!1!==d.set_dirty&&n.setDirty(!1),c}setContent(o,n){return cm(this,o,n)}getContent(o){return((n,s={})=>{const i=(c=s,d=s.format?s.format:"html",{...c,format:d,get:!0,getInner:!0});var c,d;return uE(n,i).fold(fn,c=>{const d=(h=c,ow(n).editor.getContent(h));var h;return FS(n,d,c)})})(this,o)}insertContent(o,n){n&&(o=Px({content:o},n)),this.execCommand("mceInsertContent",!1,o)}resetContent(o){void 0===o?cm(this,this.startContent,{format:"raw"}):cm(this,o),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(o){const n=!this.isNotDirty;this.isNotDirty=!o,o&&o!==n&&this.dispatch("dirty")}getContainer(){const o=this;return o.container||(o.container=o.editorContainer||Rp.get(o.id+"_parent")),o.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Rp.get(this.id)),this.targetElm}getWin(){const o=this;if(!o.contentWindow){const n=o.iframeElement;n&&(o.contentWindow=n.contentWindow)}return o.contentWindow}getDoc(){const o=this;if(!o.contentDocument){const n=o.getWin();n&&(o.contentDocument=n.document)}return o.contentDocument}getBody(){var o,n;const s=this.getDoc();return null!==(n=null!==(o=this.bodyElement)&&void 0!==o?o:s?.body)&&void 0!==n?n:null}convertURL(o,n,s){const i=this,c=i.options.get,d=Gg(i);if(ht(d))return d.call(i,o,s,!0,n);if(!c("convert_urls")||"link"===s||rt(s)&&"LINK"===s.nodeName||0===o.indexOf("file:")||0===o.length)return o;const u=new wd(o);return"http"!==u.protocol&&"https"!==u.protocol&&""!==u.protocol?o:c("relative_urls")?i.documentBaseURI.toRelative(o):o=i.documentBaseURI.toAbsolute(o,c("remove_script_host"))}addVisual(o){((n,s)=>{var c;c=s,wa(this).editor.addVisual(c)})(0,o)}setEditableRoot(o){var n,s;(n=this)._editableRoot!==(s=o)&&(n._editableRoot=s,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:s}))}hasEditableRoot(){return this._editableRoot}remove(){(o=>{if(!o.removed){const{_selectionOverrides:n,editorUpload:s}=o,i=o.getBody(),c=o.getElement();i&&o.save({is_removing:!0}),o.removed=!0,o.unbindAllNativeEvents(),o.hasHiddenInput&&ie(c?.nextSibling)&&ki.remove(c.nextSibling),o.dispatch("remove"),o.editorManager.remove(o),!o.inline&&i&&ki.setStyle((d=o).id,"display",d.orgDisplay),(d=>{d.dispatch("detach")})(o),ki.remove(o.getContainer()),jh(n),jh(s),o.destroy()}var d})(this)}destroy(o){((n,s)=>{const{selection:i,dom:c}=n;n.destroyed||(s||n.removed?(s||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),jh(i),jh(c)),(d=>{const u=d.formElement;u&&(u._mceOldSubmit&&(u.submit=u._mceOldSubmit,delete u._mceOldSubmit),ki.unbind(u,"submit reset",d.formEventDelegate))})(n),(d=>{const u=d;u.contentAreaContainer=u.formElement=u.container=u.editorContainer=null,u.bodyElement=u.contentDocument=u.contentWindow=null,u.iframeElement=u.targetElm=null;const h=d.selection;h&&(u.selection=h.win=h.dom=h.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,o)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const cf=Lr.DOM,Vx=wt.each;let zx,df=!1,Ql=[];const vg=t=>{const o=t.type;Vx(yg.get(),n=>{switch(o){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},y0=t=>{if(t!==df){const o=Lr.DOM;t?(o.bind(window,"resize",vg),o.bind(window,"scroll",vg)):(o.unbind(window,"resize",vg),o.unbind(window,"scroll",vg)),df=t}},uf=t=>{const o=Ql;return Ql=Vt(Ql,n=>t!==n),yg.activeEditor===t&&(yg.activeEditor=Ql.length>0?Ql[0]:null),yg.focusedEditor===t&&(yg.focusedEditor=null),o.length!==Ql.length},b3="CSS1Compat"!==document.compatMode,yg={...Np,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:Ii,activeEditor:null,focusedEditor:null,setup(){const t=this;let o="",n="",s=wd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const i=window.tinymce||window.tinyMCEPreInit;if(i)o=i.base||i.baseURL,n=i.suffix;else{const d=document.getElementsByTagName("script");for(let u=0;u<d.length;u++){const h=d[u].src||"";if(""===h)continue;const v=h.substring(h.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(h)){-1!==v.indexOf(".min")&&(n=".min"),o=h.substring(0,h.lastIndexOf("/"));break}}if(!o&&document.currentScript){const u=document.currentScript.src;-1!==u.indexOf(".min")&&(n=".min"),o=u.substring(0,u.lastIndexOf("/"))}}var c;t.baseURL=new wd(s).toAbsolute(o),t.documentBaseURL=s,t.baseURI=new wd(t.baseURL),t.suffix=n,(c=t).on("AddEditor",at(EA,c)),c.on("RemoveEditor",at(TA,c))},overrideDefaults(t){const o=t.base_url;o&&this._setBaseUrl(o);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const s=t.plugin_base_urls;void 0!==s&&Po(s,(i,c)=>{ks.PluginManager.urls[c]=i})},init(t){const o=this;let n;const s=wt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let i=d=>{n=d};const c=()=>{let d=0;const u=[];let h;var v;cf.unbind(window,"ready",c),(()=>{const y=t.onpageload;y&&y.apply(o,[])})(),h=((v,y)=>{const C=[],E=ht(y)?R=>Bn(C,T=>y(T,R)):R=>zt(C,R);for(let R=0,T=v.length;R<T;R++){const I=v[R];E(I)||C.push(I)}return C})((v=t,Oo.browser.isIE()||Oo.browser.isEdge()?(Kh("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):b3?(Kh("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Xt(v.selector)?cf.select(v.selector):ie(v.target)?[v.target]:[])),wt.each(h,v=>{var y;(y=o.get(v.id))&&y.initialized&&!(y.getContainer()||y.getBody()).parentNode&&(uf(y),y.unbindAllNativeEvents(),y.destroy(!0),y.removed=!0)}),h=wt.grep(h,v=>!o.get(v.id)),0===h.length?i([]):Vx(h,v=>{t.inline&&v.tagName.toLowerCase()in s?Kh("Could not initialize inline editor on invalid inline target element",v):((y,C,E)=>{const R=new Fx(y,C,o);u.push(R),R.on("init",()=>{++d===h.length&&i(u)}),R.targetElm=R.targetElm||E,R.render()})((y=>{let C=y.id;return C||(C=wn(y,"name").filter(E=>!cf.get(E)).getOrThunk(cf.uniqueId),y.setAttribute("id",C)),C})(v),t,v)})};return cf.bind(window,"ready",c),new Promise(d=>{n?d(n):i=u=>{d(u)}})},get(t){return 0===arguments.length?Ql.slice(0):Xt(t)?wr(Ql,o=>o.id===t).getOr(null):Ae(t)&&Ql[t]?Ql[t]:null},add(t){const o=this,n=o.get(t.id);return n===t||(null===n&&Ql.push(t),y0(!0),o.activeEditor=t,o.dispatch("AddEditor",{editor:t}),zx||(zx=s=>{const i=o.dispatch("BeforeUnload");if(i.returnValue)return s.preventDefault(),s.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",zx))),t},createEditor(t,o){return this.add(new Fx(t,o,this))},remove(t){const o=this;let n;if(t){if(!Xt(t))return n=t,Wr(o.get(n.id))?null:(uf(n)&&o.dispatch("RemoveEditor",{editor:n}),0===Ql.length&&window.removeEventListener("beforeunload",zx),n.remove(),y0(Ql.length>0),n);Vx(cf.select(t),s=>{n=o.get(s.id),n&&o.remove(n)})}else for(let s=Ql.length-1;s>=0;s--)o.remove(Ql[s])},execCommand(t,o,n){var s;const i=this,c=rt(n)?null!==(s=n.id)&&void 0!==s?s:n.index:n;switch(t){case"mceAddEditor":return i.get(c)||new Fx(c,n.options,i).render(),!0;case"mceRemoveEditor":{const d=i.get(c);return d&&d.remove(),!0}case"mceToggleEditor":{const d=i.get(c);return d?(d.isHidden()?d.show():d.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}}return!!i.activeEditor&&i.activeEditor.execCommand(t,o,n)},triggerSave:()=>{Vx(Ql,t=>{t.save()})},addI18n:(t,o)=>{Ii.add(t,o)},translate:t=>Ii.translate(t),setActive(t){const o=this.activeEditor;this.activeEditor!==t&&(o&&o.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:o})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new wd(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new wd(this.baseURL)}};yg.setup();const sA=(()=>{const t=Ki();return{FakeClipboardItem:o=>({items:o,types:cr(o),getType:n=>wn(o,n).getOrUndefined()}),write:o=>{t.set(o)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Zx=Math.min,mf=Math.max,oy=Math.round,v3=(t,o,n)=>{let s=o.x,i=o.y;const c=t.w,d=t.h,u=o.w,h=o.h,v=(n||"").split("");return"b"===v[0]&&(i+=h),"r"===v[1]&&(s+=u),"c"===v[0]&&(i+=oy(h/2)),"c"===v[1]&&(s+=oy(u/2)),"b"===v[3]&&(i-=d),"r"===v[4]&&(s-=c),"c"===v[3]&&(i-=oy(d/2)),"c"===v[4]&&(s-=oy(c/2)),Mp(s,i,c,d)},Mp=(t,o,n,s)=>({x:t,y:o,w:n,h:s}),aA={inflate:(t,o,n)=>Mp(t.x-o,t.y-n,t.w+2*o,t.h+2*n),relativePosition:v3,findBestRelativePosition:(t,o,n,s)=>{for(let i=0;i<s.length;i++){const c=v3(t,o,s[i]);if(c.x>=n.x&&c.x+c.w<=n.w+n.x&&c.y>=n.y&&c.y+c.h<=n.h+n.y)return s[i]}return null},intersect:(t,o)=>{const n=mf(t.x,o.x),s=mf(t.y,o.y),i=Zx(t.x+t.w,o.x+o.w),c=Zx(t.y+t.h,o.y+o.h);return i-n<0||c-s<0?null:Mp(n,s,i-n,c-s)},clamp:(t,o,n)=>{let s=t.x,i=t.y,c=t.x+t.w,d=t.y+t.h;const u=o.x+o.w,h=o.y+o.h,v=mf(0,o.x-s),y=mf(0,o.y-i),C=mf(0,c-u),E=mf(0,d-h);return s+=v,i+=y,n&&(c+=v,d+=y,s-=C,i-=E),c-=C,d-=E,Mp(s,i,c-s,d-i)},create:Mp,fromClientRect:t=>Mp(t.left,t.top,t.width,t.height)},iA=(()=>{const t={},o={},n={};return{load:(s,i)=>{const c=`Script at URL "${i}" failed to load`,d=`Script at URL "${i}" did not call \`tinymce.Resource.add('${s}', data)\` within 1 second`;if(void 0!==t[s])return t[s];{const u=new Promise((h,v)=>{const y=((C,E,R=1e3)=>{let T=!1,I=null;const N=U=>(...J)=>{T||(T=!0,null!==I&&(clearTimeout(I),I=null),U.apply(null,J))},H=N(C),z=N(E);return{start:(...U)=>{T||null!==I||(I=setTimeout(()=>z.apply(null,U),R))},resolve:H,reject:z}})(h,v);o[s]=y.resolve,id.ScriptLoader.loadScript(i).then(()=>y.start(d),()=>y.reject(c))});return t[s]=u,u}},add:(s,i)=>{void 0!==o[s]&&(o[s](i),delete o[s]),t[s]=Promise.resolve(i),n[s]=i},has:s=>s in n,get:s=>n[s],unload:s=>{delete t[s]}}})();let gf;try{const t="__storage_test__";gf=window.localStorage,gf.setItem(t,t),gf.removeItem(t)}catch{gf=(()=>{let o={},n=[];const s={getItem:i=>o[i]||null,setItem:(i,c)=>{n.push(i),o[i]=String(c)},key:i=>n[i],removeItem:i=>{n=n.filter(c=>c===i),delete o[i]},clear:()=>{n=[],o={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})()}const nN={geom:{Rect:aA},util:{Delay:bd,Tools:wt,VK:Gt,URI:wd,EventDispatcher:m3,Observable:Np,I18n:Ii,LocalStorage:gf,ImageUploader:t=>{const o=ek(),n=ok(t,o);return{upload:(s,i=!0)=>n.upload(s,i?tk(t):void 0)}}},dom:{EventUtils:zd,TreeWalker:tr,TextSeeker:al,DOMUtils:Lr,ScriptLoader:id,RangeUtils:np,Serializer:fE,StyleSheetLoader:gu,ControlSelection:tp,BookmarkManager:Pc,Selection:YS,Event:zd.Event},html:{Styles:bu,Entities:Gi,Node:Kt,Schema:fu,DomParser:$1,Writer:IC,Serializer:rp},Env:Oo,AddOnManager:ks,Annotator:rm,Formatter:TE,UndoManager:ik,EditorCommands:Dx,WindowManager:cw,NotificationManager:lw,EditorObservable:QO,Shortcuts:Hx,Editor:Fx,FocusManager:EC,EditorManager:yg,DOM:Lr.DOM,ScriptLoader:id.ScriptLoader,PluginManager:$h,ThemeManager:qh,ModelManager:Wh,IconManager:dm,Resource:iA,FakeClipboard:sA,trim:wt.trim,isArray:wt.isArray,is:wt.is,toArray:wt.toArray,makeMap:wt.makeMap,each:wt.each,map:wt.map,grep:wt.grep,inArray:wt.inArray,extend:wt.extend,walk:wt.walk,resolve:wt.resolve,explode:wt.explode,_addCacheSuffix:wt._addCacheSuffix},y3=wt.extend(yg,nN);(t=>{window.tinymce=t,window.tinyMCE=t})(y3),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(y3)})(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}}),function(){"use strict";var Od=tinymce.util.Tools.resolve("tinymce.ModelManager");const $a=p=>b=>(S=>{const _=typeof S;return null===S?"null":"object"===_&&Array.isArray(S)?"array":"object"===_&&(B=L=S,(V=String).prototype.isPrototypeOf(B)||(null===(W=L.constructor)||void 0===W?void 0:W.name)===V.name)?"string":_;var B,L,V,W})(b)===p,fi=p=>b=>typeof b===p,Sa=p=>b=>p===b,da=$a("string"),Zo=$a("object"),Ia=$a("array"),Us=Sa(null),Or=fi("boolean"),Zi=Sa(void 0),ua=p=>!(null==p),kn=fi("function"),Xt=fi("number"),rt=()=>{},Ut=p=>()=>p,Nt=p=>p,Wr=(p,b)=>p===b;function yt(p,...b){return(...S)=>{const _=b.concat(S);return p.apply(null,_)}}const Bt=p=>b=>!p(b),yr=p=>p(),ie=Ut(!1),ht=Ut(!0);class Ae{constructor(b,S){this.tag=b,this.value=S}static some(b){return new Ae(!0,b)}static none(){return Ae.singletonNone}fold(b,S){return this.tag?S(this.value):b()}isSome(){return this.tag}isNone(){return!this.tag}map(b){return this.tag?Ae.some(b(this.value)):Ae.none()}bind(b){return this.tag?b(this.value):Ae.none()}exists(b){return this.tag&&b(this.value)}forall(b){return!this.tag||b(this.value)}filter(b){return!this.tag||b(this.value)?this:Ae.none()}getOr(b){return this.tag?this.value:b}or(b){return this.tag?this:b}getOrThunk(b){return this.tag?this.value:b()}orThunk(b){return this.tag?this:b()}getOrDie(b){if(this.tag)return this.value;throw new Error(b??"Called getOrDie on None")}static from(b){return ua(b)?Ae.some(b):Ae.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(b){this.tag&&b(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ae.singletonNone=new Ae(!1);const hr=Array.prototype.slice,_o=Array.prototype.indexOf,zr=Array.prototype.push,Er=(p,b)=>_o.call(p,b)>-1,Ke=(p,b)=>{for(let S=0,_=p.length;S<_;S++)if(b(p[S],S))return!0;return!1},fn=(p,b)=>{const S=[];for(let _=0;_<p;_++)S.push(b(_));return S},M=(p,b)=>{const S=p.length,_=new Array(S);for(let B=0;B<S;B++)_[B]=b(p[B],B);return _},at=(p,b)=>{for(let S=0,_=p.length;S<_;S++)b(p[S],S)},bi=(p,b)=>{const S=[],_=[];for(let B=0,L=p.length;B<L;B++){const V=p[B];(b(V,B)?S:_).push(V)}return{pass:S,fail:_}},Kn=(p,b)=>{const S=[];for(let _=0,B=p.length;_<B;_++){const L=p[_];b(L,_)&&S.push(L)}return S},Cr=(p,b,S)=>(((_,B)=>{for(let L=_.length-1;L>=0;L--)B(_[L],L)})(p,(_,B)=>{S=b(S,_,B)}),S),$r=(p,b,S)=>(at(p,(_,B)=>{S=b(S,_,B)}),S),Do=(p,b)=>((S,_,B)=>{for(let L=0,V=S.length;L<V;L++){const W=S[L];if(_(W,L))return Ae.some(W);if(B(W,L))break}return Ae.none()})(p,b,ie),zn=(p,b)=>{for(let S=0,_=p.length;S<_;S++)if(b(p[S],S))return Ae.some(S);return Ae.none()},$=p=>{const b=[];for(let S=0,_=p.length;S<_;++S){if(!Ia(p[S]))throw new Error("Arr.flatten item "+S+" was not an array, input: "+p);zr.apply(b,p[S])}return b},yn=(p,b)=>$(M(p,b)),St=(p,b)=>{for(let S=0,_=p.length;S<_;++S)if(!0!==b(p[S],S))return!1;return!0},Qt=(p,b)=>{const S={};for(let _=0,B=p.length;_<B;_++){const L=p[_];S[String(L)]=b(L,_)}return S},ri=(p,b)=>b>=0&&b<p.length?Ae.some(p[b]):Ae.none(),zt=p=>ri(p,0),Bn=p=>ri(p,p.length-1),no=(p,b)=>{for(let S=0;S<p.length;S++){const _=b(p[S],S);if(_.isSome())return _}return Ae.none()},Ue=Object.keys,ma=Object.hasOwnProperty,dn=(p,b)=>{const S=Ue(p);for(let _=0,B=S.length;_<B;_++){const L=S[_];b(p[L],L)}},Vt=(p,b)=>ka(p,(S,_)=>({k:_,v:b(S,_)})),ka=(p,b)=>{const S={};return dn(p,(_,B)=>{const L=b(_,B);S[L.k]=L.v}),S},lr=(p,b)=>{const S=[];return dn(p,(_,B)=>{S.push(b(_,B))}),S},qa=p=>lr(p,Nt),wr=(p,b)=>ma.call(p,b),Ui=typeof window<"u"?window:Function("return this;")(),ji=(p,b)=>((S,_)=>{let B=_??Ui;for(let L=0;L<S.length&&null!=B;++L)B=B[S[L]];return B})(p.split("."),b),ps=Object.getPrototypeOf,nr=p=>p.dom.nodeName.toLowerCase(),Ha=p=>p.dom.nodeType,hs=p=>b=>Ha(b)===p,Sr=p=>8===Ha(p)||"#comment"===nr(p),ml=p=>Nn(p)&&(p=>{const b=ji("ownerDocument.defaultView",p);return Zo(p)&&((S=b,((_,B)=>{const L=ji(_,B);if(null==L)throw new Error(_+" not available on this browser");return L})("HTMLElement",S)).prototype.isPrototypeOf(p)||/^HTML\w*Element$/.test(ps(p).constructor.name));var S})(p.dom),Nn=hs(1),Zn=hs(3),fr=hs(9),Ni=hs(11),cr=p=>b=>Nn(b)&&nr(b)===p,Wi=(p,b,S)=>{if(!(da(S)||Or(S)||Xt(S)))throw console.error("Invalid call to Attribute.set. Key ",b,":: Value ",S,":: Element ",p),new Error("Attribute value was not simple");p.setAttribute(b,S+"")},Po=(p,b,S)=>{Wi(p.dom,b,S)},ga=(p,b)=>{const S=p.dom;dn(b,(_,B)=>{Wi(S,B,_)})},_a=(p,b)=>{const S=p.dom.getAttribute(b);return null===S?void 0:S},jt=(p,b)=>Ae.from(_a(p,b)),Fo=(p,b)=>{p.dom.removeAttribute(b)},ws=p=>$r(p.dom.attributes,(b,S)=>(b[S.name]=S.value,b),{}),os=p=>{if(null==p)throw new Error("Node cannot be null or undefined");return{dom:p}},Ot={fromHtml:(p,b)=>{const S=(b||document).createElement("div");if(S.innerHTML=p,!S.hasChildNodes()||S.childNodes.length>1){const _="HTML does not have a single root node";throw console.error(_,p),new Error(_)}return os(S.childNodes[0])},fromTag:(p,b)=>{const S=(b||document).createElement(p);return os(S)},fromText:(p,b)=>{const S=(b||document).createTextNode(p);return os(S)},fromDom:os,fromPoint:(p,b,S)=>Ae.from(p.dom.elementFromPoint(b,S)).map(os)},wn=(p,b)=>{const S=p.dom;if(1!==S.nodeType)return!1;{const _=S;if(void 0!==_.matches)return _.matches(b);if(void 0!==_.msMatchesSelector)return _.msMatchesSelector(b);if(void 0!==_.webkitMatchesSelector)return _.webkitMatchesSelector(b);if(void 0!==_.mozMatchesSelector)return _.mozMatchesSelector(b);throw new Error("Browser lacks native selectors")}},wo=p=>1!==p.nodeType&&9!==p.nodeType&&11!==p.nodeType||0===p.childElementCount,ns=(p,b)=>{const S=void 0===b?document:b.dom;return wo(S)?Ae.none():Ae.from(S.querySelector(p)).map(Ot.fromDom)},Qn=(p,b)=>p.dom===b.dom,gl=(p,b)=>{const S=p.dom,_=b.dom;return S!==_&&S.contains(_)},fs=wn,Pa=p=>Ot.fromDom(p.dom.ownerDocument),As=p=>fr(p)?p:Pa(p),ea=p=>Ae.from(p.dom.parentNode).map(Ot.fromDom),Ea=p=>Ae.from(p.dom.parentElement).map(Ot.fromDom),ta=(p,b)=>{const S=kn(b)?b:ie;let _=p.dom;const B=[];for(;null!=_.parentNode;){const L=_.parentNode,V=Ot.fromDom(L);if(B.push(V),!0===S(V))break;_=L}return B},xs=p=>Ae.from(p.dom.previousSibling).map(Ot.fromDom),Nr=p=>Ae.from(p.dom.nextSibling).map(Ot.fromDom),js=p=>M(p.dom.childNodes,Ot.fromDom),Ws=(p,b)=>Ae.from(p.dom.childNodes[b]).map(Ot.fromDom),Le=(p,b)=>{ea(p).each(S=>{S.dom.insertBefore(b.dom,p.dom)})},ue=(p,b)=>{Nr(p).fold(()=>{ea(p).each(S=>{$e(S,b)})},S=>{Le(S,b)})},Je=(p,b)=>{var _;(_=p,Ws(_,0)).fold(()=>{$e(p,b)},_=>{p.dom.insertBefore(b.dom,_.dom)})},$e=(p,b)=>{p.dom.appendChild(b.dom)},Lt=(p,b)=>{Le(p,b),$e(b,p)},Pt=(p,b)=>{at(b,(S,_)=>{ue(0===_?p:b[_-1],S)})},Dt=(p,b)=>{at(b,S=>{$e(p,S)})},po=p=>{p.dom.textContent="",at(js(p),b=>{bo(b)})},bo=p=>{const b=p.dom;null!==b.parentNode&&b.parentNode.removeChild(b)},rn=p=>{const b=js(p);b.length>0&&Pt(p,b),bo(p)},An=(p,b)=>Ot.fromDom(p.dom.cloneNode(b)),_n=p=>An(p,!1),an=p=>An(p,!0),Rr=(p,b)=>{const S=Ot.fromTag(b),_=ws(p);return ga(S,_),S},Fr=["tfoot","thead","tbody","colgroup"],br=(p,b,S)=>({element:p,rowspan:b,colspan:S}),se=(p,b,S)=>({element:p,cells:b,section:S}),we=(p,b,S)=>({element:p,isNew:b,isLocked:S}),Ve=(p,b,S,_)=>({element:p,cells:b,section:S,isNew:_}),gt=kn(Element.prototype.attachShadow)&&kn(Node.prototype.getRootNode),lt=Ut(gt),Rt=gt?p=>Ot.fromDom(p.dom.getRootNode()):As,xo=p=>Ot.fromDom(p.dom.host),eo=p=>{const b=Zn(p)?p.dom.parentNode:p.dom;if(null==b||null===b.ownerDocument)return!1;const S=b.ownerDocument;return(L=>{const V=Rt(L);return Ni(W=V)&&ua(W.dom.host)?Ae.some(V):Ae.none();var W})(Ot.fromDom(b)).fold(()=>S.body.contains(b),(_=eo,B=xo,L=>_(B(L))));var _,B},sn=p=>{const b=p.dom.body;if(null==b)throw new Error("Body is not available yet");return Ot.fromDom(b)},ln=(p,b)=>{let S=[];return at(js(p),_=>{b(_)&&(S=S.concat([_])),S=S.concat(ln(_,b))}),S},un=(p,b,S)=>Kn(ta(p,S),V=>wn(V,b)),en=(p,b)=>Kn(js(p),B=>wn(B,b)),dr=(p,b)=>((S,_)=>{const B=void 0===_?document:_.dom;return wo(B)?[]:M(B.querySelectorAll(S),Ot.fromDom)})(b,p);var Cs=(p,b,S,_,B)=>p(S,_)?Ae.some(S):kn(B)&&B(S)?Ae.none():b(S,_,B);const $s=(p,b,S)=>{let _=p.dom;const B=kn(S)?S:ie;for(;_.parentNode;){_=_.parentNode;const L=Ot.fromDom(_);if(b(L))return Ae.some(L);if(B(L))break}return Ae.none()},vi=(p,b,S)=>Cs((_,B)=>B(_),$s,p,b,S),oa=(p,b,S)=>$s(p,_=>wn(_,b),S),Wn=(p,b)=>Do(p.dom.childNodes,B=>{return L=Ot.fromDom(B),wn(L,b);var L}).map(Ot.fromDom),bs=(p,b)=>ns(b,p),ur=(p,b,S)=>Cs((_,B)=>wn(_,B),oa,p,b,S),Ml=(p,b,S=Wr)=>p.exists(_=>S(_,b)),Is=p=>{const b=[],S=_=>{b.push(_)};for(let _=0;_<p.length;_++)p[_].each(S);return b},Ri=(p,b)=>p?Ae.some(b):Ae.none(),yi=(p,b,S)=>""===b||p.length>=b.length&&p.substr(S,S+b.length)===b,Fa=(p,b,S=0,_)=>{const B=p.indexOf(b,S);return-1!==B&&(!!Zi(_)||B+b.length<=_)},No=(p,b)=>yi(p,b,0),Ta=(p,b)=>yi(p,b,p.length-b.length),qr=(p=>b=>b.replace(p,""))(/^\s+|\s+$/g),Ns=p=>p.length>0,Sc=p=>void 0!==p.style&&kn(p.style.getPropertyValue),Oo=(p,b,S)=>{if(!da(S))throw console.error("Invalid call to CSS.set. Property ",b,":: Value ",S,":: Element ",p),new Error("CSS value must be a string: "+S);Sc(p)&&p.style.setProperty(b,S)},qs=(p,b,S)=>{Oo(p.dom,b,S)},kc=(p,b)=>{const S=p.dom;dn(b,(_,B)=>{Oo(S,B,_)})},Bo=(p,b)=>{const S=p.dom,_=window.getComputedStyle(S).getPropertyValue(b);return""!==_||eo(p)?_:wt(S,b)},wt=(p,b)=>Sc(p)?p.style.getPropertyValue(b):"",Mi=(p,b)=>{const _=wt(p.dom,b);return Ae.from(_).filter(B=>B.length>0)},cs=(p,b)=>{var S,_;_=b,Sc(S=p.dom)&&S.style.removeProperty(_),Ml(jt(p,"style").map(qr),"")&&Fo(p,"style")},kr=(p,b,S=0)=>jt(p,b).map(_=>parseInt(_,10)).getOr(S),rs=(p,b)=>kr(p,b,1),tu=p=>cr("col")(p)?kr(p,"span",1)>1:rs(p,"colspan")>1,Gc=p=>rs(p,"rowspan")>1,Yn=(p,b)=>parseInt(Bo(p,b),10),pl=Ut(10),Sn=Ut(10),oc=(p,b)=>ds(p,b,ht),ds=(p,b,S)=>yn(js(p),_=>wn(_,b)?S(_)?[_]:[]:ds(_,b,S)),Ga=(p,b)=>((S,_,B=ie)=>B(_)?Ae.none():Er(S,nr(_))?Ae.some(_):oa(_,S.join(","),L=>wn(L,"table")||B(L)))(["td","th"],p,b),us=p=>oc(p,"th,td"),En=p=>wn(p,"colgroup")?en(p,"col"):yn(Di(p),b=>en(b,"col")),Rs=(p,b)=>ur(p,"table",b),si=p=>oc(p,"tr"),Di=p=>Rs(p).fold(Ut([]),b=>en(b,"colgroup")),Dl=(p,b)=>M(p,S=>{if("colgroup"===nr(S)){const _=M(En(S),B=>{const L=kr(B,"span",1);return br(B,1,L)});return se(S,_,"colgroup")}{const _=M(us(S),B=>{const L=kr(B,"rowspan",1),V=kr(B,"colspan",1);return br(B,L,V)});return se(S,_,b(S))}}),mr=p=>ea(p).map(b=>{const S=nr(b);return Er(Fr,S)?S:"tbody"}).getOr("tbody"),Oa=p=>{const b=si(p),S=[...Di(p),...b];return Dl(S,mr)},ss=p=>{let b,S=!1;return(..._)=>(S||(S=!0,b=p.apply(null,_)),b)},$i=()=>hl(0,0),hl=(p,b)=>({major:p,minor:b}),as={nu:hl,detect:(p,b)=>{const S=String(b).toLowerCase();return 0===p.length?$i():((_,B)=>{const L=((W,Q)=>{for(let de=0;de<W.length;de++){const be=W[de];if(be.test(Q))return be}})(_,B);if(!L)return{major:0,minor:0};const V=W=>Number(B.replace(L,"$"+W));return hl(V(1),V(2))})(p,S)},unknown:$i},ou=(p,b)=>{const S=String(b).toLowerCase();return Do(p,_=>_.search(S))},Bl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ms=p=>b=>Fa(b,p),nu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:p=>Fa(p,"edge/")&&Fa(p,"chrome")&&Fa(p,"safari")&&Fa(p,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bl],search:p=>Fa(p,"chrome")&&!Fa(p,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:p=>Fa(p,"msie")||Fa(p,"trident")},{name:"Opera",versionRegexes:[Bl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ms("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ms("firefox")},{name:"Safari",versionRegexes:[Bl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:p=>(Fa(p,"safari")||Fa(p,"mobile/"))&&Fa(p,"applewebkit")}],ym=[{name:"Windows",search:Ms("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:p=>Fa(p,"iphone")||Fa(p,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ms("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ms("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ms("linux"),versionRegexes:[]},{name:"Solaris",search:Ms("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ms("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ms("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ru={browsers:Ut(nu),oses:Ut(ym)},Ad="Chromium",Kc="Firefox",fl=p=>{const b=p.current,_=B=>()=>b===B;return{current:b,version:p.version,isEdge:_("Edge"),isChromium:_(Ad),isIE:_("IE"),isOpera:_("Opera"),isFirefox:_(Kc),isSafari:_("Safari")}},vs=()=>fl({current:void 0,version:as.unknown()}),Bi=fl,ve=(Ut("Edge"),Ut(Ad),Ut("IE"),Ut("Opera"),Ut(Kc),Ut("Safari"),"Windows"),nc="Android",Nd="Solaris",$n="FreeBSD",bl="ChromeOS",Rd=p=>{const b=p.current,_=B=>()=>b===B;return{current:b,version:p.version,isWindows:_(ve),isiOS:_("iOS"),isAndroid:_(nc),isMacOS:_("macOS"),isLinux:_("Linux"),isSolaris:_(Nd),isFreeBSD:_($n),isChromeOS:_(bl)}},vl=()=>Rd({current:void 0,version:as.unknown()}),q=Rd,ee=(Ut(ve),Ut("iOS"),Ut(nc),Ut("Linux"),Ut("macOS"),Ut(Nd),Ut($n),Ut(bl),p=>window.matchMedia(p).matches);let ce=ss(()=>((p,b,S)=>{const _=ru.browsers(),B=ru.oses(),L=b.bind(Q=>{return de=_,no(Q.brands,pe=>{const fe=pe.brand.toLowerCase();return Do(de,Se=>{var Ze;return fe===(null===(Ze=Se.brand)||void 0===Ze?void 0:Ze.toLowerCase())}).map(Se=>({current:Se.name,version:as.nu(parseInt(pe.version,10),0)}))});var de}).orThunk(()=>{return ou(_,de=p).map(be=>{const pe=as.detect(be.versionRegexes,de);return{current:be.name,version:pe}});var de}).fold(vs,Bi),V=(Q=B,de=p,ou(Q,de).map(be=>{const pe=as.detect(be.versionRegexes,de);return{current:be.name,version:pe}})).fold(vl,q),W=((Q,de,be,pe)=>{const fe=Q.isiOS()&&!0===/ipad/i.test(be),Se=Q.isiOS()&&!fe,Ze=Q.isiOS()||Q.isAndroid(),He=Ze||pe("(pointer:coarse)"),Ye=fe||!Se&&Ze&&pe("(min-device-width:768px)"),et=Se||Ze&&!Ye,bt=de.isSafari()&&Q.isiOS()&&!1===/safari/i.test(be),ut=!et&&!Ye&&!bt;return{isiPad:Ut(fe),isiPhone:Ut(Se),isTablet:Ut(Ye),isPhone:Ut(et),isTouch:Ut(He),isAndroid:Q.isAndroid,isiOS:Q.isiOS,isWebView:Ut(bt),isDesktop:Ut(ut)}})(V,L,p,S);var Q,de;return{browser:L,os:V,deviceType:W}})(navigator.userAgent,Ae.from(navigator.userAgentData),ee));const Ce=()=>ce(),he=(p,b)=>{const S=B=>{const L=b(B);if(L<=0||null===L){const V=Bo(B,p);return parseFloat(V)||0}return L},_=(B,L)=>$r(L,(V,W)=>{const Q=Bo(B,W),de=void 0===Q?0:parseInt(Q,10);return isNaN(de)?V:V+de},0);return{set:(B,L)=>{if(!Xt(L)&&!L.match(/^[0-9]+$/))throw new Error(p+".set accepts only positive integer values. Value was "+L);const V=B.dom;Sc(V)&&(V.style[p]=L+"px")},get:S,getOuter:S,aggregate:_,max:(B,L,V)=>{const W=_(B,V);return L>W?L-W:0}}},Pe=(p,b,S)=>{return B=S,(L=>{const V=parseFloat(L);return isNaN(V)?Ae.none():Ae.some(V)})(Bo(p,b)).getOr(B);var B},Ge=he("width",p=>p.dom.offsetWidth),ct=p=>Ge.get(p),xt=p=>Ge.getOuter(p),kt=p=>(b=>{const _=b.dom;return Q="right",(_.getBoundingClientRect().width||_.offsetWidth)-Pe(L=b,"padding-"+"left",0)-Pe(L,`padding-${Q}`,0)-Pe(L,"border-left-width",0)-Pe(L,`border-${Q}-width`,0);var L,Q})(p),vo=(p,b,S)=>{const _=p.cells,B=_.slice(0,b),L=_.slice(b),V=B.concat(S).concat(L);return Lo(p,V)},Co=(p,b,S)=>vo(p,b,[S]),Ao=(p,b,S)=>{p.cells[b]=S},Lo=(p,b)=>Ve(p.element,b,p.section,p.isNew),tn=(p,b)=>p.cells[b],mn=(p,b)=>tn(p,b).element,gn=p=>p.cells.length,qn=p=>{const b=bi(p,S=>"colgroup"===S.section);return{rows:b.fail,cols:b.pass}},Mr=(p,b,S)=>{const _=M(p.cells,S);return Ve(b(p.element),_,p.section,!0)},Ka="data-snooker-locked-cols",Hl=p=>jt(p,Ka).bind(b=>Ae.from(b.match(/\d+/g))).map(b=>Qt(b,ht)),Pl=p=>{const b=$r(qn(p).rows,(_,B)=>(at(B.cells,(L,V)=>{L.isLocked&&(_[V]=!0)}),_),{});return(_=>{const L=hr.call(_,0);return L.sort(void 0),L})(lr(b,(_,B)=>parseInt(B,10)))},su=(p,b)=>p+","+b,Gr=(p,b)=>{const S=yn(p.all,_=>_.cells);return Kn(S,b)},Ds=p=>{const b={},S=[],_=zt(p).map(fe=>fe.element).bind(Rs).bind(Hl).getOr({});let B=0,L=0,V=0;const{pass:W,fail:Q}=bi(p,fe=>"colgroup"===fe.section);at(Q,fe=>{const Se=[];at(fe.cells,Ze=>{let He=0;for(;void 0!==b[su(V,He)];)He++;const Ye=(bt=_,ut=He.toString(),wr(bt,ut)&&null!=bt[ut]),et=((bt,ut,_t,vt,It,Eo)=>({element:bt,rowspan:ut,colspan:_t,row:vt,column:It,isLocked:Eo}))(Ze.element,Ze.rowspan,Ze.colspan,V,He,Ye);var bt,ut;for(let bt=0;bt<Ze.colspan;bt++)for(let ut=0;ut<Ze.rowspan;ut++){const _t=He+bt,vt=su(V+ut,_t);b[vt]=et,L=Math.max(L,_t+1)}Se.push(et)}),B++,S.push(se(fe.element,Se,fe.section)),V++});const{columns:de,colgroups:be}=Bn(W).map(fe=>{const Se=(He=>{const Ye={};let et=0;return at(He.cells,bt=>{const ut=bt.colspan;fn(ut,_t=>{const vt=et+_t;Ye[vt]=((It,Eo,fo)=>({element:It,colspan:Eo,column:fo}))(bt.element,ut,vt)}),et+=ut}),Ye})(fe);return{colgroups:[((He,Ye)=>({element:He,columns:Ye}))(fe.element,qa(Se))],columns:Se}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:((fe,Se)=>({rows:fe,columns:Se}))(B,L),access:b,all:S,columns:de,colgroups:be}},Gs=p=>{const b=Oa(p);return Ds(b)},sc=Ds,ys=(p,b,S)=>Ae.from(p.access[su(b,S)]),ac=(p,b,S)=>{const _=Gr(p,B=>S(b,B.element));return _.length>0?Ae.some(_[0]):Ae.none()},Yc=Gr,Cg=p=>yn(p.all,b=>b.cells),pn=p=>qa(p.columns),ii=p=>Ue(p.columns).length>0,wm=(p,b)=>Ae.from(p.columns[b]),au=(p,b=ht)=>{const S=p.grid,_=fn(S.columns,Nt),B=fn(S.rows,Nt);return M(_,L=>yl(()=>yn(B,V=>ys(p,V,L).filter(W=>W.column===L).toArray()),V=>1===V.colspan&&b(V.element),()=>ys(p,0,L)))},yl=(p,b,S)=>{const _=p();return Do(_,b).orThunk(()=>Ae.from(_[0]).orThunk(S)).map(B=>B.element)},Xc=p=>{const b=p.grid,S=fn(b.rows,Nt),_=fn(b.columns,Nt);return M(S,B=>yl(()=>yn(_,L=>ys(p,B,L).filter(V=>V.row===B).fold(Ut([]),V=>[V])),L=>1===L.rowspan,()=>ys(p,B,0)))},ic=(p,b)=>S=>"rtl"===Sg(S)?b:p,Sg=p=>"rtl"===Bo(p,"direction")?"rtl":"ltr",iu=he("height",p=>{const b=p.dom;return eo(p)?b.getBoundingClientRect().height:b.offsetHeight}),pa=p=>iu.get(p),Fl=p=>iu.getOuter(p),Zr=(p,b)=>({left:p,top:b,translate:(S,_)=>Zr(p+S,b+_)}),F=Zr,G=(p,b)=>void 0!==p?p:void 0!==b?b:0,K=p=>{const b=p.dom.ownerDocument,S=b.body,_=b.defaultView,B=b.documentElement;if(S===p.dom)return F(S.offsetLeft,S.offsetTop);const L=G(_?.pageYOffset,B.scrollTop),V=G(_?.pageXOffset,B.scrollLeft),W=G(B.clientTop,S.clientTop),Q=G(B.clientLeft,S.clientLeft);return re(p).translate(V-Q,L-W)},re=p=>{const b=p.dom,S=b.ownerDocument.body;return S===b?F(S.offsetLeft,S.offsetTop):eo(p)?(_=>{const B=_.getBoundingClientRect();return F(B.left,B.top)})(b):F(0,0)},_e=(p,b)=>({row:p,y:b}),De=(p,b)=>({col:p,x:b}),dt=p=>K(p).left+xt(p),Tt=p=>K(p).left,Et=(p,b)=>De(p,Tt(b)),At=(p,b)=>De(p,dt(b)),qt=p=>K(p).top,to=(p,b)=>_e(p,qt(b)),rr=(p,b)=>_e(p,qt(b)+Fl(b)),ao=(p,b,S)=>{if(0===S.length)return[];const _=M(S.slice(1),(L,V)=>L.map(W=>p(V,W))),B=S[S.length-1].map(L=>b(S.length-1,L));return _.concat([B])},Ct={delta:Nt,positions:p=>ao(to,rr,p),edge:qt},Tn=ic({delta:Nt,edge:Tt,positions:p=>ao(Et,At,p)},{delta:p=>-p,edge:dt,positions:p=>ao(At,Et,p)}),so={delta:(p,b)=>Tn(b).delta(p,b),positions:(p,b)=>Tn(b).positions(p,b),edge:p=>Tn(p).edge(p)},cn={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Qo=(()=>{const p="[0-9]+",b="[eE][+-]?"+p,S=B=>`(?:${B})?`,_=["Infinity",p+"\\."+S(p)+S(b),"\\."+p+S(b),p+S(b)].join("|");return new RegExp(`^([+-]?(?:${_}))(.*)$`)})(),xn=/(\d+(\.\d+)?)%/,gr=/(\d+(\.\d+)?)px|em/,er=cr("col"),vr=(p,b,S)=>{const _=Ea(p).getOrThunk(()=>sn(Pa(p)));return b(p)/S(_)*100},tr=(p,b)=>{qs(p,"width",b+"px")},ha=(p,b)=>{qs(p,"width",b+"%")},fa=(p,b)=>{qs(p,"height",b+"px")},wl=(p,b)=>Mi(p,b).orThunk(()=>jt(p,b).map(S=>S+"px")),Vl=p=>wl(p,"width"),Ec=p=>vr(p,ct,kt),is=p=>{return er(p)?ct(p):Pe(b=p,"width",b.dom.offsetWidth);var b},lc=p=>{return(p=>{const b=Pe(_=p,"height",_.dom.offsetHeight)+"px";var _;return b?((S,_,B,L)=>{const V=parseFloat(S);return Ta(S,"%")&&"table"!==nr(_)?((W,Q,de,be)=>{const pe=Rs(W).map(fe=>{const Se=de(fe);return Math.floor(Q/100*Se)}).getOr(Q);return be(W,pe),pe})(_,V,B,L):V})(b,p,pa,fa):pa(p)})(b=p)/rs(b,"rowspan");var b},Aa=(p,b,S)=>{qs(p,"width",b+S)},xl=p=>vr(p,ct,kt)+"%",Qi=Ut(xn),kf=cr("col"),pt=p=>Vl(p).getOrThunk(()=>is(p)+"px"),qi=p=>{return(b=p,wl(b,"height")).getOrThunk(()=>lc(p)+"px");var b},Ip=(p,b,S,_,B,L)=>p.filter(_).fold(()=>L(((V,W)=>{if(W<0||W>=V.length-1)return Ae.none();const Q=V[W].fold(()=>{const be=(pe=>{const fe=hr.call(pe,0);return fe.reverse(),fe})(V.slice(0,W));return no(be,(pe,fe)=>pe.map(Se=>({value:Se,delta:fe+1})))},be=>Ae.some({value:be,delta:0})),de=V[W+1].fold(()=>{const be=V.slice(W+1);return no(be,(pe,fe)=>pe.map(Se=>({value:Se,delta:fe+1})))},be=>Ae.some({value:be,delta:1}));return Q.bind(be=>de.map(pe=>{const fe=pe.delta+be.delta;return Math.abs(pe.value-be.value)/fe}))})(S,b)),V=>B(V)),Xe=(p,b,S,_)=>{const B=au(p),L=ii(p)?M(pn(p),de=>Ae.from(de.element)):B,V=[Ae.some(so.edge(b))].concat(M(so.positions(B,b),Q=>Q.map(de=>de.x))),W=Bt(tu);return M(L,(Q,de)=>Ip(Q,de,V,W,be=>{if((fe=>{const Se=Ce().browser,Ze=Se.isChromium()||Se.isFirefox();return!kf(fe)||Ze})(be))return S(be);{const fe=null!=(pe=B[de])?pe:Ae.none();return Ip(fe,de,V,W,Se=>_(Ae.some(ct(Se))),_)}var pe},_))},wi=p=>p.map(b=>b+"px").getOr(""),Hp=(p,b,S)=>Xe(p,b,is,_=>_.getOrThunk(S.minCellWidth)),Ln=(p,b,S,_,B)=>{const L=Xc(p),V=[Ae.some(S.edge(b))].concat(M(S.positions(L,b),W=>W.map(Q=>Q.y)));return M(L,(W,Q)=>Ip(W,Q,V,Bt(Gc),_,B))},cc=(p,b)=>()=>eo(p)?b(p):parseFloat(Mi(p,"width").getOr("0")),ba=p=>{const b=cc(p,_=>parseFloat(xl(_))),S=cc(p,ct);return{width:b,pixelWidth:S,getWidths:(_,B)=>{return W=B,Xe(_,p,Ec,Q=>Q.fold(()=>W.minCellWidth(),de=>de/W.pixelWidth()*100));var W},getCellDelta:_=>_/S()*100,singleColumnWidth:(_,B)=>[100-_],minCellWidth:()=>pl()/S()*100,setElementWidth:ha,adjustTableWidth:_=>{const B=b();ha(p,B+_/100*B)},isRelative:!0,label:"percent"}},xr=p=>{const b=cc(p,ct);return{width:b,pixelWidth:b,getWidths:(S,_)=>Hp(S,p,_),getCellDelta:Nt,singleColumnWidth:(S,_)=>[Math.max(pl(),S+_)-S],minCellWidth:pl,setElementWidth:tr,adjustTableWidth:S=>{const _=b()+S;tr(p,_)},isRelative:!1,label:"pixel"}},Vu=p=>Vl(p).fold(()=>(b=>{const S=cc(b,ct),_=Ut(0);return{width:S,pixelWidth:S,getWidths:(B,L)=>Hp(B,b,L),getCellDelta:_,singleColumnWidth:Ut([0]),minCellWidth:_,setElementWidth:rt,adjustTableWidth:rt,isRelative:!0,label:"none"}})(p),b=>{return S=p,_=b,null!==Qi().exec(_)?ba(S):xr(S);var S,_}),zl=xr,In=ba,Md=(p,b,S)=>{const _=p[S].element,B=Ot.fromTag("td");$e(B,Ot.fromTag("br")),(b?$e:Je)(_,B)},lu=(p=>{const S=_=>p(_)?Ae.from(_.dom.nodeValue):Ae.none();return{get:_=>{if(!p(_))throw new Error("Can only get text value of a text node");return S(_).getOr("")},getOption:S,set:(_,B)=>{if(!p(_))throw new Error("Can only set raw text value of a text node");_.dom.nodeValue=B}}})(Zn),li=p=>lu.get(p),xm=p=>lu.getOption(p),Hs=(p,b)=>lu.set(p,b),Jc=p=>"img"===nr(p)?1:xm(p).fold(()=>js(p).length,b=>b.length),el=["img","br"],Ie=p=>{return xm(p).filter(b=>0!==b.trim().length||b.indexOf("\xa0")>-1).isSome()||Er(el,nr(p))||ml(b=p)&&"false"===_a(b,"contenteditable");var b},Cl=p=>((b,S)=>{const _=B=>{for(let L=0;L<B.childNodes.length;L++){const V=Ot.fromDom(B.childNodes[L]);if(S(V))return Ae.some(V);const W=_(B.childNodes[L]);if(W.isSome())return W}return Ae.none()};return _(b.dom)})(p,Ie),cu=p=>Sl(p,Ie),Sl=(p,b)=>{const S=_=>{const B=js(_);for(let L=B.length-1;L>=0;L--){const V=B[L];if(b(V))return Ae.some(V);const W=S(V);if(W.isSome())return W}return Ae.none()};return S(p)},Qc={scope:["row","col"]},Na=p=>()=>{const b=Ot.fromTag("td",p.dom);return $e(b,Ot.fromTag("br",p.dom)),b},Bs=p=>()=>Ot.fromTag("col",p.dom),zu=p=>()=>Ot.fromTag("colgroup",p.dom),Zu=p=>()=>Ot.fromTag("tr",p.dom),ho=(p,b,S)=>{const _=((B,L)=>{const V=Rr(B,L),W=js(an(B));return Dt(V,W),V})(p,b);return dn(S,(B,L)=>{null===B?Fo(_,L):Po(_,L,B)}),_},tl=p=>p,ol=(p,b,S)=>{const _=(B,L)=>{((V,W)=>{const Q=V.dom,de=W.dom;Sc(Q)&&Sc(de)&&(de.style.cssText=Q.style.cssText)})(B.element,L),cs(L,"height"),1!==B.colspan&&cs(L,"width")};return{col:B=>{const L=Ot.fromTag(nr(B.element),b.dom);return _(B,L),p(B.element,L),L},colgroup:zu(b),row:Zu(b),cell:B=>{const L=Ot.fromTag(nr(B.element),b.dom),V=S.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),W=V.length>0?(de=L,be=V,Cl(Q=B.element).map(pe=>{const fe=be.join(","),Se=un(pe,fe,Ze=>Qn(Ze,Q));return Cr(Se,(Ze,He)=>{const Ye=_n(He);return $e(Ze,Ye),Ye},de)}).getOr(de)):L;var Q,de,be;return $e(W,Ot.fromTag("br")),_(B,L),((Q,de)=>{dn(Qc,(be,pe)=>jt(Q,pe).filter(fe=>Er(be,fe)).each(fe=>Po(de,pe,fe)))})(B.element,L),p(B.element,L),L},replace:ho,colGap:Bs(b),gap:Na(b)}},Ps=p=>({col:Bs(p),colgroup:zu(p),row:Zu(p),cell:Na(p),replace:tl,colGap:Bs(p),gap:Na(p)}),ed=p=>b=>b.options.get(p),Pp=p=>{var b;const S=p.dom,_=null!==(b=S.getParent(p.selection.getStart(),S.isBlock))&&void 0!==b?b:p.getBody();return kt(Ot.fromDom(_))+"px"},Uu=p=>Ae.from(p.options.get("table_clone_elements")),Cm=ed("table_header_type"),kl=ed("table_column_resizing"),Kr=p=>"preservetable"===kl(p),td=p=>"resizetable"===kl(p),du=ed("table_sizing_mode"),Tc=p=>"relative"===du(p),Dd=p=>"fixed"===du(p),ci=p=>"responsive"===du(p),kg=ed("table_resize_bars"),Fp=ed("table_style_by_css"),_f=ed("table_merge_content_on_paste"),uu=p=>{const b=p.options,S=b.get("table_default_attributes");return b.isSet("table_default_attributes")?S:(B=S,ci(_=p)||Fp(_)?B:Dd(_)?{...B,width:Pp(_)}:{...B,width:"100%"});var _,B},mu=ed("table_use_colgroups"),T0=p=>ur(p,"[contenteditable]"),_l=(p,b=!1)=>eo(p)?p.dom.isContentEditable:T0(p).fold(Ut(b),S=>"true"===O0(S)),O0=p=>p.dom.contentEditable,Bd=p=>Ot.fromDom(p.getBody()),od=p=>b=>Qn(b,Bd(p)),va=p=>{Fo(p,"data-mce-style");const b=S=>Fo(S,"data-mce-style");at(us(p),b),at(En(p),b),at(si(p),b)},_g=p=>Ot.fromDom(p.selection.getStart()),Sm=p=>p.getBoundingClientRect().width,uy=p=>p.getBoundingClientRect().height,Ld=p=>vi(p,cr("table")).exists(_l),Ks=(p,b)=>b.column<=p.finishCol&&b.column+b.colspan-1>=p.startCol&&b.row<=p.finishRow&&b.row+b.rowspan-1>=p.startRow,my=(p,b)=>b.column>=p.startCol&&b.column+b.colspan-1<=p.finishCol&&b.row>=p.startRow&&b.row+b.rowspan-1<=p.finishRow,Id=(p,b,S)=>{const _=ac(p,b,Qn),B=ac(p,S,Qn);return _.bind(L=>B.map(V=>{return W=L,Q=V,{startRow:Math.min(W.row,Q.row),startCol:Math.min(W.column,Q.column),finishRow:Math.max(W.row+W.rowspan-1,Q.row+Q.rowspan-1),finishCol:Math.max(W.column+W.colspan-1,Q.column+Q.colspan-1)};var W,Q}))},km=(p,b,S)=>Id(p,b,S).map(_=>{const B=Yc(p,yt(Ks,_));return M(B,L=>L.element)}),Ef=(p,b)=>ac(p,b,(S,_)=>gl(_,S)).map(S=>S.element),_m=(p,b,S)=>{const _=ju(p);return km(_,b,S)},rl=(p,b,S,_,B)=>{const L=ju(p),V=Qn(p,S)?Ae.some(b):Ef(L,b),W=Qn(p,B)?Ae.some(_):Ef(L,_);return V.bind(Q=>W.bind(de=>km(L,Q,de)))},ju=Gs;var Ss=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hd=()=>({up:Ut({selector:oa,closest:ur,predicate:$s,all:ta}),down:Ut({selector:dr,predicate:ln}),styles:Ut({get:Bo,getRaw:Mi,set:qs,remove:cs}),attrs:Ut({get:_a,set:Po,remove:Fo,copyTo:(p,b)=>{const S=ws(p);ga(b,S)}}),insert:Ut({before:Le,after:ue,afterAll:Pt,append:$e,appendAll:Dt,prepend:Je,wrap:Lt}),remove:Ut({unwrap:rn,remove:bo}),create:Ut({nu:Ot.fromTag,clone:p=>Ot.fromDom(p.dom.cloneNode(!1)),text:Ot.fromText}),query:Ut({comparePosition:(p,b)=>p.dom.compareDocumentPosition(b.dom),prevSibling:xs,nextSibling:Nr}),property:Ut({children:js,name:nr,parent:ea,document:p=>As(p).dom,isText:Zn,isComment:Sr,isElement:Nn,isSpecial:p=>{const b=nr(p);return Er(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],b)},getLanguage:p=>Nn(p)?jt(p,"lang"):Ae.none(),getText:li,setText:Hs,isBoundary:p=>!!Nn(p)&&("body"===nr(p)||Er(Ss,nr(p))),isEmptyTag:p=>!!Nn(p)&&Er(["br","img","hr","input"],nr(p)),isNonEditable:p=>Nn(p)&&"false"===_a(p,"contenteditable")}),eq:Qn,is:fs});const Tf=(p,b,S)=>b.bind(_=>S.filter(yt(p.eq,_))),Vp=Hd(),Tg=(p,b)=>{return(B=b).length>0?((p,b,S,_)=>{const B=b(p,S);return Cr(_,(L,V)=>{const W=b(p,V);return Tf(p,L,W)},B)})(Vp,(S,_)=>p(_),(W=B)[0],W.slice(1)):Ae.none();var B,W},zp=p=>oa(p,"table"),Em=(p,b,S)=>{const _=B=>L=>void 0!==S&&S(L)||Qn(L,B);return Qn(p,b)?Ae.some({boxes:Ae.some([p]),start:p,finish:b}):zp(p).bind(B=>zp(b).bind(L=>{if(Qn(B,L))return Ae.some({boxes:_m(B,p,b),start:p,finish:b});if(gl(B,L)){const V=un(b,"td,th",_(B)),W=V.length>0?V[V.length-1]:b;return Ae.some({boxes:rl(B,p,B,b,L),start:p,finish:W})}if(gl(L,B)){const V=un(p,"td,th",_(L)),W=V.length>0?V[V.length-1]:p;return Ae.some({boxes:rl(L,p,B,b,L),start:p,finish:W})}return(V=p,W=b,((de,be,pe,fe=ie)=>{const Se=[be].concat(de.up().all(be)),Ze=[pe].concat(de.up().all(pe)),He=ut=>zn(ut,fe).fold(()=>ut,_t=>ut.slice(0,_t+1)),Ye=He(Se),et=He(Ze),bt=Do(Ye,ut=>Ke(et,yt(de.eq,ut)));return{firstpath:Ye,secondpath:et,shared:bt}})(Vp,V,W,void 0)).shared.bind(V=>ur(V,"table",S).bind(W=>{const Q=un(b,"td,th",_(W)),de=Q.length>0?Q[Q.length-1]:b,be=un(p,"td,th",_(W)),pe=be.length>0?be[be.length-1]:p;return Ae.some({boxes:rl(W,p,B,b,L),start:pe,finish:de})}));var V,W}))},Tm=(p,b)=>{const S=dr(p,b);return S.length>0?Ae.some(S):Ae.none()},Oc=(p,b,S)=>bs(p,b).bind(_=>bs(p,S).bind(B=>Tg(zp,[_,B]).map(L=>({first:_,last:B,table:L})))),Pd=(p,b)=>Tm(p,b),Om=Nt,Zp=p=>{const b=(S,_)=>jt(S,_).exists(B=>parseInt(B,10)>1);return p.length>0&&St(p,S=>b(S,"rowspan")||b(S,"colspan"))?Ae.some(p):Ae.none()},Of=(p,b,S)=>b.length<=1?Ae.none():((p,b,S)=>Oc(p,b,S).bind(_=>{const B=Q=>Qn(p,Q),L="thead,tfoot,tbody,table",V=oa(_.first,L,B),W=oa(_.last,L,B);return V.bind(Q=>W.bind(de=>{return Qn(Q,de)?(pe=_.first,fe=_.last,Se=ju(_.table),Id(Se,pe,fe).bind(Ye=>((et,bt)=>{let ut=!0;const _t=yt(my,bt);for(let vt=bt.startRow;vt<=bt.finishRow;vt++)for(let It=bt.startCol;It<=bt.finishCol;It++)ut=ut&&ys(et,vt,It).exists(_t);return ut?Ae.some(bt):Ae.none()})(Se,Ye))):Ae.none();var pe,fe,Se}))}))(p,S.firstSelectedSelector,S.lastSelectedSelector).map(_=>({bounds:_,cells:b})),nd="data-mce-selected",Af="data-mce-first-selected",Am="data-mce-last-selected",A0="["+nd+"]",Hn={selected:nd,selectedSelector:"td["+nd+"],th["+nd+"]",firstSelected:Af,firstSelectedSelector:"td["+Af+"],th["+Af+"]",lastSelected:Am,lastSelectedSelector:"td["+Am+"],th["+Am+"]"},io=(p,b,S)=>({element:S,mergable:Of(b,p,Hn),unmergable:Zp(p),selection:Om(p)}),gu=p=>(b,S)=>{const _=nr(b),B="col"===_||"colgroup"===_?Rs(L=b).bind(V=>Pd(V,Hn.firstSelectedSelector)).fold(Ut(L),V=>V[0]):b;var L;return ur(B,p,S)},Nf=gu("th,td,caption"),Ag=gu("th,td"),Ac=p=>{return b=p.model.table.getSelectedCells(),M(b,Ot.fromDom);var b},Ng=(p,b)=>({element:p,offset:b}),Rg=(p,b,S)=>p.property().isText(b)&&0===p.property().getText(b).trim().length||p.property().isComment(b)?S(b).bind(_=>Rg(p,_,S).orThunk(()=>Ae.some(_))):Ae.none(),Qe=(p,b)=>p.property().isText(b)?p.property().getText(b).length:p.property().children(b).length,Rf=(p,b)=>{const S=Rg(p,b,p.query().prevSibling).getOr(b);if(p.property().isText(S))return Ng(S,Qe(p,S));const _=p.property().children(S);return _.length>0?Rf(p,_[_.length-1]):Ng(S,Qe(p,S))},Mf=Rf,Mg=Hd(),pu=(p,b)=>{var _;tu(p)||(_=p,Vl(_).bind(B=>{return V=["fixed","relative","empty"],Ae.from(Qo.exec(B)).bind(W=>{const Q=Number(W[1]),de=W[2];return be=de,Ke(V,fe=>Ke(cn[fe],Se=>be===Se))?Ae.some({value:Q,unit:de}):Ae.none();var be});var V})).each(_=>{const B=_.value/2;Aa(p,B,_.unit),Aa(b,B,_.unit)})},Fd=p=>M(p,Ut(0)),N0=(p,b,S,_,B)=>B(p.slice(0,b)).concat(_).concat(B(p.slice(S))),hu=p=>(b,S,_,B)=>{if(p(_)){const L=Math.max(B,b[S]-Math.abs(_)),V=Math.abs(L-b[S]);return _>=0?V:-V}return _},Br=hu(p=>p<0),rd=hu(ht),Df=()=>{const p=(S,_,B,L)=>{const V=(100+B)/100,W=Math.max(L,(S[_]+B)/V);return M(S,(Q,de)=>(de===_?W:Q/V)-Q)},b=(S,_,B,L,V,W)=>W?p(S,_,L,V):((Q,de,be,pe,fe)=>{const Se=Br(Q,de,pe,fe);return N0(Q,de,be+1,[Se,0],Fd)})(S,_,B,L,V);return{resizeTable:(S,_)=>S(_),clampTableDelta:Br,calcLeftEdgeDeltas:b,calcMiddleDeltas:(S,_,B,L,V,W,Q)=>b(S,B,L,V,W,Q),calcRightEdgeDeltas:(S,_,B,L,V,W)=>{if(W)return p(S,B,L,V);{const Q=Br(S,B,L,V);return Fd(S.slice(0,B)).concat([Q])}},calcRedestributedWidths:(S,_,B,L)=>{if(L){const V=(_+B)/_,W=M(S,Q=>Q/V);return{delta:100*V-100,newSizes:W}}return{delta:B,newSizes:S}}}},Gi=()=>{const p=(b,S,_,B,L)=>{const V=rd(b,B>=0?_:S,B,L);return N0(b,S,_+1,[V,-V],Fd)};return{resizeTable:(b,S,_)=>{_&&b(S)},clampTableDelta:(b,S,_,B,L)=>{if(L){if(_>=0)return _;{const V=$r(b,(W,Q)=>W+Q-B,0);return Math.max(-V,_)}}return Br(b,S,_,B)},calcLeftEdgeDeltas:p,calcMiddleDeltas:(b,S,_,B,L,V)=>p(b,_,B,L,V),calcRightEdgeDeltas:(b,S,_,B,L,V)=>V?Fd(b):M(b,Ut(B/b.length)),calcRedestributedWidths:(b,S,_,B)=>({delta:0,newSizes:b})}},Ra=p=>Gs(p).grid,Vd=cr("th"),Wu=p=>St(p,b=>Vd(b.element)),Nc=(p,b)=>p&&b?"sectionCells":p?"section":"cells",Rc=p=>{const b="thead"===p.section,S=Ml(Dg(p.cells),"th");return"tfoot"===p.section?{type:"footer"}:b||S?{type:"header",subType:Nc(b,S)}:{type:"body"}},Dg=p=>{const b=Kn(p,S=>Vd(S.element));return 0===b.length?Ae.some("td"):b.length===p.length?Ae.some("th"):Ae.none()},Bf=(p,b,S)=>we(S(p.element,b),!0,p.isLocked),Up=(p,b)=>p.section!==b?Ve(p.element,p.cells,b,p.isNew):p,Jt=()=>({transformRow:Up,transformCell:(p,b,S)=>{const _=S(p.element,b),B="td"!==nr(_)?(L=>{const W=Rr(L,"td");ue(L,W);const Q=js(L);return Dt(W,Q),bo(L),W})(_):_;return we(B,p.isNew,p.isLocked)}}),Lf=()=>({transformRow:Up,transformCell:Bf}),fu=()=>({transformRow:(p,b)=>Up(p,"thead"===b?"tbody":b),transformCell:Bf}),R0=Jt,py=Lf,M0=fu,jp=()=>({transformRow:Nt,transformCell:Bf}),sd=(p,b,S,_)=>{S===_?Fo(p,b):Po(p,b,S)},D0=(p,b,S)=>{Bn(en(p,b)).fold(()=>Je(p,S),_=>ue(_,S))},Wp=(p,b)=>{const S=[],_=[],B=fe=>M(fe,Se=>{Se.isNew&&S.push(Se.element);const Ze=Se.element;return po(Ze),at(Se.cells,He=>{He.isNew&&_.push(He.element),sd(He.element,"colspan",He.colspan,1),sd(He.element,"rowspan",He.rowspan,1),$e(Ze,He.element)}),Ze}),L=fe=>yn(fe,Se=>M(Se.cells,Ze=>(sd(Ze.element,"span",Ze.colspan,1),Ze.element))),V=(fe,Se)=>{const Ze=((Ye,et)=>{const bt=Wn(Ye,et).getOrThunk(()=>{const ut=Ot.fromTag(et,Pa(Ye).dom);return"thead"===et?D0(Ye,"caption,colgroup",ut):"colgroup"===et?D0(Ye,"caption",ut):$e(Ye,ut),ut});return po(bt),bt})(p,Se),He=("colgroup"===Se?L:B)(fe);Dt(Ze,He)},W=(fe,Se)=>{fe.length>0?V(fe,Se):Wn(p,Se).each(bo)},Q=[],de=[],be=[],pe=[];return at(b,fe=>{switch(fe.section){case"thead":Q.push(fe);break;case"tbody":de.push(fe);break;case"tfoot":be.push(fe);break;case"colgroup":pe.push(fe)}}),W(pe,"colgroup"),W(Q,"thead"),W(de,"tbody"),W(be,"tfoot"),{newRows:S,newCells:_}},hy=(p,b)=>{if(0===p.length)return 0;const S=p[0];return zn(p,_=>!b(S.element,_.element)).getOr(p.length)},bu=(p,b,S)=>{const _=[];at(p.colgroups,B=>{const L=[];for(let V=0;V<p.grid.columns;V++){const W=wm(p,V).map(Q=>we(Q.element,S,!1)).getOrThunk(()=>we(b.colGap(),!0,!1));L.push(W)}_.push(Ve(B.element,L,"colgroup",S))});for(let B=0;B<p.grid.rows;B++){const L=[];for(let Q=0;Q<p.grid.columns;Q++){const de=ys(p,B,Q).map(be=>we(be.element,S,be.isLocked)).getOrThunk(()=>we(b.gap(),!0,!1));L.push(de)}const V=p.all[B],W=Ve(V.element,L,V.section,S);_.push(W)}return _},Rm=p=>((p,b)=>{const S=M(p,_=>M(_.cells,ie));return M(p,(_,B)=>{const L=yn(_.cells,(V,W)=>{if(!1===S[B][W]){const fe=((Se,Ze,He,Ye)=>{const et=Se[Ze],bt="colgroup"===et.section;var vt,It;return{colspan:hy(et.cells.slice(He),Ye),rowspan:bt?1:hy((vt=Se.slice(Ze),It=He,M(vt,Eo=>tn(Eo,It))),Ye)}})(p,B,W,b);return((Se,Ze,He,Ye)=>{for(let et=Se;et<Se+He;et++)for(let bt=Ze;bt<Ze+Ye;bt++)S[et][bt]=!0})(B,W,fe.rowspan,fe.colspan),[(Q=V.element,de=fe.rowspan,be=fe.colspan,pe=V.isNew,{element:Q,rowspan:de,colspan:be,isNew:pe})]}return[];var Q,de,be,pe});return((V,W,Q,de)=>({element:V,cells:W,section:Q,isNew:de}))(_.element,L,_.section,_.isNew)})})(p,Qn),$p=(p,b)=>no(p.all,S=>Do(S.cells,_=>Qn(b,_.element))),Bg=(p,b,S)=>{const _=M(b.selection,L=>Ga(L).bind(V=>$p(p,V)).filter(S)),B=Is(_);return Ri(B.length>0,B)},Ma=(p,b,S,_,B)=>(L,V,W,Q)=>{const de=Gs(L),be=Ae.from(Q?.section).getOrThunk(jp);return b(de,V).map(pe=>{const fe=bu(de,W,!1),Se=p(fe,pe,Qn,B(W),be),Ze=Pl(Se.grid);return{info:pe,grid:Rm(Se.grid),cursor:Se.cursor,lockedColumns:Ze}}).bind(pe=>{const fe=Wp(L,pe.grid),Se=Ae.from(Q?.sizing).getOrThunk(()=>Vu(L)),Ze=Ae.from(Q?.resize).getOrThunk(Gi);return S(L,pe.grid,pe.info,{sizing:Se,resize:Ze,section:be}),_(L),Fo(L,Ka),pe.lockedColumns.length>0&&Po(L,Ka,pe.lockedColumns.join(",")),Ae.some({cursor:pe.cursor,newRows:fe.newRows,newCells:fe.newCells})})},El=(p,b)=>Bg(p,b,ht).map(S=>({cells:S,generators:b.generators,clipboard:b.clipboard})),na=(p,b)=>Bg(p,b,ht),Zl=(p,b)=>Bg(p,b,S=>!S.isLocked),Mc=(p,b)=>St(b,S=>$p(p,S).exists(L=>!L.isLocked)),zd=(p,b,S,_)=>{const B=qn(p).rows;let L=!0;for(let V=0;V<B.length;V++)for(let W=0;W<gn(B[0]);W++){const Q=B[V],de=tn(Q,W),be=S(de.element,b);be&&!L?Ao(Q,W,we(_(),!0,de.isLocked)):be&&(L=!1)}return p},If=p=>{const b=L=>L(p),S=Ut(p),_=()=>B,B={tag:!0,inner:p,fold:(L,V)=>V(p),isValue:ht,isError:ie,map:L=>Lg.value(L(p)),mapError:_,bind:b,exists:b,forall:b,getOr:S,or:_,getOrThunk:S,orThunk:_,getOrDie:S,each:L=>{L(p)},toOptional:()=>Ae.some(p)};return B},fy=p=>{const b=()=>S,S={tag:!1,inner:p,fold:(B,L)=>B(p),isValue:ie,isError:ht,map:b,mapError:B=>Lg.error(B(p)),bind:b,exists:ie,forall:ht,getOr:Nt,or:Nt,getOrThunk:yr,orThunk:yr,getOrDie:(_=String(p),()=>{throw new Error(_)}),each:rt,toOptional:Ae.none};var _;return S},Lg={value:If,error:fy,fromOption:(p,b)=>p.fold(()=>fy(b),If)},by=(p,b)=>({rowDelta:0,colDelta:gn(p[0])-gn(b[0])}),Dc=(p,b)=>({rowDelta:p.length-b.length,colDelta:0}),Hf=(p,b,S,_)=>{const B="colgroup"===b.section?S.col:S.cell;return fn(p,L=>we(B(),!0,_(L)))},Ig=(p,b,S,_)=>{const B=p[p.length-1];return p.concat(fn(b,()=>{const V=Mr(B,"colgroup"===B.section?S.colgroup:S.row,Nt),W=Hf(V.cells.length,V,S,Q=>wr(_,Q.toString()));return Lo(V,W)}))},Pf=(p,b,S,_)=>M(p,B=>{const L=Hf(b,B,S,ie);return vo(B,_,L)}),ad=(p,b,S)=>{const _=b.colDelta<0?Pf:Nt,B=b.rowDelta<0?Ig:Nt,L=Pl(p),V=gn(p[0]),W=Ke(L,be=>be===V-1),Q=_(p,Math.abs(b.colDelta),S,W?V-1:V),de=Pl(Q);return B(Q,Math.abs(b.rowDelta),S,Qt(de,ht))},Lr=(p,b,S,_)=>{const B=yt(_,tn(p[b],S).element),L=p[b];return p.length>1&&gn(L)>1&&(S>0&&B(mn(L,S-1))||S<L.cells.length-1&&B(mn(L,S+1))||b>0&&B(mn(p[b-1],S))||b<p.length-1&&B(mn(p[b+1],S)))},B0=(p,b,S)=>Kn(S,_=>_>=p.column&&_<=gn(b[0])+p.column),id=(p,b,S,_,B)=>{var de,be,pe,fe;de=b,pe=B,fe=_.cell,(be=p)>0&&be<de[0].cells.length&&at(de,Se=>{const Ze=Se.cells[be-1];let He=0;const Ye=fe();for(;Se.cells.length>be+He&&pe(Ze.element,Se.cells[be+He].element);)Ao(Se,be+He,we(Ye,!0,Se.cells[be+He].isLocked)),He++});const L=Dc(S,b),V=ad(S,L,_),W=Dc(b,V),Q=ad(b,W,_);return M(Q,(de,be)=>vo(de,p,V[be].cells))},Gn=(p,b,S,_,B)=>{((bt,ut,_t,vt)=>{const It=qn(bt).rows;if(ut>0&&ut<It.length){const Eo=(Xn=_t,$r(It[ut-1].cells,(Vo,hn)=>Ke(Vo,Go=>Xn(Go.element,hn.element))?Vo:Vo.concat([hn]),[]));at(Eo,fo=>{let Xn=Ae.none();for(let Vo=ut;Vo<It.length;Vo++)for(let hn=0;hn<gn(It[0]);hn++){const Go=It[Vo],or=tn(Go,hn);_t(or.element,fo.element)&&(Xn.isNone()&&(Xn=Ae.some(vt())),Xn.each(Vs=>{Ao(Go,hn,we(Vs,!0,or.isLocked))}))}})}var Xn})(b,p,B,_.cell);const L=Pl(b),V=by(b,S),W={...V,colDelta:V.colDelta-L.length},Q=ad(b,W,_),{cols:de,rows:be}=qn(Q),pe=Pl(Q),fe=by(S,b),Se={...fe,colDelta:fe.colDelta+pe.length},Ze=(Ye=_,et=pe,M(S,bt=>$r(et,(ut,_t)=>{const vt=Hf(1,bt,Ye,ht)[0];return Co(ut,_t,vt)},bt))),He=ad(Ze,Se,_);var Ye,et;return[...de,...be.slice(0,p),...He,...be.slice(p,be.length)]},Mm=(p,b,S,_,B)=>{const{rows:L,cols:V}=qn(p),W=L.slice(0,b),Q=L.slice(b);return[...V,...W,(de=L[S],pe=_,fe=B,Mr(de,Se=>fe(Se,pe),(de,be)=>b>0&&b<L.length&&_(mn(L[b-1],be),mn(L[b],be))?tn(L[b],be):we(B(de.element,_),!0,de.isLocked))),...Q];var de,pe,fe},ms=(p,b,S,_,B)=>M(p,L=>{const V=b>0&&b<gn(L)&&_(mn(L,b-1),mn(L,b)),W=((Q,de,be,pe,fe,Se,Ze)=>{if("colgroup"!==be&&pe)return tn(Q,de);{const He=tn(Q,fe);return we(Ze(He.element,Se),!0,!1)}})(L,b,L.section,V,S,_,B);return Co(L,b,W)}),Li=(p,b,S,_)=>{return W=_,void 0!==mn((B=p)[L=b],V=S)&&L>0&&W(mn(B[L-1],V),mn(B[L],V))||((B,L,V)=>L>0&&V(mn(B,L-1),mn(B,L)))(p[b],S,_);var B,L,V,W},Ii=(p,b,S,_)=>{const B=L=>("row"===L?Gc(b):tu(b))?`${L}group`:L;return p?Vd(b)?B(S):null:_&&Vd(b)?B("row"===S?"col":"row"):null},ks=(p,b,S)=>we(S(p.element,b),!0,p.isLocked),Ff=(p,b,S,_,B,L,V)=>M(p,(W,Q)=>(de=>{const fe=M(de.cells,(Se,Ze)=>{if(He=Se,Ke(b,Ye=>S(He.element,Ye.element))){const He=V(Se,Q,Ze)?B(Se,S,_):Se;return L(He,Q,Ze).each(Ye=>{var et,bt;et=He.element,bt={scope:Ae.from(Ye)},dn(bt,(ut,_t)=>{ut.fold(()=>{Fo(et,_t)},vt=>{Wi(et.dom,_t,vt)})})}),He}var He;return Se});return Ve(de.element,fe,de.section,de.isNew)})(W)),Ki=(p,b,S)=>yn(p,(_,B)=>Li(p,B,b,S)?[]:[tn(_,b)]),ld=(p,b,S,_,B)=>{const L=qn(p).rows,V=yn(b,be=>Ki(L,be,_)),W=M(L,be=>Wu(be.cells)),Q=(be=V,St(pe=W,Nt)&&Wu(be)?ht:(fe,Se,Ze)=>!("th"===nr(fe.element)&&pe[Se]));var be,pe;return Ff(p,V,_,B,ks,((be,pe)=>(fe,Se)=>Ae.some(Ii(be,fe.element,"row",pe[Se])))(S,W),Q)},qp=(p,b,S,_)=>{const B=qn(p).rows,L=M(b,V=>tn(B[V.row],V.column));return Ff(p,L,S,_,ks,Ae.none,ht)},Bc=p=>{if(!Ia(p))throw new Error("cases must be an array");if(0===p.length)throw new Error("there must be at least one case");const b=[],S={};return at(p,(_,B)=>{const L=Ue(_);if(1!==L.length)throw new Error("one and only one name per case");const V=L[0],W=_[V];if(void 0!==S[V])throw new Error("duplicate key detected:"+V);if("cata"===V)throw new Error("cannot have a case named cata (sorry)");if(!Ia(W))throw new Error("case arguments must be an array");b.push(V),S[V]=(...Q)=>{const de=Q.length;if(de!==W.length)throw new Error("Wrong number of arguments to case "+V+". Expected "+W.length+" ("+W+"), got "+de);return{fold:(...be)=>{if(be.length!==p.length)throw new Error("Wrong number of arguments to fold. Expected "+p.length+", got "+be.length);return be[B].apply(null,Q)},match:be=>{const pe=Ue(be);if(b.length!==pe.length)throw new Error("Wrong number of arguments to match. Expected: "+b.join(",")+"\nActual: "+pe.join(","));if(!St(b,fe=>Er(pe,fe)))throw new Error("Not all branches were specified when using match. Specified: "+pe.join(", ")+"\nRequired: "+b.join(", "));return be[V].apply(null,Q)},log:be=>{console.log(be,{constructors:b,constructor:V,params:Q})}}}}),S},dc={...Bc([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},$u=(p,b,S)=>{let _=0;for(let B=p;B<b;B++)_+=void 0!==S[B]?S[B]:0;return _},Dm=(p,b,S)=>{const _=(L=b,ii(B=p)?((V,W)=>{const Q=pn(V);return M(Q,(de,be)=>({element:de.element,width:W[be],colspan:de.colspan}))})(B,L):((V,W)=>{const Q=Cg(V);return M(Q,de=>{const be=$u(de.column,de.column+de.colspan,W);return{element:de.element,width:be,colspan:de.colspan}})})(B,L));var B,L;at(_,B=>{S.setElementWidth(B.element,B.width)})},Hg=(p,b,S,_,B)=>{const L=Gs(p),V=B.getCellDelta(b),W=B.getWidths(L,B),Q=S===L.grid.columns-1,de=_.clampTableDelta(W,S,V,B.minCellWidth(),Q),be=((fe,Se,Ze,He,Ye)=>{const et=fe.slice(0),bt=(vt=Se,0===(_t=fe).length?dc.none():1===_t.length?dc.only(0):0===vt?dc.left(0,1):vt===_t.length-1?dc.right(vt-1,vt):vt>0&&vt<_t.length-1?dc.middle(vt-1,vt,vt+1):dc.none()),ut=Ut(M(et,Ut(0)));var _t,vt;return bt.fold(ut,_t=>He.singleColumnWidth(et[_t],Ze),(_t,vt)=>Ye.calcLeftEdgeDeltas(et,_t,vt,Ze,He.minCellWidth(),He.isRelative),(_t,vt,It)=>Ye.calcMiddleDeltas(et,_t,vt,It,Ze,He.minCellWidth(),He.isRelative),(_t,vt)=>Ye.calcRightEdgeDeltas(et,_t,vt,Ze,He.minCellWidth(),He.isRelative))})(W,S,de,B,_),pe=M(be,(fe,Se)=>fe+W[Se]);Dm(L,pe,B),_.resizeTable(B.adjustTableWidth,de,Q)},Yr=p=>$r(p,(b,S)=>Ke(b,_=>_.column===S.column)?b:b.concat([S]),[]).sort((b,S)=>b.column-S.column),Vf=cr("col"),L0=cr("colgroup"),Kp=p=>"tr"===nr(p)||L0(p),di=p=>({element:p,colspan:kr(p,"colspan",1),rowspan:kr(p,"rowspan",1)}),Tl=p=>jt(p,"scope").map(b=>b.substr(0,3)),sl=(p,b=di)=>{const S=B=>{if(Kp(B))return L0((L={element:B}).element)?p.colgroup(L):p.row(L);{const V=B,W=(Q=b(V),Vf(Q.element)?p.col(Q):p.cell(Q));return _=Ae.some({item:V,replacement:W}),W}var Q,L};let _=Ae.none();return{getOrInit:(B,L)=>_.fold(()=>S(B),V=>L(B,V.item)?V.replacement:S(B))}},zf=p=>b=>{const S=[],_=B=>{const V=b.replace(B,p,"td"===p?{scope:null}:{});return S.push({item:B,sub:V}),V};return{replaceOrInit:(B,L)=>{if(Kp(B)||Vf(B))return B;{const V=B;return(W=V,Q=L,Do(S,de=>Q(de.item,W))).fold(()=>_(V),W=>L(B,W.item)?W.sub:_(V))}var W,Q}}},vu=p=>({unmerge:b=>{const S=Tl(b);return S.each(_=>Po(b,"scope",_)),()=>{const _=p.cell({element:b,colspan:1,rowspan:1});return cs(_,"width"),cs(b,"width"),S.each(B=>Po(_,"scope",B)),_}},merge:b=>(cs(b[0],"width"),(()=>{const S=Is(M(b,Tl));if(0===S.length)return Ae.none();{const _=S[0],B=["row","col"];return Ke(S,L=>L!==_&&Er(B,L))?Ae.none():Ae.from(_)}})().fold(()=>Fo(b[0],"scope"),S=>Po(b[0],"scope",S+"group")),Ut(b[0]))}),I0=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Yp=Hd(),al=p=>((b,S)=>{const _=b.property().name(S);return Er(I0,_)})(Yp,p),qu=p=>((b,S)=>{const _=b.property().name(S);return Er(["ol","ul"],_)})(Yp,p),uc=p=>_l(p,!0),Bm=p=>{0===us(p).length&&bo(p)},yu=(p,b)=>({grid:p,cursor:b}),Ys=(p,b,S)=>{const _=((B,L,V)=>{var W,Q;const de=qn(B).rows;return Ae.from(null===(Q=null===(W=de[L])||void 0===W?void 0:W.cells[V])||void 0===Q?void 0:Q.element).filter(uc).orThunk(()=>no(de,pe=>no(pe.cells,fe=>{const Se=fe.element;return Ri(uc(Se),Se)})))})(p,b,S);return yu(p,_)},Zd=p=>$r(p,(b,S)=>Ke(b,_=>_.row===S.row)?b:b.concat([S]),[]).sort((b,S)=>b.row-S.row),Gu=(p,b)=>(S,_,B,L,V)=>{const W=Zd(_),de=((be,pe,fe,Se,Ze,He,Ye)=>{const{cols:et,rows:bt}=qn(be),ut=bt[pe[0]],_t=yn(pe,Vo=>{return or=Ze,yn((hn=bt)[Go=Vo].cells,(Za,Xs)=>Li(hn,Go,Xs,or)?[]:[Za]);var hn,Go,or}),vt=M(ut.cells,(Vo,hn)=>Wu(Ki(bt,hn,Ze))),It=[...bt];at(pe,Vo=>{It[Vo]=Ye.transformRow(bt[Vo],fe)});const Eo=[...et,...It],fo=(Vo=ut,St(hn=vt,Nt)&&Wu(Vo.cells)?ht:(Go,or,Vs)=>!("th"===nr(Go.element)&&hn[Vs])),Xn=((Vo,hn)=>(Go,or,Vs)=>Ae.some(Ii(Vo,Go.element,"col",hn[Vs])))(Se,vt);var Vo,hn;return Ff(Eo,_t,Ze,He,Ye.transformCell,Xn,fo)})(S,M(W,be=>be.row),p,b,B,L.replaceOrInit,V);return Ys(de,_[0].row,_[0].column)},Ku=Gu("thead",!0),H0=Gu("tbody",!1),vy=Gu("tfoot",!1),Pg=(p,b,S)=>{const _=(V=S.section,Dl(p,()=>V)),B=sc(_);var V;return bu(B,b,!0)},Xp=(p,b,S,_)=>((B,L,V,W)=>{const Q=sc(L),de=W.getWidths(Q,W);Dm(Q,de,W)})(0,b,0,_.sizing),Zf=(p,b,S,_)=>((B,L,V,W,Q)=>{const de=sc(L),be=W.getWidths(de,W),pe=W.pixelWidth(),{newSizes:fe,delta:Se}=Q.calcRedestributedWidths(be,pe,V.pixelDelta,W.isRelative);Dm(de,fe,W),W.adjustTableWidth(Se)})(0,b,S,_.sizing,_.resize),yy=(p,b)=>Ke(b,S=>0===S.column&&S.isLocked),wu=(p,b)=>Ke(b,S=>S.column+S.colspan>=p.grid.columns&&S.isLocked),Yu=(p,b)=>{const S=au(p),_=Yr(b);return $r(_,(B,L)=>B+S[L.column].map(xt).getOr(0),0)},xu=p=>(b,S)=>na(b,S).filter(_=>!(p?yy:wu)(b,_)).map(_=>({details:_,pixelDelta:Yu(b,_)})),Rn=p=>(b,S)=>El(b,S).filter(_=>!(p?yy:wu)(b,_.cells)),Hi=zf("th"),mc=zf("td"),Jp=Ma((p,b,S,_)=>{const B=b[0].row,L=Zd(b),V=Cr(L,(W,Q)=>({grid:Mm(W.grid,B,Q.row+W.delta,S,_.getOrInit),delta:W.delta+1}),{grid:p,delta:0}).grid;return Ys(V,B,b[0].column)},na,rt,rt,sl),Vr=Ma((p,b,S,_)=>{const B=Zd(b),L=B[B.length-1],V=L.row+L.rowspan,W=Cr(B,(Q,de)=>Mm(Q,V,de.row,S,_.getOrInit),p);return Ys(W,V,b[0].column)},na,rt,rt,sl),P0=Ma((p,b,S,_)=>{const B=b.details,L=Yr(B),V=L[0].column,W=Cr(L,(Q,de)=>({grid:ms(Q.grid,V,de.column+Q.delta,S,_.getOrInit),delta:Q.delta+1}),{grid:p,delta:0}).grid;return Ys(W,B[0].row,V)},xu(!0),Zf,rt,sl),Uf=Ma((p,b,S,_)=>{const B=b.details,L=B[B.length-1],V=L.column+L.colspan,W=Yr(B),Q=Cr(W,(de,be)=>ms(de,V,be.column,S,_.getOrInit),p);return Ys(Q,B[0].row,V)},xu(!1),Zf,rt,sl),Ya=Ma((p,b,S,_)=>{const B=Yr(b.details),L=(W=p,Q=M(B,W=>W.column),yn(W,de=>{const pe=Cr(Q,(fe,Se)=>Se>=0&&Se<fe.length?fe.slice(0,Se).concat(fe.slice(Se+1)):fe,de.cells);return pe.length>0?[Ve(de.element,pe,de.section,de.isNew)]:[]}));var W,Q;return Ys(L,B[0].row,Math.min(B[0].column,L.length>0?L[0].cells.length-1:0))},(p,b)=>Zl(p,b).map(S=>({details:S,pixelDelta:-Yu(p,S)})),Zf,Bm,sl),Ol=Ma((p,b,S,_)=>{const B=Zd(b),L=((W,Q,de)=>{const{rows:be,cols:pe}=qn(W);return[...pe,...be.slice(0,Q),...be.slice(de+1)]})(p,B[0].row,B[B.length-1].row);return Ys(L,Math.min(b[0].row,L.length>0?L.length-1:0),b[0].column)},na,rt,Bm,sl),Ud=Ma((p,b,S,_)=>{const B=Yr(b),L=M(B,W=>W.column),V=ld(p,L,!0,S,_.replaceOrInit);return Ys(V,b[0].row,b[0].column)},Zl,rt,rt,Hi),qe=Ma((p,b,S,_)=>{const B=Yr(b),L=M(B,W=>W.column),V=ld(p,L,!1,S,_.replaceOrInit);return Ys(V,b[0].row,b[0].column)},Zl,rt,rt,mc),Fg=Ma(Ku,Zl,rt,rt,Hi),Qp=Ma(H0,Zl,rt,rt,mc),Lc=Ma(vy,Zl,rt,rt,mc),F0=Ma((p,b,S,_)=>{const B=qp(p,b,S,_.replaceOrInit);return Ys(B,b[0].row,b[0].column)},Zl,rt,rt,Hi),V0=Ma((p,b,S,_)=>{const B=qp(p,b,S,_.replaceOrInit);return Ys(B,b[0].row,b[0].column)},Zl,rt,rt,mc),z0=Ma((p,b,S,_)=>{const B=b.cells;(p=>{const b=cr("br"),_=(()=>{const B=yn(p,L=>{const V=js(L);return St(V,Q=>b(Q)||Zn(Q)&&0===li(Q).trim().length)?[]:V.concat((B=>cu(B).bind(L=>{const V=Nr(L).map(W=>{return!!al(W)||(de=W,!!Er(["br","img","hr","input"],Yp.property().name(de))&&"img"!==nr(W));var de}).getOr(!1);return ea(L).map(W=>{return!0===V||"li"===nr(Q=W)||$s(Q,qu).isSome()||b(L)||al(W)&&!Qn(B,W)?[]:[Ot.fromTag("br")];var Q})}).getOr([]))(L))});return 0===B.length?[Ot.fromTag("br")]:B})();po(p[0]),Dt(p[0],_)})(B);const L=((V,W,Q,de)=>{const be=qn(V).rows;if(0===be.length)return V;for(let pe=W.startRow;pe<=W.finishRow;pe++)for(let fe=W.startCol;fe<=W.finishCol;fe++){const Se=be[pe],Ze=tn(Se,fe).isLocked;Ao(Se,fe,we(de(),!1,Ze))}return V})(p,b.bounds,0,_.merge(B));return yu(L,Ae.from(B[0]))},(p,b)=>{return(_=b,_.mergable).filter(S=>Mc(p,S.cells));var _},Xp,rt,vu),Xu=Ma((p,b,S,_)=>{const B=Cr(b,(L,V)=>zd(L,V,S,_.unmerge(V)),p);return yu(B,Ae.from(b[0]))},(p,b)=>{return(_=b,_.unmergable).filter(S=>Mc(p,S));var _},Xp,rt,vu),Al=Ma((p,b,S,_)=>{const B=((W,Q)=>{const de=Gs(W);return bu(de,Q,!0)})(b.clipboard,b.generators);var L,V;return((W,Q,de,be,pe)=>{const fe=Pl(Q),Se=((et,bt,ut)=>{const _t=gn(bt[0]),vt=qn(bt).cols.length+et.row,It=fn(_t-et.column,Eo=>Eo+et.column);return{row:vt,column:Do(It,Eo=>St(ut,fo=>fo!==Eo)).getOr(_t-1)}})(W,Q,fe),Ze=qn(de).rows,He=B0(Se,Ze,fe);return((et,bt,ut)=>{if(et.row>=bt.length||et.column>gn(bt[0]))return Lg.error("invalid start address out of table bounds, row: "+et.row+", column: "+et.column);const _t=bt.slice(et.row),vt=_t[0].cells.slice(et.column),It=gn(ut[0]);return Lg.value({rowDelta:_t.length-ut.length,colDelta:vt.length-It})})(Se,Q,Ze).map(et=>{const bt={...et,colDelta:et.colDelta-He.length},ut=ad(Q,bt,be),_t=Pl(ut),vt=B0(Se,Ze,_t);return((It,Eo,fo,Xn,Vo,hn)=>{const Go=It.row,or=It.column,Vs=Go+fo.length,Za=or+gn(fo[0])+hn.length,Xs=Qt(hn,ht);for(let Vi=Go;Vi<Vs;Vi++){let Jn=0;for(let ra=or;ra<Za;ra++){if(Xs[ra]){Jn++;continue}Lr(Eo,Vi,ra,Vo)&&zd(Eo,mn(Eo[Vi],ra),Vo,Xn.cell);const Tu=tn(fo[Vi-Go],ra-or-Jn),Jg=Xn.replace(Tu.element);Ao(Eo[Vi],ra,we(Jg,!0,Tu.isLocked))}}return Eo})(Se,ut,Ze,be,pe,vt)})})((L=b.row,V=b.column,{row:L,column:V}),p,B,b.generators,S).fold(()=>yu(p,Ae.some(b.element)),W=>Ys(W,b.row,b.column))},(p,b)=>Ga(b.element).bind(S=>$p(p,S).map(_=>({..._,generators:b.generators,clipboard:b.clipboard}))),Xp,rt,sl),Xa=Ma((p,b,S,_)=>{const B=qn(p).rows,L=b.cells[0].column,W=Pg(b.clipboard,b.generators,B[b.cells[0].row]),Q=id(L,p,W,b.generators,S);return Ys(Q,b.cells[0].row,b.cells[0].column)},Rn(!0),rt,rt,sl),Cu=Ma((p,b,S,_)=>{const B=qn(p).rows,L=b.cells[b.cells.length-1].column+b.cells[b.cells.length-1].colspan,W=Pg(b.clipboard,b.generators,B[b.cells[0].row]),Q=id(L,p,W,b.generators,S);return Ys(Q,b.cells[0].row,b.cells[0].column)},Rn(!1),rt,rt,sl),Z0=Ma((p,b,S,_)=>{const B=qn(p).rows,L=b.cells[0].row,W=Pg(b.clipboard,b.generators,B[L]),Q=Gn(L,p,W,b.generators,S);return Ys(Q,b.cells[0].row,b.cells[0].column)},El,rt,rt,sl),eh=Ma((p,b,S,_)=>{const B=qn(p).rows,L=b.cells[b.cells.length-1].row+b.cells[b.cells.length-1].rowspan,W=Pg(b.clipboard,b.generators,B[b.cells[0].row]),Q=Gn(L,p,W,b.generators,S);return Ys(Q,b.cells[0].row,b.cells[0].column)},El,rt,rt,sl),U0=(p,b)=>{const S=Gs(p);return na(S,b).bind(_=>{const B=_[_.length-1],L=_[0].column,V=B.column+B.colspan,W=$(M(S.all,Q=>Kn(Q.cells,de=>de.column>=L&&de.column<V)));return Dg(W)}).getOr("")},th=(p,b)=>{const S=Gs(p);return na(S,b).bind(Dg).getOr("")},jf=(p,b)=>{const S=Gs(p);return na(S,b).bind(_=>{const B=_[_.length-1];return(W=>{const Q=M(W,pe=>Rc(pe).type),de=Er(Q,"header"),be=Er(Q,"footer");if(de||be){const pe=Er(Q,"body");return!de||pe||be?de||pe||!be?Ae.none():Ae.some("footer"):Ae.some("header")}return Ae.some("body")})(S.all.slice(_[0].row,B.row+B.rowspan))}).getOr("")},Wf=(p,b)=>p.dispatch("NewRow",{node:b}),Va=(p,b)=>p.dispatch("NewCell",{node:b}),Fs=(p,b,S)=>{p.dispatch("TableModified",{...S,table:b})},ui={structure:!1,style:!0},Tr={structure:!0,style:!1},mi={structure:!0,style:!0},ya=(p,b)=>Tc(p)?In(b):Dd(p)?zl(b):Vu(b),xi=(p,b,S)=>{const _=kr(p,b,1);1===S||_<=1?Fo(p,b):Po(p,b,Math.min(S,_))},Ic=(p,b)=>S=>S.column+S.colspan-1>=p&&S.column<b,Vg=Bc([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),j0=(p,b,S)=>{const _=S.substring(0,S.length-p.length),B=parseFloat(_);return _===B.toString()?b(B):Vg.invalid(S)},Ju={...Vg,from:p=>Ta(p,"%")?j0("%",Vg.percent,p):Ta(p,"px")?j0("px",Vg.pixels,p):Vg.invalid(p)},oh=(p,b,S)=>{const _=Ju.from(S),B=St(p,L=>"0px"===L)?((L,V)=>{const W=L.fold(()=>Ut(""),Q=>Ut(Q/V+"px"),()=>Ut(100/V+"%"));return fn(V,W)})(_,p.length):(V=p,W=b,_.fold(()=>V,Q=>((de,be,pe)=>{const fe=pe/be;return M(de,Se=>Ju.from(Se).fold(()=>Se,Ze=>Ze*fe+"px",Ze=>Ze/100*pe+"px"))})(V,W,Q),Q=>{return be=W,M(V,pe=>Ju.from(pe).fold(()=>pe,fe=>fe/be*100+"%",fe=>fe+"%"));var be}));var V,W;return W0(B)},zg=(p,b)=>0===p.length?b:Cr(p,(S,_)=>Ju.from(_).fold(Ut(0),Nt,Nt)+S,0),wy=(p,b)=>Ju.from(p).fold(Ut(p),S=>S+b+"px",S=>S+b+"%"),W0=p=>{if(0===p.length)return p;const b=Cr(p,(_,B)=>{const L=Ju.from(B).fold(()=>({value:B,remainder:0}),V=>(W=>{const de=Math.floor(W);return{value:de+"px",remainder:W-de}})(V),V=>({value:V+"%",remainder:0}));return{output:[L.value].concat(_.output),remainder:_.remainder+L.remainder}},{output:[],remainder:0}),S=b.output;return S.slice(0,S.length-1).concat([wy(S[S.length-1],Math.round(b.remainder))])},$0=Ju.from,xy=p=>$0(p).fold(Ut("px"),Ut("px"),Ut("%")),qf=(p,b,S)=>{const _=Gs(p),B=_.all,L=Cg(_),V=pn(_);b.each(W=>{const Q=xy(W),de=ct(p),be=Xe(_,p,pt,wi),pe=oh(be,de,W);var fe,Ze;ii(_)?(fe=pe,Ze=Q,at(V,(He,Ye)=>{const et=zg([fe[Ye]],pl());qs(He.element,"width",et+Ze)})):((fe,Se,Ze)=>{at(Se,He=>{const Ye=fe.slice(He.column,He.colspan+He.column),et=zg(Ye,pl());qs(He.element,"width",et+Ze)})})(pe,L,Q),qs(p,"width",W)}),S.each(W=>{const Q=xy(W),de=pa(p),be=Ln(_,p,Ct,qi,wi);var pe,fe,Ze;pe=oh(be,de,W),fe=B,Ze=Q,at(L,He=>{const Ye=pe.slice(He.row,He.rowspan+He.row),et=zg(Ye,Sn());qs(He.element,"height",et+Ze)}),at(fe,(He,Ye)=>{qs(He.element,"height",pe[Ye])}),qs(p,"height",W)})},Re=p=>Vl(p).exists(b=>xn.test(b)),Gf=p=>Vl(p).exists(b=>gr.test(b)),Da=p=>Vl(p).isNone(),Kf=p=>{Fo(p,"width")},Zg=p=>{const b=xl(p);qf(p,Ae.some(b),Ae.none()),Kf(p)},Yf=p=>{const b=ct(p)+"px";qf(p,Ae.some(b),Ae.none()),Kf(p)},il=p=>{cs(p,"width");const b=En(p),S=b.length>0?b:us(p);at(S,_=>{cs(_,"width"),Kf(_)}),Kf(p)},oC={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ul=(p,b,S,_)=>fn(p,B=>((L,V,W,Q)=>{const de=Ot.fromTag("tr");for(let be=0;be<L;be++){const pe=Ot.fromTag(Q<V||be<W?"th":"td");be<W&&Po(pe,"scope","row"),Q<V&&Po(pe,"scope","col"),$e(pe,Ot.fromTag("br")),$e(de,pe)}return de})(b,S,_,B)),q0=(p,b)=>{p.selection.select(b.dom,!0),p.selection.collapse(!0)};var Yi=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hc="x-tinymce/dom-table-",nh=Hc+"rows",jl=Hc+"columns",G0=p=>{const b=Yi.FakeClipboardItem(p);Yi.write([b])},rh=p=>{var b;const S=null!==(b=Yi.read())&&void 0!==b?b:[];return no(S,_=>Ae.from(_.getType(p)))},Xf=p=>{rh(p).isSome()&&Yi.clear()},Jf=p=>{p.fold(Cy,b=>G0({[nh]:b}))},Qf=()=>rh(nh),Cy=()=>Xf(nh),K0=p=>{p.fold(nC,b=>G0({[jl]:b}))},Sy=()=>rh(jl),nC=()=>Xf(jl),sh=p=>Nf(_g(p),od(p)).filter(Ld),Ug=Bc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ci={before:Ug.before,on:Ug.on,after:Ug.after,cata:(p,b,S,_)=>p.fold(b,S,_),getStart:p=>p.fold(Nt,Nt,Nt)},Su=(p,b)=>({selection:p,kill:b}),jg=(p,b)=>{const S=p.document.createRange();return S.selectNode(b.dom),S},Ur=(p,b)=>{const S=p.document.createRange();return _y(S,b),S},_y=(p,b)=>p.selectNodeContents(b.dom),Pi=(p,b,S)=>{const _=p.document.createRange();var B,L;return B=_,b.fold(L=>{B.setStartBefore(L.dom)},(L,V)=>{B.setStart(L.dom,V)},L=>{B.setStartAfter(L.dom)}),L=_,S.fold(W=>{L.setEndBefore(W.dom)},(W,Q)=>{L.setEnd(W.dom,Q)},W=>{L.setEndAfter(W.dom)}),_},ah=(p,b,S,_,B)=>{const L=p.document.createRange();return L.setStart(b.dom,S),L.setEnd(_.dom,B),L},Y0=p=>({left:p.left,top:p.top,right:p.right,bottom:p.bottom,width:p.width,height:p.height}),Wg=Bc([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ih=(p,b,S)=>b(Ot.fromDom(S.startContainer),S.startOffset,Ot.fromDom(S.endContainer),S.endOffset),X0=(p,b)=>{var _;return((_,B)=>{const L=B.ltr();return L.collapsed?B.rtl().filter(V=>!1===V.collapsed).map(V=>Wg.rtl(Ot.fromDom(V.endContainer),V.endOffset,Ot.fromDom(V.startContainer),V.startOffset)).getOrThunk(()=>ih(0,Wg.ltr,L)):ih(0,Wg.ltr,L)})(0,(_=p,b.match({domRange:L=>({ltr:Ut(L),rtl:Ae.none}),relative:(L,V)=>({ltr:ss(()=>Pi(_,L,V)),rtl:ss(()=>Ae.some(Pi(_,V,L)))}),exact:(L,V,W,Q)=>({ltr:ss(()=>ah(_,L,V,W,Q)),rtl:ss(()=>Ae.some(ah(_,W,Q,L,V)))})})))},e1=(p,b)=>X0(p,b).match({ltr:(S,_,B,L)=>{const V=p.document.createRange();return V.setStart(S.dom,_),V.setEnd(B.dom,L),V},rtl:(S,_,B,L)=>{const V=p.document.createRange();return V.setStart(B.dom,L),V.setEnd(S.dom,_),V}}),$g=(p,b,S,_)=>({start:p,soffset:b,finish:S,foffset:_}),Qu=(p,b,S,_)=>({start:Ci.on(p,b),finish:Ci.on(S,_)}),J0=(p,b)=>{const S=e1(p,b);return $g(Ot.fromDom(S.startContainer),S.startOffset,Ot.fromDom(S.endContainer),S.endOffset)},ku=Qu,Ey=(p,b,S,_,B)=>Qn(S,_)?Ae.none():Em(S,_,b).bind(L=>{const V=L.boxes.getOr([]);return V.length>1?(B(p,V,L.start,L.finish),Ae.some(Su(Ae.some(ku(S,0,S,Jc(S))),!0))):Ae.none()}),gc=(p,b)=>({item:p,mode:b}),lh=(p,b,S,_=pc)=>p.property().parent(b).map(B=>gc(B,_)),pc=(p,b,S,_=Lm)=>S.sibling(p,b).map(B=>gc(B,_)),Lm=(p,b,S,_=Lm)=>{const B=p.property().children(b);return S.first(B).map(L=>gc(L,_))},rC=[{current:lh,next:pc,fallback:Ae.none()},{current:pc,next:Lm,fallback:Ae.some(lh)},{current:Lm,next:Lm,fallback:Ae.some(pc)}],jd=(p,b,S,_,B=rC)=>Do(B,L=>L.current===S).bind(L=>L.current(p,b,_,L.next).orThunk(()=>L.fallback.bind(V=>jd(p,b,V,_)))),ch=(p,b,S,_,B,L)=>jd(p,b,_,B).bind(V=>L(V.item)?Ae.none():S(V.item)?Ae.some(V.item):ch(p,V.item,S,V.mode,B,L)),Ty=p=>b=>0===p.property().children(b).length,cd=(p,b,S,_)=>ch(p,b,S,pc,{sibling:(B,L)=>B.query().prevSibling(L),first:B=>B.length>0?Ae.some(B[B.length-1]):Ae.none()},_),dh=(p,b,S,_)=>ch(p,b,S,pc,{sibling:(B,L)=>B.query().nextSibling(L),first:B=>B.length>0?Ae.some(B[0]):Ae.none()},_),t1=Hd(),Oy=(p,b)=>{return B=b,cd(S=t1,p,Ty(S),B);var S,B},Q0=(p,b)=>{return B=b,dh(S=t1,p,Ty(S),B);var S,B},o1=Bc([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),sC=p=>ur(p,"tr"),em={...o1,verify:(p,b,S,_,B,L,V)=>ur(_,"td,th",V).bind(W=>ur(b,"td,th",V).map(Q=>Qn(W,Q)?Qn(_,W)&&Jc(W)===B?L(Q):o1.none("in same cell"):Tg(sC,[W,Q]).fold(()=>((de,be,pe)=>{const fe=de.getRect(be),Se=de.getRect(pe);return Se.right>fe.left&&Se.left<fe.right})(p,Q,W)?o1.success():L(Q),de=>L(Q)))).getOr(o1.none("default")),cata:(p,b,S,_,B)=>p.fold(b,S,_,B)},n1=cr("br"),r1=(p,b,S)=>b(p,S).bind(_=>Zn(_)&&0===li(_).trim().length?r1(_,b,S):Ae.some(_)),uh=(p,b)=>({left:p.left,top:p.top+b,right:p.right,bottom:p.bottom+b}),qg=(p,b)=>({left:p.left,top:p.top-b,right:p.right,bottom:p.bottom-b}),eb=(p,b,S)=>({left:p.left+b,top:p.top+S,right:p.right+b,bottom:p.bottom+S}),a1=p=>({left:p.left,top:p.top,right:p.right,bottom:p.bottom}),mh=(p,b)=>Ae.some(p.getRect(b)),i1=(p,b,S)=>{return Nn(b)?mh(p,b).map(a1):Zn(b)?(_=p,B=b,L=S,L>=0&&L<Jc(B)?_.getRangedRect(B,L,B,L+1):L>0?_.getRangedRect(B,L-1,B,L):Ae.none()).map(a1):Ae.none();var _,B,L},Ay=(p,b)=>Nn(b)?mh(p,b).map(a1):Zn(b)?p.getRangedRect(b,0,b,Jc(b)).map(a1):Ae.none(),dd=Bc([{none:[]},{retry:["caret"]}]),Gg=(p,b,S)=>vi(b,al).fold(ie,_=>Ay(p,_).exists(B=>{return(L=S).left<(V=B).left||Math.abs(V.right-L.left)<1||L.left>V.right;var L,V})),Ny={point:p=>p.bottom,adjuster:(p,b,S,_,B)=>{const L=uh(B,5);return Math.abs(S.bottom-_.bottom)<1||S.top>B.bottom?dd.retry(L):S.top===B.bottom?dd.retry(uh(B,1)):Gg(p,b,B)?dd.retry(eb(L,5,0)):dd.none()},move:uh,gather:Q0},l1=(p,b,S,_,B)=>{return 0===B?Ae.some(_):(L=p,V=_.left,W=b.point(_),L.elementFromPoint(V,W).filter(Q=>"table"===nr(Q)).isSome()?((L,V,W,Q,de)=>l1(L,V,W,V.move(Q,5),de))(p,b,S,_,B-1):p.situsFromPoint(_.left,b.point(_)).bind(L=>L.start.fold(Ae.none,V=>Ay(p,V).bind(W=>b.adjuster(p,V,W,S,_).fold(Ae.none,Q=>l1(p,b,S,Q,B-1))).orThunk(()=>Ae.some(_)),Ae.none)));var L,V,W},tb=(p,b,S)=>{const _=p.move(S,5),B=l1(b,p,S,_,100).getOr(_);return(L=p,V=B,W=b,L.point(V)>W.getInnerHeight()?Ae.some(L.point(V)-W.getInnerHeight()):L.point(V)<0?Ae.some(-L.point(V)):Ae.none()).fold(()=>b.situsFromPoint(B.left,p.point(B)),L=>(b.scrollBy(0,L),b.situsFromPoint(B.left,p.point(B)-L)));var L,V,W},Im={tryUp:yt(tb,{point:p=>p.top,adjuster:(p,b,S,_,B)=>{const L=qg(B,5);return Math.abs(S.top-_.top)<1||S.bottom<B.top?dd.retry(L):S.bottom===B.top?dd.retry(qg(B,1)):Gg(p,b,B)?dd.retry(eb(L,5,0)):dd.none()},move:qg,gather:Oy}),tryDown:yt(tb,Ny),getJumpSize:Ut(5)},c1=(p,b,S,_,B,L)=>0===L?Ae.none():Ry(p,b,S,_,B).bind(V=>{const W=p.fromSitus(V),Q=em.verify(p,S,_,W.finish,W.foffset,B.failure,b);return em.cata(Q,()=>Ae.none(),()=>Ae.some(V),de=>Qn(S,de)&&0===_?ob(p,S,_,qg,B):c1(p,b,de,0,B,L-1),de=>Qn(S,de)&&_===Jc(de)?ob(p,S,_,uh,B):c1(p,b,de,Jc(de),B,L-1))}),ob=(p,b,S,_,B)=>i1(p,b,S).bind(L=>Fi(p,B,_(L,Im.getJumpSize()))),Fi=(p,b,S)=>{const _=Ce().browser;return _.isChromium()||_.isSafari()||_.isFirefox()?b.retry(p,S):Ae.none()},Ry=(p,b,S,_,B)=>i1(p,S,_).bind(L=>Fi(p,B,L)),My=(p,b,S,_,B)=>ur(_,"td,th",b).bind(L=>ur(L,"table",b).bind(V=>{return Q=V,$s(B,de=>ea(de).exists(be=>Qn(be,Q)),void 0).isSome()?((W,Q,de)=>((p,b,S)=>p.getSelection().bind(_=>{return(B=b,L=_.finish,V=_.foffset,W=S,(n1(L)?(de=B,be=L,pe=W,pe.traverse(be).orThunk(()=>r1(be,pe.gather,de)).map(pe.relative)):((p,b,S,_)=>{return(B=b,L=S,Ws(B,L).filter(n1).orThunk(()=>Ws(B,L-1).filter(n1))).bind(B=>_.traverse(B).fold(()=>r1(B,_.gather,p).map(_.relative),L=>{return(V=L,ea(V).bind(W=>{const Q=js(W);return(de=Q,be=V,zn(de,yt(Qn,be))).map(de=>((be,pe,fe,Se)=>({parent:be,children:pe,element:fe,index:Se}))(W,Q,V,de));var de,be})).map(V=>Ci.on(V.parent,V.index));var V}));var B,L})(B,L,V,W)).map(de=>({start:de,finish:de}))).fold(()=>Ae.some(Ng(_.finish,_.foffset)),B=>{const L=p.fromSitus(B);return V=em.verify(p,_.finish,_.foffset,L.finish,L.foffset,S.failure,b),em.cata(V,W=>Ae.none(),()=>Ae.none(),W=>Ae.some(Ng(W,0)),W=>Ae.some(Ng(W,Jc(W))));var V});var B,L,V,W,de,be,pe}))(W,Q,de).bind(be=>c1(W,Q,be.element,be.offset,de,20).map(W.fromSitus)))(p,b,S).bind(W=>ur(W.finish,"td,th",b).map(Q=>({start:L,finish:Q,range:W}))):Ae.none();var Q})),nb=(p,b,S,_,B,L)=>L(_,b).orThunk(()=>My(p,b,S,_,B).map(V=>{const W=V.range;return Su(Ae.some(ku(W.start,W.soffset,W.finish,W.foffset)),!0)})),aC=(p,b)=>ur(p,"tr",b).bind(S=>ur(S,"table",b).bind(_=>{const B=dr(_,"tr");return Qn(S,B[0])?(L=_,W=b,cd(t1,L,Q=>cu(Q).isSome(),W)).map(L=>{const V=Jc(L);return Su(Ae.some(ku(L,V,L,V)),!0)}):Ae.none();var L,W})),d1=(p,b)=>ur(p,"tr",b).bind(S=>ur(S,"table",b).bind(_=>{const B=dr(_,"tr");return Qn(S,B[B.length-1])?(L=_,W=b,dh(t1,L,Q=>Cl(Q).isSome(),W)).map(L=>Su(Ae.some(ku(L,0,L,0)),!0)):Ae.none();var L,W})),rb=(p,b,S,_,B,L,V)=>My(p,S,_,B,L).bind(W=>Ey(b,S,W.start,W.finish,V)),ph=p=>{let b=p;return{get:()=>b,set:S=>{b=S}}},hh=()=>{const p=(b=>{const S=ph(Ae.none()),_=()=>S.get().each(b);return{clear:()=>{_(),S.set(Ae.none())},isSet:()=>S.get().isSome(),get:()=>S.get(),set:B=>{_(),S.set(Ae.some(B))}}})(rt);return{...p,on:b=>p.get().each(b)}},Dy=(p,b)=>ur(p,"td,th",b),fh=p=>Ea(p).exists(_l),sb={traverse:Nr,gather:Q0,relative:Ci.before,retry:Im.tryDown,failure:em.failedDown},ab={traverse:xs,gather:Oy,relative:Ci.before,retry:Im.tryUp,failure:em.failedUp},Hm=p=>b=>b===p,u1=Hm(38),Pm=Hm(40),Fm=p=>p>=37&&p<=40,ib={isBackward:Hm(37),isForward:Hm(39)},By={isBackward:Hm(39),isForward:Hm(37)},bh=Bc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Vm={domRange:bh.domRange,relative:bh.relative,exact:bh.exact,exactFromRange:p=>bh.exact(p.start,p.soffset,p.finish,p.foffset),getWin:p=>{const b=p.match({domRange:_=>Ot.fromDom(_.startContainer),relative:(_,B)=>Ci.getStart(_),exact:(_,B,L,V)=>_});return Ot.fromDom(As(b).dom.defaultView)},range:$g},iC=document.caretPositionFromPoint?(p,b,S)=>{var _,B;return Ae.from(null===(B=(_=p.dom).caretPositionFromPoint)||void 0===B?void 0:B.call(_,b,S)).bind(L=>{if(null===L.offsetNode)return Ae.none();const V=p.dom.createRange();return V.setStart(L.offsetNode,L.offset),V.collapse(),Ae.some(V)})}:document.caretRangeFromPoint?(p,b,S)=>{var _,B;return Ae.from(null===(B=(_=p.dom).caretRangeFromPoint)||void 0===B?void 0:B.call(_,b,S))}:Ae.none,Kg=(p,b)=>{const S=nr(p);return"input"===S?Ci.after(p):Er(["br","img"],S)?0===b?Ci.before(p):Ci.after(p):Ci.on(p,b)},m1=p=>Ae.from(p.getSelection()),lb=(p,b)=>{m1(p).each(S=>{S.removeAllRanges(),S.addRange(b)})},g1=(p,b,S,_,B)=>{const L=ah(p,b,S,_,B);lb(p,L)},p1=(p,b)=>X0(p,b).match({ltr:(S,_,B,L)=>{g1(p,S,_,B,L)},rtl:(S,_,B,L)=>{m1(p).each(V=>{if(V.setBaseAndExtent)V.setBaseAndExtent(S.dom,_,B.dom,L);else if(V.extend)try{pe=B,fe=L,(Q=V).collapse(S.dom,_),Q.extend(pe.dom,fe)}catch{g1(p,B,L,S,_)}else g1(p,B,L,S,_);var Q,pe,fe})}}),cb=(p,b,S,_,B)=>{const L=((V,W,Q,de)=>{const be=Kg(V,W),pe=Kg(Q,de);return Vm.relative(be,pe)})(b,S,_,B);p1(p,L)},gi=(p,b,S)=>{const _=((B,L)=>{const V=B.fold(Ci.before,Kg,Ci.after),W=L.fold(Ci.before,Kg,Ci.after);return Vm.relative(V,W)})(b,S);p1(p,_)},h1=p=>{if(p.rangeCount>0){const b=p.getRangeAt(0),S=p.getRangeAt(p.rangeCount-1);return Ae.some($g(Ot.fromDom(b.startContainer),b.startOffset,Ot.fromDom(S.endContainer),S.endOffset))}return Ae.none()},ud=p=>{if(null===p.anchorNode||null===p.focusNode)return h1(p);{const b=Ot.fromDom(p.anchorNode),S=Ot.fromDom(p.focusNode);return((_,B,L,V)=>{const W=((de,be,pe,fe)=>{const Se=Pa(de).dom.createRange();return Se.setStart(de.dom,be),Se.setEnd(pe.dom,fe),Se})(_,B,L,V),Q=Qn(_,L)&&B===V;return W.collapsed&&!Q})(b,p.anchorOffset,S,p.focusOffset)?Ae.some($g(b,p.anchorOffset,S,p.focusOffset)):h1(p)}},Yg=(p,b,S=!0)=>{const _=(S?Ur:jg)(p,b);lb(p,_)},db=p=>{return(b=p,m1(b).filter(S=>S.rangeCount>0).bind(ud)).map(b=>Vm.exact(b.start,b.soffset,b.finish,b.foffset));var b},vh=p=>({elementFromPoint:(b,S)=>Ot.fromPoint(Ot.fromDom(p.document),b,S),getRect:b=>b.dom.getBoundingClientRect(),getRangedRect:(b,S,_,B)=>{const L=Vm.exact(b,S,_,B);return(Q=>{const de=Q.getClientRects(),be=de.length>0?de[0]:Q.getBoundingClientRect();return be.width>0||be.height>0?Ae.some(be).map(Y0):Ae.none()})(e1(p,L))},getSelection:()=>db(p).map(b=>J0(p,b)),fromSitus:b=>{const S=Vm.relative(b.start,b.finish);return J0(p,S)},situsFromPoint:(b,S)=>{return(_=p,B=b,L=S,((V,W,Q)=>{const de=Ot.fromDom(V.document);return iC(de,W,Q).map(be=>$g(Ot.fromDom(be.startContainer),be.startOffset,Ot.fromDom(be.endContainer),be.endOffset))})(_,B,L)).map(_=>Qu(_.start,_.soffset,_.finish,_.foffset));var _,B,L},clearSelection:()=>{m1(p).each(S=>S.removeAllRanges())},collapseSelection:(b=!1)=>{db(p).each(S=>S.fold(_=>_.collapse(b),(_,B)=>{const L=b?_:B;gi(p,L,L)},(_,B,L,V)=>{const W=b?_:L,Q=b?B:V;cb(p,W,Q,W,Q)}))},setSelection:b=>{cb(p,b.start,b.soffset,b.finish,b.foffset)},setRelativeSelection:(b,S)=>{gi(p,b,S)},selectNode:b=>{Yg(p,b,!1)},selectContents:b=>{Yg(p,b)},getInnerHeight:()=>p.innerHeight,getScrollY:()=>(b=>{const S=void 0!==b?b.dom:document;return F(S.body.scrollLeft||S.documentElement.scrollLeft,S.body.scrollTop||S.documentElement.scrollTop)})(Ot.fromDom(p.document)).top,scrollBy:(b,S)=>{((_,B,L)=>{const V=(void 0!==L?L.dom:document).defaultView;V&&V.scrollBy(_,B)})(b,S,Ot.fromDom(p.document))}}),tm=(p,b)=>({rows:p,cols:b}),om=p=>vi(p,ml).exists(_l),yh=(p,b)=>om(p)||om(b),zm=p=>void 0!==p.dom.classList,Zm=(p,b)=>{zm(p)?p.dom.classList.add(b):((p,b)=>{((S,_,B)=>{const L=((V,W)=>{const Q=_a(V,W);return void 0===Q||""===Q?[]:Q.split(" ")})(S,_).concat([B]);Po(S,_,L.join(" "))})(p,"class",b)})(p,b)},Um=(p,b)=>zm(p)&&p.dom.classList.contains(b),f1=()=>({tag:"none"}),ub=p=>({tag:"multiple",elements:p}),Ly=p=>({tag:"single",element:p}),b1=p=>{const b=Ot.fromDom((W=>{if(lt()&&ua(W.target)){const Q=Ot.fromDom(W.target);if(Nn(Q)&&ua(Q.dom.shadowRoot)&&W.composed&&W.composedPath){const de=W.composedPath();if(de)return zt(de)}}return Ae.from(W.target)})(p).getOr(p.target)),S=()=>p.stopPropagation(),_=()=>p.preventDefault(),B=(L=_,V=S,(...W)=>L(V.apply(null,W)));var L,V;return((W,Q,de,be,pe,fe,Se)=>({target:W,x:Q,y:de,stop:be,prevent:pe,kill:fe,raw:Se}))(b,p.clientX,p.clientY,S,_,B,p)},Iy=(p,b,S,_)=>{p.dom.removeEventListener(b,S,_)},Hy=ht,jm=(p,b,S)=>((W,Q,de,be)=>{const fe=((Se,Ze)=>He=>{Se(He)&&Ze(b1(He))})(de,be);return W.dom.addEventListener(Q,fe,!1),{unbind:yt(Iy,W,Q,fe,!1)}})(p,b,Hy,S),md=b1,Wd=p=>!Um(Ot.fromDom(p.target),"ephox-snooker-resizer-bar"),ll=p=>{let b=[];return{bind:S=>{if(void 0===S)throw new Error("Event bind error: undefined handler");b.push(S)},unbind:S=>{b=Kn(b,_=>_!==S)},trigger:(...S)=>{const _={};at(p,(B,L)=>{_[B]=S[L]}),at(b,B=>{B(_)})}}},Wl=p=>({registry:Vt(p,b=>({bind:b.bind,unbind:b.unbind})),trigger:Vt(p,b=>b.trigger)}),$l=p=>p.slice(0).sort(),Pn=(p,b)=>{const S=Kn(b,_=>!Er(p,_));S.length>0&&(_=>{throw new Error("Unsupported keys for object: "+$l(_).join(", "))})(S)},gd=p=>((_,B,L)=>{if(0===B.length)throw new Error("You must specify at least one required field.");return((V,W)=>{if(!Ia(W))throw new Error("The "+V+" fields must be an array. Was: "+W+".");at(W,Q=>{if(!da(Q))throw new Error("The value "+Q+" in the "+V+" fields was not a string.")})})("required",B),(V=>{const W=$l(V);Do(W,(Q,de)=>de<W.length-1&&Q===W[de+1]).each(Q=>{throw new Error("The field: "+Q+" occurs more than once in the combined fields: ["+W.join(", ")+"].")})})(B),V=>{const W=Ue(V);St(B,de=>Er(W,de))||((de,be)=>{throw new Error("All required keys ("+$l(de).join(", ")+") were not specified. Specified keys were: "+$l(be).join(", ")+".")})(B,W),_(B,W);const Q=Kn(B,de=>!L.validate(V[de],de));return Q.length>0&&((de,be)=>{throw new Error("All values need to be of type: "+be+". Keys ("+$l(de).join(", ")+") were not.")})(Q,L.label),V}})(Pn,p,{validate:kn,label:"function"}),Xg=gd(["compare","extract","mutate","sink"]),y1=gd(["element","start","stop","destroy"]),wh=gd(["forceDrop","drop","move","delayDrop"]),w1=p=>{const b=p.replace(/\./g,"-");return{resolve:S=>b+"-"+S}},xh=w1("ephox-dragster").resolve;var $m=Xg({compare:(p,b)=>F(b.left-p.left,b.top-p.top),extract:p=>Ae.some(F(p.x,p.y)),sink:(p,b)=>{const S=(W=>{const Q={layerClass:xh("blocker"),...W},de=Ot.fromTag("div");return Po(de,"role","presentation"),kc(de,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Zm(de,xh("blocker")),Zm(de,Q.layerClass),{element:Ut(de),destroy:()=>{bo(de)}}})(b),_=jm(S.element(),"mousedown",p.forceDrop),B=jm(S.element(),"mouseup",p.drop),L=jm(S.element(),"mousemove",p.move),V=jm(S.element(),"mouseout",p.delayDrop);return y1({element:S.element,start:W=>{$e(W,S.element())},stop:()=>{bo(S.element())},destroy:()=>{S.destroy(),B.unbind(),L.unbind(),V.unbind(),_.unbind()}})},mutate:(p,b)=>{p.mutate(b.left,b.top)}});const nm=w1("ephox-snooker").resolve,Ch=nm("resizer-bar"),Sh=nm("resizer-rows"),Ba=nm("resizer-cols"),x1=p=>{const b=dr(p.parent(),"."+Ch);at(b,bo)},pd=(p,b,S)=>{const _=p.origin();at(b,B=>{B.each(L=>{const V=S(_,L);Zm(V,Ch),$e(p.parent(),V)})})},kh=(p,b)=>{if(x1(p),p.isResizable(b)){const S=Gs(b);((p,b,S,_,B)=>{const L=K(S),V=b.isResizable,W=_.length>0?Ct.positions(_,S):[],Q=W.length>0?(fe=V,yn(p.all,(Se,Ze)=>fe(Se.element)?[Ze]:[])):[];var fe;((pe,fe,Se,Ze)=>{pd(pe,fe,(He,Ye)=>{const et=((bt,ut,_t,vt)=>{const Eo=Ot.fromTag("div");return kc(Eo,{position:"absolute",left:ut+"px",top:_t-3.5+"px",height:"7px",width:vt+"px"}),ga(Eo,{"data-row":bt,role:"presentation"}),Eo})(Ye.row,Se.left-He.left,Ye.y-He.top,Ze);return Zm(et,Sh),et})})(b,Kn(W,(pe,fe)=>Ke(Q,Se=>fe===Se)),L,xt(S));const de=B.length>0?so.positions(B,S):[],be=de.length>0?((pe,fe)=>{const Se=[];return fn(pe.grid.columns,Ze=>{wm(pe,Ze).map(He=>He.element).forall(fe)&&Se.push(Ze)}),Kn(Se,Ze=>{const He=Yc(pe,Ye=>Ye.column===Ze);return St(He,Ye=>fe(Ye.element))})})(p,V):[];((pe,fe,Se,Ze)=>{pd(pe,fe,(He,Ye)=>{const et=((bt,ut,_t,vt,It)=>{const Eo=Ot.fromTag("div");return kc(Eo,{position:"absolute",left:ut-3.5+"px",top:_t+"px",height:It+"px",width:"7px"}),ga(Eo,{"data-column":bt,role:"presentation"}),Eo})(Ye.col,Ye.x-He.left,Se.top-He.top,0,Ze);return Zm(et,Ba),et})})(b,Kn(de,(pe,fe)=>Ke(be,Se=>fe===Se)),L,Fl(S))})(S,p,b,Xc(S),au(S))}},qm=(p,b)=>{const S=dr(p.parent(),"."+Ch);at(S,b)},Py=p=>{qm(p,b=>{qs(b,"display","none")})},C1=p=>{qm(p,b=>{qs(b,"display","block")})},Ft=nm("resizer-bar-dragging"),_h=(p,b,S)=>{const _=Ct,B=so,L=(p=>{const b=(()=>{const pe=Wl({drag:ll(["xDelta","yDelta","target"])});let fe=Ae.none();const Se=(()=>{const Ze=Wl({drag:ll(["xDelta","yDelta"])});return{mutate:(He,Ye)=>{Ze.trigger.drag(He,Ye)},events:Ze.registry}})();return Se.events.drag.bind(Ze=>{fe.each(He=>{pe.trigger.drag(Ze.xDelta,Ze.yDelta,He)})}),{assign:Ze=>{fe=Ae.some(Ze)},get:()=>fe,mutate:Se.mutate,events:pe.registry}})(),S=((pe,fe={})=>{var Se;return((Ze,He,Ye)=>{let et=!1;const bt=Wl({start:ll([]),stop:ll([])}),ut=(()=>{const p=(()=>{const _=Wl({move:ll(["info"])});return{onEvent:rt,reset:rt,events:_.registry}})(),b=(()=>{let _=Ae.none();const B=Wl({move:ll(["info"])});return{onEvent:(L,V)=>{V.extract(L).each(W=>{((de,be)=>{const pe=_.map(fe=>de.compare(fe,be));return _=Ae.some(be),pe})(V,W).each(de=>{B.trigger.move(de)})})},reset:()=>{_=Ae.none()},events:B.registry}})();let S=p;return{on:()=>{S.reset(),S=b},off:()=>{S.reset(),S=p},isOn:()=>S===b,onEvent:(_,B)=>{S.onEvent(_,B)},events:b.events}})(),_t=()=>{Eo.stop(),ut.isOn()&&(ut.off(),bt.trigger.stop())},vt=(fo=>{let Vo=null;const hn=()=>{Us(Vo)||(clearTimeout(Vo),Vo=null)};return{cancel:hn,throttle:(...Go)=>{hn(),Vo=setTimeout(()=>{Vo=null,fo.apply(null,Go)},200)}}})(_t);ut.events.move.bind(fo=>{He.mutate(Ze,fo.info)});const It=fo=>(...Xn)=>{et&&fo.apply(null,Xn)},Eo=He.sink(wh({forceDrop:_t,drop:It(_t),move:It(fo=>{vt.cancel(),ut.onEvent(fo,He)}),delayDrop:It(vt.throttle)}),Ye);return{element:Eo.element,go:fo=>{Eo.start(fo),ut.on(),bt.trigger.start()},on:()=>{et=!0},off:()=>{et=!1},isActive:()=>et,destroy:()=>{Eo.destroy()},events:bt.registry}})(pe,null!==(Se=fe.mode)&&void 0!==Se?Se:$m,fe)})(b,{});let _=Ae.none();const B=(pe,fe)=>Ae.from(_a(pe,fe));b.events.drag.bind(pe=>{B(pe.target,"data-row").each(fe=>{const Se=Yn(pe.target,"top");qs(pe.target,"top",Se+pe.yDelta+"px")}),B(pe.target,"data-column").each(fe=>{const Se=Yn(pe.target,"left");qs(pe.target,"left",Se+pe.xDelta+"px")})});const L=(pe,fe)=>Yn(pe,fe)-kr(pe,"data-initial-"+fe,0);S.events.stop.bind(()=>{b.get().each(pe=>{_.each(fe=>{B(pe,"data-row").each(Se=>{const Ze=L(pe,"top");Fo(pe,"data-initial-top"),be.trigger.adjustHeight(fe,Ze,parseInt(Se,10))}),B(pe,"data-column").each(Se=>{const Ze=L(pe,"left");Fo(pe,"data-initial-left"),be.trigger.adjustWidth(fe,Ze,parseInt(Se,10))}),kh(p,fe)})})});const V=(pe,fe)=>{be.trigger.startAdjust(),b.assign(pe),Po(pe,"data-initial-"+fe,Yn(pe,fe)),Zm(pe,Ft),qs(pe,"opacity","0.2"),S.go(p.parent())},W=jm(p.parent(),"mousedown",pe=>{Um(pe.target,Sh)&&V(pe.target,"top"),Um(pe.target,Ba)&&V(pe.target,"left")}),Q=pe=>Qn(pe,p.view()),de=jm(p.view(),"mouseover",pe=>{var fe;(fe=pe.target,ur(fe,"table",Q).filter(_l)).fold(()=>{eo(pe.target)&&x1(p)},Se=>{S.isActive()&&(_=Ae.some(Se),kh(p,Se))})}),be=Wl({adjustHeight:ll(["table","delta","row"]),adjustWidth:ll(["table","delta","column"]),startAdjust:ll([])});return{destroy:()=>{W.unbind(),de.unbind(),S.destroy(),x1(p)},refresh:pe=>{kh(p,pe)},on:S.on,off:S.off,hideBars:yt(Py,p),showBars:yt(C1,p),events:be.registry}})(p),V=Wl({beforeResize:ll(["table","type"]),afterResize:ll(["table","type"]),startDrag:ll([])});return L.events.adjustHeight.bind(W=>{const Q=W.table;V.trigger.beforeResize(Q,"row"),((de,be,pe,fe)=>{const Se=Gs(de),Ze=Ln(Se,de,fe,lc,It=>It.getOrThunk(Sn)),He=M(Ze,(ut,_t)=>pe===_t?Math.max(be+ut,Sn()):ut),Ye=((p,b)=>{const S=Cg(p);return M(S,_=>{const B=$u(_.row,_.row+_.rowspan,b);return{element:_.element,height:B,rowspan:_.rowspan}})})(Se,He),et=(_t=He,M(Se.all,(vt,It)=>({element:vt.element,height:_t[It]})));var _t;at(et,ut=>{fa(ut.element,ut.height)}),at(Ye,ut=>{fa(ut.element,ut.height)});const bt=Cr(He,(ut,_t)=>ut+_t,0);fa(de,bt)})(Q,_.delta(W.delta,Q),W.row,_),V.trigger.afterResize(Q,"row")}),L.events.startAdjust.bind(W=>{V.trigger.startDrag()}),L.events.adjustWidth.bind(W=>{const Q=W.table;V.trigger.beforeResize(Q,"col");const de=B.delta(W.delta,Q),be=S(Q);Hg(Q,de,W.column,b,be),V.trigger.afterResize(Q,"col")}),{on:L.on,off:L.off,refreshBars:L.refresh,hideBars:L.hideBars,showBars:L.showBars,destroy:L.destroy,events:V.registry}},gs=p=>ua(p)&&"TABLE"===p.nodeName,_u="bar-",Gm=p=>"false"!==_a(p,"data-mce-resize"),cl=p=>{(B=>{const L=B.options.register;L("table_clone_elements",{processor:"string[]"}),L("table_use_colgroups",{processor:"boolean",default:!0}),L("table_header_type",{processor:V=>{const W=Er(["section","cells","sectionCells","auto"],V);return W?{value:V,valid:W}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),L("table_sizing_mode",{processor:"string",default:"auto"}),L("table_default_attributes",{processor:"object",default:{border:"1"}}),L("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),L("table_column_resizing",{processor:V=>{const W=Er(["preservetable","resizetable"],V);return W?{value:V,valid:W}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),L("table_resize_bars",{processor:"boolean",default:!0}),L("table_style_by_css",{processor:"boolean",default:!0}),L("table_merge_content_on_paste",{processor:"boolean",default:!0})})(p);const b=(p=>{const b=hh(),S=hh(),_=hh();let B,L;const V=Q=>ya(p,Q),W=()=>Kr(p)?Gi():Df();return p.on("init",()=>{const Q=(be=Gm,(de=p).inline?(pe=Ot.fromDom(de.getBody()),fe=(()=>{const pe=Ot.fromTag("div");return kc(pe,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),$e(sn(Ot.fromDom(document)),pe),pe})(),Se=be,{parent:Ut(fe),view:Ut(pe),origin:Ut(F(0,0)),isResizable:Se}):((pe,fe)=>{const Se=fr(pe)?Ot.fromDom(As(pe).dom.documentElement):pe;return{parent:Ut(Se),view:Ut(pe),origin:Ut(F(0,0)),isResizable:fe}})(Ot.fromDom(de.getDoc()),be));var de,be,pe,fe,Se;if(_.set(Q),(de=>{const be=de.options.get("object_resizing");return Er(be.split(","),"table")})(p)&&kg(p)){const de=W(),be=_h(Q,de,V);be.on(),be.events.startDrag.bind(pe=>{b.set(p.selection.getRng())}),be.events.beforeResize.bind(pe=>{const fe=pe.table.dom;((Se,Ze,He,Ye,et)=>{Se.dispatch("ObjectResizeStart",{target:Ze,width:He,height:Ye,origin:et})})(p,fe,Sm(fe),uy(fe),_u+pe.type)}),be.events.afterResize.bind(pe=>{const fe=pe.table,Se=fe.dom;var Ze,He,Ye,et;va(fe),b.on(Ze=>{p.selection.setRng(Ze),p.focus()}),Ze=p,He=Se,Ye=Sm(Se),et=uy(Se),Ze.dispatch("ObjectResized",{target:He,width:Ye,height:et,origin:_u+pe.type}),p.undoManager.add()}),S.set(be)}}),p.on("ObjectResizeStart",Q=>{const de=Q.target;if(gs(de)){const be=Ot.fromDom(de);at(p.dom.select(".mce-clonedresizable"),pe=>{p.dom.addClass(pe,"mce-"+kl(p)+"-columns")}),!Gf(be)&&Dd(p)?Yf(be):!Re(be)&&Tc(p)&&Zg(be),Da(be)&&No(Q.origin,_u)&&Zg(be),B=Q.width,L=ci(p)?"":((pe,fe)=>{const Se=pe.dom.getStyle(fe,"width")||pe.dom.getAttrib(fe,"width");return Ae.from(Se).filter(Ns)})(p,de).getOr("")}}),p.on("ObjectResized",Q=>{const de=Q.target;if(gs(de)){const be=Ot.fromDom(de),pe=Q.origin;No(pe,"corner-")&&((fe,Se,Ze)=>{const He=Ta(Se,"e");if(""===L&&Zg(fe),Ze!==B&&""!==L){qs(fe,"width",L);const Ye=W(),et=V(fe),bt=Kr(p)||He?Ra(fe).columns-1:0;Hg(fe,Ze-B,bt,Ye,et)}else if(/^(\d+(\.\d+)?)%$/.test(L)){const Ye=parseFloat(L.replace("%",""));qs(fe,"width",Ze*Ye/B+"%")}/^(\d+(\.\d+)?)px$/.test(L)&&(Ye=>{const et=Gs(Ye);ii(et)||at(us(Ye),bt=>{const ut=Bo(bt,"width");qs(bt,"width",ut),Fo(bt,"width")})})(fe)})(be,pe,Q.width),va(be),Fs(p,be.dom,ui)}}),p.on("SwitchMode",()=>{S.on(Q=>{p.mode.isReadOnly()?Q.hideBars():Q.showBars()})}),p.on("dragstart dragend",Q=>{S.on(de=>{"dragstart"===Q.type?(de.hideBars(),de.off()):(de.on(),de.showBars())})}),p.on("remove",()=>{S.on(Q=>{Q.destroy()}),_.on(Q=>{p.inline&&bo(Q.parent())})}),{refresh:Q=>{S.on(de=>de.refreshBars(Ot.fromDom(Q)))},hide:()=>{S.on(Q=>Q.hideBars())},show:()=>{S.on(Q=>Q.showBars())}}})(p),S=((p,b)=>{const S=(B=Hn.selectedSelector,{get:()=>Pd(Ot.fromDom(p.getBody()),B).fold(()=>Ag(_g(p),od(p)).fold(f1,Ly),ub)}),_=(L=>{const Q=fe=>{Fo(fe,L.selected),Fo(fe,L.firstSelected),Fo(fe,L.lastSelected)},de=fe=>{Po(fe,L.selected,"1")},be=fe=>{pe(fe),(L=>{L.dispatch("TableSelectionClear")})(p)},pe=fe=>{const Se=dr(fe,`${L.selectedSelector},${L.firstSelectedSelector},${L.lastSelectedSelector}`);at(Se,Q)};return{clearBeforeUpdate:pe,clear:be,selectRange:(fe,Se,Ze,He)=>{be(fe),at(Se,de),Po(Ze,L.firstSelected,"1"),Po(He,L.lastSelected,"1"),((L,V,W)=>{Rs(V).each(Q=>{const de=Uu(p),be=ol(rt,Ot.fromDom(p.getDoc()),de),pe=((fe,Se,Ze)=>{const He=Gs(fe);return na(He,Se).map(Ye=>{const et=bu(He,Ze,!1),{rows:bt}=qn(et);return{upOrLeftCells:((vt,It)=>{const Eo=vt.slice(0,It[It.length-1].row+1),fo=Rm(Eo);return yn(fo,Xn=>{const Vo=Xn.cells.slice(0,It[It.length-1].column+1);return M(Vo,hn=>hn.element)})})(bt,Ye),downOrRightCells:((vt,It)=>{const Eo=vt.slice(It[0].row+It[0].rowspan-1,vt.length),fo=Rm(Eo);return yn(fo,Xn=>{const Vo=Xn.cells.slice(It[0].column+It[0].colspan-1,Xn.cells.length);return M(Vo,hn=>hn.element)})})(bt,Ye)}})})(Q,{selection:Ac(p)},be);((fe,Se,Ze,He,Ye)=>{fe.dispatch("TableSelectionChange",{cells:Se,start:Ze,finish:He,otherCells:Ye})})(p,L,V,W,pe)})})(Se,Ze,He)},selectedSelector:L.selectedSelector,firstSelectedSelector:L.firstSelectedSelector,lastSelectedSelector:L.lastSelectedSelector}})(Hn);var B;return p.on("init",L=>{const V=p.getWin(),W=Bd(p),Q=od(p),de=((He,Ye,et,bt)=>{const ut=((_t,vt,It,Eo)=>{const fo=hh(),Xn=fo.clear,Vo=hn=>{fo.on(Go=>{Eo.clearBeforeUpdate(vt),Dy(hn.target,It).each(or=>{Em(Go,or,It).each(Vs=>{const Za=Vs.boxes.getOr([]);if(1===Za.length){const Xs=Za[0],Vi="false"===O0(Xs),Jn=Ml(T0(hn.target),Xs,Qn);Vi&&Jn&&(Eo.selectRange(vt,Za,Xs,Xs),_t.selectContents(Xs))}else Za.length>1&&(Eo.selectRange(vt,Za,Vs.start,Vs.finish),_t.selectContents(or))})})})};return{clearstate:Xn,mousedown:hn=>{Eo.clear(vt),Dy(hn.target,It).filter(fh).each(fo.set)},mouseover:hn=>{Vo(hn)},mouseup:hn=>{Vo(hn),Xn()}}})(vh(He),Ye,et,bt);return{clearstate:ut.clearstate,mousedown:ut.mousedown,mouseover:ut.mouseover,mouseup:ut.mouseup}})(V,W,Q,_),be=((He,Ye,et,bt)=>{const ut=vh(He),_t=()=>(bt.clear(Ye),Ae.none());return{keydown:(vt,It,Eo,fo,Xn,Vo)=>{const hn=vt.raw,Go=hn.which,or=!0===hn.shiftKey;return Tm(Ye,bt.selectedSelector).fold(()=>(Fm(Go)&&!or&&bt.clearBeforeUpdate(Ye),Fm(Go)&&or&&!yh(It,fo)?Ae.none:Pm(Go)&&or?yt(rb,ut,Ye,et,sb,fo,It,bt.selectRange):u1(Go)&&or?yt(rb,ut,Ye,et,ab,fo,It,bt.selectRange):Pm(Go)?yt(nb,ut,et,sb,fo,It,d1):u1(Go)?yt(nb,ut,et,ab,fo,It,aC):Ae.none),Za=>{const Xs=Vi=>()=>no(Vi,ra=>{return Km=Ye,((p,b,S,_,B)=>{return(L=p,V=B,Do(L,W=>wn(W,V))).bind(L=>((V,W,Q)=>Rs(V).bind(de=>{return be=ju(de),fe=W,Se=Q,ac(be,V,Qn).bind(Ze=>ys(be,(fe>0?Ze.row+Ze.rowspan-1:Ze.row)+fe,(Se>0?Ze.column+Ze.colspan-1:Ze.column)+Se).map(et=>et.element));var be,fe,Se}))(L,b,S).bind(V=>{return Q=_,oa(W=V,"table").bind(de=>bs(de,Q).bind(be=>Em(be,W).bind(pe=>pe.boxes.map(fe=>({boxes:fe,start:pe.start,finish:pe.finish})))));var W,Q}));var L,V})(Za,ra.rows,ra.cols,(Eh=bt).firstSelectedSelector,Eh.lastSelectedSelector).map(Ym=>(Eh.clearBeforeUpdate(Km),Eh.selectRange(Km,Ym.boxes,Ym.start,Ym.finish),Ym.boxes));var Km,Eh}).fold(()=>Oc(Ye,bt.firstSelectedSelector,bt.lastSelectedSelector).map(ra=>{const Eu=Pm(Go)||Vo.isForward(Go)?Ci.after:Ci.before;return ut.setRelativeSelection(Ci.on(ra.first,0),Eu(ra.table)),bt.clear(Ye),Su(Ae.none(),!0)}),ra=>Ae.some(Su(Ae.none(),!0)));return Fm(Go)&&or&&!yh(It,fo)?Ae.none:Pm(Go)&&or?Xs([tm(1,0)]):u1(Go)&&or?Xs([tm(-1,0)]):Vo.isBackward(Go)&&or?Xs([tm(0,-1),tm(-1,0)]):Vo.isForward(Go)&&or?Xs([tm(0,1),tm(1,0)]):Fm(Go)&&!or?_t:Ae.none})()},keyup:(vt,It,Eo,fo,Xn)=>Tm(Ye,bt.selectedSelector).fold(()=>{const Vo=vt.raw;return!0===Vo.shiftKey&&Fm(Vo.which)&&yh(It,fo)?(Go=Ye,or=et,Za=Eo,Vi=Xn,Jn=bt.selectRange,Qn(Vs=It,Xs=fo)&&Za===Vi?Ae.none():ur(Vs,"td,th",or).bind(ra=>ur(Xs,"td,th",or).bind(Eu=>Ey(Go,or,ra,Eu,Jn)))):Ae.none();var Go,or,Vs,Za,Xs,Vi,Jn},Ae.none)}})(V,W,Q,_),pe=((He,Ye,et,bt)=>{const ut=vh(He);return(_t,vt)=>{bt.clearBeforeUpdate(Ye),Em(_t,vt,et).each(It=>{const Eo=It.boxes.getOr([]);bt.selectRange(Ye,Eo,It.start,It.finish),ut.selectContents(vt),ut.collapseSelection()})}})(V,W,Q,_);p.on("TableSelectorChange",He=>pe(He.start,He.finish));const fe=(He,Ye)=>{!0===He.raw.shiftKey&&(Ye.kill&&He.kill(),Ye.selection.each(et=>{const bt=Vm.relative(et.start,et.finish),ut=e1(V,bt);p.selection.setRng(ut)}))},Se=He=>0===He.button,Ze=(()=>{const He=ph(Ot.fromDom(W)),Ye=ph(0);return{touchEnd:et=>{const bt=Ot.fromDom(et.target);if(cr("td")(bt)||cr("th")(bt)){const ut=He.get(),_t=Ye.get();Qn(ut,bt)&&et.timeStamp-_t<300&&(et.preventDefault(),pe(bt,bt))}He.set(bt),Ye.set(et.timeStamp)}}})();p.on("dragstart",He=>{de.clearstate()}),p.on("mousedown",He=>{Se(He)&&Wd(He)&&de.mousedown(md(He))}),p.on("mouseover",He=>{var Ye;void 0!==(Ye=He).buttons&&!(1&Ye.buttons)||!Wd(He)||de.mouseover(md(He))}),p.on("mouseup",He=>{Se(He)&&Wd(He)&&de.mouseup(md(He))}),p.on("touchend",Ze.touchEnd),p.on("keyup",He=>{const Ye=md(He);if(Ye.raw.shiftKey&&Fm(Ye.raw.which)){const et=p.selection.getRng(),bt=Ot.fromDom(et.startContainer),ut=Ot.fromDom(et.endContainer);be.keyup(Ye,bt,et.startOffset,ut,et.endOffset).each(_t=>{fe(Ye,_t)})}}),p.on("keydown",He=>{const Ye=md(He);b.hide();const et=p.selection.getRng(),bt=Ot.fromDom(et.startContainer),ut=Ot.fromDom(et.endContainer),_t=ic(ib,By)(Ot.fromDom(p.selection.getStart()));be.keydown(Ye,bt,et.startOffset,ut,et.endOffset,_t).each(vt=>{fe(Ye,vt)}),b.show()}),p.on("NodeChange",()=>{const He=p.selection,Ye=Ot.fromDom(He.getStart()),et=Ot.fromDom(He.getEnd());Tg(Rs,[Ye,et]).fold(()=>_.clear(W),rt)})}),p.on("PreInit",()=>{p.serializer.addTempAttr(Hn.firstSelected),p.serializer.addTempAttr(Hn.lastSelected)}),{getSelectedCells:()=>((L,V)=>{switch(L.tag){case"none":return V();case"single":return[L.element.dom];case"multiple":return M(L.elements,be=>be.dom)}})(S.get(),Ut([])),clearSelectedCells:L=>_.clear(Ot.fromDom(L))}})(p,b),_=((p,b,S)=>{const _=be=>"table"===nr(Bd(be)),B=Uu(p),L=td(p)?rt:pu,V=be=>{switch(Cm(p)){case"section":return R0();case"sectionCells":return py();case"cells":return M0();default:return(pe=>{var Se;switch((Se=Gs(pe),no(Se.all,Ze=>{const He=Rc(Ze);return"header"===He.type?Ae.from(He.subType):Ae.none()})).getOr("section")){case"section":return Jt();case"sectionCells":return Lf();case"cells":return fu()}})(be)}},W=(be,pe,fe,Se)=>(Ze,He,Ye=!1)=>{va(Ze);const et=Ot.fromDom(p.getDoc()),bt=ol(fe,et,B),ut={sizing:ya(p,Ze),resize:td(p)?Df():Gi(),section:V(Ze)};return pe(Ze)?be(Ze,He,bt,ut).bind(_t=>{b.refresh(Ze.dom),at(_t.newRows,It=>{Wf(p,It.dom)}),at(_t.newCells,It=>{Va(p,It.dom)});const vt=(It=Ze,_t.cursor.fold(()=>{const fo=us(It);return zt(fo).filter(eo).map(Xn=>{S.clearSelectedCells(It.dom);const Vo=p.dom.createRng();return Vo.selectNode(Xn.dom),p.selection.setRng(Vo),Po(Xn,"data-mce-selected","1"),Vo})},fo=>{const Xn=Mf(Mg,fo),Vo=p.dom.createRng();return Vo.setStart(Xn.element.dom,Xn.offset),Vo.setEnd(Xn.element.dom,Xn.offset),p.selection.setRng(Vo),S.clearSelectedCells(It.dom),Ae.some(Vo)}));var It;return eo(Ze)&&(va(Ze),Ye||Fs(p,Ze.dom,Se)),vt.map(It=>({rng:It,effect:Se}))}):Ae.none()};return{deleteRow:W(Ol,be=>!_(p)||Ra(be).rows>1,rt,Tr),deleteColumn:W(Ya,be=>!_(p)||Ra(be).columns>1,rt,Tr),insertRowsBefore:W(Jp,ht,rt,Tr),insertRowsAfter:W(Vr,ht,rt,Tr),insertColumnsBefore:W(P0,ht,L,Tr),insertColumnsAfter:W(Uf,ht,L,Tr),mergeCells:W(z0,ht,rt,Tr),unmergeCells:W(Xu,ht,rt,Tr),pasteColsBefore:W(Xa,ht,rt,Tr),pasteColsAfter:W(Cu,ht,rt,Tr),pasteRowsBefore:W(Z0,ht,rt,Tr),pasteRowsAfter:W(eh,ht,rt,Tr),pasteCells:W(Al,ht,rt,mi),makeCellsHeader:W(F0,ht,rt,Tr),unmakeCellsHeader:W(V0,ht,rt,Tr),makeColumnsHeader:W(Ud,ht,rt,Tr),unmakeColumnsHeader:W(qe,ht,rt,Tr),makeRowsHeader:W(Fg,ht,rt,Tr),makeRowsBody:W(Qp,ht,rt,Tr),makeRowsFooter:W(Lc,ht,rt,Tr),getTableRowType:jf,getTableCellType:th,getTableColType:U0}})(p,b,S);return((p,b)=>{const S=od(p),_=pe=>Rs(pe,S),B=pe=>{return(fe=p,Ag(_g(fe),od(fe)).filter(Ld)).bind(fe=>_(fe).map(Se=>pe(Se,fe)));var fe},L=pe=>{p.focus()},V=(pe,fe=!1)=>B((Se,Ze)=>{const He=io(Ac(p),Se,Ze);pe(Se,He,fe).each(L)}),W=()=>B((pe,fe)=>((Se,Ze,He)=>{const Ye=Gs(Se);return na(Ye,Ze).bind(et=>{const bt=bu(Ye,He,!1),ut=qn(bt).rows.slice(et[0].row,et[et.length-1].row+et[et.length-1].rowspan),_t=yn(ut,It=>{const Eo=Kn(It.cells,fo=>!fo.isLocked);return Eo.length>0?[{...It,cells:Eo}]:[]}),vt=Rm(_t);return Ri(vt.length>0,vt)}).map(et=>M(et,bt=>{const ut=_n(bt.element);return at(bt.cells,_t=>{const vt=an(_t.element);sd(vt,"colspan",_t.colspan,1),sd(vt,"rowspan",_t.rowspan,1),$e(ut,vt)}),ut}))})(pe,io(Ac(p),pe,fe),ol(rt,Ot.fromDom(p.getDoc()),Ae.none()))),Q=()=>B((pe,fe)=>((Se,Ze)=>{const He=Gs(Se);return Zl(He,Ze).map(Ye=>{const et=Ye[Ye.length-1],bt=Ye[0].column,ut=et.column+et.colspan,_t=((It,Eo,fo)=>{if(ii(It)){const Xn=Kn(pn(It),Ic(Eo,fo)),Vo=M(Xn,Go=>{const or=an(Go.element);return xi(or,"span",fo-Eo),or}),hn=Ot.fromTag("colgroup");return Dt(hn,Vo),[hn]}return[]})(He,bt,ut);var Eo,fo;return[..._t,...(Eo=bt,fo=ut,M(He.all,Xn=>{const Vo=Kn(Xn.cells,Ic(Eo,fo)),hn=M(Vo,or=>{const Vs=an(or.element);return xi(Vs,"colspan",fo-Eo),Vs}),Go=Ot.fromTag("tr");return Dt(Go,hn),Go}))]})})(pe,io(Ac(p),pe,fe))),de=(pe,fe)=>fe().each(Se=>{const Ze=M(Se,He=>an(He));B((He,Ye)=>{const et=Ps(Ot.fromDom(p.getDoc())),bt=(ut=Ac(p),vt=Ze,It=et,{selection:Om(ut),clipboard:vt,generators:It});var ut,vt,It;pe(He,bt).each(L)})}),be=pe=>(fe,Se)=>{return(Ze=Se,wr(Ze,"type")?Ae.from(Ze.type):Ae.none()).each(Ze=>{V(pe(Ze),Se.no_events)});var Ze};dn({mceTableSplitCells:()=>V(b.unmergeCells),mceTableMergeCells:()=>V(b.mergeCells),mceTableInsertRowBefore:()=>V(b.insertRowsBefore),mceTableInsertRowAfter:()=>V(b.insertRowsAfter),mceTableInsertColBefore:()=>V(b.insertColumnsBefore),mceTableInsertColAfter:()=>V(b.insertColumnsAfter),mceTableDeleteCol:()=>V(b.deleteColumn),mceTableDeleteRow:()=>V(b.deleteRow),mceTableCutCol:()=>Q().each(pe=>{K0(pe),V(b.deleteColumn)}),mceTableCutRow:()=>W().each(pe=>{Jf(pe),V(b.deleteRow)}),mceTableCopyCol:()=>Q().each(pe=>K0(pe)),mceTableCopyRow:()=>W().each(pe=>Jf(pe)),mceTablePasteColBefore:()=>de(b.pasteColsBefore,Sy),mceTablePasteColAfter:()=>de(b.pasteColsAfter,Sy),mceTablePasteRowBefore:()=>de(b.pasteRowsBefore,Qf),mceTablePasteRowAfter:()=>de(b.pasteRowsAfter,Qf),mceTableDelete:()=>sh(p).each(pe=>{Rs(pe,S).filter(Bt(S)).each(fe=>{const Se=Ot.fromText("");if(ue(fe,Se),bo(fe),p.dom.isEmpty(p.getBody()))p.setContent(""),p.selection.setCursorLocation();else{const Ze=p.dom.createRng();Ze.setStart(Se.dom,0),Ze.setEnd(Se.dom,0),p.selection.setRng(Ze),p.nodeChanged()}})}),mceTableCellToggleClass:(pe,fe)=>{B(Se=>{const Ze=Ac(p),Ye=St(Ze,et=>p.formatter.match("tablecellclass",{value:fe},et.dom))?p.formatter.remove:p.formatter.apply;at(Ze,et=>Ye("tablecellclass",{value:fe},et.dom)),Fs(p,Se.dom,ui)})},mceTableToggleClass:(pe,fe)=>{B(Se=>{p.formatter.toggle("tableclass",{value:fe},Se.dom),Fs(p,Se.dom,ui)})},mceTableToggleCaption:()=>{sh(p).each(pe=>{Rs(pe,S).each(fe=>{Wn(fe,"caption").fold(()=>{const Se=Ot.fromTag("caption");var Ze,He;$e(Se,Ot.fromText("Caption")),He=Se,Ws(Ze=fe,0).fold(()=>{$e(Ze,He)},et=>{Le(et,He)}),p.selection.setCursorLocation(Se.dom,0)},Se=>{cr("caption")(pe)&&ns("td",fe).each(Ze=>p.selection.setCursorLocation(Ze.dom,0)),bo(Se)}),Fs(p,fe.dom,Tr)})})},mceTableSizingMode:(pe,fe)=>{return Se=fe,sh(p).each(Ze=>{ci(p)||Dd(p)||Tc(p)||Rs(Ze,S).each(He=>{"relative"!==Se||Re(He)?"fixed"!==Se||Gf(He)?"responsive"!==Se||Da(He)||il(He):Yf(He):Zg(He),va(He),Fs(p,He.dom,Tr)})});var Se},mceTableCellType:be(pe=>"th"===pe?b.makeCellsHeader:b.unmakeCellsHeader),mceTableColType:be(pe=>"th"===pe?b.makeColumnsHeader:b.unmakeColumnsHeader),mceTableRowType:be(pe=>{switch(pe){case"header":return b.makeRowsHeader;case"footer":return b.makeRowsFooter;default:return b.makeRowsBody}})},(pe,fe)=>p.addCommand(fe,pe)),p.addCommand("mceInsertTable",(pe,fe)=>{((Se,Ze,He,Ye={})=>{const et=bt=>Xt(bt)&&bt>0;if(et(Ze)&&et(He))return((p,b,S,_,B)=>{const L=(W=>{const Q=W.options,de=Q.get("table_default_styles");return Q.isSet("table_default_styles")?de:(pe=de,ci(be=W)||!Fp(be)?pe:Dd(be)?{...pe,width:Pp(be)}:{...pe,width:"100%"});var be,pe})(p),V={styles:L,attributes:uu(p),colGroups:mu(p)};return p.undoManager.ignore(()=>{const W=((de,be,pe,fe,Se,Ze=oC)=>{const He=Ot.fromTag("table"),Ye="cells"!==Se;kc(He,Ze.styles),ga(He,Ze.attributes),Ze.colGroups&&$e(He,(_t=>{const vt=Ot.fromTag("colgroup");return fn(_t,()=>$e(vt,Ot.fromTag("col"))),vt})(be));const et=Math.min(de,pe);if(Ye&&pe>0){const _t=Ot.fromTag("thead");$e(He,_t);const vt=Ul(pe,be,"sectionCells"===Se?et:0,fe);Dt(_t,vt)}const bt=Ot.fromTag("tbody");$e(He,bt);const ut=Ul(Ye?de-et:de,be,Ye?0:pe,fe);return Dt(bt,ut),He})(S,b,B,_,Cm(p),V);Po(W,"data-mce-id","__mce");const Q=(de=>{const be=Ot.fromTag("div"),pe=Ot.fromDom(de.dom.cloneNode(!0));return $e(be,pe),be.dom.innerHTML})(W);p.insertContent(Q),p.addVisual()}),bs(Bd(p),'table[data-mce-id="__mce"]').map(W=>{return Dd(p)?Yf(W):ci(p)?il(W):(Tc(p)||da(Q=L.width)&&-1!==Q.indexOf("%"))&&Zg(W),va(W),Fo(W,"data-mce-id"),((Q,de)=>{at(dr(de,"tr"),be=>{Wf(Q,be.dom),at(dr(be,"th,td"),pe=>{Va(Q,pe.dom)})})})(p,W),((Q,de)=>{bs(de,"td,th").each(yt(q0,Q))})(p,W),W.dom;var Q}).getOrNull()})(Se,He,Ze,Ye.headerColumns||0,Ye.headerRows||0);console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")})(p,fe.rows,fe.columns,fe.options)}),p.addCommand("mceTableApplyCellStyle",(pe,fe)=>{const Se=Ye=>"tablecell"+Ye.toLowerCase().replace("-","");if(!Zo(fe))return;const Ze=Kn(Ac(p),Ld);if(0===Ze.length)return;const He=(Ye=>{const bt={};return ut=Ye,_t=(Ye,et)=>p.formatter.has(Se(et))&&da(Ye),vt=(ut=>(_t,vt)=>{ut[vt]=_t})(bt),It=rt,dn(ut,(Eo,fo)=>{(_t(Eo,fo)?vt:It)(Eo,fo)}),bt;var ut,_t,vt,It})(fe);(Ye=>{for(const et in Ye)if(ma.call(Ye,et))return!1;return!0})(He)||(dn(He,(Ye,et)=>{const bt=Se(et);at(Ze,ut=>{""===Ye?p.formatter.remove(bt,{value:null},ut.dom,!0):p.formatter.apply(bt,{value:Ye},ut.dom)})}),_(Ze[0]).each(Ye=>Fs(p,Ye.dom,ui)))})})(p,_),((B,L)=>{const V=od(B),W=Q=>Ag(_g(B)).bind(de=>Rs(de,V).map(be=>{const pe=io(Ac(B),be,de);return Q(be,pe)})).getOr("");dn({mceTableRowType:()=>W(L.getTableRowType),mceTableCellType:()=>W(L.getTableCellType),mceTableColType:()=>W(L.getTableColType)},(Q,de)=>B.addQueryValueHandler(de,Q))})(p,_),((p,b)=>{p.on("BeforeGetContent",S=>{if(!0===S.selection){const B=Kn(Ac(p),V=>wn(V,Hn.selectedSelector));B.length>=1&&(B=>{var L;S.preventDefault(),(L=B,Rs(L[0]).map(V=>{const W=((Q,de)=>{const be=ut=>wn(ut.element,de),pe=an(Q),fe=Oa(pe),Se=Vu(Q),Ze=sc(fe),He=((ut,_t)=>{let It=ut.grid.rows,Eo=ut.grid.columns,fo=0,Xn=0;const Vo=[],hn=[];return dn(ut.access,Go=>{if(Vo.push(Go),_t(Go)){hn.push(Go);const or=Go.row,Vs=or+Go.rowspan-1,Za=Go.column,Xs=Za+Go.colspan-1;or<It?It=or:Vs>fo&&(fo=Vs),Za<Eo?Eo=Za:Xs>Xn&&(Xn=Xs)}}),((Go,or,Vs,Za,Xs,Vi)=>({minRow:Go,minCol:or,maxRow:Vs,maxCol:Za,allCells:Xs,selectedCells:Vi}))(It,Eo,fo,Xn,Vo,hn)})(Ze,be),Ye="th:not("+de+"),td:not("+de+")",et=ds(pe,"th,td",ut=>wn(ut,Ye));return at(et,bo),((ut,_t,vt,It)=>{const Eo=Kn(ut,Vo=>"colgroup"!==Vo.section),fo=_t.grid.columns,Xn=_t.grid.rows;for(let Vo=0;Vo<Xn;Vo++){let hn=!1;for(let Go=0;Go<fo;Go++)Vo<vt.minRow||Vo>vt.maxRow||Go<vt.minCol||Go>vt.maxCol||(ys(_t,Vo,Go).filter(It).isNone()?Md(Eo,hn,Vo):hn=!0)}})(fe,Ze,He,be),((ut,_t,vt)=>{dn(vt.columns,fo=>{(fo.column<_t.minCol||fo.column>_t.maxCol)&&bo(fo.element)});const Eo=Kn(oc(ut,"tr"),fo=>0===fo.dom.childElementCount);at(Eo,bo),_t.minCol!==_t.maxCol&&_t.minRow!==_t.maxRow||at(oc(ut,"th,td"),fo=>{Fo(fo,"rowspan"),Fo(fo,"colspan")}),Fo(ut,Ka),Fo(ut,"data-snooker-col-series"),Vu(ut).adjustTableWidth(void 0)})(pe,He,Ze,((ut,_t,vt,It)=>{if(0===It.minCol&&_t.grid.columns===It.maxCol+1)return 0;const Eo=Hp(_t,ut,vt),fo=$r(Eo,(hn,Go)=>hn+Go,0),Vo=$r(Eo.slice(It.minCol,It.maxCol+1),(hn,Go)=>hn+Go,0)/fo*vt.pixelWidth()-vt.pixelWidth();vt.getCellDelta(Vo)})(Q,Gs(Q),Se,He)),pe})(V,A0);return va(W),[W]})).each(L=>{var V;S.content="text"===S.format?M(L,W=>W.dom.innerText).join(""):(V=p,M(L,Q=>V.selection.serializer.serialize(Q.dom,{})).join(""))})})(B)}}),p.on("BeforeSetContent",S=>{if(!0===S.selection&&!0===S.paste){const _=Ac(p);zt(_).each(B=>{Rs(B).each(L=>{const V=Kn((Q=>{const be=document.createElement("div");return be.innerHTML=Q,js(Ot.fromDom(be))})(S.content),Q=>"meta"!==nr(Q)),W=cr("table");if(_f(p)&&1===V.length&&W(V[0])){S.preventDefault();const Q=Ot.fromDom(p.getDoc()),de=Ps(Q);b.pasteCells(L,((pe,fe,Se)=>({element:pe,clipboard:fe,generators:Se}))(B,V[0],de)).each(()=>{p.focus()})}})})}})})(p,_),{getSelectedCells:S.getSelectedCells,clearSelectedCells:S.clearSelectedCells}};Od.add("dom",p=>({table:cl(p)}))}(),function(){"use strict";const Od=Object.getPrototypeOf,$a=(e,r,a)=>{var l;return!!a(e,r.prototype)||(null===(l=e.constructor)||void 0===l?void 0:l.name)===r.name},fi=e=>r=>(a=>{const l=typeof a;return null===a?"null":"object"===l&&Array.isArray(a)?"array":"object"===l&&$a(a,String,(m,g)=>g.isPrototypeOf(m))?"string":l})(r)===e,Sa=e=>r=>typeof r===e,da=e=>r=>e===r,Zo=fi("string"),Ia=fi("object"),Us=e=>{return r=e,a=Object,Ia(r)&&$a(r,a,(l,m)=>Od(l)===m);var r,a},Or=fi("array"),Zi=da(null),ua=Sa("boolean"),kn=da(void 0),Xt=e=>null==e,rt=e=>!Xt(e),Ut=Sa("function"),Nt=Sa("number"),Wr=(e,r)=>{if(Or(e)){for(let a=0,l=e.length;a<l;++a)if(!r(e[a]))return!1;return!0}return!1},yt=()=>{},Bt=e=>()=>e(),yr=(e,r)=>(...a)=>e(r.apply(null,a)),ie=e=>()=>e,ht=e=>e,Ae=(e,r)=>e===r;function hr(e,...r){return(...a)=>{const l=r.concat(a);return e.apply(null,l)}}const _o=e=>r=>!e(r),zr=e=>()=>{throw new Error(e)},Er=e=>e(),Ke=ie(!1),fn=ie(!0);class M{constructor(r,a){this.tag=r,this.value=a}static some(r){return new M(!0,r)}static none(){return M.singletonNone}fold(r,a){return this.tag?a(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?M.some(r(this.value)):M.none()}bind(r){return this.tag?r(this.value):M.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:M.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r??"Called getOrDie on None")}static from(r){return rt(r)?M.some(r):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}M.singletonNone=new M(!1);const at=Array.prototype.slice,bi=Array.prototype.indexOf,Kn=Array.prototype.push,Cr=(e,r)=>bi.call(e,r),$r=(e,r)=>{const a=Cr(e,r);return-1===a?M.none():M.some(a)},Do=(e,r)=>Cr(e,r)>-1,zn=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return!0;return!1},$=(e,r)=>{const a=[];for(let l=0;l<e;l++)a.push(r(l));return a},yn=(e,r)=>{const a=[];for(let l=0;l<e.length;l+=r){const m=at.call(e,l,l+r);a.push(m)}return a},St=(e,r)=>{const a=e.length,l=new Array(a);for(let m=0;m<a;m++)l[m]=r(e[m],m);return l},Qt=(e,r)=>{for(let a=0,l=e.length;a<l;a++)r(e[a],a)},ri=(e,r)=>{const a=[],l=[];for(let m=0,g=e.length;m<g;m++){const f=e[m];(r(f,m)?a:l).push(f)}return{pass:a,fail:l}},zt=(e,r)=>{const a=[];for(let l=0,m=e.length;l<m;l++){const g=e[l];r(g,l)&&a.push(g)}return a},Bn=(e,r,a)=>(((l,m)=>{for(let g=l.length-1;g>=0;g--)m(l[g],g)})(e,(l,m)=>{a=r(a,l,m)}),a),no=(e,r,a)=>(Qt(e,(l,m)=>{a=r(a,l,m)}),a),Ue=(e,r)=>((a,l,m)=>{for(let g=0,f=a.length;g<f;g++){const w=a[g];if(l(w,g))return M.some(w);if(m(w,g))break}return M.none()})(e,r,Ke),ma=(e,r)=>{for(let a=0,l=e.length;a<l;a++)if(r(e[a],a))return M.some(a);return M.none()},dn=e=>{const r=[];for(let a=0,l=e.length;a<l;++a){if(!Or(e[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+e);Kn.apply(r,e[a])}return r},Vt=(e,r)=>dn(St(e,r)),ka=(e,r)=>{for(let a=0,l=e.length;a<l;++a)if(!0!==r(e[a],a))return!1;return!0},lr=e=>{const r=at.call(e,0);return r.reverse(),r},qa=(e,r)=>zt(e,a=>!Do(r,a)),wr=(e,r)=>{const a={};for(let l=0,m=e.length;l<m;l++){const g=e[l];a[String(g)]=r(g,l)}return a},Ui=e=>[e],ji=(e,r)=>{const a=at.call(e,0);return a.sort(r),a},ps=(e,r)=>r>=0&&r<e.length?M.some(e[r]):M.none(),Ar=e=>ps(e,0),nr=e=>ps(e,e.length-1),Ha=Ut(Array.from)?Array.from:e=>at.call(e),hs=(e,r)=>{for(let a=0;a<e.length;a++){const l=r(e[a],a);if(l.isSome())return l}return M.none()},Sr=Object.keys,ml=Object.hasOwnProperty,Nn=(e,r)=>{const a=Sr(e);for(let l=0,m=a.length;l<m;l++){const g=a[l];r(e[g],g)}},Zn=(e,r)=>fr(e,(a,l)=>({k:l,v:r(a,l)})),fr=(e,r)=>{const a={};return Nn(e,(l,m)=>{const g=r(l,m);a[g.k]=g.v}),a},Ni=e=>(r,a)=>{e[a]=r},cr=(e,r,a,l)=>{Nn(e,(m,g)=>{(r(m,g)?a:l)(m,g)})},Wi=(e,r)=>{const a={};return cr(e,r,Ni(a),yt),a},Po=(e,r)=>{const a=[];return Nn(e,(l,m)=>{a.push(r(l,m))}),a},ga=(e,r)=>{const a=Sr(e);for(let l=0,m=a.length;l<m;l++){const g=a[l],f=e[g];if(r(f,g,e))return M.some(f)}return M.none()},_a=e=>Po(e,ht),jt=(e,r)=>Fo(e,r)?M.from(e[r]):M.none(),Fo=(e,r)=>ml.call(e,r),ws=(e,r)=>Fo(e,r)&&null!=e[r],os=(e,r,a=Ae)=>e.exists(l=>a(l,r)),Ot=e=>{const r=[],a=l=>{r.push(l)};for(let l=0;l<e.length;l++)e[l].each(a);return r},wn=(e,r,a)=>e.isSome()&&r.isSome()?M.some(a(e.getOrDie(),r.getOrDie())):M.none(),wo=(e,r)=>null!=e?M.some(r(e)):M.none(),ns=(e,r)=>e?M.some(r):M.none(),Qn=(e,r,a)=>""===r||e.length>=r.length&&e.substr(a,a+r.length)===r,gl=(e,r)=>Pa(e,r)?e.substring(r.length):e,fs=(e,r,a=0,l)=>{const m=e.indexOf(r,a);return-1!==m&&(!!kn(l)||m+r.length<=l)},Pa=(e,r)=>Qn(e,r,0),As=(e,r)=>Qn(e,r,e.length-r.length),ea=(ce=/^\s+|\s+$/g,e=>e.replace(ce,"")),Ea=e=>e.length>0,ta=e=>!Ea(e),xs=e=>void 0!==e.style&&Ut(e.style.getPropertyValue),Nr=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ws=(e,r)=>{const a=(r||document).createElement(e);return Nr(a)},Le=(e,r)=>{const a=(r||document).createTextNode(e);return Nr(a)},ue=Nr,Je=typeof window<"u"?window:Function("return this;")(),$e=(e,r)=>((a,l)=>{let m=l??Je;for(let g=0;g<a.length&&null!=m;++g)m=m[a[g]];return m})(e.split("."),r),Lt=Object.getPrototypeOf,Dt=e=>e.dom.nodeName.toLowerCase(),po=e=>r=>r.dom.nodeType===e,bo=e=>rn(e)&&(e=>{const r=$e("ownerDocument.defaultView",e);return Ia(e)&&((a=r,((l,m)=>{const g=$e(l,m);if(null==g)throw new Error(l+" not available on this browser");return g})("HTMLElement",a)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Lt(e).constructor.name));var a})(e.dom),rn=po(1),An=po(3),_n=po(9),an=po(11),Rr=e=>r=>rn(r)&&Dt(r)===e,Fr=(e,r)=>{const a=e.dom;if(1!==a.nodeType)return!1;{const l=a;if(void 0!==l.matches)return l.matches(r);if(void 0!==l.msMatchesSelector)return l.msMatchesSelector(r);if(void 0!==l.webkitMatchesSelector)return l.webkitMatchesSelector(r);if(void 0!==l.mozMatchesSelector)return l.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},br=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,se=(e,r)=>e.dom===r.dom,we=(e,r)=>{const a=e.dom,l=r.dom;return a!==l&&a.contains(l)},Ve=e=>ue(e.dom.ownerDocument),gt=e=>_n(e)?e:Ve(e),lt=e=>ue(gt(e).dom.documentElement),Rt=e=>ue(gt(e).dom.defaultView),xo=e=>M.from(e.dom.parentNode).map(ue),eo=e=>M.from(e.dom.parentElement).map(ue),sn=e=>M.from(e.dom.offsetParent).map(ue),ln=e=>St(e.dom.childNodes,ue),un=(e,r)=>M.from(e.dom.childNodes[r]).map(ue),en=e=>un(e,0),dr=(e,r)=>({element:e,offset:r}),Cs=(e,r)=>{const a=ln(e);return a.length>0&&r<a.length?dr(a[r],0):dr(e,r)},$s=e=>an(e)&&rt(e.dom.host),vi=Ut(Element.prototype.attachShadow)&&Ut(Node.prototype.getRootNode),oa=ie(vi),Wn=vi?e=>ue(e.dom.getRootNode()):gt,bs=e=>$s(e)?e:ue(gt(e).dom.body),ur=e=>{const r=Wn(e);return $s(r)?M.some(r):M.none()},Ml=e=>ue(e.dom.host),Is=e=>{const r=An(e)?e.dom.parentNode:e.dom;if(null==r||null===r.ownerDocument)return!1;const a=r.ownerDocument;return ur(ue(r)).fold(()=>a.body.contains(r),(l=Is,m=Ml,g=>l(m(g))));var l,m},Ri=()=>yi(ue(document)),yi=e=>{const r=e.dom.body;if(null==r)throw new Error("Body is not available yet");return ue(r)},Fa=(e,r,a)=>{if(!(Zo(a)||ua(a)||Nt(a)))throw console.error("Invalid call to Attribute.set. Key ",r,":: Value ",a,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(r,a+"")},No=(e,r,a)=>{Fa(e.dom,r,a)},Ta=(e,r)=>{const a=e.dom;Nn(r,(l,m)=>{Fa(a,m,l)})},qr=(e,r)=>{const a=e.dom.getAttribute(r);return null===a?void 0:a},Ns=(e,r)=>M.from(qr(e,r)),Sc=(e,r)=>{const a=e.dom;return!(!a||!a.hasAttribute)&&a.hasAttribute(r)},Oo=(e,r)=>{e.dom.removeAttribute(r)},qs=(e,r,a)=>{if(!Zo(a))throw console.error("Invalid call to CSS.set. Property ",r,":: Value ",a,":: Element ",e),new Error("CSS value must be a string: "+a);xs(e)&&e.style.setProperty(r,a)},kc=(e,r)=>{xs(e)&&e.style.removeProperty(r)},Bo=(e,r,a)=>{qs(e.dom,r,a)},wt=(e,r)=>{const a=e.dom;Nn(r,(l,m)=>{qs(a,m,l)})},Mi=(e,r)=>{const a=e.dom;Nn(r,(l,m)=>{l.fold(()=>{kc(a,m)},g=>{qs(a,m,g)})})},cs=(e,r)=>{const a=e.dom,l=window.getComputedStyle(a).getPropertyValue(r);return""!==l||Is(e)?l:kr(a,r)},kr=(e,r)=>xs(e)?e.style.getPropertyValue(r):"",rs=(e,r)=>{const l=kr(e.dom,r);return M.from(l).filter(m=>m.length>0)},tu=e=>{const r={},a=e.dom;if(xs(a))for(let l=0;l<a.style.length;l++){const m=a.style.item(l);r[m]=a.style[m]}return r},Gc=(e,r,a)=>{const l=Ws(e);return Bo(l,r,a),rs(l,r).isSome()},Yn=(e,r)=>{kc(e.dom,r),os(Ns(e,"style").map(ea),"")&&Oo(e,"style")},pl=e=>e.dom.offsetWidth,Sn=(e,r)=>{const a=m=>{const g=r(m);if(g<=0||null===g){const f=cs(m,e);return parseFloat(f)||0}return g},l=(m,g)=>no(g,(f,w)=>{const x=cs(m,w),k=void 0===x?0:parseInt(x,10);return isNaN(k)?f:f+k},0);return{set:(m,g)=>{if(!Nt(g)&&!g.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+g);const f=m.dom;xs(f)&&(f.style[e]=g+"px")},get:a,getOuter:a,aggregate:l,max:(m,g,f)=>{const w=l(m,f);return g>w?g-w:0}}},oc=Sn("height",e=>{const r=e.dom;return Is(e)?r.getBoundingClientRect().height:r.offsetHeight}),ds=e=>oc.get(e),Ga=e=>oc.getOuter(e),us=(e,r)=>({left:e,top:r,translate:(a,l)=>us(e+a,r+l)}),En=us,Rs=(e,r)=>void 0!==e?e:void 0!==r?r:0,si=e=>{const r=e.dom.ownerDocument,a=r.body,l=r.defaultView,m=r.documentElement;if(a===e.dom)return En(a.offsetLeft,a.offsetTop);const g=Rs(l?.pageYOffset,m.scrollTop),f=Rs(l?.pageXOffset,m.scrollLeft),w=Rs(m.clientTop,a.clientTop),x=Rs(m.clientLeft,a.clientLeft);return Di(e).translate(f-x,g-w)},Di=e=>{const r=e.dom,a=r.ownerDocument.body;return a===r?En(a.offsetLeft,a.offsetTop):Is(e)?(l=>{const m=l.getBoundingClientRect();return En(m.left,m.top)})(r):En(0,0)},Dl=Sn("width",e=>e.dom.offsetWidth),mr=e=>Dl.get(e),Oa=e=>Dl.getOuter(e),ss=e=>{let r,a=!1;return(...l)=>(a||(a=!0,r=e.apply(null,l)),r)},$i=()=>hl(0,0),hl=(e,r)=>({major:e,minor:r}),as={nu:hl,detect:(e,r)=>{const a=String(r).toLowerCase();return 0===e.length?$i():((l,m)=>{const g=((w,x)=>{for(let k=0;k<w.length;k++){const O=w[k];if(O.test(x))return O}})(l,m);if(!g)return{major:0,minor:0};const f=w=>Number(m.replace(g,"$"+w));return hl(f(1),f(2))})(e,a)},unknown:$i},ou=(e,r)=>{const a=String(r).toLowerCase();return Ue(e,l=>l.search(a))},Bl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ms=e=>r=>fs(r,e),nu=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>fs(e,"edge/")&&fs(e,"chrome")&&fs(e,"safari")&&fs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bl],search:e=>fs(e,"chrome")&&!fs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>fs(e,"msie")||fs(e,"trident")},{name:"Opera",versionRegexes:[Bl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ms("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ms("firefox")},{name:"Safari",versionRegexes:[Bl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(fs(e,"safari")||fs(e,"mobile/"))&&fs(e,"applewebkit")}],ym=[{name:"Windows",search:Ms("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>fs(e,"iphone")||fs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ms("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ms("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ms("linux"),versionRegexes:[]},{name:"Solaris",search:Ms("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ms("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ms("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ru={browsers:ie(nu),oses:ie(ym)},Ad="Chromium",Kc="Firefox",fl=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isEdge:l("Edge"),isChromium:l(Ad),isIE:l("IE"),isOpera:l("Opera"),isFirefox:l(Kc),isSafari:l("Safari")}},vs=()=>fl({current:void 0,version:as.unknown()}),Bi=fl,ve=(ie("Edge"),ie(Ad),ie("IE"),ie("Opera"),ie(Kc),ie("Safari"),"Windows"),nc="Android",Nd="Solaris",$n="FreeBSD",bl="ChromeOS",Rd=e=>{const r=e.current,l=m=>()=>r===m;return{current:r,version:e.version,isWindows:l(ve),isiOS:l("iOS"),isAndroid:l(nc),isMacOS:l("macOS"),isLinux:l("Linux"),isSolaris:l(Nd),isFreeBSD:l($n),isChromeOS:l(bl)}},vl=()=>Rd({current:void 0,version:as.unknown()}),q=Rd,ee=(ie(ve),ie("iOS"),ie(nc),ie("Linux"),ie("macOS"),ie(Nd),ie($n),ie(bl),e=>window.matchMedia(e).matches);var ce;let Ce=ss(()=>((e,r,a)=>{const l=ru.browsers(),m=ru.oses(),g=r.bind(x=>{return k=l,hs(x.brands,A=>{const D=A.brand.toLowerCase();return Ue(k,P=>{var Z;return D===(null===(Z=P.brand)||void 0===Z?void 0:Z.toLowerCase())}).map(P=>({current:P.name,version:as.nu(parseInt(A.version,10),0)}))});var k}).orThunk(()=>{return ou(l,k=e).map(O=>{const A=as.detect(O.versionRegexes,k);return{current:O.name,version:A}});var k}).fold(vs,Bi),f=(x=m,k=e,ou(x,k).map(O=>{const A=as.detect(O.versionRegexes,k);return{current:O.name,version:A}})).fold(vl,q),w=((x,k,O,A)=>{const D=x.isiOS()&&!0===/ipad/i.test(O),P=x.isiOS()&&!D,Z=x.isiOS()||x.isAndroid(),te=Z||A("(pointer:coarse)"),oe=D||!P&&Z&&A("(min-device-width:768px)"),ae=P||Z&&!oe,X=k.isSafari()&&x.isiOS()&&!1===/safari/i.test(O),j=!ae&&!oe&&!X;return{isiPad:ie(D),isiPhone:ie(P),isTablet:ie(oe),isPhone:ie(ae),isTouch:ie(te),isAndroid:x.isAndroid,isiOS:x.isiOS,isWebView:ie(X),isDesktop:ie(j)}})(f,g,e,a);var x,k;return{browser:g,os:f,deviceType:w}})(navigator.userAgent,M.from(navigator.userAgentData),ee));const he=()=>Ce(),Pe=e=>{const r=ue((g=>{if(oa()&&rt(g.target)){const f=ue(g.target);if(rn(f)&&rt(f.dom.shadowRoot)&&g.composed&&g.composedPath){const w=g.composedPath();if(w)return Ar(w)}}return M.from(g.target)})(e).getOr(e.target)),a=()=>e.stopPropagation(),l=()=>e.preventDefault(),m=yr(l,a);return((g,f,w,x,k,O,A)=>({target:g,x:f,y:w,stop:x,prevent:k,kill:O,raw:A}))(r,e.clientX,e.clientY,a,l,m,e)},Ge=(e,r,a,l,m)=>{const g=((f,w)=>x=>{f(x)&&w(Pe(x))})(a,l);return e.dom.addEventListener(r,g,m),{unbind:hr(ct,e,r,g,m)}},ct=(e,r,a,l)=>{e.dom.removeEventListener(r,a,l)},xt=(e,r)=>{xo(e).each(a=>{a.dom.insertBefore(r.dom,e.dom)})},kt=(e,r)=>{var l;(l=e,M.from(l.dom.nextSibling).map(ue)).fold(()=>{xo(e).each(l=>{Co(l,r)})},l=>{xt(l,r)})},vo=(e,r)=>{en(e).fold(()=>{Co(e,r)},a=>{e.dom.insertBefore(r.dom,a.dom)})},Co=(e,r)=>{e.dom.appendChild(r.dom)},Ao=(e,r)=>{Qt(r,a=>{Co(e,a)})},Lo=e=>{e.dom.textContent="",Qt(ln(e),r=>{tn(r)})},tn=e=>{const r=e.dom;null!==r.parentNode&&r.parentNode.removeChild(r)},mn=e=>{const r=void 0!==e?e.dom:document;return En(r.body.scrollLeft||r.documentElement.scrollLeft,r.body.scrollTop||r.documentElement.scrollTop)},gn=(e,r,a)=>{const l=(void 0!==a?a.dom:document).defaultView;l&&l.scrollTo(e,r)},qn=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),Mr=e=>{const r=void 0===e?window:e,l=mn(ue(r.document));return(m=>{const g=void 0===m?window:m;return he().browser.isFirefox()?M.none():M.from(g.visualViewport)})(r).fold(()=>{const m=r.document.documentElement;return qn(l.left,l.top,m.clientWidth,m.clientHeight)},m=>qn(Math.max(m.pageLeft,l.left),Math.max(m.pageTop,l.top),m.width,m.height))},Ka=()=>ue(document),Hl=(e,r)=>e.view(r).fold(ie([]),a=>{const l=e.owner(a),m=Hl(e,l);return[a].concat(m)});var Pl=Object.freeze({__proto__:null,view:e=>{var r;return(e.dom===document?M.none():M.from(null===(r=e.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(ue)},owner:e=>Ve(e)});const su=e=>{const r=Ka(),a=mn(r);return((m,g)=>{const f=g.owner(m),w=Hl(g,f);return M.some(w)})(e,Pl).fold(hr(si,e),m=>{const g=Di(e),f=Bn(m,(w,x)=>{const k=Di(x);return{left:w.left+k.left,top:w.top+k.top}},{left:0,top:0});return En(f.left+g.left+a.left,f.top+g.top+a.top)})},Gr=(e,r,a,l)=>({x:e,y:r,width:a,height:l,right:e+a,bottom:r+l}),Ds=e=>{const r=si(e),a=Oa(e),l=Ga(e);return Gr(r.left,r.top,a,l)},Gs=e=>{const r=su(e),a=Oa(e),l=Ga(e);return Gr(r.left,r.top,a,l)},sc=(e,r)=>{const a=Math.max(e.x,r.x),l=Math.max(e.y,r.y),m=Math.min(e.right,r.right),g=Math.min(e.bottom,r.bottom);return Gr(a,l,m-a,g-l)},ys=()=>Mr(window);var ac=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Yc=e=>{const r=g=>g(e),a=ie(e),l=()=>m,m={tag:!0,inner:e,fold:(g,f)=>f(e),isValue:fn,isError:Ke,map:g=>pn.value(g(e)),mapError:l,bind:r,exists:r,forall:r,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(e)},toOptional:()=>M.some(e)};return m},Cg=e=>{const r=()=>a,a={tag:!1,inner:e,fold:(l,m)=>l(e),isValue:Ke,isError:fn,map:r,mapError:l=>pn.error(l(e)),bind:r,exists:Ke,forall:fn,getOr:ht,or:ht,getOrThunk:Er,orThunk:Er,getOrDie:zr(String(e)),each:yt,toOptional:M.none};return a},pn={value:Yc,error:Cg,fromOption:(e,r)=>e.fold(()=>Cg(r),Yc)};var ii,e;(e=ii||(ii={}))[e.Error=0]="Error",e[e.Value=1]="Value";const wm=(e,r,a)=>e.stype===ii.Error?r(e.serror):a(e.svalue),au=e=>({stype:ii.Value,svalue:e}),yl=e=>({stype:ii.Error,serror:e}),Xc=au,ic=yl,Sg=wm,iu=(e,r,a,l)=>({tag:"field",key:e,newKey:r,presence:a,prop:l}),pa=(e,r,a)=>{switch(e.tag){case"field":return r(e.key,e.newKey,e.presence,e.prop);case"custom":return a(e.newKey,e.instantiator)}},Fl=e=>(...r)=>{if(0===r.length)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<r.length;l++){const m=r[l];for(const g in m)Fo(m,g)&&(a[g]=e(a[g],m[g]))}return a},Zr=Fl((e,r)=>Us(e)&&Us(r)?Zr(e,r):r),F=Fl((e,r)=>r),G=e=>({tag:"defaultedThunk",process:e}),K=e=>G(ie(e)),re=e=>({tag:"mergeWithThunk",process:e}),_e=e=>{const r=(l=>{const m=[],g=[];return Qt(l,f=>{wm(f,w=>g.push(w),w=>m.push(w))}),{values:m,errors:g}})(e);return r.errors.length>0?(a=r.errors,yr(ic,dn)(a)):Xc(r.values);var a},De=e=>Ia(e)&&Sr(e).length>100?" removed due to size":JSON.stringify(e,null,2),dt=(e,r)=>ic([{path:e,getErrorInfo:r}]),Tt=e=>({extract:(r,a)=>{return(l=e(a)).stype===ii.Error?(l=>dt(r,ie(l)))(l.serror):l;var l},toString:ie("val")}),Et=Tt(Xc),At=(e,r,a,l)=>l(jt(e,r).getOrThunk(()=>a(e))),qt=(e,r,a,l,m)=>{const g=w=>m.extract(r.concat([l]),w),f=w=>w.fold(()=>Xc(M.none()),x=>{return(k=m.extract(r.concat([l]),x)).stype===ii.Value?{stype:ii.Value,svalue:(0,M.some)(k.svalue)}:k;var k});switch(e.tag){case"required":return w=r,O=g,jt(x=a,k=l).fold(()=>{return D=k,P=x,dt(w,()=>'Could not find valid *required* value for "'+D+'" in '+De(P));var D,P},O);case"defaultedThunk":return At(a,l,e.process,g);case"option":return((w,x,k)=>k(jt(w,x)))(a,l,f);case"defaultedOptionThunk":return((w,x,k,O)=>O(jt(w,x).map(A=>!0===A?k(w):A)))(a,l,e.process,f);case"mergeWithThunk":return At(a,l,ie({}),w=>{const x=Zr(e.process(a),w);return g(x)})}var w,x,k,O},to=e=>({extract:(r,a)=>e().extract(r,a),toString:()=>e().toString()}),ao=e=>{const r=Ct(e),a=Bn(e,(l,m)=>pa(m,g=>Zr(l,{[g]:!0}),ie(l)),{});return{extract:(l,m)=>{const g=ua(m)?[]:(e=>Sr(Wi(e,rt)))(m),f=zt(g,w=>!ws(a,w));return 0===f.length?r.extract(l,m):(x=f,dt(l,()=>"There are unsupported fields: ["+x.join(", ")+"] specified"));var x},toString:r.toString}},Ct=e=>({extract:(r,a)=>((l,m,g)=>{const f={},w=[];for(const x of g)pa(x,(k,O,A,D)=>{const P=qt(A,l,m,k,D);Sg(P,Z=>{w.push(...Z)},Z=>{f[O]=Z})},(k,O)=>{f[k]=O(m)});return w.length>0?ic(w):Xc(f)})(r,a,e),toString:()=>"obj{\n"+St(e,a=>pa(a,(l,m,g,f)=>l+" -> "+f.toString(),(l,m)=>"state("+l+")")).join("\n")+"}"}),Tn=e=>({extract:(r,a)=>{const l=St(a,(m,g)=>e.extract(r.concat(["["+g+"]"]),m));return _e(l)},toString:()=>"array("+e.toString()+")"}),so=(e,r)=>{const a=void 0!==r?r:ht;return{extract:(l,m)=>{const g=[];for(const f of e){const w=f.extract(l,m);if(w.stype===ii.Value)return{stype:ii.Value,svalue:a(w.svalue)};g.push(w)}return _e(g)},toString:()=>"oneOf("+St(e,l=>l.toString()).join(", ")+")"}},Qo=yr(Tn,Ct),xn=ie(Et),gr=(e,r)=>Tt(a=>{const l=typeof a;return e(a)?Xc(a):ic(`Expected type: ${r} but got: ${l}`)}),er=gr(Nt,"number"),vr=gr(Zo,"string"),tr=gr(ua,"boolean"),ha=gr(Ut,"function"),fa=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(r=>fa(e[r]));default:return!1}},Wt=Tt(e=>fa(e)?Xc(e):ic("Expected value to be acceptable for sending via postMessage")),wl=(e,r)=>({extract:(a,l)=>jt(l,e).fold(()=>{return g=e,dt(a,()=>'Choice schema did not contain choice key: "'+g+'"');var g},m=>{return g=a,f=l,jt(w=r,x=m).fold(()=>{return O=w,A=x,dt(g,()=>'The chosen schema: "'+A+'" did not exist in branches: '+De(O));var O,A},k=>k.extract(g.concat(["branch: "+x]),f));var g,f,w,x}),toString:()=>"chooseOn("+e+"). Possible values: "+Sr(r)}),Vl=e=>Tt(r=>e(r).fold(ic,Xc)),Ec=(e,r)=>((e,r)=>({extract:(a,l)=>{const m=Sr(l);var f,w;return(f=>f.stype===ii.Value?(f=>{const w=St(f,x=>iu(x,x,{tag:"required",process:{}},r));return Ct(w).extract(a,l)})(f.svalue):f)((f=a,w=m,Tn(Tt(e)).extract(f,w)))},toString:()=>"setOf("+r.toString()+")"}))(a=>e(a).fold(yl,au),r),is=(e,r,a)=>{return l=(w=r.extract([e],f=a)).stype===ii.Error?{stype:ii.Error,serror:(w=>({input:f,errors:w}))(w.serror)}:w,wm(l,pn.error,pn.value);var f,w,l},lc=e=>e.fold(r=>{throw new Error(xl(r))},ht),Aa=(e,r,a)=>lc(is(e,r,a)),xl=e=>"Errors: \n"+(r=>{const a=r.length>10?r.slice(0,10).concat([{path:[],getErrorInfo:ie("... (only showing first ten failures)")}]):r;return St(a,l=>"Failed path: ("+l.path.join(" > ")+")\n"+l.getErrorInfo())})(e.errors).join("\n")+"\n\nInput object: "+De(e.input),Qi=(e,r)=>wl(e,Zn(r,Ct)),kf=(e,r)=>((a,l)=>{const m=ss(l);return{extract:(g,f)=>m().extract(g,f),toString:()=>m().toString()}})(0,r),pt=iu,qi=(e,r)=>({tag:"custom",newKey:e,instantiator:r}),Ip=e=>Vl(r=>Do(e,r)?pn.value(r):pn.error(`Unsupported value: "${r}", choose one of "${e.join(", ")}".`)),Xe=e=>pt(e,e,{tag:"required",process:{}},xn()),wi=(e,r)=>pt(e,e,{tag:"required",process:{}},r),Hp=e=>wi(e,er),Ln=e=>wi(e,vr),cc=(e,r)=>pt(e,e,{tag:"required",process:{}},Ip(r)),ba=e=>wi(e,ha),xr=(e,r)=>pt(e,e,{tag:"required",process:{}},Ct(r)),Vu=(e,r)=>pt(e,e,{tag:"required",process:{}},Qo(r)),zl=(e,r)=>pt(e,e,{tag:"required",process:{}},Tn(r)),In=e=>pt(e,e,{tag:"option",process:{}},xn()),Md=(e,r)=>pt(e,e,{tag:"option",process:{}},r),lu=e=>Md(e,er),li=e=>Md(e,vr),xm=(e,r)=>Md(e,Ip(r)),Hs=e=>Md(e,ha),Jc=(e,r)=>Md(e,Tn(r)),el=(e,r)=>Md(e,Ct(r)),Ie=(e,r)=>pt(e,e,K(r),xn()),Cl=(e,r,a)=>pt(e,e,K(r),a),cu=(e,r)=>Cl(e,r,er),Sl=(e,r)=>Cl(e,r,vr),Qc=(e,r,a)=>Cl(e,r,Ip(a)),Na=(e,r)=>Cl(e,r,tr),Bs=(e,r)=>Cl(e,r,ha),zu=(e,r,a)=>Cl(e,r,Tn(a)),Zu=(e,r,a)=>Cl(e,r,Ct(a)),ho=e=>{let r=e;return{get:()=>r,set:a=>{r=a}}},tl=e=>{if(!Or(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const r=[],a={};return Qt(e,(l,m)=>{const g=Sr(l);if(1!==g.length)throw new Error("one and only one name per case");const f=g[0],w=l[f];if(void 0!==a[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!Or(w))throw new Error("case arguments must be an array");r.push(f),a[f]=(...x)=>{const k=x.length;if(k!==w.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+w.length+" ("+w+"), got "+k);return{fold:(...O)=>{if(O.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+O.length);return O[m].apply(null,x)},match:O=>{const A=Sr(O);if(r.length!==A.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+"\nActual: "+A.join(","));if(!ka(r,D=>Do(A,D)))throw new Error("Not all branches were specified when using match. Specified: "+A.join(", ")+"\nRequired: "+r.join(", "));return O[f].apply(null,x)},log:O=>{console.log(O,{constructors:r,constructor:f,params:x})}}}}),a};tl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ol=(e,r)=>{return a=e,l=r,{[a]:l};var a,l},Ps=e=>(r=>{const a={};return Qt(r,l=>{a[l.key]=l.value}),a})(e),ed=e=>Ut(e)?e:Ke,nl=(e,r,a)=>{let l=e.dom;const m=ed(a);for(;l.parentNode;){l=l.parentNode;const g=ue(l),f=r(g);if(f.isSome())return f;if(m(g))break}return M.none()},Pp=(e,r,a)=>{const l=r(e),m=ed(a);return l.orThunk(()=>m(e)?M.none():nl(e,r,m))},Uu=(e,r)=>se(e.element,r.event.target),Cm={can:fn,abort:Ke,run:yt},kl=e=>{if(!ws(e,"can")&&!ws(e,"abort")&&!ws(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return{...Cm,...e}},Kr=ie,td=Kr("touchstart"),du=Kr("touchmove"),Tc=Kr("touchend"),Dd=Kr("touchcancel"),ci=Kr("mousedown"),kg=Kr("mousemove"),Fp=Kr("mouseout"),_f=Kr("mouseup"),uu=Kr("mouseover"),mu=Kr("focusin"),T0=Kr("focusout"),_l=Kr("keydown"),O0=Kr("keyup"),Bd=Kr("input"),od=Kr("change"),va=Kr("click"),_g=Kr("transitioncancel"),Sm=Kr("transitionend"),uy=Kr("transitionstart"),Ld=Kr("selectstart"),Ks=e=>ie("alloy."+e),my={tap:Ks("tap")},Id=Ks("focus"),km=Ks("blur.post"),Ef=Ks("paste.post"),_m=Ks("receive"),rl=Ks("execute"),ju=Ks("focus.item"),Ss=my.tap,Hd=Ks("longpress"),Eg=Ks("sandbox.close"),Tf=Ks("typeahead.cancel"),Vp=Ks("system.init"),Tg=Ks("system.touchmove"),zp=Ks("system.touchend"),Em=Ks("system.scroll"),Tm=Ks("system.resize"),Oc=Ks("system.attached"),Og=Ks("system.detached"),Pd=Ks("system.dismissRequested"),gy=Ks("system.repositionRequested"),Om=Ks("focusmanager.shifted"),Zp=Ks("slotcontainer.visibility"),Of=Ks("system.external.element.scroll"),nd=Ks("change.tab"),Af=Ks("dismiss.tab"),Am=Ks("highlight"),A0=Ks("dehighlight"),Hn=(e,r)=>{Ag(e,e.element,r,{})},io=(e,r,a)=>{Ag(e,e.element,r,a)},gu=e=>{Hn(e,rl())},Nf=(e,r,a)=>{Ag(e,r,a,{})},Ag=(e,r,a,l)=>{const m={target:r,...l};e.getSystem().triggerEvent(a,r,m)},Ac=(e,r,a,l)=>{e.getSystem().triggerEvent(a,r,l.event)},Dr=e=>Ps(e),Ng=(e,r)=>({key:e,value:kl({abort:r})}),Rg=e=>({key:e,value:kl({run:(r,a)=>{a.event.prevent()}})}),Qe=(e,r)=>({key:e,value:kl({run:r})}),Rf=(e,r,a)=>({key:e,value:kl({run:(l,m)=>{r.apply(void 0,[l,m].concat(a))}})}),Mf=e=>r=>({key:e,value:kl({run:(a,l)=>{Uu(a,l)&&r(a,l)}})}),Mg=(e,r,a)=>{return m=r.partUids[a],Qe(l=e,(g,f)=>{g.getSystem().getByUid(m).each(w=>{Ac(w,w.element,l,f)})});var l,m},pu=(e,r)=>Qe(e,(a,l)=>{const m=l.event,g=a.getSystem().getByDom(m.target).getOrThunk(()=>Pp(m.target,f=>a.getSystem().getByDom(f).toOptional(),Ke).getOr(a));r(a,g,l)}),Fd=e=>Qe(e,(r,a)=>{a.cut()}),N0=e=>Qe(e,(r,a)=>{a.stop()}),hu=(e,r)=>Mf(e)(r),Br=Mf(Oc()),rd=Mf(Og()),Df=Mf(Vp()),Gi=(Dg=rl(),e=>Qe(Dg,e)),Ra=e=>e.dom.innerHTML,Vd=(e,r)=>{const a=Ve(e).dom,l=ue(a.createDocumentFragment()),m=((g,f)=>{const w=(f||document).createElement("div");return w.innerHTML=g,ln(ue(w))})(r,a);Ao(l,m),Lo(e),Co(e,l)},Wu=(e,r)=>ue(e.dom.cloneNode(r)),Nc=e=>{return $s(r=e)?"#shadow-root":(l=>{const m=Ws("div"),g=ue(l.dom.cloneNode(!0));return Co(m,g),Ra(m)})(Wu(r,!1));var r},Rc=Dr([(e=>({key:e,value:kl({can:(a,l)=>{const m=l.event,g=m.originator,f=m.target;return k=f,!(se(x=g,a.element)&&!se(x,k)&&(console.warn(Id()+" did not get interpreted by the desired target. \nOriginator: "+Nc(g)+"\nTarget: "+Nc(f)+"\nCheck the "+Id()+" event handlers"),1));var x,k}})}))(Id())]);var Dg,Bf=Object.freeze({__proto__:null,events:Rc});let Up=0;const Jt=e=>{const r=(new Date).getTime(),a=Math.floor(1e9*Math.random());return Up++,e+"_"+a+Up+String(r)},Lf=ie("alloy-id-"),fu=ie("data-alloy-id"),R0=Lf(),py=fu(),M0=(e,r)=>{Object.defineProperty(e.dom,py,{value:r,writable:!0})},jp=e=>{const r=rn(e)?e.dom[py]:null;return M.from(r)},sd=e=>Jt(e),D0=ht,Wp=e=>{const r=m=>`The component must be in a context to execute: ${m}`+(e?"\n"+Nc(e().element)+" is not in context.":""),a=m=>()=>{throw new Error(r(m))},l=m=>()=>{console.warn(r(m))};return{debugInfo:ie("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Ke}},hy=Wp(),Nm=e=>St(e,r=>As(r,"/*")?r.substring(0,r.length-2):r),bu=(e,r)=>{const a=e.toString(),l=a.indexOf(")")+1,m=a.indexOf("("),g=a.substring(m+1,l-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:r,parameters:Nm(g)}),e},Rm=Jt("alloy-premade"),$p=e=>(Object.defineProperty(e.element.dom,Rm,{value:e.uid,writable:!0}),ol(Rm,e)),Bg=e=>jt(e,Rm),Ma=e=>((r,a)=>{const l=a.toString(),m=l.indexOf(")")+1,g=l.indexOf("("),f=l.substring(g+1,m-1).split(/,\s*/);return r.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Nm(f.slice(1))}),r})((r,...a)=>e(r.getApis(),r,...a),e),El={init:()=>na({readState:ie("No State required")})},na=e=>e,Zl=(e,r)=>{const a={};return Nn(e,(l,m)=>{Nn(l,(g,f)=>{const w=jt(a,f).getOr([]);a[f]=w.concat([r(m,g)])})}),a},Mc=e=>({classes:kn(e.classes)?[]:e.classes,attributes:kn(e.attributes)?{}:e.attributes,styles:kn(e.styles)?{}:e.styles}),zd=e=>e.cHandler,If=(e,r)=>({name:e,handler:r}),fy=(e,r)=>{const a={};return Qt(e,l=>{a[l.name()]=l.handlers(r)}),a},Dc="alloy.base.behaviour",Hf=Ct([pt("dom","dom",{tag:"required",process:{}},Ct([Xe("tag"),Ie("styles",{}),Ie("classes",[]),Ie("attributes",{}),In("value"),In("innerHtml")])),Xe("components"),Xe("uid"),Ie("events",{}),Ie("apis",{}),pt("eventOrder","eventOrder",(sl={[rl()]:["disabling",Dc,"toggling","typeaheadevents"],[Id()]:[Dc,"focusing","keying"],[Vp()]:[Dc,"disabling","toggling","representing"],[Bd()]:[Dc,"representing","streaming","invalidating"],[Og()]:[Dc,"representing","item-events","tooltipping"],[ci()]:["focusing",Dc,"item-type-events"],[td()]:["focusing",Dc,"item-type-events"],[uu()]:["item-type-events","tooltipping"],[_m()]:["receiving","reflecting","tooltipping"]},re(ie(sl))),xn()),In("domModification")]),Ig=e=>e.events,Pf=(e,r)=>{const a=qr(e,r);return void 0===a||""===a?[]:a.split(" ")},ad=e=>void 0!==e.dom.classList,Lr=e=>Pf(e,"class"),B0=(e,r)=>((a,l,m)=>{const g=Pf(a,l).concat([m]);return No(a,l,g.join(" ")),!0})(e,"class",r),id=(e,r)=>((a,l,m)=>{const g=zt(Pf(a,l),f=>f!==m);return g.length>0?No(a,l,g.join(" ")):Oo(a,l),!1})(e,"class",r),Gn=(e,r)=>{ad(e)?e.dom.classList.add(r):B0(e,r)},Mm=e=>{0===(ad(e)?e.dom.classList:Lr(e)).length&&Oo(e,"class")},ms=(e,r)=>{ad(e)?e.dom.classList.remove(r):id(e,r),Mm(e)},Li=(e,r)=>ad(e)&&e.dom.classList.contains(r),Ii=(e,r)=>{Qt(r,a=>{Gn(e,a)})},ks=(e,r)=>{Qt(r,a=>{ms(e,a)})},Ff=e=>ad(e)?(r=>{const a=r.dom.classList,l=new Array(a.length);for(let m=0;m<a.length;m++){const g=a.item(m);null!==g&&(l[m]=g)}return l})(e):Lr(e),Ki=e=>e.dom.value,ld=(e,r)=>{if(void 0===r)throw new Error("Value.set was undefined");e.dom.value=r},qp=(e,r,a)=>{a.fold(()=>Co(e,r),l=>{se(l,r)||(xt(l,r),tn(l))})},Bc=(e,r,a)=>{const l=St(r,a),m=ln(e);return Qt(m.slice(l.length),tn),l},dc=(e,r,a,l)=>{const m=un(e,r),g=l(a,m),f=(k=m,un(e,r).map(O=>{if(k.exists(A=>!se(A,O))){const A=k.map(Dt).getOr("span"),D=Ws(A);return xt(O,D),D}return O}));var k;return qp(e,g.element,f),g},$u=(e,r)=>{const a=Sr(e),l=Sr(r);return{toRemove:qa(l,a),toSet:(f=>{const x={},k={};return cr(f,(O,A)=>!Fo(r,A)||O!==r[A],Ni(x),Ni(k)),{t:x,f:k}})(e).t}},Hg=(e,r)=>{const a=()=>D,l=ho(hy),m=lc(is("custom.definition",Hf,e)),g=(e=>{const r=(a=>{const l=jt(a,"behaviours").getOr({});return Vt(Sr(l),m=>{const g=l[m];return rt(g)?[g.me]:[]})})(e);return((m,g)=>{const f=St(g,x=>el(x.name(),[Xe("config"),Ie("state",El)])),w=is("component.behaviours",Ct(f),m.behaviours).fold(x=>{throw new Error(xl(x)+"\nComplete spec:\n"+JSON.stringify(m,null,2))},ht);return{list:g,data:Zn(w,x=>{const k=x.map(O=>({config:O.config,state:O.state.init(O.config)}));return ie(k)})}})(e,r)})(e),f=g.list,w=(P=>P.data)(g),x=((P,Z,te)=>{const oe={...(ae=P).dom,uid:ae.uid,domChildren:St(ae.components,xe=>xe.element)};var ae;const X=P.domModification.fold(()=>Mc({}),Mc);var le,me;return le=oe,me=Z.length>0?((xe,ze,ot,st)=>{const nt={...ze};Qt(ot,On=>{nt[On.name()]=On.exhibit(xe,st)});const Ht=Zl(nt,(On,Qr)=>({name:On,modification:Qr})),Yt=On=>Bn(On,(Qr,Ls)=>({...Ls.modification,...Qr}),{}),go=Bn(Ht.classes,(On,Qr)=>Qr.modification.concat(On),[]),Uo=Yt(Ht.attributes),$o=Yt(Ht.styles);return Mc({classes:go,attributes:Uo,styles:$o})})(te,{"alloy.base.modification":X},Z,oe):X,{...le,attributes:{...le.attributes,...me.attributes},styles:{...le.styles,...me.styles},classes:le.classes.concat(me.classes)}})(m,f,w),k=((e,r)=>{const a=r.filter(l=>{return!(Dt(l)!==e.tag||(m=e,m.innerHtml.isSome()&&m.domChildren.length>0)||(m=>Fo(m.dom,Rm))(l));var m}).bind(l=>((m,g)=>{try{const f=((w,x)=>{const{class:k,style:O,...A}=no(x.dom.attributes,(le,me)=>(le[me.name]=me.value,le),{}),{toSet:D,toRemove:P}=$u(w.attributes,A),Z=tu(x),{toSet:te,toRemove:oe}=$u(w.styles,Z),ae=Ff(x),X=qa(ae,w.classes),j=qa(w.classes,ae);return Qt(P,ne=>Oo(x,ne)),Ta(x,D),Ii(x,j),ks(x,X),Qt(oe,ne=>Yn(x,ne)),wt(x,te),w.innerHtml.fold(()=>{var le;Bc(le=x,w.domChildren,(xe,ze)=>{const ot=un(le,ze);return qp(le,xe,ot),xe})},ne=>{Vd(x,ne)}),(()=>{const ne=x,le=w.value.getOrUndefined();le!==Ki(ne)&&ld(ne,le??"")})(),x})(m,g);return M.some(f)}catch{return M.none()}})(e,l)).getOrThunk(()=>(l=>{const m=Ws(l.tag);return Ta(m,l.attributes),Ii(m,l.classes),wt(m,l.styles),l.innerHtml.each(f=>Vd(m,f)),Ao(m,l.domChildren),l.value.each(f=>{ld(m,f)}),m})(e));return M0(a,e.uid),a})(x,r),O=((P,Z,te)=>{const oe={"alloy.base.behaviour":Ig(P)};return(ae=te,X=P.eventOrder,j=Z,ne=oe,((e,r)=>(a=>{const m=(f=>{const w=[],x=[];return Qt(f,k=>{k.fold(O=>{w.push(O)},O=>{x.push(O)})}),{errors:w,values:x}})(a);return m.errors.length>0?pn.error(dn(m.errors)):(w={},pn.value(0===(f=m.values).length?w:Zr(w,F.apply(void 0,f))));var f,w})(Po(e,(a,l)=>(1===a.length?pn.value(a[0].handler):((e,r,a)=>{const l=r[a];return l?((m,g,f,w)=>{try{const x=ji(f,(k,O)=>{const A=k[g],D=O[g],P=w.indexOf(A),Z=w.indexOf(D);if(-1===P)throw new Error("The ordering for "+m+" does not have an entry for "+A+".\nOrder specified: "+JSON.stringify(w,null,2));if(-1===Z)throw new Error("The ordering for "+m+" does not have an entry for "+D+".\nOrder specified: "+JSON.stringify(w,null,2));return P<Z?-1:Z<P?1:0});return pn.value(x)}catch(x){return pn.error([x])}})("Event: "+a,"name",e,l).map(m=>(g=>({can:(x=>(...O)=>no(x,(A,D)=>{return A&&(P=D,P.can).apply(void 0,O);var P},!0))(g),abort:(x=>(...O)=>no(x,(A,D)=>{return A||(P=D,P.abort).apply(void 0,O);var P},!1))(g),run:(...x)=>{Qt(g,k=>{k.run.apply(void 0,x)})}}))(St(m,g=>g.handler))):pn.error(["The event ("+a+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(St(e,f=>f.name),null,2)])})(a,r,l)).map(m=>{const g=(w=>{const x=Ut(k=w)?{can:fn,abort:Ke,run:k}:k;var k;return(k,O,...A)=>{const D=[k,O].concat(A);x.abort.apply(void 0,D)?O.stop():x.can.apply(void 0,D)&&x.run.apply(void 0,D)}})(m),f=a.length>1?zt(r[l],w=>zn(a,x=>x.name===w)).join(" > "):a[0].name;return ol(l,((w,x)=>({handler:w,purpose:x}))(g,f))}))))(((me,xe,ze)=>{const ot={...ze,...fy(xe,me)};return Zl(ot,If)})(ae,j,ne),X)).getOrDie();var ae,X,j,ne})(m,f,w),A=ho(m.components),D={uid:e.uid,getSystem:l.get,config:P=>{const Z=w;return(Ut(Z[P.name()])?Z[P.name()]:()=>{throw new Error("Could not find "+P.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:P=>Ut(w[P.name()]),spec:e,readState:P=>w[P]().map(Z=>Z.state.readState()).getOr("not enabled"),getApis:()=>m.apis,connect:P=>{l.set(P)},disconnect:()=>{l.set(Wp(a))},element:k,syncComponents:()=>{const P=ln(k),Z=Vt(P,te=>l.get().getByDom(te).fold(()=>[],Ui));A.set(Z)},components:A.get,events:O};return D},Yr=e=>{const r=Le(e);return Vf({element:r})},Vf=e=>{const r=Aa("external.component",ao([Xe("element"),In("uid")]),e),a=ho(Wp()),l=r.uid.getOrThunk(()=>sd("external"));M0(r.element,l);const m={uid:l,getSystem:a.get,config:M.none,hasConfigured:Ke,connect:g=>{a.set(g)},disconnect:()=>{a.set(Wp(()=>m))},getApis:()=>({}),element:r.element,spec:e,readState:ie("No state"),syncComponents:yt,components:ie([]),events:{}};return $p(m)},L0=sd,Kp=(e,r)=>Bg(e).getOrThunk(()=>{return((a,l)=>{const{events:m,...g}=D0(a),f=((x,k)=>{const O=jt(x,"components").getOr([]);return k.fold(()=>St(O,di),A=>St(O,(D,P)=>Kp(D,un(A,P))))})(g,l),w={...g,events:{...Bf,...m},components:f};return pn.value(Hg(w,l))})((a=e,Fo(a,"uid")?e:{uid:L0(""),...e}),r).getOrDie();var a}),di=e=>Kp(e,M.none()),Tl=$p;var sl,zf=(e,r,a,l,m)=>e(a,l)?M.some(a):Ut(m)&&m(a)?M.none():r(a,l,m);const vu=(e,r,a)=>{let l=e.dom;const m=Ut(a)?a:Ke;for(;l.parentNode;){l=l.parentNode;const g=ue(l);if(r(g))return M.some(g);if(m(g))break}return M.none()},I0=(e,r,a)=>zf((l,m)=>m(l),vu,e,r,a),Yp=(e,r,a)=>I0(e,r,a).isSome(),al=(e,r,a)=>vu(e,l=>Fr(l,r),a),qu=(e,r)=>Ue(e.dom.childNodes,m=>{return g=ue(m),Fr(g,r);var g}).map(ue),Xr=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return br(m)?M.none():M.from(m.querySelector(a)).map(ue)})(r,e),uc=(e,r,a)=>zf((l,m)=>Fr(l,m),al,e,r,a),Bm="aria-controls",yu=()=>{const e=Jt(Bm);return{id:e,link:r=>{No(r,Bm,e)},unlink:r=>{Oo(r,Bm)}}},Ys=(e,r)=>{return Yp(r,a=>se(a,e.element),Ke)||(a=e,(m=r,I0(m,g=>{if(!rn(g))return!1;const f=qr(g,"id");return void 0!==f&&f.indexOf(Bm)>-1}).bind(g=>{const f=qr(g,"id"),w=Wn(g);return Xr(w,`[${Bm}="${f}"]`)})).exists(m=>Ys(a,m)));var a,m};var Zd;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(Zd||(Zd={}));const Gu=ho({}),Ku=["alloy/data/Fields","alloy/debugging/Debugging"],H0=(e,r,a)=>((l,m,g)=>{switch(jt(Gu.get(),l).orThunk(()=>{const f=Sr(Gu.get());return hs(f,w=>l.indexOf(w)>-1?M.some(Gu.get()[w]):M.none())}).getOr(Zd.NORMAL)){case Zd.NORMAL:return g(vy());case Zd.LOGGING:{const f=((x,k)=>{const O=[],A=(new Date).getTime();return{logEventCut:(D,P,Z)=>{O.push({outcome:"cut",target:P,purpose:Z})},logEventStopped:(D,P,Z)=>{O.push({outcome:"stopped",target:P,purpose:Z})},logNoParent:(D,P,Z)=>{O.push({outcome:"no-parent",target:P,purpose:Z})},logEventNoHandlers:(D,P)=>{O.push({outcome:"no-handlers-left",target:P})},logEventResponse:(D,P,Z)=>{O.push({outcome:"response",purpose:Z,target:P})},write:()=>{const D=(new Date).getTime();Do(["mousemove","mouseover","mouseout",Vp()],x)||console.log(x,{event:x,time:D-A,target:k.dom,sequence:St(O,P=>Do(["cut","stopped","response"],P.outcome)?"{"+P.purpose+"} "+P.outcome+" at ("+Nc(P.target)+")":P.outcome)})}}})(l,m),w=g(f);return f.write(),w}case Zd.STOP:return!0}})(e,r,a),vy=ie({logEventCut:yt,logEventStopped:yt,logNoParent:yt,logEventNoHandlers:yt,logEventResponse:yt,write:yt}),Pg=ie([Xe("menu"),Xe("selectedMenu")]),Xp=ie([Xe("item"),Xe("selectedItem")]);ie(Ct(Xp().concat(Pg())));const Zf=ie(Ct(Xp())),yy=xr("initSize",[Xe("numColumns"),Xe("numRows")]),wu=()=>xr("markers",[Xe("backgroundMenu")].concat(Pg()).concat(Xp())),Yu=e=>xr("markers",St(e,Xe)),xu=(e,r,a)=>((()=>{const l=new Error;if(void 0!==l.stack){const m=l.stack.split("\n");Ue(m,g=>g.indexOf("alloy")>0&&!zn(Ku,f=>g.indexOf(f)>-1)).getOr("unknown")}})(),pt(r,r,a,Vl(l=>pn.value((...m)=>l.apply(void 0,m))))),Rn=e=>xu(0,e,K(yt)),Hi=e=>xu(0,e,K(M.none)),mc=e=>xu(0,e,{tag:"required",process:{}}),Jp=e=>xu(0,e,{tag:"required",process:{}}),Vr=(e,r)=>qi(e,ie(r)),P0=e=>qi(e,ht),Uf=ie(yy),Ya=(e,r,a,l,m,g,f,w=!1)=>({x:e,y:r,bubble:a,direction:l,placement:m,restriction:g,label:`${f}-${m}`,alwaysFit:w}),Ol=tl([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ud=Ol.southeast,qe=Ol.southwest,Fg=Ol.northeast,Qp=Ol.northwest,Lc=Ol.south,F0=Ol.north,V0=Ol.east,z0=Ol.west,Xu=(e,r,a,l)=>{const m=e+r;return m>l?a:m<a?l:m},Al=(e,r,a)=>Math.min(Math.max(e,r),a),Xa=(e,r)=>wr(["left","right","top","bottom"],a=>jt(r,a).map(l=>((m,g)=>{switch(g){case 1:return m.x;case 0:return m.x+m.width;case 2:return m.y;case 3:return m.y+m.height}})(e,l))),Cu="layout",Z0=e=>e.x,eh=(e,r)=>e.x+e.width/2-r.width/2,U0=(e,r)=>e.x+e.width-r.width,th=(e,r)=>e.y-r.height,jf=e=>e.y+e.height,Wf=(e,r)=>e.y+e.height/2-r.height/2,Va=(e,r,a)=>Ya(Z0(e),jf(e),a.southeast(),Ud(),"southeast",Xa(e,{left:1,top:3}),Cu),Fs=(e,r,a)=>Ya(U0(e,r),jf(e),a.southwest(),qe(),"southwest",Xa(e,{right:0,top:3}),Cu),ui=(e,r,a)=>Ya(Z0(e),th(e,r),a.northeast(),Fg(),"northeast",Xa(e,{left:1,bottom:2}),Cu),Tr=(e,r,a)=>Ya(U0(e,r),th(e,r),a.northwest(),Qp(),"northwest",Xa(e,{right:0,bottom:2}),Cu),mi=(e,r,a)=>Ya(eh(e,r),th(e,r),a.north(),F0(),"north",Xa(e,{bottom:2}),Cu),ya=(e,r,a)=>Ya(eh(e,r),jf(e),a.south(),Lc(),"south",Xa(e,{top:3}),Cu),$f=(e,r,a)=>{return Ya((l=e).x+l.width,Wf(e,r),a.east(),V0(),"east",Xa(e,{left:0}),Cu);var l},xi=(e,r,a)=>Ya(e.x-r.width,Wf(e,r),a.west(),z0(),"west",Xa(e,{right:1}),Cu),Ic=()=>[Va,Fs,ui,Tr,ya,mi,$f,xi],Vg=()=>[Fs,Va,Tr,ui,ya,mi,$f,xi],j0=()=>[ui,Tr,Va,Fs,mi,ya],Ju=()=>[Tr,ui,Fs,Va,mi,ya],oh=()=>[Va,Fs,ui,Tr,ya,mi],zg=()=>[Fs,Va,Tr,ui,ya,mi];var wy=Object.freeze({__proto__:null,events:e=>Dr([Qe(_m(),(r,a)=>{const l=e.channels,m=Sr(l),g=a,f=(w=m,(x=g).universal?w:zt(w,k=>Do(x.channels,k)));var w,x;Qt(f,w=>{const x=l[w],k=x.schema,O=Aa("channel["+w+"] data\nReceiver: "+Nc(r.element),k,g.data);x.onReceive(r,O)})})])}),W0=[wi("channels",Ec(pn.value,ao([mc("onReceive"),Ie("schema",xn())])))];const $0=(e,r,a)=>Df((l,m)=>{a(l,e,r)}),xy=e=>({key:e,value:void 0}),qf=(e,r,a,l,m,g,f)=>{const w=O=>ws(O,a)?O[a]():M.none(),x=Zn(m,(O,A)=>{return D=a,((te,oe,ae)=>{const X=ae.toString(),j=X.indexOf(")")+1,ne=X.indexOf("("),le=X.substring(ne+1,j-1).split(/,\s*/);return te.toFunctionAnnotation=()=>({name:oe,parameters:Nm(le.slice(0,1).concat(le.slice(3)))}),te})((te,...oe)=>{const ae=[te].concat(oe);return te.config({name:ie(D)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+D+". Using API: "+Z)},X=>{const j=Array.prototype.slice.call(ae,1);return P.apply(void 0,[te,X.config,X.state].concat(j))})},Z=A,P=O);var D,P,Z}),k={...Zn(g,(O,A)=>bu(O,A)),...x,revoke:hr(xy,a),config:O=>{const A=Aa(a+"-config",e,O);return{key:a,value:{config:A,me:k,configAsRaw:ss(()=>Aa(a+"-config",e,O)),initialConfig:O,state:f}}},schema:ie(r),exhibit:(O,A)=>wn(w(O),jt(l,"exhibit"),(D,P)=>P(A,D.config,D.state)).getOrThunk(()=>Mc({})),name:ie(a),handlers:O=>w(O).map(A=>jt(l,"events").getOr(()=>({}))(A.config,A.state)).getOr({})};return k},Re=e=>Ps(e),Gf=ao([Xe("fields"),Xe("name"),Ie("active",{}),Ie("apis",{}),Ie("state",El),Ie("extra",{})]),Da=e=>{const r=Aa("Creating behaviour: "+e.name,Gf,e);return((a,l,m,g,f,w)=>{const x=ao(a),k=el(l,[(O=a,Md("config",ao(O)))]);var O;return qf(x,k,l,m,g,f,w)})(r.fields,r.name,r.active,r.apis,r.extra,r.state)},Kf=ao([Xe("branchKey"),Xe("branches"),Xe("name"),Ie("active",{}),Ie("apis",{}),Ie("state",El),Ie("extra",{})]),Zg=e=>{const r=Aa("Creating behaviour: "+e.name,Kf,e);return((a,l,m,g,f,w)=>{const x=a,k=el(l,[Md("config",a)]);return qf(x,k,l,m,g,f,w)})(Qi(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},Yf=ie(void 0),il=Da({fields:W0,name:"receiving",active:wy});var oC=Object.freeze({__proto__:null,exhibit:(e,r)=>Mc({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const Ul=(e,r=!1)=>e.dom.focus({preventScroll:r}),q0=e=>e.dom.blur(),za=e=>{const r=Wn(e).dom;return e.dom===r.activeElement},Yi=(e=Ka())=>M.from(e.dom.activeElement).map(ue),Hc=e=>Yi(Wn(e)).filter(r=>e.dom.contains(r.dom)),nh=(e,r)=>{const a=Wn(r),l=Yi(a).bind(g=>{const f=w=>se(g,w);return f(r)?M.some(r):((w,x)=>{const k=O=>{for(let A=0;A<O.childNodes.length;A++){const D=ue(O.childNodes[A]);if(x(D))return M.some(D);const P=k(O.childNodes[A]);if(P.isSome())return P}return M.none()};return k(w.dom)})(r,f)}),m=e(r);return l.each(g=>{Yi(a).filter(f=>se(f,g)).fold(()=>{Ul(g)},yt)}),m},jl=(e,r,a,l,m)=>{const g=f=>f+"px";return{position:e,left:r.map(g),top:a.map(g),right:l.map(g),bottom:m.map(g)}},G0=(e,r)=>{var a;Mi(e,(a=r,{...a,position:M.some(a.position)}))},rh=tl([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Xf=(e,r,a,l,m,g)=>{const f=r.rect,w=f.x-a,x=f.y-l,k=m-(w+f.width),O=g-(x+f.height),A=M.some(w),D=M.some(x),P=M.some(k),Z=M.some(O),te=M.none();return r.direction.fold(()=>jl(e,A,D,te,te),()=>jl(e,te,D,P,te),()=>jl(e,A,te,te,Z),()=>jl(e,te,te,P,Z),()=>jl(e,A,D,te,te),()=>jl(e,A,te,te,Z),()=>jl(e,A,D,te,te),()=>jl(e,te,D,P,te))},Jf=(e,r)=>e.fold(()=>{const a=r.rect;return jl("absolute",M.some(a.x),M.some(a.y),M.none(),M.none())},(a,l,m,g)=>Xf("absolute",r,a,l,m,g),(a,l,m,g)=>Xf("fixed",r,a,l,m,g)),Qf=(e,r)=>{const a=hr(su,r),l=e.fold(a,a,()=>{const f=mn();return su(r).translate(-f.left,-f.top)}),m=Oa(r),g=Ga(r);return Gr(l.left,l.top,m,g)},Cy=(e,r)=>r.fold(()=>e.fold(ys,ys,Gr),a=>e.fold(ie(a),ie(a),()=>{const l=K0(e,a.x,a.y);return Gr(l.left,l.top,a.width,a.height)})),K0=(e,r,a)=>{const l=En(r,a);return e.fold(ie(l),ie(l),()=>{const m=mn();return l.translate(-m.left,-m.top)})},Sy=rh.relative,nC=rh.fixed,sh="data-alloy-placement",ky=e=>Ns(e,sh),Ug=tl([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Su=e=>{const r=ho(M.none()),a=()=>r.get().each(e);return{clear:()=>{a(),r.set(M.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:l=>{a(),r.set(M.some(l))}}},jg=()=>Su(e=>e.unbind()),Ur=()=>{const e=Su(yt);return{...e,on:r=>e.get().each(r)}},_y=fn,Pi=(e,r,a)=>Ge(e,r,_y,a,!1),ah=(e,r,a)=>Ge(e,r,_y,a,!0),Y0=Pe,Wg=["top","bottom","right","left"],ih="data-alloy-transition-timer",e1=(e,r)=>{((a,l)=>{const m=oc.max(a,l,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Bo(a,"max-height",m+"px")})(e,Math.floor(r))},$g=ie((e,r)=>{e1(e,r),wt(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Qu=ie((e,r)=>{e1(e,r)}),J0=(e,r,a)=>void 0===e[r]?a:e[r],Ey=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],gc=(e,r,a,l=1)=>{const m=e*l,g=r*l,f=x=>jt(a,x).getOr([]),w=(x,k,O)=>{const A=qa(Ey,O);return{offset:En(x,k),classesOn:Vt(O,f),classesOff:Vt(A,f)}};return{southeast:()=>w(-e,r,["top","alignLeft"]),southwest:()=>w(e,r,["top","alignRight"]),south:()=>w(-e/2,r,["top","alignCentre"]),northeast:()=>w(-e,-r,["bottom","alignLeft"]),northwest:()=>w(e,-r,["bottom","alignRight"]),north:()=>w(-e/2,-r,["bottom","alignCentre"]),east:()=>w(e,-r/2,["valignCentre","left"]),west:()=>w(-e,-r/2,["valignCentre","right"]),insetNortheast:()=>w(m,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-m,g,["top","alignRight","inset"]),insetNorth:()=>w(-m/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(m,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-m,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-m/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-m,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(m,-g/2,["valignCentre","left","inset"])}},lh=()=>gc(0,0,{}),pc=ht,Lm=(e,r)=>a=>"rtl"===rC(a)?r:e,rC=e=>"rtl"===cs(e,"direction")?"rtl":"ltr";var jd;!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(jd||(jd={}));const ch="data-alloy-vertical-dir",Ty=e=>Yp(e,r=>rn(r)&&qr(r,"data-alloy-vertical-dir")===jd.BottomToTop),cd=()=>el("layouts",[Xe("onLtr"),Xe("onRtl"),In("onBottomLtr"),In("onBottomRtl")]),dh=(e,r,a,l,m,g,f)=>{const w=f.map(Ty).getOr(!1),x=r.layouts.map(D=>D.onLtr(e)),k=r.layouts.map(D=>D.onRtl(e)),O=w?r.layouts.bind(D=>D.onBottomLtr.map(P=>P(e))).or(x).getOr(m):x.getOr(a),A=w?r.layouts.bind(D=>D.onBottomRtl.map(P=>P(e))).or(k).getOr(g):k.getOr(l);return Lm(O,A)(e)};var t1=[Xe("hotspot"),In("bubble"),Ie("overrides",{}),cd(),Vr("placement",(e,r,a)=>{const m=Qf(a,r.hotspot.element),g=dh(e.element,r,oh(),zg(),j0(),Ju(),M.some(r.hotspot.element));return M.some(pc({anchorBox:m,bubble:r.bubble.getOr(lh()),overrides:r.overrides,layouts:g}))})],Oy=[Xe("x"),Xe("y"),Ie("height",0),Ie("width",0),Ie("bubble",lh()),Ie("overrides",{}),cd(),Vr("placement",(e,r,a)=>{const l=K0(a,r.x,r.y),m=Gr(l.left,l.top,r.width,r.height),g=dh(e.element,r,Ic(),Vg(),Ic(),Vg(),M.none());return M.some(pc({anchorBox:m,bubble:r.bubble,overrides:r.overrides,layouts:g}))})];const Q0=tl([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),o1=e=>e.fold(ht,(r,a,l)=>r.translate(-a,-l)),sC=e=>e.fold(ht,ht),em=e=>no(e,(r,a)=>r.translate(a.left,a.top),En(0,0)),n1=e=>{const r=St(e,sC);return em(r)},r1=Q0.screen,s1=Q0.absolute,uh=(e,r,a)=>{const l=Ve(e.element),m=mn(l),g=((f,w,x)=>{const k=Rt(x.root).dom;return M.from(k.frameElement).map(ue).filter(O=>{const A=Ve(O),D=Ve(f.element);return se(A,D)}).map(si)})(e,0,a).getOr(m);return s1(g,m.left,m.top)},qg=(e,r,a,l)=>{const m=r1(En(e,r));return M.some(((g,f,w)=>({point:g,width:f,height:w}))(m,a,l))},eb=(e,r,a,l,m)=>e.map(g=>{const f=[r,g.point],w=l.fold(()=>n1(f),()=>n1(f),()=>(j=>{const ne=St(j,o1);return em(ne)})(f)),A={x:w.left,y:w.top,width:g.width,height:g.height},D=a.showAbove?j0():oh(),P=a.showAbove?Ju():zg(),Z=dh(m,a,D,P,D,P,M.none());return pc({anchorBox:A,bubble:a.bubble.getOr(lh()),overrides:a.overrides,layouts:Z})});var a1=[Xe("node"),Xe("root"),In("bubble"),cd(),Ie("overrides",{}),Ie("showAbove",!1),Vr("placement",(e,r,a)=>{const l=uh(e,0,r);return r.node.filter(Is).bind(m=>{const g=m.dom.getBoundingClientRect(),f=qg(g.left,g.top,g.width,g.height),w=r.node.getOr(e.element);return eb(f,l,r,a,w)})})];const mh=(e,r,a,l)=>({start:e,soffset:r,finish:a,foffset:l}),Ay=(tl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e=>e.fold(ht,ht,ht)),dd=tl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gg={domRange:dd.domRange,relative:dd.relative,exact:dd.exact,exactFromRange:e=>dd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const r=e.match({domRange:l=>ue(l.startContainer),relative:(l,m)=>Ay(l),exact:(l,m,g,f)=>l});return Rt(r)},range:mh},Ny=(e,r,a)=>{const l=e.document.createRange();var m,g;return m=l,r.fold(g=>{m.setStartBefore(g.dom)},(g,f)=>{m.setStart(g.dom,f)},g=>{m.setStartAfter(g.dom)}),g=l,a.fold(w=>{g.setEndBefore(w.dom)},(w,x)=>{g.setEnd(w.dom,x)},w=>{g.setEndAfter(w.dom)}),l},l1=(e,r,a,l,m)=>{const g=e.document.createRange();return g.setStart(r.dom,a),g.setEnd(l.dom,m),g},tb=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),Im=tl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gh=(e,r,a)=>r(ue(a.startContainer),a.startOffset,ue(a.endContainer),a.endOffset),c1=(e,r)=>{return(a=e,l=r,((g,f)=>{const w=f.ltr();return w.collapsed?f.rtl().filter(x=>!1===x.collapsed).map(x=>Im.rtl(ue(x.endContainer),x.endOffset,ue(x.startContainer),x.startOffset)).getOrThunk(()=>gh(0,Im.ltr,w)):gh(0,Im.ltr,w)})(0,(g=a,l.match({domRange:w=>({ltr:ie(w),rtl:M.none}),relative:(w,x)=>({ltr:ss(()=>Ny(g,w,x)),rtl:ss(()=>M.some(Ny(g,x,w)))}),exact:(w,x,k,O)=>({ltr:ss(()=>l1(g,w,x,k,O)),rtl:ss(()=>M.some(l1(g,k,O,w,x)))})})))).match({ltr:(a,l,m,g)=>{const f=e.document.createRange();return f.setStart(a.dom,l),f.setEnd(m.dom,g),f},rtl:(a,l,m,g)=>{const f=e.document.createRange();return f.setStart(m.dom,g),f.setEnd(a.dom,l),f}});var a,l,g},ob=(e,r,a)=>zt(((l,m)=>{const g=Ut(m)?m:Ke;let f=l.dom;const w=[];for(;null!=f.parentNode;){const x=f.parentNode,k=ue(x);if(w.push(k),!0===g(k))break;f=x}return w})(e,a),r),Fi=(e,r)=>((a,l)=>{const m=void 0===l?document:l.dom;return br(m)?[]:St(m.querySelectorAll(a),ue)})(r,e),Ry=e=>{if(e.rangeCount>0){const r=e.getRangeAt(0),a=e.getRangeAt(e.rangeCount-1);return M.some(mh(ue(r.startContainer),r.startOffset,ue(a.endContainer),a.endOffset))}return M.none()},My=e=>{if(null===e.anchorNode||null===e.focusNode)return Ry(e);{const r=ue(e.anchorNode),a=ue(e.focusNode);return((l,m,g,f)=>{const w=((k,O,A,D)=>{const P=Ve(k).dom.createRange();return P.setStart(k.dom,O),P.setEnd(A.dom,D),P})(l,m,g,f),x=se(l,g)&&m===f;return w.collapsed&&!x})(r,e.anchorOffset,a,e.focusOffset)?M.some(mh(r,e.anchorOffset,a,e.focusOffset)):Ry(e)}},nb=(e,r)=>(a=>{const l=a.getClientRects(),m=l.length>0?l[0]:a.getBoundingClientRect();return m.width>0||m.height>0?M.some(m).map(tb):M.none()})(c1(e,r)),aC=(e=>{const a=l=>e(l)?M.from(l.dom.nodeValue):M.none();return{get:l=>{if(!e(l))throw new Error("Can only get text value of a text node");return a(l).getOr("")},getOption:a,set:(l,m)=>{if(!e(l))throw new Error("Can only set raw text value of a text node");l.dom.nodeValue=m}}})(An),d1=(e,r)=>({element:e,offset:r}),rb=(e,r)=>An(e)?d1(e,r):((a,l)=>{const m=ln(a);if(0===m.length)return d1(a,l);if(l<m.length)return d1(m[l],0);{const g=m[m.length-1],f=An(g)?(w=g,aC.get(w)).length:ln(g).length;return d1(g,f)}var w})(e,r),ph=e=>void 0!==e.foffset,hh=(e,r)=>r.getSelection.getOrThunk(()=>()=>{return(l=e,M.from(l.getSelection())).filter(l=>l.rangeCount>0).bind(My);var l})().map(a=>{if(ph(a)){const l=rb(a.start,a.soffset),m=rb(a.finish,a.foffset);return Gg.range(l.element,l.offset,m.element,m.offset)}return a});var Dy=[In("getSelection"),Xe("root"),In("bubble"),cd(),Ie("overrides",{}),Ie("showAbove",!1),Vr("placement",(e,r,a)=>{const l=Rt(r.root).dom,m=uh(e,0,r),g=hh(l,r).bind(w=>{if(ph(w))return(k=l,O=Gg.exactFromRange(w),(A=>{const D=A.getBoundingClientRect();return D.width>0||D.height>0?M.some(D).map(tb):M.none()})(c1(k,O))).orThunk(()=>{const k=Le("\ufeff");xt(w.start,k);const O=nb(l,Gg.exact(k,0,k,1));return tn(k),O}).bind(k=>qg(k.left,k.top,k.width,k.height));var k,O;{const x=Zn(w,O=>O.dom.getBoundingClientRect()),k={left:Math.min(x.firstCell.left,x.lastCell.left),right:Math.max(x.firstCell.right,x.lastCell.right),top:Math.min(x.firstCell.top,x.lastCell.top),bottom:Math.max(x.firstCell.bottom,x.lastCell.bottom)};return qg(k.left,k.top,k.right-k.left,k.bottom-k.top)}}),f=hh(l,r).bind(w=>ph(w)?rn(w.start)?M.some(w.start):eo(w.start):M.some(w.firstCell)).getOr(e.element);return eb(g,m,r,a,f)})];const fh="link-layout",sb=e=>e.x+e.width,ab=(e,r)=>e.x-r.width,Hm=(e,r)=>e.y-r.height+e.height,u1=e=>e.y,Pm=(e,r,a)=>Ya(sb(e),u1(e),a.southeast(),Ud(),"southeast",Xa(e,{left:0,top:2}),fh),Fm=(e,r,a)=>Ya(ab(e,r),u1(e),a.southwest(),qe(),"southwest",Xa(e,{right:1,top:2}),fh),ib=(e,r,a)=>Ya(sb(e),Hm(e,r),a.northeast(),Fg(),"northeast",Xa(e,{left:0,bottom:3}),fh),By=(e,r,a)=>Ya(ab(e,r),Hm(e,r),a.northwest(),Qp(),"northwest",Xa(e,{right:1,bottom:3}),fh),bh=()=>[Pm,Fm,ib,By],Vm=()=>[Fm,Pm,By,ib];var iC=[Xe("item"),cd(),Ie("overrides",{}),Vr("placement",(e,r,a)=>{const l=Qf(a,r.item.element),m=dh(e.element,r,bh(),Vm(),bh(),Vm(),M.none());return M.some(pc({anchorBox:l,bubble:lh(),overrides:r.overrides,layouts:m}))})],Kg=Qi("type",{selection:Dy,node:a1,hotspot:t1,submenu:iC,makeshift:Oy});const m1=[zl("classes",vr),Qc("mode","all",["all","layout","placement"])],lb=[Ie("useFixed",Ke),In("getBounds")],g1=[wi("anchor",Kg),el("transition",m1)],p1=(e,r,a,l,m,g)=>{const f=Aa("placement.info",Ct(g1),m),w=f.anchor,x=l.element,k=a.get(l.uid);nh(()=>{Bo(x,"position","fixed");const O=rs(x,"visibility");Bo(x,"visibility","hidden");const A=r.useFixed()?(()=>{const D=document.documentElement;return nC(0,0,D.clientWidth,D.clientHeight)})():(D=>{const P=si(D.element),Z=D.element.dom.getBoundingClientRect();return Sy(P.left,P.top,Z.width,Z.height)})(e);w.placement(e,w,A).each(D=>{const Z=(ae=g.orThunk(()=>r.getBounds.map(Er)),X=l,j=k,ne=f.transition,((le,me,xe,ze,ot,st,nt,Ht)=>{const Yt=J0(nt,"maxHeightFunction",$g()),go=J0(nt,"maxWidthFunction",yt),$o=le.origin;return((e,r,a,l)=>{const m=((g,f,w,x)=>{Yn(f,"max-height"),Yn(f,"max-width");const k={width:Oa(O=f),height:Ga(O)};var O;return((A,D,P,Z,te,oe)=>{const ae=Z.width,X=Z.height,j=(ne,le,me,xe,ze)=>{const st=((e,r,a,l)=>{const m=e.bubble,g=m.offset,f=((ne,le,me)=>{const xe=(Ht,Yt)=>le[Ht].map(go=>{const Uo="top"===Ht||"bottom"===Ht,$o=Uo?me.top:me.left,On=("left"===Ht||"top"===Ht?Math.max:Math.min)(go,Yt)+$o;return Uo?Al(On,ne.y,ne.bottom):Al(On,ne.x,ne.right)}).getOr(Yt),ze=xe("left",ne.x),ot=xe("top",ne.y),st=xe("right",ne.right),nt=xe("bottom",ne.bottom);return Gr(ze,ot,st-ze,nt-ot)})(l,e.restriction,g),x=e.y+g.top,k=Gr(e.x+g.left,x,r,a),{originInBounds:O,sizeInBounds:A,visibleW:D,visibleH:P}=((ne,le)=>{const{x:me,y:xe,right:ze,bottom:ot}=le,{x:st,y:nt,right:Ht,bottom:Yt,width:go,height:Uo}=ne;return{originInBounds:st>=me&&st<=ze&&nt>=xe&&nt<=ot,sizeInBounds:Ht<=ze&&Ht>=me&&Yt<=ot&&Yt>=xe,visibleW:Math.min(go,st>=me?ze-st:Ht-me),visibleH:Math.min(Uo,nt>=xe?ot-nt:Yt-xe)}})(k,f),Z=O&&A,te=Z?k:((ne,le)=>{const{x:me,y:xe,right:ze,bottom:ot}=le,{x:st,y:nt,width:Ht,height:Yt}=ne,go=Math.max(me,ze-Ht),Uo=Math.max(xe,ot-Yt),$o=Al(st,me,go),On=Al(nt,xe,Uo),Qr=Math.min($o+Ht,ze)-$o,Ls=Math.min(On+Yt,ot)-On;return Gr($o,On,Qr,Ls)})(k,f),oe=te.width>0&&te.height>0,{maxWidth:ae,maxHeight:X}=((ne,le,me)=>{const xe=ie(le.bottom-me.y),ze=ie(me.bottom-le.y),ot=ne.fold(go=ze,go,$o=xe,$o,go,$o,Uo=ze,Uo),st=ie(le.right-me.x),nt=ie(me.right-le.x);var go,Uo,$o;return{maxWidth:((Yt,go,Uo,$o)=>Yt.fold(go,$o,go,$o,Uo,Uo,go,$o))(ne,nt,nt,st),maxHeight:ot}})(e.direction,te,l),j={rect:te,maxHeight:X,maxWidth:ae,direction:e.direction,placement:e.placement,classes:{on:m.classesOn,off:m.classesOff},layout:e.label,testY:x};return Z||e.alwaysFit?Ug.fit(j):Ug.nofit(j,D,P,oe)})(ne(P,Z,te,A,oe),ae,X,oe);return st.fold(ie(st),(nt,Ht,Yt,go)=>(ze===go?Yt>xe||Ht>me:!ze&&go)?st:Ug.nofit(le,me,xe,ze))};return no(D,(ne,le)=>{const me=hr(j,le);return ne.fold(ie(ne),me)},Ug.nofit({rect:P,maxHeight:Z.height,maxWidth:Z.width,direction:Ud(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:P.y},-1,-1,!1)).fold(ht,ht)})(f,x.preference,g,k,w,x.bounds)})(e,r,a,l);return((g,f,w)=>{const x=Jf(w.origin,f);w.transition.each(k=>{((e,r,a,l,m,g)=>{const f=(w=l,x=m,g.exists(O=>{const A=w.mode;return"all"===A||O[A]!==x[A]}));var w,x,O,A;if(f||((w,x)=>((k,O)=>ka(O,A=>Li(k,A)))(w,x.classes))(e,l)){Bo(e,"position",a.position);const w=Qf(r,e),x=Jf(r,{...m,rect:w}),k=wr(Wg,O=>x[O]);((O,A)=>{const D=P=>parseFloat(P).toFixed(3);return ga(A,(P,Z)=>!((te,oe,ae=Ae)=>wn(te,oe,ae).getOr(te.isNone()&&oe.isNone()))(O[Z].map(D),P.map(D))).isSome()})(a,k)&&(Mi(e,k),f&&(Ii(O=e,(A=l).classes),Ns(O,ih).each(D=>{clearTimeout(parseInt(D,10)),Oo(O,ih)}),((D,P)=>{const Z=jg(),te=jg();let oe;const ae=le=>{var me;const xe=null!==(me=le.raw.pseudoElement)&&void 0!==me?me:"";return se(le.target,D)&&ta(xe)&&Do(Wg,le.raw.propertyName)},X=le=>{if(Xt(le)||ae(le)){Z.clear(),te.clear();const me=le?.raw.type;(Xt(me)||me===Sm())&&(clearTimeout(oe),Oo(D,ih),ks(D,P.classes))}},j=Pi(D,uy(),le=>{ae(le)&&(j.unbind(),Z.set(Pi(D,Sm(),X)),te.set(Pi(D,_g(),X)))}),ne=(le=>{const me=st=>{const nt=cs(le,st).split(/\s*,\s*/);return zt(nt,Ea)},xe=st=>{if(Zo(st)&&/^[\d.]+/.test(st)){const nt=parseFloat(st);return As(st,"ms")?nt:1e3*nt}return 0},ze=me("transition-delay"),ot=me("transition-duration");return no(ot,(st,nt,Ht)=>{const Yt=xe(ze[Ht])+xe(nt);return Math.max(st,Yt)},0)})(D);requestAnimationFrame(()=>{oe=setTimeout(X,ne+17),No(D,ih,oe)})})(O,A)),pl(e))}else ks(e,l.classes)})(g,w.origin,x,k,f,w.lastPlacement)}),G0(g,x)})(r,m,l),No(r,sh,m.placement),((g,f)=>{const w=f.classes;ks(g,w.off),Ii(g,w.on)})(r,m),(0,l.maxHeightFunction)(r,m.maxHeight),((g,f,w)=>{(0,w.maxWidthFunction)(g,f.maxWidth)})(r,m,l),{layout:m.layout,placement:m.placement}})(le.anchorBox,me,xe,{bounds:Cy($o,st),origin:$o,preference:ze,maxHeightFunction:Yt,maxWidthFunction:go,lastPlacement:ot,transition:Ht})})(((le,me)=>((xe,ze)=>({anchorBox:xe,origin:ze}))(le,me))((oe=D).anchorBox,A),X.element,oe.bubble,oe.layouts,j,ae,oe.overrides,ne));var oe,ae,X,j,ne;a.set(l.uid,Z)}),O.fold(()=>{Yn(x,"visibility")},D=>{Bo(x,"visibility",D)}),rs(x,"left").isNone()&&rs(x,"top").isNone()&&rs(x,"right").isNone()&&rs(x,"bottom").isNone()&&os(rs(x,"position"),"fixed")&&Yn(x,"position")},x)};var cb=Object.freeze({__proto__:null,position:(e,r,a,l,m)=>{const g=M.none();p1(e,r,a,l,m,g)},positionWithinBounds:p1,getMode:(e,r,a)=>r.useFixed()?"fixed":"absolute",reset:(e,r,a,l)=>{const m=l.element;Qt(["position","left","right","top","bottom"],g=>Yn(m,g)),Oo(m,sh),a.clear(l.uid)}});const gi=Da({fields:lb,name:"positioning",active:oC,apis:cb,state:Object.freeze({__proto__:null,init:()=>{let e={};return na({readState:()=>e,clear:r=>{rt(r)?delete e[r]:e={}},set:(r,a)=>{e[r]=a},get:r=>jt(e,r)})}})}),h1=e=>e.getSystem().isConnected(),ud=e=>{Hn(e,Og());const r=e.components();Qt(r,ud)},Yg=e=>{const r=e.components();Qt(r,Yg),Hn(e,Oc())},db=(e,r)=>{e.getSystem().addToWorld(r),Is(e.element)&&Yg(r)},vh=e=>{ud(e),e.getSystem().removeFromWorld(e)},tm=(e,r)=>{Co(e.element,r.element)},om=(e,r)=>{yh(e,r,Co)},yh=(e,r,a)=>{e.getSystem().addToWorld(r),a(e.element,r.element),Is(e.element)&&Yg(r),e.syncComponents()},zm=e=>{ud(e),tn(e.element),e.getSystem().removeFromWorld(e)},hc=e=>{const r=xo(e.element).bind(a=>e.getSystem().getByDom(a).toOptional());zm(e),r.each(a=>{a.syncComponents()})},Zm=e=>{const r=e.components();Qt(r,zm),Lo(e.element),e.syncComponents()},Um=(e,r)=>{ub(e,r,Co)},f1=(e,r)=>{ub(e,r,kt)},ub=(e,r,a)=>{a(e,r.element);const l=ln(r.element);Qt(l,m=>{r.getByDom(m).each(Yg)})},Ly=e=>{const r=ln(e.element);Qt(r,a=>{e.getByDom(a).each(ud)}),tn(e.element)},b1=(e,r,a,l)=>{a.get().each(f=>{Zm(e)});const m=r.getAttachPoint(e);om(m,e);const g=e.getSystem().build(l);return om(e,g),a.set(g),g},Iy=(e,r,a,l)=>{const m=b1(e,r,a,l);return r.onOpen(e,m),m},Hy=(e,r,a)=>{a.get().each(l=>{Zm(e),hc(e),r.onClose(e,l),a.clear()})},jm=(e,r,a)=>a.isOpen(),md=(e,r,a)=>{const l=r.getAttachPoint(e);var m,f;Bo(e.element,"position",gi.getMode(l)),f=r.cloakVisibilityAttr,rs((m=e).element,"visibility").fold(()=>{Oo(m.element,f)},x=>{No(m.element,f,x)}),Bo(m.element,"visibility","hidden")},Wd=(e,r,a)=>{var l;l=e.element,zn(["top","left","right","bottom"],m=>rs(l,m).isSome())||Yn(e.element,"position"),((l,m,g)=>{Ns(l.element,g).fold(()=>Yn(l.element,m),f=>Bo(l.element,m,f))})(e,"visibility",r.cloakVisibilityAttr)};var v1=Object.freeze({__proto__:null,cloak:md,decloak:Wd,open:Iy,openWhileCloaked:(e,r,a,l,m)=>{md(e,r),Iy(e,r,a,l),m(),Wd(e,r)},close:Hy,isOpen:jm,isPartOf:(e,r,a,l)=>jm(0,0,a)&&a.get().exists(m=>r.isPartOf(e,m,l)),getState:(e,r,a)=>a.get(),setContent:(e,r,a,l)=>a.get().map(()=>b1(e,r,a,l))}),ll=Object.freeze({__proto__:null,events:(e,r)=>Dr([Qe(Eg(),(a,l)=>{Hy(a,e,r)})])}),Wl=[Rn("onOpen"),Rn("onClose"),Xe("isPartOf"),Xe("getAttachPoint"),Ie("cloakVisibilityAttr","data-precloak-visibility")],$l=Object.freeze({__proto__:null,init:()=>{const e=Ur(),r=ie("not-implemented");return na({readState:r,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}});const Pn=Da({fields:Wl,name:"sandboxing",active:ll,apis:v1,state:$l}),gd=ie("dismiss.popups"),Xg=ie("reposition.popups"),y1=ie("mouse.released"),wh=ao([Ie("isExtraPart",Ke),el("fireEventInstead",[Ie("event",Pd())])]),Wm=e=>{const r=Aa("Dismissal",wh,e);return{[gd()]:{schema:ao([Xe("target")]),onReceive:(a,l)=>{Pn.isOpen(a)&&(Pn.isPartOf(a,l.target)||r.isExtraPart(a,l.target)||r.fireEventInstead.fold(()=>Pn.close(a),m=>Hn(a,m.event)))}}}},w1=ao([el("fireEventInstead",[Ie("event",gy())]),ba("doReposition")]),xh=e=>{const r=Aa("Reposition",w1,e);return{[Xg()]:{onReceive:a=>{Pn.isOpen(a)&&r.fireEventInstead.fold(()=>r.doReposition(a),l=>Hn(a,l.event))}}}},$m=(e,r,a)=>{r.store.manager.onLoad(e,r,a)},nm=(e,r,a)=>{r.store.manager.onUnload(e,r,a)};var Ch=Object.freeze({__proto__:null,onLoad:$m,onUnload:nm,setValue:(e,r,a,l)=>{r.store.manager.setValue(e,r,a,l)},getValue:(e,r,a)=>r.store.manager.getValue(e,r,a),getState:(e,r,a)=>a}),Sh=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.resetOnDom?[Br((l,m)=>{$m(l,e,r)}),rd((l,m)=>{nm(l,e,r)})]:[$0(e,r,$m)];return Dr(a)}});const Ba=()=>{const e=ho(null);return na({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},x1=()=>{const e=ho({}),r=ho({});return na({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:r.get()}),lookup:a=>jt(e.get(),a).orThunk(()=>jt(r.get(),a)),update:a=>{const l=e.get(),m=r.get(),g={},f={};Qt(a,w=>{g[w.value]=w,jt(w,"meta").each(x=>{jt(x,"text").each(k=>{f[k]=w})})}),e.set({...l,...g}),r.set({...m,...f})},clear:()=>{e.set({}),r.set({})}})};var pd=Object.freeze({__proto__:null,memory:Ba,dataset:x1,manual:()=>na({readState:yt}),init:e=>e.store.manager.state(e)});const mb=(e,r,a,l)=>{const m=r.store;a.update([l]),m.setValue(e,l),r.onSetValue(e,l)};var kh=[In("initialValue"),Xe("getFallbackEntry"),Xe("getDataKey"),Xe("setValue"),Vr("manager",{setValue:mb,getValue:(e,r,a)=>{const l=r.store,m=l.getDataKey(e);return a.lookup(m).getOrThunk(()=>l.getFallbackEntry(m))},onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{mb(e,r,a,l)})},onUnload:(e,r,a)=>{a.clear()},state:x1})],qm=[Xe("getValue"),Ie("setValue",yt),In("initialValue"),Vr("manager",{setValue:(e,r,a,l)=>{r.store.setValue(e,l),r.onSetValue(e,l)},getValue:(e,r,a)=>r.store.getValue(e),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{r.store.setValue(e,l)})},onUnload:yt,state:El.init})],Py=[In("initialValue"),Vr("manager",{setValue:(e,r,a,l)=>{a.set(l),r.onSetValue(e,l)},getValue:(e,r,a)=>a.get(),onLoad:(e,r,a)=>{r.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},onUnload:(e,r,a)=>{a.clear()},state:Ba})],C1=[Cl("store",{mode:"memory"},Qi("mode",{memory:Py,manual:qm,dataset:kh})),Rn("onSetValue"),Ie("resetOnDom",!1)];const Ft=Da({fields:C1,name:"representing",active:Sh,apis:Ch,extra:{setValueFrom:(e,r)=>{const a=Ft.getValue(r);Ft.setValue(e,a)}},state:pd}),La=(e,r)=>Zu(e,{},St(r,a=>{return l=a.name(),m="Cannot configure "+a.name()+" for "+e,pt(l,l,{tag:"option",process:{}},Tt(g=>ic("The field: "+l+" is forbidden. "+m)));var l,m}).concat([qi("dump",ht)])),_h=e=>e.dump,gs=(e,r)=>({...Re(r),...e.dump}),_u=La,Gm=gs,gb="placeholder",cl=tl([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),p=e=>Fo(e,"uiType"),b=(e,r,a,l)=>{return(m=e,f=a,w=l,p(f)&&f.uiType===gb?(O=f,A=w,(x=m).exists(D=>D!==O.owner)?cl.single(!0,ie(O)):jt(A,O.name).fold(()=>{throw new Error("Unknown placeholder component: "+O.name+"\nKnown: ["+Sr(A)+"]\nNamespace: "+x.getOr("none")+"\nSpec: "+JSON.stringify(O,null,2))},D=>D.replace())):cl.single(!1,ie(f))).fold((m,g)=>{const f=p(a)?g(r,a.config,a.validated):g(r),w=jt(f,"components").getOr([]),x=Vt(w,k=>b(e,r,k,l));return[{...f,components:x}]},(m,g)=>{if(p(a)){const f=g(r,a.config,a.validated);return a.validated.preprocess.getOr(ht)(f)}return g(r)});var m,f,w,x,O,A},S=cl.single,_=cl.multiple,B=ie(gb),L=tl([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),V=Ie("factory",{sketch:ht}),W=Ie("schema",[]),Q=Xe("name"),de=pt("pname","pname",G(e=>"<alloy."+Jt(e.name)+">"),xn()),be=qi("schema",()=>[In("preprocess")]),pe=Ie("defaults",ie({})),fe=Ie("overrides",ie({})),Se=Ct([V,W,Q,de,pe,fe]),Ze=Ct([V,W,Q,pe,fe]),He=Ct([V,W,Q,de,pe,fe]),Ye=Ct([V,be,Q,Xe("unit"),de,pe,fe]),et=e=>e.fold(M.some,M.none,M.some,M.some),bt=e=>{const r=a=>a.name;return e.fold(r,r,r,r)},ut=(e,r)=>a=>{const l=Aa("Converting part type",r,a);return e(l)},_t=ut(L.required,Se),vt=ut(L.external,Ze),It=ut(L.optional,He),Eo=ut(L.group,Ye),fo=ie("entirety");var Xn=Object.freeze({__proto__:null,required:_t,external:vt,optional:It,group:Eo,asNamedPart:et,name:bt,asCommon:e=>e.fold(ht,ht,ht,ht),original:fo});const Vo=(e,r,a,l)=>Zr(r.defaults(e,a,l),a,{uid:e.partUids[r.name]},r.overrides(e,a,l)),hn=(e,r)=>{const a={};return Qt(r,l=>{et(l).each(m=>{const g=Go(e,m.pname);a[m.name]=f=>{const w=Aa("Part: "+m.name+" in "+e,Ct(m.schema),f);return{...g,config:f,validated:w}}})}),a},Go=(e,r)=>({uiType:B(),owner:e,name:r}),or=(e,r,a)=>({uiType:B(),owner:e,name:r,config:a,validated:{}}),Vs=e=>Vt(e,r=>r.fold(M.none,M.some,M.none,M.none).map(a=>xr(a.name,a.schema.concat([P0(fo())]))).toArray()),Za=e=>St(e,bt),Xs=(e,r,a)=>((l,m,g)=>{const f={},w={};return Qt(g,x=>{x.fold(k=>{f[k.pname]=S(!0,(O,A,D)=>k.factory.sketch(Vo(O,k,A,D)))},k=>{const O=m.parts[k.name];w[k.name]=ie(k.factory.sketch(Vo(m,k,O[fo()]),O))},k=>{f[k.pname]=S(!1,(O,A,D)=>k.factory.sketch(Vo(O,k,A,D)))},k=>{f[k.pname]=_(!0,(O,A,D)=>St(O[k.name],Z=>k.factory.sketch(Zr(k.defaults(O,Z,D),Z,k.overrides(O,Z)))))})}),{internals:ie(f),externals:ie(w)}})(0,r,a),Vi=(e,r,a)=>((l,m,g,f)=>{const w=Zn(f,(k,O)=>((A,D)=>{let P=!1;return{name:ie(A),required:()=>D.fold((Z,te)=>Z,(Z,te)=>Z),used:()=>P,replace:()=>{if(P)throw new Error("Trying to use the same placeholder more than once: "+A);return P=!0,D}}})(O,k)),x=(k=l,O=m,D=w,Vt(g,P=>b(k,O,P,D)));var k,O,D;return Nn(w,k=>{if(!1===k.used()&&k.required())throw new Error("Placeholder: "+k.name()+" was not found in components list\nNamespace: "+l.getOr("none")+"\nComponents: "+JSON.stringify(m.components,null,2))}),x})(M.some(e),r,r.components,a),Jn=(e,r,a)=>{const l=r.partUids[a];return e.getSystem().getByUid(l).toOptional()},ra=(e,r,a)=>Jn(e,r,a).getOrDie("Could not find part: "+a),Eu=(e,r,a)=>{const l={},m=r.partUids,g=e.getSystem();return Qt(a,f=>{l[f]=ie(g.getByUid(m[f]))}),l},Tu=(e,r)=>{const a=e.getSystem();return Zn(r.partUids,(l,m)=>ie(a.getByUid(l)))},Km=e=>Sr(e.partUids),Jg=(e,r,a)=>{const l={},m=r.partUids,g=e.getSystem();return Qt(a,f=>{l[f]=ie(g.getByUid(m[f]).getOrDie())}),l},Eh=(e,r)=>{const a=Za(r);return Ps(St(a,l=>({key:l,value:e+"-"+l})))},Ym=e=>pt("partUids","partUids",re(r=>Eh(r.uid,e)),xn());var lC=Object.freeze({__proto__:null,generate:hn,generateOne:or,schemas:Vs,names:Za,substitutes:Xs,components:Vi,defaultUids:Eh,defaultUidsSchema:Ym,getAllParts:Tu,getAllPartNames:Km,getPart:Jn,getPartOrDie:ra,getParts:Eu,getPartsOrDie:Jg});const Th=(e,r,a,l,m)=>{const g=(w=m,((f=l).length>0?[xr("parts",f)]:[]).concat([Xe("uid"),Ie("dom",{}),Ie("components",[]),P0("originalSpec"),Ie("debug.sketcher",{})]).concat(w));var f,w;return Aa(e+" [SpecSchema]",ao(g.concat(r)),a)},pb=(e,r,a,l,m)=>{const g=cC(m),f=Vs(a),w=Ym(a),x=Th(e,r,g,f,[w]),k=Xs(0,x,a);return l(x,Vi(e,x,k.internals()),g,k.externals())},cC=e=>Fo(e,"uid")?e:{...e,uid:sd("uid")},Qg=ao([Xe("name"),Xe("factory"),Xe("configFields"),Ie("apis",{}),Ie("extraApis",{})]),dC=ao([Xe("name"),Xe("factory"),Xe("configFields"),Xe("partFields"),Ie("apis",{}),Ie("extraApis",{})]),ql=e=>{const r=Aa("Sketcher for "+e.name,Qg,e),a=Zn(r.apis,Ma),l=Zn(r.extraApis,(m,g)=>bu(m,g));return{name:r.name,configFields:r.configFields,sketch:m=>((g,f,w,x)=>{const k=cC(x);return w(Th(g,f,k,[],[]),k)})(r.name,r.configFields,r.factory,m),...a,...l}},Si=e=>{const r=Aa("Sketcher for "+e.name,dC,e),a=hn(r.name,r.partFields),l=Zn(r.apis,Ma),m=Zn(r.extraApis,(g,f)=>bu(g,f));return{name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:g=>pb(r.name,r.configFields,r.partFields,r.factory,g),parts:a,...l,...m}},Oh=e=>Rr("input")(e)&&"radio"!==qr(e,"type")||Rr("textarea")(e);var Fy=Object.freeze({__proto__:null,getCurrent:(e,r,a)=>r.find(e)});const uC=[Xe("find")],bn=Da({fields:uC,name:"composing",apis:Fy}),hd=["input","button","textarea","select"],Ja=(e,r,a)=>{(r.disabled()?Vy:gC)(e,r)},hb=(e,r)=>!0===r.useNative&&Do(hd,Dt(e.element)),N3=e=>{No(e.element,"disabled","disabled")},mC=e=>{Oo(e.element,"disabled")},S1=e=>{No(e.element,"aria-disabled","true")},R3=e=>{No(e.element,"aria-disabled","false")},Vy=(e,r,a)=>{r.disableClass.each(l=>{Gn(e.element,l)}),(hb(e,r)?N3:S1)(e),r.onDisabled(e)},gC=(e,r,a)=>{r.disableClass.each(l=>{ms(e.element,l)}),(hb(e,r)?mC:R3)(e),r.onEnabled(e)},pC=(e,r)=>hb(e,r)?Sc(e.element,"disabled"):"true"===qr(e.element,"aria-disabled");var M3=Object.freeze({__proto__:null,enable:gC,disable:Vy,isDisabled:pC,onLoad:Ja,set:(e,r,a,l)=>{(l?Vy:gC)(e,r)}}),wA=Object.freeze({__proto__:null,exhibit:(e,r)=>Mc({classes:r.disabled()?r.disableClass.toArray():[]}),events:(e,r)=>Dr([Ng(rl(),(a,l)=>pC(a,e)),$0(e,r,Ja)])}),xA=[Bs("disabled",Ke),Ie("useNative",!0),In("disableClass"),Rn("onDisabled"),Rn("onEnabled")];const Ro=Da({fields:xA,name:"disabling",active:wA,apis:M3}),hC=(e,r,a,l)=>{const m=Fi(e.element,"."+r.highlightClass);Qt(m,g=>{zn(l,f=>se(f.element,g))||(ms(g,r.highlightClass),e.getSystem().getByDom(g).each(f=>{r.onDehighlight(e,f),Hn(f,A0())}))})},k1=(e,r,a,l)=>{hC(e,r,0,[l]),zy(e,r,a,l)||(Gn(l.element,r.highlightClass),r.onHighlight(e,l),Hn(l,Am()))},zy=(e,r,a,l)=>Li(l.element,r.highlightClass),fb=(e,r,a)=>Xr(e.element,"."+r.itemClass).bind(l=>e.getSystem().getByDom(l).toOptional()),fC=(e,r,a)=>{const l=Fi(e.element,"."+r.itemClass);return(l.length>0?M.some(l[l.length-1]):M.none()).bind(m=>e.getSystem().getByDom(m).toOptional())},ep=(e,r,a,l)=>{const m=Fi(e.element,"."+r.itemClass);return ma(m,g=>Li(g,r.highlightClass)).bind(g=>{const f=Xu(g,l,0,m.length-1);return e.getSystem().getByDom(m[f]).toOptional()})},_1=(e,r,a)=>{const l=Fi(e.element,"."+r.itemClass);return Ot(St(l,m=>e.getSystem().getByDom(m).toOptional()))};var CA=Object.freeze({__proto__:null,dehighlightAll:(e,r,a)=>hC(e,r,0,[]),dehighlight:(e,r,a,l)=>{zy(e,r,a,l)&&(ms(l.element,r.highlightClass),r.onDehighlight(e,l),Hn(l,A0()))},highlight:k1,highlightFirst:(e,r,a)=>{fb(e,r).each(l=>{k1(e,r,a,l)})},highlightLast:(e,r,a)=>{fC(e,r).each(l=>{k1(e,r,a,l)})},highlightAt:(e,r,a,l)=>{((m,g,f,w)=>{const x=Fi(m.element,"."+g.itemClass);return M.from(x[w]).fold(()=>pn.error(new Error("No element found with index "+w)),m.getSystem().getByDom)})(e,r,0,l).fold(m=>{throw m},m=>{k1(e,r,a,m)})},highlightBy:(e,r,a,l)=>{const m=_1(e,r);Ue(m,l).each(g=>{k1(e,r,a,g)})},isHighlighted:zy,getHighlighted:(e,r,a)=>Xr(e.element,"."+r.highlightClass).bind(l=>e.getSystem().getByDom(l).toOptional()),getFirst:fb,getLast:fC,getPrevious:(e,r,a)=>ep(e,r,0,-1),getNext:(e,r,a)=>ep(e,r,0,1),getCandidates:_1}),D3=[Xe("highlightClass"),Xe("itemClass"),Rn("onHighlight"),Rn("onDehighlight")];const sr=Da({fields:D3,name:"highlighting",apis:CA}),SA=[8],rm=[9],Pc=[13],bb=[27],Gl=[32],vb=[37],E1=[38],yb=[39],Ah=[40],B3=(e,r,a)=>{const l=lr(e.slice(0,r)),m=lr(e.slice(r+1));return Ue(l.concat(m),a)},Gt=(e,r,a)=>{const l=lr(e.slice(0,r));return Ue(l,a)},Nh=(e,r,a)=>{const l=e.slice(0,r),m=e.slice(r+1);return Ue(m.concat(l),a)},L3=(e,r,a)=>{const l=e.slice(r+1);return Ue(l,a)},Fn=e=>r=>Do(e,r.raw.which),fd=e=>r=>ka(e,a=>a(r)),tp=e=>!0===e.raw.shiftKey,I3=e=>!0===e.raw.ctrlKey,Rh=_o(tp),Un=(e,r)=>({matches:e,classification:r}),bC=(e,r,a)=>{r.exists(l=>a.exists(m=>se(m,l)))||io(e,Om(),{prevFocus:r,newFocus:a})},Zy=()=>{const e=r=>Hc(r.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().triggerFocus(a,r.element);const m=e(r);bC(r,l,m)}}},kA=()=>{const e=r=>sr.getHighlighted(r).map(a=>a.element);return{get:e,set:(r,a)=>{const l=e(r);r.getSystem().getByDom(a).fold(yt,g=>{sr.highlight(r,g)});const m=e(r);bC(r,l,m)}}};var op;!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(op||(op={}));const fc=(e,r,a,l,m)=>{const g=(w,x,k,O,A)=>{return(D=k(w,x,O,A),P=x.event,Ue(D,Z=>Z.matches(P)).map(Z=>Z.classification)).bind(Z=>Z(w,x,O,A));var D,P},f={schema:()=>e.concat([Ie("focusManager",Zy()),Cl("focusInside","onFocus",Vl(w=>Do(["onFocus","onEnterOrSpace","onApi"],w)?pn.value(w):pn.error("Invalid value for focusInside"))),Vr("handler",f),Vr("state",r),Vr("sendFocusIn",m)]),processKey:g,toEvents:(w,x)=>{const k=w.focusInside!==op.OnFocusMode?M.none():m(w).map(A=>Qe(Id(),(D,P)=>{A(D,w,x),P.stop()})),O=[Qe(_l(),(A,D)=>{g(A,D,a,w,x).fold(()=>{((P,Z)=>{const te=Fn(Gl.concat(Pc))(Z.event);w.focusInside===op.OnEnterOrSpaceMode&&te&&Uu(P,Z)&&m(w).each(oe=>{oe(P,w,x),Z.stop()})})(A,D)},P=>{D.stop()})}),Qe(O0(),(A,D)=>{g(A,D,l,w,x).each(P=>{D.stop()})})];return Dr(k.toArray().concat(O))}};return f},wb=e=>{const r=[In("onEscape"),In("onEnter"),Ie("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ie("firstTabstop",0),Ie("useTabstopAt",fn),In("visibilitySelector")].concat([e]),a=(O,A)=>{const D=O.visibilitySelector.bind(P=>uc(A,P)).getOr(A);return ds(D)>0},l=(O,A)=>A.focusManager.get(O).bind(D=>uc(D,A.selector)),m=(O,A,D)=>{((P,Z)=>{const te=Fi(P.element,Z.selector),oe=zt(te,ae=>a(Z,ae));return M.from(oe[Z.firstTabstop])})(O,A).each(P=>{A.focusManager.set(O,P)})},g=(O,A,D,P)=>{const Z=Fi(O.element,D.selector);return l(O,D).bind(te=>ma(Z,hr(se,te)).bind(oe=>{return ae=O,ne=D,P(Z,oe,me=>{return a(xe=ne,ze=me)&&xe.useTabstopAt(ze);var xe,ze}).fold(()=>ne.cyclic?M.some(!0):M.none(),me=>(ne.focusManager.set(ae,me),M.some(!0)));var ae,ne}))},f=(O,A,D)=>g(O,0,D,D.cyclic?B3:Gt),w=(O,A,D)=>g(O,0,D,D.cyclic?Nh:L3),x=ie([Un(fd([tp,Fn(rm)]),f),Un(Fn(rm),w),Un(fd([Rh,Fn(Pc)]),(O,A,D)=>D.onEnter.bind(P=>P(O,A)))]),k=ie([Un(Fn(bb),(O,A,D)=>D.onEscape.bind(P=>P(O,A))),Un(Fn(rm),(O,A,D)=>l(O,D).filter(P=>!D.useTabstopAt(P)).bind(P=>{return((te=Z=P,xo(te)).bind(en).exists(te=>se(te,Z))?f:w)(O,A,D);var Z,te}))]);return fc(r,El.init,x,k,()=>M.some(m))};var T1=wb(qi("cyclic",Ke)),Uy=wb(qi("cyclic",fn));const xb=(e,r,a)=>Oh(a)&&Fn(Gl)(r.event)?M.none():(Nf(e,a,rl()),M.some(!0)),Mh=(e,r)=>M.some(!0),vC=[Ie("execute",xb),Ie("useSpace",!1),Ie("useEnter",!0),Ie("useControlEnter",!1),Ie("useDown",!1)],H3=(e,r,a)=>a.execute(e,r,e.element);var P3=fc(vC,El.init,(e,r,a,l)=>{const m=a.useSpace&&!Oh(e.element)?Gl:[],f=a.useDown?Ah:[],w=m.concat(a.useEnter?Pc:[]).concat(f);return[Un(Fn(w),H3)].concat(a.useControlEnter?[Un(fd([I3,Fn(Pc)]),H3)]:[])},(e,r,a,l)=>a.useSpace&&!Oh(e.element)?[Un(Fn(Gl),Mh)]:[],()=>M.none());const jy=()=>{const e=Ur();return na({readState:()=>e.get().map(r=>({numRows:String(r.numRows),numColumns:String(r.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(r,a)=>{e.set({numRows:r,numColumns:a})},getNumRows:()=>e.get().map(r=>r.numRows),getNumColumns:()=>e.get().map(r=>r.numColumns)})};var F3=Object.freeze({__proto__:null,flatgrid:jy,init:e=>e.state(e)});const V3=e=>(r,a,l,m)=>{const g=e(r.element);return wC(g,r,a,l,m)},yC=(e,r)=>{const a=Lm(e,r);return V3(a)},Wy=(e,r)=>{const a=Lm(r,e);return V3(a)},Cb=e=>(r,a,l,m)=>wC(e,r,a,l,m),wC=(e,r,a,l,m)=>l.focusManager.get(r).bind(g=>e(r.element,g,l,m)).map(g=>(l.focusManager.set(r,g),!0)),Sb=Cb,kb=Cb,Dh=Cb,np=e=>{return!((r=e.dom).offsetWidth<=0&&r.offsetHeight<=0);var r},z3=(e,r,a)=>{const l=Fi(e,a);return m=zt(l,np),ma(m,f=>se(f,r)).map(f=>({index:f,candidates:m}));var m},xC=(e,r)=>ma(e,a=>se(r,a)),CC=(e,r,a,l)=>l(Math.floor(r/a),r%a).bind(m=>{const g=m.row*a+m.column;return g>=0&&g<e.length?M.some(e[g]):M.none()}),Z3=(e,r,a,l,m)=>CC(e,r,l,(g,f)=>{const x=Xu(f,m,0,(g===a-1?e.length-g*l:l)-1);return M.some({row:g,column:x})}),$y=(e,r,a,l,m)=>CC(e,r,l,(g,f)=>{const w=Xu(g,m,0,a-1),k=Al(f,0,(w===a-1?e.length-w*l:l)-1);return M.some({row:w,column:k})}),U3=[Xe("selector"),Ie("execute",xb),Hi("onEscape"),Ie("captureTab",!1),Uf()],j3=(e,r,a)=>{Xr(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},_b=e=>(r,a,l,m)=>z3(r,a,l.selector).bind(g=>e(g.candidates,g.index,m.getNumRows().getOr(l.initSize.numRows),m.getNumColumns().getOr(l.initSize.numColumns))),W3=(e,r,a)=>a.captureTab?M.some(!0):M.none(),SC=_b((e,r,a,l)=>Z3(e,r,a,l,-1)),$3=_b((e,r,a,l)=>Z3(e,r,a,l,1)),kC=_b((e,r,a,l)=>$y(e,r,a,l,-1)),q3=_b((e,r,a,l)=>$y(e,r,a,l,1)),G3=ie([Un(Fn(vb),yC(SC,$3)),Un(Fn(yb),Wy(SC,$3)),Un(Fn(E1),Sb(kC)),Un(Fn(Ah),kb(q3)),Un(fd([tp,Fn(rm)]),W3),Un(fd([Rh,Fn(rm)]),W3),Un(Fn(Gl.concat(Pc)),(e,r,a,l)=>{return(m=e,g=a,g.focusManager.get(m).bind(f=>uc(f,g.selector))).bind(m=>a.execute(e,r,m));var m,g})]),K3=ie([Un(Fn(bb),(e,r,a)=>a.onEscape(e,r)),Un(Fn(Gl),Mh)]);var _A=fc(U3,jy,G3,K3,()=>M.some(j3));const Y3=(e,r,a,l,m)=>{const g=(f,w,x)=>m(f,w,l,0,x.length-1,x[w],k=>{return"button"===Dt(O=x[k])&&"disabled"===qr(O,"disabled")?g(f,k,x):M.from(x[k]);var O});return z3(e,a,r).bind(f=>{const w=f.index;return g(w,w,f.candidates)})},X3=(e,r,a,l)=>Y3(e,r,a,l,(m,g,f,w,x,k,O)=>{const A=Al(g+f,w,x);return A===m?M.from(k):O(A)}),qy=(e,r,a,l)=>Y3(e,r,a,l,(m,g,f,w,x,k,O)=>{const A=Xu(g,f,w,x);return A===m?M.none():O(A)}),Eb=[Xe("selector"),Ie("getInitial",M.none),Ie("execute",xb),Hi("onEscape"),Ie("executeOnMove",!1),Ie("allowVertical",!0),Ie("allowHorizontal",!0),Ie("cycles",!0)],Gy=(e,r,a)=>{return(l=e,m=a,m.focusManager.get(l).bind(g=>uc(g,m.selector))).bind(l=>a.execute(e,r,l));var l,m},J3=(e,r,a)=>{r.getInitial(e).orThunk(()=>Xr(e.element,r.selector)).each(l=>{r.focusManager.set(e,l)})},Ky=(e,r,a)=>(a.cycles?qy:X3)(e,a.selector,r,-1),_C=(e,r,a)=>(a.cycles?qy:X3)(e,a.selector,r,1),Q3=e=>(r,a,l,m)=>e(r,a,l,m).bind(()=>l.executeOnMove?Gy(r,a,l):M.some(!0)),e_=ie([Un(Fn(Gl),Mh),Un(Fn(bb),(e,r,a)=>a.onEscape(e,r))]);var t_=fc(Eb,El.init,(e,r,a,l)=>{const m=[...a.allowHorizontal?vb:[]].concat(a.allowVertical?E1:[]),g=[...a.allowHorizontal?yb:[]].concat(a.allowVertical?Ah:[]);return[Un(Fn(m),Q3(yC(Ky,_C))),Un(Fn(g),Q3(Wy(Ky,_C))),Un(Fn(Pc),Gy),Un(Fn(Gl),Gy)]},e_,()=>M.some(J3));const Yy=(e,r,a)=>M.from(e[r]).bind(l=>M.from(l[a]).map(m=>({rowIndex:r,columnIndex:a,cell:m}))),o_=(e,r,a,l)=>{const g=Xu(a,l,0,e[r].length-1);return Yy(e,r,g)},Xy=(e,r,a,l)=>{const m=Xu(a,l,0,e.length-1),f=Al(r,0,e[m].length-1);return Yy(e,m,f)},Jy=(e,r,a,l)=>{const g=Al(a+l,0,e[r].length-1);return Yy(e,r,g)},EC=(e,r,a,l)=>{const m=Al(a+l,0,e.length-1),f=Al(r,0,e[m].length-1);return Yy(e,m,f)},bd=[xr("selectors",[Xe("row"),Xe("cell")]),Ie("cycles",!0),Ie("previousSelector",M.none),Ie("execute",xb)],O1=(e,r,a)=>{r.previousSelector(e).orThunk(()=>Xr(e.element,r.selectors.cell)).each(l=>{r.focusManager.set(e,l)})},A1=(e,r)=>(a,l,m)=>{const g=m.cycles?e:r;return uc(l,m.selectors.row).bind(f=>{const w=Fi(f,m.selectors.cell);return xC(w,l).bind(x=>{const k=Fi(a,m.selectors.row);return xC(k,f).bind(O=>{const A=(P=m,St(k,Z=>Fi(Z,P.selectors.cell)));var P;return g(A,O,x).map(D=>D.cell)})})})},Qy=A1((e,r,a)=>o_(e,r,a,-1),(e,r,a)=>Jy(e,r,a,-1)),Tb=A1((e,r,a)=>o_(e,r,a,1),(e,r,a)=>Jy(e,r,a,1)),TC=A1((e,r,a)=>Xy(e,a,r,-1),(e,r,a)=>EC(e,a,r,-1)),EA=A1((e,r,a)=>Xy(e,a,r,1),(e,r,a)=>EC(e,a,r,1)),TA=ie([Un(Fn(vb),yC(Qy,Tb)),Un(Fn(yb),Wy(Qy,Tb)),Un(Fn(E1),Sb(TC)),Un(Fn(Ah),kb(EA)),Un(Fn(Gl.concat(Pc)),(e,r,a)=>Hc(e.element).bind(l=>a.execute(e,r,l)))]),n_=ie([Un(Fn(Gl),Mh)]);var OC=fc(bd,El.init,TA,n_,()=>M.some(O1));const Bh=[Xe("selector"),Ie("execute",xb),Ie("moveOnTab",!1)],AC=(e,r,a)=>a.focusManager.get(e).bind(l=>a.execute(e,r,l)),NC=(e,r,a)=>{Xr(e.element,r.selector).each(l=>{r.focusManager.set(e,l)})},RC=(e,r,a)=>qy(e,a.selector,r,-1),MC=(e,r,a)=>qy(e,a.selector,r,1),r_=ie([Un(Fn(E1),Dh(RC)),Un(Fn(Ah),Dh(MC)),Un(fd([tp,Fn(rm)]),(e,r,a,l)=>a.moveOnTab?Dh(RC)(e,r,a,l):M.none()),Un(fd([Rh,Fn(rm)]),(e,r,a,l)=>a.moveOnTab?Dh(MC)(e,r,a,l):M.none()),Un(Fn(Pc),AC),Un(Fn(Gl),AC)]),s_=ie([Un(Fn(Gl),Mh)]);var a_=fc(Bh,El.init,r_,s_,()=>M.some(NC));const DC=[Hi("onSpace"),Hi("onEnter"),Hi("onShiftEnter"),Hi("onLeft"),Hi("onRight"),Hi("onTab"),Hi("onShiftTab"),Hi("onUp"),Hi("onDown"),Hi("onEscape"),Ie("stopSpaceKeyup",!1),In("focusIn")];var OA=fc(DC,El.init,(e,r,a)=>[Un(Fn(Gl),a.onSpace),Un(fd([Rh,Fn(Pc)]),a.onEnter),Un(fd([tp,Fn(Pc)]),a.onShiftEnter),Un(fd([tp,Fn(rm)]),a.onShiftTab),Un(fd([Rh,Fn(rm)]),a.onTab),Un(Fn(E1),a.onUp),Un(Fn(Ah),a.onDown),Un(Fn(vb),a.onLeft),Un(Fn(yb),a.onRight),Un(Fn(Gl),a.onSpace)],(e,r,a)=>[...a.stopSpaceKeyup?[Un(Fn(Gl),Mh)]:[],Un(Fn(bb),a.onEscape)],e=>e.focusIn);const i_=T1.schema(),l_=Uy.schema(),AA=t_.schema(),c_=_A.schema(),NA=OC.schema(),e2=P3.schema(),RA=a_.schema(),d_=OA.schema(),Kt=Zg({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:i_,cyclic:l_,flow:AA,flatgrid:c_,matrix:NA,execution:e2,menu:RA,special:d_}),name:"keying",active:{events:(e,r)=>e.handler.toEvents(e,r)},apis:{focusIn:(e,r,a)=>{r.sendFocusIn(r).fold(()=>{e.getSystem().triggerFocus(e.element,e.element)},l=>{l(e,r,a)})},setGridSize:(e,r,a,l,m)=>{ws(a,"setGridSize")?a.setGridSize(l,m):console.error("Layout does not support setGridSize")}},state:F3}),u_=(e,r)=>{nh(()=>{(a=>{const g=a.components();var x;Qt((x=a).components(),k=>tn(k.element)),Lo(x.element),x.syncComponents();const f=St(r,e.getSystem().build),w=qa(g,f);Qt(w,x=>{ud(x),a.getSystem().removeFromWorld(x)}),Qt(f,x=>{h1(x)?tm(a,x):(a.getSystem().addToWorld(x),tm(a,x),Is(a.element)&&Yg(x))}),a.syncComponents()})(e)},e.element)},BC=(e,r)=>{nh(()=>{((a,l)=>{const g=a.components(),f=Vt(l,k=>Bg(k).toArray());Qt(g,k=>{Do(f,k)||vh(k)});const w=(k=e.element,O=r,A=e.getSystem().buildOrPatch,Bc(k,O,(D,P)=>dc(k,P,D,A))),x=qa(g,w);var k,O,A;Qt(x,k=>{h1(k)&&vh(k)}),Qt(w,k=>{h1(k)||db(a,k)}),a.syncComponents()})(e,r)},e.element)},m_=(e,r,a,l)=>{vh(r);const m=dc(e.element,a,l,e.getSystem().buildOrPatch);db(e,m),e.syncComponents()},t2=(e,r,a)=>{const l=e.getSystem().build(a);yh(e,l,r)},g_=(e,r,a,l)=>{hc(r),t2(e,(m,g)=>{return w=g,void un(f=m,a).fold(()=>{Co(f,w)},k=>{xt(k,w)});var f,w},l)},o2=(e,r)=>e.components(),p_=(e,r,a,l,m)=>{const g=o2(e);return M.from(g[l]).map(f=>(m.fold(()=>hc(f),w=>{(r.reuseDom?m_:g_)(e,f,l,w)}),f))};var MA=Object.freeze({__proto__:null,append:(e,r,a,l)=>{t2(e,Co,l)},prepend:(e,r,a,l)=>{t2(e,vo,l)},remove:(e,r,a,l)=>{const m=o2(e);Ue(m,f=>se(l.element,f.element)).each(hc)},replaceAt:p_,replaceBy:(e,r,a,l,m)=>{const g=o2(e);return ma(g,l).bind(f=>p_(e,r,0,f,m))},set:(e,r,a,l)=>(r.reuseDom?BC:u_)(e,l),contents:o2});const Ko=Da({fields:[Na("reuseDom",!0)],name:"replacing",apis:MA}),on=(e,r)=>({key:e,value:{config:{},me:((l,m)=>{const g=Dr(m);return Da({fields:[Xe("enabled")],name:l,active:{events:ie(g)}})})(e,r),configAsRaw:ie({}),initialConfig:{},state:El}}),h_=(e,r)=>{r.ignore||(Ul(e.element),r.onFocus(e))};var DA=Object.freeze({__proto__:null,focus:h_,blur:(e,r)=>{r.ignore||q0(e.element)},isFocused:e=>za(e.element)}),f_=Object.freeze({__proto__:null,exhibit:(e,r)=>Mc(r.ignore?{}:{attributes:{tabindex:"-1"}}),events:e=>Dr([Qe(Id(),(r,a)=>{h_(r,e),a.stop()})].concat(e.stopMousedown?[Qe(ci(),(r,a)=>{a.event.prevent()})]:[]))}),b_=[Rn("onFocus"),Ie("stopMousedown",!1),Ie("ignore",!1)];const Io=Da({fields:b_,name:"focusing",active:f_,apis:DA}),Ob=(e,r,a,l)=>{const m=a.get();var g,w;a.set(l),g=e,w=a,r.toggleClass.each(x=>{w.get()?Gn(g.element,x):ms(g.element,x)}),((g,f,w)=>{const x=f.aria;x.update(g,x,w.get())})(e,r,a),m!==l&&r.onToggled(e,l)},LC=(e,r,a)=>{Ob(e,r,a,!a.get())},IC=(e,r,a)=>{Ob(e,r,a,r.selected)};var rp=Object.freeze({__proto__:null,onLoad:IC,toggle:LC,isOn:(e,r,a)=>a.get(),on:(e,r,a)=>{Ob(e,r,a,!0)},off:(e,r,a)=>{Ob(e,r,a,!1)},set:Ob}),v_=Object.freeze({__proto__:null,exhibit:()=>Mc({}),events:(e,r)=>{const a=(l=e,m=r,g=LC,Gi(w=>{g(w,l,m)}));var l,m,g;const f=$0(e,r,IC);return Dr(dn([e.toggleOnExecute?[a]:[],[f]]))}});const HC=(e,r,a)=>{No(e.element,"aria-expanded",a)};var PC=[Ie("selected",!1),In("toggleClass"),Ie("toggleOnExecute",!0),Rn("onToggled"),Cl("aria",{mode:"none"},Qi("mode",{pressed:[Ie("syncWithExpanded",!1),Vr("update",(e,r,a)=>{No(e.element,"aria-pressed",a),r.syncWithExpanded&&HC(e,0,a)})],checked:[Vr("update",(e,r,a)=>{No(e.element,"aria-checked",a)})],expanded:[Vr("update",HC)],selected:[Vr("update",(e,r,a)=>{No(e.element,"aria-selected",a)})],none:[Vr("update",yt)]}))];const vn=Da({fields:PC,name:"toggling",active:v_,apis:rp,state:{init:()=>{const e=ho(!1);return{get:()=>e.get(),set:r=>e.set(r),clear:()=>e.set(!1),readState:()=>e.get()}}}}),FC=()=>{const e=(r,a)=>{a.stop(),gu(r)};return[Qe(va(),e),Qe(Ss(),e),Fd(td()),Fd(ci())]},N1=e=>Dr(dn([e.map(r=>Gi((a,l)=>{r(a),l.stop()})).toArray(),FC()])),n2="alloy.item-hover",y_="alloy.item-focus",Xm="alloy.item-toggled",VC=e=>{(Hc(e.element).isNone()||Io.isFocused(e))&&(Io.isFocused(e)||Io.focus(e),io(e,n2,{item:e}))},zC=e=>{io(e,y_,{item:e})},w_=ie(n2),BA=ie(y_),Ab=ie(Xm),Nb=e=>e.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),x_=[Xe("data"),Xe("components"),Xe("dom"),Ie("hasSubmenu",!1),In("toggling"),_u("itemBehaviours",[vn,Io,Kt,Ft]),Ie("ignoreFocus",!1),Ie("domModification",{}),Vr("builder",e=>({dom:e.dom,domModification:{...e.domModification,attributes:{role:Nb(e),...e.domModification.attributes,"aria-haspopup":e.hasSubmenu,...e.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Gm(e.itemBehaviours,[e.toggling.fold(vn.revoke,r=>{return vn.config({aria:{mode:"checked"},...Wi(a=r,(l,m)=>"exclusive"!==m),onToggled:(l,m)=>{var g;Ut(a.onToggled)&&a.onToggled(l,m),io(g=l,Xm,{item:g,state:m})}});var a}),Io.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:r=>{zC(r)}}),Kt.config({mode:"execution"}),Ft.config({store:{mode:"memory",initialValue:e.data}}),on("item-type-events",[...FC(),Qe(uu(),VC),Qe(ju(),Io.focus)])]),components:e.components,eventOrder:e.eventOrder})),Ie("eventOrder",{})],C_=[Xe("dom"),Xe("components"),Vr("builder",e=>({dom:e.dom,components:e.components,events:Dr([N0(ju())])}))],sm=ie("item-widget"),am=ie([_t({name:"widget",overrides:e=>({behaviours:Re([Ft.config({store:{mode:"manual",getValue:r=>e.data,setValue:yt}})])})})]),S_=[Xe("uid"),Xe("data"),Xe("components"),Xe("dom"),Ie("autofocus",!1),Ie("ignoreFocus",!1),_u("widgetBehaviours",[Ft,Io,Kt]),Ie("domModification",{}),Ym(am()),Vr("builder",e=>{const r=Xs(sm(),e,am()),a=Vi(sm(),e,r.internals()),l=g=>Jn(g,e,"widget").map(f=>(Kt.focusIn(f),f)),m=(g,f)=>(Oh(f.event.target)||e.autofocus&&f.setSource(g.element),M.none());return{dom:e.dom,components:a,domModification:e.domModification,events:Dr([Gi((g,f)=>{l(g).each(w=>{f.stop()})}),Qe(uu(),VC),Qe(ju(),(g,f)=>{e.autofocus?l(g):Io.focus(g)})]),behaviours:Gm(e.widgetBehaviours,[Ft.config({store:{mode:"memory",initialValue:e.data}}),Io.config({ignore:e.ignoreFocus,onFocus:g=>{zC(g)}}),Kt.config({mode:"special",focusIn:e.autofocus?g=>{l(g)}:Yf(),onLeft:m,onRight:m,onEscape:(g,f)=>Io.isFocused(g)||e.autofocus?(e.autofocus&&f.setSource(g.element),M.none()):(Io.focus(g),M.some(!0))})])}})],Jm=Qi("type",{widget:S_,item:x_,separator:C_}),ZC=ie([Eo({factory:{sketch:e=>{const r=Aa("menu.spec item",Jm,e);return r.builder(r)}},name:"items",unit:"item",defaults:(e,r)=>Fo(r,"uid")?r:{...r,uid:sd("item")},overrides:(e,r)=>({type:r.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),k_=ie([Xe("value"),Xe("items"),Xe("dom"),Xe("components"),Ie("eventOrder",{}),La("menuBehaviours",[sr,Ft,bn,Kt]),Cl("movement",{mode:"menu",moveOnTab:!0},Qi("mode",{grid:[Uf(),Vr("config",(e,r)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:e.focusManager}))],matrix:[Vr("config",(e,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+e.markers.item},previousSelector:r.previousSelector,focusManager:e.focusManager})),Xe("rowSelector"),Ie("previousSelector",M.none)],menu:[Ie("moveOnTab",!0),Vr("config",(e,r)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:r.moveOnTab,focusManager:e.focusManager}))]})),wi("markers",Zf()),Ie("fakeFocus",!1),Ie("focusManager",Zy()),Rn("onHighlight"),Rn("onDehighlight")]),UC=ie("alloy.menu-focus"),sp=Si({name:"Menu",configFields:k_(),partFields:ZC(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:gs(e.menuBehaviours,[sr.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Ft.config({store:{mode:"memory",initialValue:e.value}}),bn.config({find:M.some}),Kt.config(e.movement.config(e,e.movement))]),events:Dr([Qe(BA(),(m,g)=>{const f=g.event;m.getSystem().getByDom(f.target).each(w=>{sr.highlight(m,w),g.stop(),io(m,UC(),{menu:m,item:w})})}),Qe(w_(),(m,g)=>{sr.highlight(m,g.event.item)}),Qe(Ab(),(m,g)=>{const{item:f,state:w}=g.event;w&&"menuitemradio"===qr(f.element,"role")&&((x,k)=>{const O=Fi(x.element,'[role="menuitemradio"][aria-checked="true"]');Qt(O,A=>{se(A,k.element)||x.getSystem().getByDom(A).each(D=>{vn.off(D)})})})(m,f)})]),components:r,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),r2=(e,r,a,l)=>jt(a,l).bind(m=>jt(e,m).bind(g=>{const f=r2(e,r,a,g);return M.some([g].concat(f))})).getOr([]),jC=e=>"prepared"===e.type?M.some(e.menu):M.none(),IA=jC,__=Jt("tiered-menu-item-highlight"),Rb=Jt("tiered-menu-item-dehighlight");var Xi;!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(Xi||(Xi={}));const WC=ie("collapse-item"),Lh=ql({name:"TieredMenu",configFields:[Jp("onExecute"),Jp("onEscape"),mc("onOpenMenu"),mc("onOpenSubmenu"),Rn("onRepositionMenu"),Rn("onCollapseMenu"),Ie("highlightOnOpen",Xi.HighlightMenuAndItem),xr("data",[Xe("primary"),Xe("menus"),Xe("expansions")]),Ie("fakeFocus",!1),Rn("onHighlightItem"),Rn("onDehighlightItem"),Rn("onHover"),wu(),Xe("dom"),Ie("navigateOnHover",!0),Ie("stayInDom",!1),La("tmenuBehaviours",[Kt,sr,bn,Ko]),Ie("eventOrder",{})],apis:{collapseMenu:(e,r)=>{e.collapseMenu(r)},highlightPrimary:(e,r)=>{e.highlightPrimary(r)},repositionMenus:(e,r)=>{e.repositionMenus(r)}},factory:(e,r)=>{const a=Ur(),l=(()=>{const e=ho({}),r=ho({}),a=ho({}),l=Ur(),m=ho({}),g=x=>f(x).bind(jC),f=x=>jt(r.get(),x),w=x=>jt(e.get(),x);return{setMenuBuilt:(x,k)=>{r.set({...r.get(),[x]:{type:"prepared",menu:k}})},setContents:(x,k,O,A)=>{l.set(x),e.set(O),r.set(k),m.set(A);const D=((P,Z)=>{const te={};Nn(P,(j,ne)=>{Qt(j,le=>{te[le]=ne})});const oe=Z,ae=fr(Z,(j,ne)=>({k:j,v:ne})),X=Zn(ae,(j,ne)=>[ne].concat(r2(te,oe,ae,ne)));return Zn(te,j=>jt(X,j).getOr([j]))})(A,O);a.set(D)},expand:x=>jt(e.get(),x).map(k=>{const O=jt(a.get(),x).getOr([]);return[k].concat(O)}),refresh:x=>jt(a.get(),x),collapse:x=>jt(a.get(),x).bind(k=>k.length>1?M.some(k.slice(1)):M.none()),lookupMenu:f,lookupItem:w,otherMenus:x=>{const k=m.get();return qa(Sr(k),x)},getPrimary:()=>l.get().bind(g),getMenus:()=>r.get(),clear:()=>{e.set({}),r.set({}),a.set({}),l.clear()},isClear:()=>l.get().isNone(),getTriggeringPath:(x,k)=>{const O=zt(w(x).toArray(),A=>g(A).isSome());return jt(a.get(),x).bind(A=>{const D=lr(O.concat(A));return(P=>{const Z=[];for(let te=0;te<P.length;te++){const oe=P[te];if(!oe.isSome())return M.none();Z.push(oe.getOrDie())}return M.some(Z)})(Vt(D,(P,Z)=>{return(te=P,oe=k,ae=D.slice(0,Z+1),g(te).bind(X=>{return(j=te,ga(e.get(),(ne,le)=>ne===j)).bind(j=>oe(j).map(ne=>({triggeredMenu:X,triggeringItem:ne,triggeringPath:ae})));var j})).fold(()=>os(l.get(),P)?[]:[M.none()],te=>[M.some(te)]);var te,oe,ae}))})}}})(),m=j=>Ft.getValue(j).value,f=sr.highlight,w=(j,ne)=>{f(j,ne),sr.getHighlighted(ne).orThunk(()=>sr.getFirst(ne)).each(le=>{e.fakeFocus?sr.highlight(ne,le):Nf(j,le.element,ju())})},x=(j,ne)=>Ot(St(ne,le=>j.lookupMenu(le).bind(me=>"prepared"===me.type?M.some(me.menu):M.none()))),k=(j,ne,le)=>{const me=x(ne,ne.otherMenus(le));Qt(me,xe=>{ks(xe.element,[e.markers.backgroundMenu]),e.stayInDom||Ko.remove(j,xe)})},O=(j,ne)=>{const le=(me=j,a.get().getOrThunk(()=>{const xe={},ze=Fi(me.element,`.${e.markers.item}`),ot=zt(ze,st=>"true"===qr(st,"aria-haspopup"));return Qt(ot,st=>{me.getSystem().getByDom(st).each(nt=>{const Ht=m(nt);xe[Ht]=nt})}),a.set(xe),xe}));var me;Nn(le,(me,xe)=>{const ze=Do(ne,xe);No(me.element,"aria-expanded",ze)})},A=(j,ne,le)=>M.from(le[0]).bind(me=>ne.lookupMenu(me).bind(xe=>{if("notbuilt"===xe.type)return M.none();{const ze=xe.menu,ot=x(ne,le.slice(1));return Qt(ot,st=>{Gn(st.element,e.markers.backgroundMenu)}),Is(ze.element)||Ko.append(j,Tl(ze)),ks(ze.element,[e.markers.backgroundMenu]),w(j,ze),k(j,ne,le),M.some(ze)}}));let D;var j;(j=D||(D={}))[j.HighlightSubmenu=0]="HighlightSubmenu",j[j.HighlightParent=1]="HighlightParent";const P=(j,ne,le=D.HighlightSubmenu)=>{if(ne.hasConfigured(Ro)&&Ro.isDisabled(ne))return M.some(ne);{const me=m(ne);return l.expand(me).bind(xe=>(O(j,xe),M.from(xe[0]).bind(ze=>l.lookupMenu(ze).bind(ot=>{const st=((nt,Ht,Yt)=>{if("notbuilt"===Yt.type){const go=nt.getSystem().build(Yt.nbMenu());return l.setMenuBuilt(Ht,go),go}return Yt.menu})(j,ze,ot);return Is(st.element)||Ko.append(j,Tl(st)),e.onOpenSubmenu(j,ne,st,lr(xe)),le===D.HighlightSubmenu?(sr.highlightFirst(st),A(j,l,xe)):(sr.dehighlightAll(st),M.some(ne))}))))}},Z=(j,ne)=>{const le=m(ne);return l.collapse(le).bind(me=>(O(j,me),A(j,l,me).map(xe=>(e.onCollapseMenu(j,ne,xe),xe))))},te=j=>(ne,le)=>uc(le.getSource(),`.${e.markers.item}`).bind(me=>ne.getSystem().getByDom(me).toOptional().bind(xe=>j(ne,xe).map(fn))),oe=Dr([Qe(UC(),(j,ne)=>{l.lookupItem(m(ne.event.item)).each(()=>{sr.highlight(j,ne.event.menu);const xe=m(ne.event.item);l.refresh(xe).each(ze=>k(j,l,ze))})}),Gi((j,ne)=>{const le=ne.event.target;j.getSystem().getByDom(le).each(me=>{0===m(me).indexOf("collapse-item")&&Z(j,me),P(j,me,D.HighlightSubmenu).fold(()=>{e.onExecute(j,me)},yt)})}),Br((j,ne)=>{(le=>{const me=(ze=le,ot=e.data.primary,Zn(e.data.menus,(nt,Ht)=>{const Yt=()=>sp.sketch({...nt,value:Ht,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:(go,Uo)=>{io(go,__,{menuComp:go,itemComp:Uo})},onDehighlight:(go,Uo)=>{io(go,Rb,{menuComp:go,itemComp:Uo})},focusManager:e.fakeFocus?kA():Zy()});return Ht===ot?{type:"prepared",menu:ze.getSystem().build(Yt())}:{type:"notbuilt",nbMenu:Yt}})),xe=Zn(e.data.menus,(ne,le)=>Vt(ne.items,me=>"separator"===me.type?[]:[me.data.value]));var ze,ot;return l.setContents(e.data.primary,me,e.data.expansions,xe),l.getPrimary()})(j).each(le=>{Ko.append(j,Tl(le)),e.onOpenMenu(j,le),e.highlightOnOpen===Xi.HighlightMenuAndItem?w(j,le):e.highlightOnOpen===Xi.HighlightJustMenu&&f(j,le)})}),Qe(__,(j,ne)=>{e.onHighlightItem(j,ne.event.menuComp,ne.event.itemComp)}),Qe(Rb,(j,ne)=>{e.onDehighlightItem(j,ne.event.menuComp,ne.event.itemComp)}),...e.navigateOnHover?[Qe(w_(),(j,ne)=>{const le=ne.event.item;((me,xe)=>{const ze=m(xe);l.refresh(ze).bind(ot=>(O(me,ot),A(me,l,ot)))})(j,le),P(j,le,D.HighlightParent),e.onHover(j,le)})]:[]]),ae=j=>sr.getHighlighted(j).bind(sr.getHighlighted),X={collapseMenu:j=>{ae(j).each(ne=>{Z(j,ne)})},highlightPrimary:j=>{l.getPrimary().each(ne=>{w(j,ne)})},repositionMenus:j=>{l.getPrimary().bind(le=>ae(j).bind(me=>{const xe=m(me),ze=_a(l.getMenus()),ot=Ot(St(ze,IA));return l.getTriggeringPath(xe,st=>{return Yt=st,hs(ot,go=>{if(!go.getSystem().isConnected())return M.none();const Uo=sr.getCandidates(go);return Ue(Uo,$o=>m($o)===Yt)});var Yt})}).map(me=>({primary:le,triggeringPath:me}))).fold(()=>{var le;(le=j,M.from(le.components()[0]).filter(me=>"menu"===qr(me.element,"role"))).each(le=>{e.onRepositionMenu(j,le,[])})},({primary:le,triggeringPath:me})=>{e.onRepositionMenu(j,le,me)})}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:gs(e.tmenuBehaviours,[Kt.config({mode:"special",onRight:te((j,ne)=>Oh(ne.element)?M.none():P(j,ne,D.HighlightSubmenu)),onLeft:te((j,ne)=>Oh(ne.element)?M.none():Z(j,ne)),onEscape:te((j,ne)=>Z(j,ne).orThunk(()=>e.onEscape(j,ne).map(()=>j))),focusIn:(j,ne)=>{l.getPrimary().each(le=>{Nf(j,le.element,ju())})}}),sr.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),bn.config({find:j=>sr.getHighlighted(j)}),Ko.config({})]),eventOrder:e.eventOrder,apis:X,events:oe}},extraApis:{tieredData:(e,r,a)=>({primary:e,menus:r,expansions:a}),singleData:(e,r)=>({primary:e,menus:ol(e,r),expansions:{}}),collapseItem:e=>({value:Jt(WC()),meta:{text:e}})}}),_s=ql({name:"InlineView",configFields:[Xe("lazySink"),Rn("onShow"),Rn("onHide"),Hs("onEscape"),La("inlineBehaviours",[Pn,Ft,il]),el("fireDismissalEventInstead",[Ie("event",Pd())]),el("fireRepositionEventInstead",[Ie("event",gy())]),Ie("getRelated",M.none),Ie("isExtraPart",Ke),Ie("eventOrder",M.none)],factory:(e,r)=>{const a=(f,w,x,k)=>{const O=e.lazySink(f).getOrDie();Pn.openWhileCloaked(f,w,()=>gi.positionWithinBounds(O,f,x,k())),Ft.setValue(f,M.some({mode:"position",config:x,getBounds:k}))},l=(f,w,x,k)=>{const O=((A,D,P,Z,te)=>{const oe=()=>A.lazySink(D),ae="horizontal"===Z.type?{layouts:{onLtr:()=>oh(),onRtl:()=>zg()}}:{},X=j=>2===j.length?ae:{};return Lh.sketch({dom:{tag:"div"},data:Z.data,markers:Z.menu.markers,highlightOnOpen:Z.menu.highlightOnOpen,fakeFocus:Z.menu.fakeFocus,onEscape:()=>(Pn.close(D),A.onEscape.map(j=>j(D)),M.some(!0)),onExecute:()=>M.some(!0),onOpenMenu:(j,ne)=>{gi.positionWithinBounds(oe().getOrDie(),ne,P,te())},onOpenSubmenu:(j,ne,le,me)=>{const xe=oe().getOrDie();gi.position(xe,le,{anchor:{type:"submenu",item:ne,...X(me)}})},onRepositionMenu:(j,ne,le)=>{const me=oe().getOrDie();gi.positionWithinBounds(me,ne,P,te()),Qt(le,xe=>{const ze=X(xe.triggeringPath);gi.position(me,xe.triggeredMenu,{anchor:{type:"submenu",item:xe.triggeringItem,...ze}})})}})})(e,f,w,x,k);Pn.open(f,O),Ft.setValue(f,M.some({mode:"menu",menu:O}))},m=f=>{Pn.isOpen(f)&&Ft.getValue(f).each(w=>{switch(w.mode){case"menu":Pn.getState(f).each(Lh.repositionMenus);break;case"position":const x=e.lazySink(f).getOrDie();gi.positionWithinBounds(x,f,w.config,w.getBounds())}})},g={setContent:(f,w)=>{Pn.setContent(f,w)},showAt:(f,w,x)=>{a(f,w,x,M.none)},showWithinBounds:a,showMenuAt:(f,w,x)=>{l(f,w,x,M.none)},showMenuWithinBounds:l,hide:f=>{Pn.isOpen(f)&&(Ft.setValue(f,M.none()),Pn.close(f))},getContent:f=>Pn.getState(f),reposition:m,isOpen:Pn.isOpen};return{uid:e.uid,dom:e.dom,behaviours:gs(e.inlineBehaviours,[Pn.config({isPartOf:(f,w,x)=>{return Ys(w,x)||(O=x,e.getRelated(f).exists(A=>Ys(A,O)));var O},getAttachPoint:f=>e.lazySink(f).getOrDie(),onOpen:f=>{e.onShow(f)},onClose:f=>{e.onHide(f)}}),Ft.config({store:{mode:"memory",initialValue:M.none()}}),il.config({channels:{...Wm({isExtraPart:r.isExtraPart,...e.fireDismissalEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({})}),...xh({...e.fireRepositionEventInstead.map(f=>({fireEventInstead:{event:f.event}})).getOr({}),doReposition:m})}})]),eventOrder:e.eventOrder,apis:g}},apis:{showAt:(e,r,a,l)=>{e.showAt(r,a,l)},showWithinBounds:(e,r,a,l,m)=>{e.showWithinBounds(r,a,l,m)},showMenuAt:(e,r,a,l)=>{e.showMenuAt(r,a,l)},showMenuWithinBounds:(e,r,a,l,m)=>{e.showMenuWithinBounds(r,a,l,m)},hide:(e,r)=>{e.hide(r)},isOpen:(e,r)=>e.isOpen(r),getContent:(e,r)=>e.getContent(r),setContent:(e,r,a)=>{e.setContent(r,a)},reposition:(e,r)=>{e.reposition(r)}}});var Mb=tinymce.util.Tools.resolve("tinymce.util.Delay");const pi=ql({name:"Button",factory:e=>{const r=N1(e.action),a=e.dom.tag,l=m=>jt(e.dom,"attributes").bind(g=>jt(g,m));return{uid:e.uid,dom:e.dom,components:e.components,events:r,behaviours:Gm(e.buttonBehaviours,[Io.config({}),Kt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:"button"===a?{type:l("type").getOr("button"),...l("role").map(m=>({role:m})).getOr({})}:{role:e.role.getOr(l("role").getOr("button"))}},eventOrder:e.eventOrder}},configFields:[Ie("uid",void 0),Xe("dom"),Ie("components",[]),_u("buttonBehaviours",[Io,Kt]),In("action"),In("role"),Ie("eventOrder",{})]}),im=e=>{const r=(e=>{const a=document.createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const l="HTML does not have a single root node";throw console.error(l,e),new Error(l)}return Nr(a.childNodes[0])})(e),a=ln(r),l=no(void 0!==(f=r).dom.attributes?f.dom.attributes:[],(x,k)=>"class"===k.name?x:{...x,[k.name]:k.value},{}),m=(f=>Array.prototype.slice.call(f.dom.classList,0))(r),g=0===a.length?{}:{innerHtml:Ra(r)};var f;return{tag:Dt(r),classes:m,attributes:l,...g}},pr=e=>{const r=void 0!==e.uid&&ws(e,"uid")?e.uid:sd("memento");return{get:a=>a.getSystem().getByUid(r).getOrDie(),getOpt:a=>a.getSystem().getByUid(r).toOptional(),asSpec:()=>({...e,uid:r})}},{entries:s2,setPrototypeOf:$C,isFrozen:E_,getPrototypeOf:Db,getOwnPropertyDescriptor:Bb}=Object;let{freeze:Nl,seal:$d,create:T_}=Object,{apply:a2,construct:i2}=typeof Reflect<"u"&&Reflect;a2||(a2=function(e,r,a){return e.apply(r,a)}),Nl||(Nl=function(e){return e}),$d||($d=function(e){return e}),i2||(i2=function(e,r){return new e(...r)});const HA=Gd(Array.prototype.forEach),O_=Gd(Array.prototype.pop),ap=Gd(Array.prototype.push),R1=Gd(String.prototype.toLowerCase),Lb=Gd(String.prototype.toString),PA=Gd(String.prototype.match),qd=Gd(String.prototype.replace),A_=Gd(String.prototype.indexOf),FA=Gd(String.prototype.trim),Fc=Gd(RegExp.prototype.test),Ib=(ip=TypeError,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i2(ip,r)});var ip;function Gd(e){return function(r){for(var a=arguments.length,l=new Array(a>1?a-1:0),m=1;m<a;m++)l[m-1]=arguments[m];return a2(e,r,l)}}function ar(e,r,a){var l;a=null!==(l=a)&&void 0!==l?l:R1,$C&&$C(e,null);let m=r.length;for(;m--;){let g=r[m];if("string"==typeof g){const f=a(g);f!==g&&(E_(r)||(r[m]=f),g=f)}e[g]=!0}return e}function Ih(e){const r=T_(null);for(const[a,l]of s2(e))r[a]=l;return r}function Ou(e,r){for(;null!==e;){const a=Bb(e,r);if(a){if(a.get)return Gd(a.get);if("function"==typeof a.value)return Gd(a.value)}e=Db(e)}return function(a){return console.warn("fallback value for",a),null}}const Vc=Nl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),l2=Nl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),c2=Nl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N_=Nl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hb=Nl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),VA=Nl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Pb=Nl(["#text"]),d2=Nl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),u2=Nl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qC=Nl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fb=Nl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zA=$d(/\{\{[\w\W]*|[\w\W]*\}\}/gm),R_=$d(/<%[\w\W]*|[\w\W]*%>/gm),GC=$d(/\${[\w\W]*}/gm),M_=$d(/^data-[\-\w.\u00B7-\uFFFF]/),KC=$d(/^aria-[\-\w]+$/),M1=$d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),m2=$d(/^(?:\w+script|data):/i),D_=$d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),YC=$d(/^html$/i);var g2=Object.freeze({__proto__:null,MUSTACHE_EXPR:zA,ERB_EXPR:R_,TMPLIT_EXPR:GC,DATA_ATTR:M_,ARIA_ATTR:KC,IS_ALLOWED_URI:M1,IS_SCRIPT_OR_DATA:m2,ATTR_WHITESPACE:D_,DOCTYPE_NAME:YC}),L_=function e(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const a=We=>e(We);if(a.version="3.0.5",a.removed=[],!r||!r.document||9!==r.document.nodeType)return a.isSupported=!1,a;const l=r.document,m=l.currentScript;let{document:g}=r;const{DocumentFragment:f,HTMLTemplateElement:w,Node:x,Element:k,NodeFilter:O,NamedNodeMap:A=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:D,DOMParser:P,trustedTypes:Z}=r,te=k.prototype,oe=Ou(te,"cloneNode"),ae=Ou(te,"nextSibling"),X=Ou(te,"childNodes"),j=Ou(te,"parentNode");if("function"==typeof w){const We=g.createElement("template");We.content&&We.content.ownerDocument&&(g=We.content.ownerDocument)}let ne,le="";const{implementation:me,createNodeIterator:xe,createDocumentFragment:ze,getElementsByTagName:ot}=g,{importNode:st}=l;let nt={};a.isSupported="function"==typeof s2&&"function"==typeof j&&me&&void 0!==me.createHTMLDocument;const{MUSTACHE_EXPR:Ht,ERB_EXPR:Yt,TMPLIT_EXPR:go,DATA_ATTR:Uo,ARIA_ATTR:$o,IS_SCRIPT_OR_DATA:On,ATTR_WHITESPACE:Qr}=g2;let{IS_ALLOWED_URI:Ls}=g2,qo=null;const Oi=ar({},[...Vc,...l2,...c2,...Hb,...Pb]);let Xo=null;const xa=ar({},[...d2,...u2,...qC,...Fb]);let jr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Rl=null,la=null,Ai=!0,qc=!0,Yx=!1,Xx=!0,S0=!1,vf=!1,E3=!1,k0=!1,yf=!1,ly=!1,cy=!1,T3=!0,hA=!1,O3=!0,_0=!1,wf={},xf=null;const es=ar({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let E0=null;const xg=ar({},["audio","video","img","source","image","track"]);let wN=null;const ER=ar({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fA="http://www.w3.org/1998/Math/MathML",bA="http://www.w3.org/2000/svg",Cf="http://www.w3.org/1999/xhtml";let Jx=Cf,xN=!1,CN=null;const j6=ar({},[fA,bA,Cf],Lb);let Qx;const W6=["application/xhtml+xml","text/html"];let tc,eC=null;const $6=g.createElement("form"),TR=function(We){return We instanceof RegExp||We instanceof Function},SN=function(We){if(!eC||eC!==We){if(We&&"object"==typeof We||(We={}),We=Ih(We),Qx=Qx=-1===W6.indexOf(We.PARSER_MEDIA_TYPE)?"text/html":We.PARSER_MEDIA_TYPE,tc="application/xhtml+xml"===Qx?Lb:R1,qo="ALLOWED_TAGS"in We?ar({},We.ALLOWED_TAGS,tc):Oi,Xo="ALLOWED_ATTR"in We?ar({},We.ALLOWED_ATTR,tc):xa,CN="ALLOWED_NAMESPACES"in We?ar({},We.ALLOWED_NAMESPACES,Lb):j6,wN="ADD_URI_SAFE_ATTR"in We?ar(Ih(ER),We.ADD_URI_SAFE_ATTR,tc):ER,E0="ADD_DATA_URI_TAGS"in We?ar(Ih(xg),We.ADD_DATA_URI_TAGS,tc):xg,xf="FORBID_CONTENTS"in We?ar({},We.FORBID_CONTENTS,tc):es,Rl="FORBID_TAGS"in We?ar({},We.FORBID_TAGS,tc):{},la="FORBID_ATTR"in We?ar({},We.FORBID_ATTR,tc):{},wf="USE_PROFILES"in We&&We.USE_PROFILES,Ai=!1!==We.ALLOW_ARIA_ATTR,qc=!1!==We.ALLOW_DATA_ATTR,Yx=We.ALLOW_UNKNOWN_PROTOCOLS||!1,Xx=!1!==We.ALLOW_SELF_CLOSE_IN_ATTR,S0=We.SAFE_FOR_TEMPLATES||!1,vf=We.WHOLE_DOCUMENT||!1,yf=We.RETURN_DOM||!1,ly=We.RETURN_DOM_FRAGMENT||!1,cy=We.RETURN_TRUSTED_TYPE||!1,k0=We.FORCE_BODY||!1,T3=!1!==We.SANITIZE_DOM,hA=We.SANITIZE_NAMED_PROPS||!1,O3=!1!==We.KEEP_CONTENT,_0=We.IN_PLACE||!1,Ls=We.ALLOWED_URI_REGEXP||M1,Jx=We.NAMESPACE||Cf,jr=We.CUSTOM_ELEMENT_HANDLING||{},We.CUSTOM_ELEMENT_HANDLING&&TR(We.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(jr.tagNameCheck=We.CUSTOM_ELEMENT_HANDLING.tagNameCheck),We.CUSTOM_ELEMENT_HANDLING&&TR(We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(jr.attributeNameCheck=We.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),We.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(jr.allowCustomizedBuiltInElements=We.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),S0&&(qc=!1),ly&&(yf=!0),wf&&(qo=ar({},[...Pb]),Xo=[],!0===wf.html&&(ar(qo,Vc),ar(Xo,d2)),!0===wf.svg&&(ar(qo,l2),ar(Xo,u2),ar(Xo,Fb)),!0===wf.svgFilters&&(ar(qo,c2),ar(Xo,u2),ar(Xo,Fb)),!0===wf.mathMl&&(ar(qo,Hb),ar(Xo,qC),ar(Xo,Fb))),We.ADD_TAGS&&(qo===Oi&&(qo=Ih(qo)),ar(qo,We.ADD_TAGS,tc)),We.ADD_ATTR&&(Xo===xa&&(Xo=Ih(Xo)),ar(Xo,We.ADD_ATTR,tc)),We.ADD_URI_SAFE_ATTR&&ar(wN,We.ADD_URI_SAFE_ATTR,tc),We.FORBID_CONTENTS&&(xf===es&&(xf=Ih(xf)),ar(xf,We.FORBID_CONTENTS,tc)),O3&&(qo["#text"]=!0),vf&&ar(qo,["html","head","body"]),qo.table&&(ar(qo,["tbody"]),delete Rl.tbody),We.TRUSTED_TYPES_POLICY){if("function"!=typeof We.TRUSTED_TYPES_POLICY.createHTML)throw Ib('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof We.TRUSTED_TYPES_POLICY.createScriptURL)throw Ib('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=We.TRUSTED_TYPES_POLICY,le=ne.createHTML("")}else void 0===ne&&(ne=function(yo,Jo){if("object"!=typeof yo||"function"!=typeof yo.createPolicy)return null;let ts=null;const Qs="data-tt-policy-suffix";Jo&&Jo.hasAttribute(Qs)&&(ts=Jo.getAttribute(Qs));const Ca="dompurify"+(ts?"#"+ts:"");try{return yo.createPolicy(Ca,{createHTML:ca=>ca,createScriptURL:ca=>ca})}catch{return console.warn("TrustedTypes policy "+Ca+" could not be created."),null}}(Z,m)),null!==ne&&"string"==typeof le&&(le=ne.createHTML(""));Nl&&Nl(We),eC=We}},OR=ar({},["mi","mo","mn","ms","mtext"]),AR=ar({},["foreignobject","desc","title","annotation-xml"]),q6=ar({},["title","style","font","a","script"]),vA=ar({},l2);ar(vA,c2),ar(vA,N_);const kN=ar({},Hb);ar(kN,VA);const dy=function(We){ap(a.removed,{element:We});try{We.parentNode.removeChild(We)}catch{We.remove()}},A3=function(We,yo){try{ap(a.removed,{attribute:yo.getAttributeNode(We),from:yo})}catch{ap(a.removed,{attribute:null,from:yo})}if(yo.removeAttribute(We),"is"===We&&!Xo[We])if(yf||ly)try{dy(yo)}catch{}else try{yo.setAttribute(We,"")}catch{}},NR=function(We){let yo,Jo;if(k0)We="<remove></remove>"+We;else{const Ca=PA(We,/^[\r\n\t ]+/);Jo=Ca&&Ca[0]}"application/xhtml+xml"===Qx&&Jx===Cf&&(We='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+We+"</body></html>");const ts=ne?ne.createHTML(We):We;if(Jx===Cf)try{yo=(new P).parseFromString(ts,Qx)}catch{}if(!yo||!yo.documentElement){yo=me.createDocument(Jx,"template",null);try{yo.documentElement.innerHTML=xN?le:ts}catch{}}const Qs=yo.body||yo.documentElement;return We&&Jo&&Qs.insertBefore(g.createTextNode(Jo),Qs.childNodes[0]||null),Jx===Cf?ot.call(yo,vf?"html":"body")[0]:vf?yo.documentElement:Qs},RR=function(We){return xe.call(We.ownerDocument||We,We,O.SHOW_ELEMENT|O.SHOW_COMMENT|O.SHOW_TEXT,null,!1)},yA=function(We){return"object"==typeof x?We instanceof x:We&&"object"==typeof We&&"number"==typeof We.nodeType&&"string"==typeof We.nodeName},Sf=function(We,yo,Jo){nt[We]&&HA(nt[We],ts=>{ts.call(a,yo,Jo,eC)})},MR=function(We){let yo;if(Sf("beforeSanitizeElements",We,null),(Jo=We)instanceof D&&("string"!=typeof Jo.nodeName||"string"!=typeof Jo.textContent||"function"!=typeof Jo.removeChild||!(Jo.attributes instanceof A)||"function"!=typeof Jo.removeAttribute||"function"!=typeof Jo.setAttribute||"string"!=typeof Jo.namespaceURI||"function"!=typeof Jo.insertBefore||"function"!=typeof Jo.hasChildNodes))return dy(We),!0;var Jo;const ts=tc(We.nodeName);if(Sf("uponSanitizeElement",We,{tagName:ts,allowedTags:qo}),We.hasChildNodes()&&!yA(We.firstElementChild)&&(!yA(We.content)||!yA(We.content.firstElementChild))&&Fc(/<[/\w]/g,We.innerHTML)&&Fc(/<[/\w]/g,We.textContent))return dy(We),!0;if(!qo[ts]||Rl[ts]){if(!Rl[ts]&&BR(ts)&&(jr.tagNameCheck instanceof RegExp&&Fc(jr.tagNameCheck,ts)||jr.tagNameCheck instanceof Function&&jr.tagNameCheck(ts)))return!1;if(O3&&!xf[ts]){const Qs=j(We)||We.parentNode,Ca=X(We)||We.childNodes;if(Ca&&Qs)for(let ca=Ca.length-1;ca>=0;--ca)Qs.insertBefore(oe(Ca[ca],!0),ae(We))}return dy(We),!0}return We instanceof k&&!function(Qs){let Ca=j(Qs);Ca&&Ca.tagName||(Ca={namespaceURI:Jx,tagName:"template"});const ca=R1(Qs.tagName),Wa=R1(Ca.tagName);return!!CN[Qs.namespaceURI]&&(Qs.namespaceURI===bA?Ca.namespaceURI===Cf?"svg"===ca:Ca.namespaceURI===fA?"svg"===ca&&("annotation-xml"===Wa||OR[Wa]):!!vA[ca]:Qs.namespaceURI===fA?Ca.namespaceURI===Cf?"math"===ca:Ca.namespaceURI===bA?"math"===ca&&AR[Wa]:!!kN[ca]:Qs.namespaceURI===Cf?!(Ca.namespaceURI===bA&&!AR[Wa])&&!(Ca.namespaceURI===fA&&!OR[Wa])&&!kN[ca]&&(q6[ca]||!vA[ca]):!("application/xhtml+xml"!==Qx||!CN[Qs.namespaceURI]))}(We)?(dy(We),!0):"noscript"!==ts&&"noembed"!==ts&&"noframes"!==ts||!Fc(/<\/no(script|embed|frames)/i,We.innerHTML)?(S0&&3===We.nodeType&&(yo=We.textContent,yo=qd(yo,Ht," "),yo=qd(yo,Yt," "),yo=qd(yo,go," "),We.textContent!==yo&&(ap(a.removed,{element:We.cloneNode()}),We.textContent=yo)),Sf("afterSanitizeElements",We,null),!1):(dy(We),!0)},DR=function(We,yo,Jo){if(T3&&("id"===yo||"name"===yo)&&(Jo in g||Jo in $6))return!1;if((!qc||la[yo]||!Fc(Uo,yo))&&(!Ai||!Fc($o,yo)))if(!Xo[yo]||la[yo]){if(!(BR(We)&&(jr.tagNameCheck instanceof RegExp&&Fc(jr.tagNameCheck,We)||jr.tagNameCheck instanceof Function&&jr.tagNameCheck(We))&&(jr.attributeNameCheck instanceof RegExp&&Fc(jr.attributeNameCheck,yo)||jr.attributeNameCheck instanceof Function&&jr.attributeNameCheck(yo))||"is"===yo&&jr.allowCustomizedBuiltInElements&&(jr.tagNameCheck instanceof RegExp&&Fc(jr.tagNameCheck,Jo)||jr.tagNameCheck instanceof Function&&jr.tagNameCheck(Jo))))return!1}else if(!wN[yo]&&!Fc(Ls,qd(Jo,Qr,""))&&("src"!==yo&&"xlink:href"!==yo&&"href"!==yo||"script"===We||0!==A_(Jo,"data:")||!E0[We])&&(!Yx||Fc(On,qd(Jo,Qr,"")))&&Jo)return!1;return!0},BR=function(We){return We.indexOf("-")>0},LR=function(We){let yo,Jo,ts,Qs;Sf("beforeSanitizeAttributes",We,null);const{attributes:Ca}=We;if(!Ca)return;const ca={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Xo};for(Qs=Ca.length;Qs--;){yo=Ca[Qs];const{name:Wa,namespaceURI:tC}=yo;Jo="value"===Wa?yo.value:FA(yo.value);const K6=Jo;if(ts=tc(Wa),ca.attrName=ts,ca.attrValue=Jo,ca.keepAttr=!0,ca.forceKeepAttr=void 0,Sf("uponSanitizeAttribute",We,ca),Jo=ca.attrValue,ca.forceKeepAttr)continue;if(!ca.keepAttr){A3(Wa,We);continue}if(!Xx&&Fc(/\/>/i,Jo)){A3(Wa,We);continue}S0&&(Jo=qd(Jo,Ht," "),Jo=qd(Jo,Yt," "),Jo=qd(Jo,go," "));const IR=tc(We.nodeName);if(DR(IR,ts,Jo)){if(!hA||"id"!==ts&&"name"!==ts||(A3(Wa,We),Jo="user-content-"+Jo),ne&&"object"==typeof Z&&"function"==typeof Z.getAttributeType&&!tC)switch(Z.getAttributeType(IR,ts)){case"TrustedHTML":Jo=ne.createHTML(Jo);break;case"TrustedScriptURL":Jo=ne.createScriptURL(Jo)}if(Jo!==K6)try{tC?We.setAttributeNS(tC,Wa,Jo):We.setAttribute(Wa,Jo)}catch{A3(Wa,We)}}else A3(Wa,We)}Sf("afterSanitizeAttributes",We,null)},G6=function We(yo){let Jo;const ts=RR(yo);for(Sf("beforeSanitizeShadowDOM",yo,null);Jo=ts.nextNode();)Sf("uponSanitizeShadowNode",Jo,null),MR(Jo)||(Jo.content instanceof f&&We(Jo.content),LR(Jo));Sf("afterSanitizeShadowDOM",yo,null)};return a.sanitize=function(We){let yo,Jo,ts,Qs,Ca=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(xN=!We,xN&&(We="\x3c!--\x3e"),"string"!=typeof We&&!yA(We)){if("function"!=typeof We.toString)throw Ib("toString is not a function");if("string"!=typeof(We=We.toString()))throw Ib("dirty is not a string, aborting")}if(!a.isSupported)return We;if(E3||SN(Ca),a.removed=[],"string"==typeof We&&(_0=!1),_0){if(We.nodeName){const tC=tc(We.nodeName);if(!qo[tC]||Rl[tC])throw Ib("root node is forbidden and cannot be sanitized in-place")}}else if(We instanceof x)yo=NR("\x3c!----\x3e"),Jo=yo.ownerDocument.importNode(We,!0),1===Jo.nodeType&&"BODY"===Jo.nodeName||"HTML"===Jo.nodeName?yo=Jo:yo.appendChild(Jo);else{if(!yf&&!S0&&!vf&&-1===We.indexOf("<"))return ne&&cy?ne.createHTML(We):We;if(yo=NR(We),!yo)return yf?null:cy?le:""}yo&&k0&&dy(yo.firstChild);const ca=RR(_0?We:yo);for(;ts=ca.nextNode();)MR(ts)||(ts.content instanceof f&&G6(ts.content),LR(ts));if(_0)return We;if(yf){if(ly)for(Qs=ze.call(yo.ownerDocument);yo.firstChild;)Qs.appendChild(yo.firstChild);else Qs=yo;return(Xo.shadowroot||Xo.shadowrootmode)&&(Qs=st.call(l,Qs,!0)),Qs}let Wa=vf?yo.outerHTML:yo.innerHTML;return vf&&qo["!doctype"]&&yo.ownerDocument&&yo.ownerDocument.doctype&&yo.ownerDocument.doctype.name&&Fc(YC,yo.ownerDocument.doctype.name)&&(Wa="<!DOCTYPE "+yo.ownerDocument.doctype.name+">\n"+Wa),S0&&(Wa=qd(Wa,Ht," "),Wa=qd(Wa,Yt," "),Wa=qd(Wa,go," ")),ne&&cy?ne.createHTML(Wa):Wa},a.setConfig=function(We){SN(We),E3=!0},a.clearConfig=function(){eC=null,E3=!1},a.isValidAttribute=function(We,yo,Jo){eC||SN({});const ts=tc(We),Qs=tc(yo);return DR(ts,Qs,Jo)},a.addHook=function(We,yo){"function"==typeof yo&&(nt[We]=nt[We]||[],ap(nt[We],yo))},a.removeHook=function(We){if(nt[We])return O_(nt[We])},a.removeHooks=function(We){nt[We]&&(nt[We]=[])},a.removeAllHooks=function(){nt={}},a}();const p2=e=>L_().sanitize(e);var bc=tinymce.util.Tools.resolve("tinymce.util.I18n");const ZA={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},XC="temporary-placeholder",Vb=e=>()=>jt(e,XC).getOr("!not found!"),h2=(e,r)=>{const a=e.toLowerCase();if(bc.isRtl()){const l=As(m=a,"-rtl")?m:m+"-rtl";return Fo(r,l)?l:a}var m;return a},JC=(e,r)=>jt(r,h2(e,r)),I_=(e,r)=>{const a=r();return JC(e,a).getOrThunk(Vb(a))},zb=()=>on("add-focusable",[Br(e=>{qu(e.element,"svg").each(r=>No(r,"focusable","false"))})]),H_=(e,r,a,l)=>{var m,g;const f=(x=r,bc.isRtl()&&Fo(ZA,x)?["tox-icon--flip"]:[]),w=jt(a,h2(r,a)).or(l).getOrThunk(Vb(a));var x;return{dom:{tag:e.tag,attributes:null!==(m=e.attributes)&&void 0!==m?m:{},classes:e.classes.concat(f),innerHtml:w},behaviours:Re([...null!==(g=e.behaviours)&&void 0!==g?g:[],zb()])}},vd=(e,r,a,l=M.none())=>H_(r,e,a(),l),QC={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},D1=ql({name:"Notification",factory:e=>{const r=pr({dom:im(`<p>${p2(e.translationProvider(e.text))}</p>`),behaviours:Re([Ko.config({})])}),a=O=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${O}%`}}}),l=O=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${O}%`}}),m=pr({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},l(0)],behaviours:Re([Ko.config({})])}),g={updateProgress:(O,A)=>{O.getSystem().isConnected()&&m.getOpt(O).each(D=>{Ko.set(D,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(A)]},l(A)])})},updateText:(O,A)=>{if(O.getSystem().isConnected()){const D=r.get(O);Ko.set(D,[Yr(A)])}}},f=dn([e.icon.toArray(),e.level.toArray(),e.level.bind(O=>M.from(QC[O])).toArray()]),w=pr(pi.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[vd("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:O=>{e.onAction(O)}})),k=[((O,A,D)=>{const P=D(),Z=Ue(O,te=>Fo(P,h2(te,P)));return H_({tag:"div",classes:["tox-notification__icon"]},Z.getOr(XC),P,M.none())})(f,0,e.iconProvider),{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Re([Ko.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(O=>["tox-notification","tox-notification--in",`tox-notification--${O}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Re([Io.config({}),on("notification-events",[Qe(mu(),O=>{w.getOpt(O).each(Io.focus)})])]),components:k.concat(e.progress?[m.asSpec()]:[]).concat(e.closeButton?[w.asSpec()]:[]),apis:g}},configFields:[In("level"),Xe("progress"),In("icon"),Xe("onAction"),Xe("text"),Xe("iconProvider"),Xe("translationProvider"),Na("closeButton",!0)],apis:{updateProgress:(e,r,a)=>{e.updateProgress(r,a)},updateText:(e,r,a)=>{e.updateText(r,a)}}});var zc,Zb,lp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Hh=tinymce.util.Tools.resolve("tinymce.EditorManager"),B1=tinymce.util.Tools.resolve("tinymce.Env");(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(zc||(zc={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(Zb||(Zb={}));const Ir=e=>r=>r.options.get(e),Ph=e=>r=>M.from(e(r)),eS=e=>{const r=B1.deviceType.isPhone(),a=B1.deviceType.isTablet()||r,l=e.options.register,m=f=>Zo(f)||!1===f,g=f=>Zo(f)||Nt(f);l("skin",{processor:f=>Zo(f)||!1===f,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(e.getElement().offsetHeight,400)}),l("width",{processor:g,default:lp.DOM.getStyle(e.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:f=>Zo(f)||ua(f),default:!r}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:f=>ua(f)||Zo(f)||Or(f)?{value:f,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),$(9,f=>{l("toolbar"+(f+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Zb.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:e.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:m,default:"#top"}),l("anchor_bottom",{processor:m,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:f=>"both"===f||ua(f),default:!B1.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},tS=Ir("readonly"),f2=Ir("height"),b2=Ir("width"),Ub=Ph(Ir("min_width")),v2=Ph(Ir("min_height")),cp=Ph(Ir("max_width")),oS=Ph(Ir("max_height")),y2=Ph(Ir("style_formats")),w2=Ir("style_formats_merge"),x2=Ir("style_formats_autohide"),C2=Ir("content_langs"),P_=Ir("removed_menuitems"),L1=Ir("toolbar_mode"),S2=Ir("toolbar_groups"),k2=Ir("toolbar_location"),UA=Ir("fixed_toolbar_container"),jA=Ir("fixed_toolbar_container_target"),_2=Ir("toolbar_persist"),F_=Ir("toolbar_sticky_offset"),jb=Ir("menubar"),I1=Ir("toolbar"),nS=Ir("file_picker_callback"),E2=Ir("file_picker_validator_handler"),T2=Ir("font_size_input_default_unit"),rS=Ir("file_picker_types"),O2=Ir("typeahead_urls"),Wb=Ir("anchor_top"),sS=Ir("anchor_bottom"),Au=Ir("draggable_modal"),A2=Ir("statusbar"),H1=Ir("elementpath"),N2=Ir("branding"),R2=Ir("resize"),M2=Ir("paste_as_text"),D2=Ir("sidebar_show"),aS=Ir("promotion"),iS=Ir("help_accessibility"),V_=Ir("default_font_stack"),B2=e=>!1===e.options.get("skin"),$b=e=>!1!==e.options.get("menubar"),qb=e=>{const r=e.options.get("skin_url");if(B2(e))return r;if(r)return e.documentBaseURI.toAbsolute(r);{const a=e.options.get("skin");return Hh.baseURL+"/skins/ui/"+a}},dp=e=>M.from(e.options.get("skin_url")),lS=e=>e.options.get("line_height_formats").split(" "),Gb=e=>{const r=I1(e),a=Zo(r),l=Or(r)&&r.length>0;return!P1(e)&&(l||a||!0===r)},L2=e=>{const r=$(9,l=>e.options.get("toolbar"+(l+1))),a=zt(r,Zo);return ns(a.length>0,a)},P1=e=>L2(e).fold(()=>{const r=I1(e);return Wr(r,Zo)&&r.length>0},fn),I2=e=>k2(e)===Zb.bottom,cS=e=>{var r;if(!e.inline)return M.none();const a=null!==(r=UA(e))&&void 0!==r?r:"";if(a.length>0)return Xr(Ri(),a);const l=jA(e);return rt(l)?M.some(ue(l)):M.none()},Fh=e=>e.inline&&cS(e).isSome(),Kb=e=>cS(e).getOrThunk(()=>bs(Wn(ue(e.getElement())))),Yb=e=>e.inline&&!$b(e)&&!Gb(e)&&!P1(e),F1=e=>(e.options.get("toolbar_sticky")||e.inline)&&!Fh(e)&&!Yb(e),Qm=e=>!Fh(e)&&"split"===e.options.get("ui_mode"),dS=e=>{const r=e.options.get("menu");return Zn(r,a=>({...a,items:a.items}))};var uS=Object.freeze({__proto__:null,get ToolbarMode(){return zc},get ToolbarLocation(){return Zb},register:eS,getSkinUrl:qb,getSkinUrlOption:dp,isReadOnly:tS,isSkinDisabled:B2,getHeightOption:f2,getWidthOption:b2,getMinWidthOption:Ub,getMinHeightOption:v2,getMaxWidthOption:cp,getMaxHeightOption:oS,getUserStyleFormats:y2,shouldMergeStyleFormats:w2,shouldAutoHideStyleFormats:x2,getLineHeightFormats:lS,getContentLanguages:C2,getRemovedMenuItems:P_,isMenubarEnabled:$b,isMultipleToolbars:P1,isToolbarEnabled:Gb,isToolbarPersist:_2,getMultipleToolbarsOption:L2,getUiContainer:Kb,useFixedContainer:Fh,isSplitUiMode:Qm,getToolbarMode:L1,isDraggableModal:Au,isDistractionFree:Yb,isStickyToolbar:F1,getStickyToolbarOffset:F_,getToolbarLocation:k2,isToolbarLocationBottom:I2,getToolbarGroups:S2,getMenus:dS,getMenubar:jb,getToolbar:I1,getFilePickerCallback:nS,getFilePickerTypes:rS,useTypeaheadUrls:O2,getAnchorTop:Wb,getAnchorBottom:sS,getFilePickerValidatorHandler:E2,getFontSizeInputDefaultUnit:T2,useStatusBar:A2,useElementPath:H1,promotionEnabled:aS,useBranding:N2,getResize:R2,getPasteAsText:M2,getSidebarShow:D2,useHelpAccessibility:iS,getDefaultFontStack:V_});const mS="[data-mce-autocompleter]",gS=e=>uc(e,mS);var eg;!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(eg||(eg={}));var Nu=eg;const Xb="tox-menu-nav__js",Vh="tox-collection__item",pS="tox-swatch",z_={normal:Xb,color:pS},hS="tox-collection__item--enabled",H2="tox-collection__item-icon",P2="tox-collection__item-label",V1="tox-collection__item--active",bS="tox-collection__item-container",vS="tox-collection__item-container--row",yS=e=>jt(z_,e).getOr(Xb),WA=e=>"color"===e?"tox-swatches":"tox-menu",F2=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:WA(e),tieredMenu:"tox-tiered-menu"}),Ru=e=>{const r=F2(e);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:yS(e)}},Z_=(e,r,a)=>{const l=F2(a);return{tag:"div",classes:dn([[l.menu,`tox-menu-${r}-column`],e?[l.hasIcons]:[]])}},V2=[sp.parts.items({})],Jb=(e,r,a)=>{const l=F2(a);return{dom:{tag:"div",classes:dn([[l.tieredMenu]])},markers:Ru(a)}},U_=ie([In("data"),Ie("inputAttributes",{}),Ie("inputStyles",{}),Ie("tag","input"),Ie("inputClasses",[]),Rn("onSetValue"),Ie("styles",{}),Ie("eventOrder",{}),La("inputBehaviours",[Ft,Io]),Ie("selectOnFocus",!0)]),wS=e=>Re([Io.config({onFocus:e.selectOnFocus?r=>{const a=r.element,l=Ki(a);a.dom.setSelectionRange(0,l.length)}:yt})]),j_=e=>({...wS(e),...gs(e.inputBehaviours,[Ft.config({store:{mode:"manual",...e.data.map(r=>({initialValue:r})).getOr({}),getValue:r=>Ki(r.element),setValue:(r,a)=>{Ki(r.element)!==a&&ld(r.element,a)}},onSetValue:e.onSetValue})])}),xS=e=>({tag:e.tag,attributes:{type:"text",...e.inputAttributes},styles:e.inputStyles,classes:e.inputClasses}),up=ql({name:"Input",configFields:U_(),factory:(e,r)=>({uid:e.uid,dom:xS(e),components:[],behaviours:j_(e),eventOrder:e.eventOrder})}),CS=Jt("refetch-trigger-event"),SS=Jt("redirect-menu-item-interaction"),kS="tox-menu__searcher",Qb=e=>Xr(e.element,`.${kS}`).bind(r=>e.getSystem().getByDom(r).toOptional()),W_=Qb,_S=e=>({fetchPattern:Ft.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}),ES=e=>{const r=(m,g)=>(g.cut(),M.none()),a=(m,g)=>(io(m,SS,{interactionEvent:g.event,eventType:g.event.raw.type}),M.some(!0)),l="searcher-events";return{dom:{tag:"div",classes:[Vh]},components:[up.sketch({inputClasses:[kS,"tox-textfield"],inputAttributes:{...e.placeholder.map(m=>({placeholder:e.i18n(m)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Re([on(l,[Qe(Bd(),m=>{Hn(m,CS)}),Qe(_l(),(m,g)=>{"Escape"===g.event.raw.key&&g.stop()})]),Kt.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Kt.name()]}})]}},ev="tox-collection--results__js",TS=e=>{var r;return e.dom?{...e,dom:{...e.dom,attributes:{...null!==(r=e.dom.attributes)&&void 0!==r?r:{},id:Jt("aria-item-search-result-id"),"aria-selected":"false"}}}:e},OS=(e,r)=>a=>{const l=yn(a,r);return St(l,m=>({dom:e,components:m}))},AS=(e,r)=>{const a=[];let l=[];return Qt(e,(m,g)=>{r(m,g)?(l.length>0&&a.push(l),l=[],(Fo(m.dom,"innerHtml")||m.components&&m.components.length>0)&&l.push(m)):l.push(m)}),l.length>0&&a.push(l),St(a,m=>({dom:{tag:"div",classes:["tox-collection__group"]},components:m}))},z2=(e,r,a)=>sp.parts.items({preprocess:l=>{const m=St(l,a);return"auto"!==e&&e>1?OS({tag:"div",classes:["tox-collection__group"]},e)(m):AS(m,(g,f)=>"separator"===r[f].type)}}),NS=(e,r,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[z2(e,r,ht)]}),z1=e=>zn(e,r=>"icon"in r&&void 0!==r.icon),tg=e=>(console.error(xl(e)),console.log(e),M.none()),$_=(e,r,a,l,m)=>{const g=(f=a,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[sp.parts.items({preprocess:w=>AS(w,(x,k)=>"separator"===f[k].type)})]});var f;return{value:e,dom:g.dom,components:g.components,items:a}},Z2=(e,r,a,l,m)=>{if("color"===m.menuType){const g={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[sp.parts.items({preprocess:"auto"!==(f=l)?OS({tag:"div",classes:["tox-swatches__row"]},f):ht})]}]};return{value:e,dom:g.dom,components:g.components,items:a}}var f;if("normal"===m.menuType&&"auto"===l){const g=NS(l,a);return{value:e,dom:g.dom,components:g.components,items:a}}if("normal"===m.menuType||"searchable"===m.menuType){const g="searchable"!==m.menuType?NS(l,a):"search-with-field"===m.searchMode.searchMode?((f,w,x)=>{const k=Jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===f?["tox-collection--list"]:["tox-collection--grid"])},components:[ES({i18n:bc.translate,placeholder:x.placeholder}),{dom:{tag:"div",classes:[...1===f?["tox-collection--list"]:["tox-collection--grid"],ev],attributes:{id:k}},components:[z2(f,w,TS)]}]}})(l,a,m.searchMode):((f,w)=>{const k=Jt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",ev].concat(1===f?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:k}},components:[z2(f,w,TS)]}})(l,a);return{value:e,dom:g.dom,components:g.components,items:a}}if("listpreview"===m.menuType&&"auto"!==l){const g=(f=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[sp.parts.items({preprocess:OS({tag:"div",classes:["tox-collection__group"]},f)})]}))(l);return{value:e,dom:g.dom,components:g.components,items:a}}return{value:e,dom:Z_(r,l,m.menuType),components:V2,items:a}},sa=Ln("type"),RS=Ln("name"),MS=Ln("label"),Qa=Ln("text"),Kd=Ln("title"),q_=Ln("icon"),zh=Ln("value"),DS=ba("fetch"),$A=ba("getSubmenuItems"),Z1=ba("onAction"),tv=ba("onItemAction"),lm=Bs("onSetup",()=>yt),BS=li("name"),mp=li("text"),ei=li("icon"),U2=li("tooltip"),LS=li("label"),yd=li("shortcut"),ov=Hs("select"),nv=Na("active",!1),Yd=Na("borderless",!1),jn=Na("enabled",!0),og=Na("primary",!1),rv=e=>Ie("columns",e),j2=Ie("meta",{}),sv=Bs("onAction",yt),ng=e=>Sl("type",e),IS=e=>pt("name","name",G(()=>Jt(`${e}-name`)),vr),W2=Ct([sa,mp]),qA=Ct([ng("autocompleteitem"),nv,jn,j2,zh,mp,ei]),U1=[jn,U2,ei,mp,lm],G_=Ct([sa,Z1].concat(U1)),$2=e=>is("toolbarbutton",G_,e),q2=[nv].concat(U1),G2=Ct(q2.concat([sa,Z1])),K_=e=>is("ToggleButton",G2,e),Y_=[Bs("predicate",Ke),Qc("scope","node",["node","editor"]),Qc("position","selection",["node","selection","line"])],GA=U1.concat([ng("contextformbutton"),og,Z1,qi("original",ht)]),KA=q2.concat([ng("contextformbutton"),og,Z1,qi("original",ht)]),YA=U1.concat([ng("contextformbutton")]),X_=q2.concat([ng("contextformtogglebutton")]),XA=Qi("type",{contextformbutton:GA,contextformtogglebutton:KA}),JA=Ct([ng("contextform"),Bs("initValue",ie("")),LS,zl("commands",XA),Md("launch",Qi("type",{contextformbutton:YA,contextformtogglebutton:X_}))].concat(Y_)),J_=Ct([ng("contexttoolbar"),Ln("items")].concat(Y_)),Q_=[sa,Ln("src"),li("alt"),zu("classes",[],vr)],QA=Ct(Q_),eE=[sa,Qa,BS,zu("classes",["tox-collection__item-label"],vr)],tE=Ct(eE),oE=to(()=>wl("type",{cardimage:QA,cardtext:tE,cardcontainer:e5})),e5=Ct([sa,Sl("direction","horizontal"),Sl("align","left"),Sl("valign","middle"),zl("items",oE)]),j1=[jn,mp,yd,pt("value","value",G(()=>Jt("menuitem-value")),xn()),j2],t5=Ct([sa,LS,zl("items",oE),lm,sv].concat(j1)),nE=Ct([sa,nv,ei].concat(j1)),wd=[sa,Ln("fancytype"),sv],o5=[Ie("initData",{})].concat(wd),HS=[Hs("select"),Zu("initData",{},[Na("allowCustomColors",!0),Sl("storageKey","default"),Jc("colors",xn())])].concat(wd),rE=Qi("fancytype",{inserttable:o5,colorswatch:HS}),sE=Ct([sa,lm,sv,ei].concat(j1)),aE=Ct([sa,$A,lm,ei].concat(j1)),iE=Ct([sa,ei,nv,lm,Z1].concat(j1)),K2=(e,r,a)=>{const l=Fi(e.element,"."+a);if(l.length>0){const m=ma(l,g=>{const f=g.dom.getBoundingClientRect().top,w=l[0].dom.getBoundingClientRect().top;return Math.abs(f-w)>r}).getOr(l.length);return M.some({numColumns:m,numRows:Math.ceil(l.length/m)})}return M.none()},av=e=>{return r=Jt("unnamed-events"),Re([on(r,e)]);var r},lE=Jt("tooltip.exclusive"),iv=Jt("tooltip.show"),W1=Jt("tooltip.hide"),PS=(e,r,a)=>{e.getSystem().broadcastOn([lE],{})};var cE=Object.freeze({__proto__:null,hideAllExclusive:PS,setComponents:(e,r,a,l)=>{a.getTooltip().each(m=>{m.getSystem().isConnected()&&Ko.set(m,l)})}}),$1=Object.freeze({__proto__:null,events:(e,r)=>{const a=l=>{r.getTooltip().each(m=>{hc(m),e.onHide(l,m),r.clearTooltip()}),r.clearTimer()};return Dr(dn([[Qe(iv,l=>{r.resetTimer(()=>{(m=>{if(!r.isShowing()){PS(m);const g=e.lazySink(m).getOrDie(),f=m.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Dr("normal"===e.mode?[Qe(uu(),w=>{Hn(m,iv)}),Qe(Fp(),w=>{Hn(m,W1)})]:[]),behaviours:Re([Ko.config({})])});r.setTooltip(f),om(g,f),e.onShow(m,f),gi.position(g,f,{anchor:e.anchor(m)})}})(l)},e.delay)}),Qe(W1,l=>{r.resetTimer(()=>{a(l)},e.delay)}),Qe(_m(),(l,m)=>{m.universal||Do(m.channels,lE)&&a(l)}),rd(l=>{a(l)})],"normal"===e.mode?[Qe(mu(),l=>{Hn(l,iv)}),Qe(km(),l=>{Hn(l,W1)}),Qe(uu(),l=>{Hn(l,iv)}),Qe(Fp(),l=>{Hn(l,W1)})]:[Qe(Am(),(l,m)=>{Hn(l,iv)}),Qe(A0(),l=>{Hn(l,W1)})]]))}}),dE=[Xe("lazySink"),Xe("tooltipDom"),Ie("exclusive",!0),Ie("tooltipComponents",[]),Ie("delay",300),Qc("mode","normal",["normal","follow-highlight"]),Ie("anchor",e=>({type:"hotspot",hotspot:e,layouts:{onLtr:ie([ya,mi,Va,ui,Fs,Tr]),onRtl:ie([ya,mi,Va,ui,Fs,Tr])}})),Rn("onHide"),Rn("onShow")],uE=Object.freeze({__proto__:null,init:()=>{const e=Ur(),r=Ur(),a=()=>{e.on(clearTimeout)},l=ie("not-implemented");return na({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:a,resetTimer:(m,g)=>{a(),e.set(setTimeout(m,g))},readState:l})}});const FS=Da({fields:dE,name:"tooltipping",active:$1,state:uE,apis:cE}),Y2="silver.readonly",VS=Ct([wi("readonly",tr)]),q1=(e,r)=>{const a=e.mainUi.outerContainer.element,l=[e.mainUi.mothership,...e.uiMotherships];r&&Qt(l,m=>{m.broadcastOn([gd()],{target:a})}),Qt(l,m=>{m.broadcastOn([Y2],{readonly:r})})},zS=(e,r)=>{e.on("init",()=>{e.mode.isReadOnly()&&q1(r,!0)}),e.on("SwitchMode",()=>q1(r,e.mode.isReadOnly())),tS(e)&&e.mode.set("readonly")},Ua=()=>il.config({channels:{[Y2]:{schema:VS,onReceive:(e,r)=>{Ro.set(e,r.readonly)}}}}),Zh=e=>Ro.config({disabled:e}),mE=e=>Ro.config({disabled:e,disableClass:"tox-tbtn--disabled"}),X2=e=>Ro.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),lv=(e,r)=>{const a=e.getApi(r);return l=>{l(a)}},rg=(e,r)=>Br(a=>{lv(e,a)(l=>{const m=e.onSetup(l);Ut(m)&&r.set(m)})}),gp=(e,r)=>rd(a=>lv(e,a)(r.get())),n5=(e,r)=>Gi((a,l)=>{lv(e,a)(e.onAction),e.triggersSubmenu||r!==Nu.CLOSE_ON_EXECUTE||(a.getSystem().isConnected()&&Hn(a,Eg()),l.stop())}),gE={[rl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},G1=Ot,K1=(e,r,a,l)=>{const m=ho(yt);return{type:"item",dom:r.dom,components:G1(r.optComponents),data:e.data,eventOrder:gE,hasSubmenu:e.triggersSubmenu,itemBehaviours:Re([on("item-events",[n5(e,a),rg(e,m),gp(e,m)]),(g=()=>!e.enabled||l.isDisabled(),Ro.config({disabled:g,disableClass:"tox-collection__item--state-disabled"})),Ua(),Ko.config({})].concat(e.itemBehaviours))};var g},sg=e=>({value:e.value,meta:{text:e.text.getOr(""),...e.meta}}),ZS=e=>{const r=B1.os.isMacOS()||B1.os.isiOS(),a=r?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},l=e.split("+");return St(l,g=>{const f=g.toLowerCase().trim();return Fo(a,f)?a[f]:g}).join(r?"":"+")},J2=(e,r,a=[H2])=>vd(e,{tag:"div",classes:a},r),pE=e=>({dom:{tag:"div",classes:[P2]},components:[Yr(bc.translate(e))]}),hE=(e,r)=>({dom:{tag:"div",classes:r,innerHtml:e}}),Q2=(e,r)=>({dom:{tag:"div",classes:[P2]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Yr(bc.translate(r))]}]}),US=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Yr(ZS(e))]}),ew=e=>J2("checkmark",e,["tox-collection__item-checkmark"]),jS=e=>{const r=e.map(a=>({attributes:{title:bc.translate(a),id:Jt("menu-item")}})).getOr({});return{tag:"div",classes:[Xb,Vh],...r}},Uh=(e,r,a,l=M.none())=>"color"===e.presets?((m,g,f)=>{const w=m.ariaLabel,x=m.value,k=m.iconContent.map(O=>((A,D,P)=>{const Z=D();return JC(A,Z).or(P).getOrThunk(Vb(Z))})(O,g.icons,f));return{dom:(()=>{const O=pS,A=k.getOr(""),P={tag:"div",attributes:w.map(Z=>({title:g.translate(Z)})).getOr({}),classes:[O]};return"custom"===x?{...P,tag:"button",classes:[...P.classes,"tox-swatches__picker-btn"],innerHtml:A}:"remove"===x?{...P,classes:[...P.classes,"tox-swatch--remove"],innerHtml:A}:rt(x)?{...P,attributes:{...P.attributes,"data-mce-color":x},styles:{"background-color":x},innerHtml:A}:P})(),optComponents:[]}})(e,r,l):((m,g,f,w)=>{const x={tag:"div",classes:[H2]},k=f?m.iconContent.map(P=>vd(P,x,g.icons,w)).orThunk(()=>M.some({dom:x})):M.none(),O=m.checkMark,A=M.from(m.meta).fold(()=>pE,P=>Fo(P,"style")?hr(Q2,P.style):pE),D=m.htmlContent.fold(()=>m.textContent.map(A),P=>M.some(hE(P,[P2])));return{dom:jS(m.ariaLabel),optComponents:[k,D,m.shortcutContent.map(US),O,m.caret]}})(e,r,a,l),tw=(e,r)=>jt(e,"tooltipWorker").map(a=>[FS.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:l=>({type:"submenu",item:l,overrides:{maxHeightFunction:Qu}}),mode:"follow-highlight",onShow:(l,m)=>{a(g=>{FS.setComponents(l,[Vf({element:ue(g)})])})}})]).getOr([]),cv=(e,r)=>{const a=(l=bc.translate(e),lp.DOM.encode(l));var l;if(r.length>0){const l=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return a.replace(l,m=>`<span class="tox-autocompleter-highlight">${m}</span>`)}return a},WS=(e,r)=>St(e,a=>{switch(a.type){case"cardcontainer":return g=a,f=WS(a.items,r),{dom:{tag:"div",classes:[bS,"vertical"===g.direction?"tox-collection__item-container--column":vS,"left"===g.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",(()=>{switch(g.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:f};case"cardimage":return((g,f,w)=>({dom:{tag:"img",classes:f,attributes:{src:g,alt:w.getOr("")}}}))(a.src,a.classes,a.alt);case"cardtext":const l=a.name.exists(g=>Do(r.cardText.highlightOn,g)),m=l?M.from(r.cardText.matchText).getOr(""):"";return hE(cv(a.text,m),a.classes)}var g,f}),$S=hn(sm(),am()),Mu=e=>({value:GS(e)}),ow=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,wa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qS=e=>ow.test(e)||wa.test(e),GS=e=>gl(e,"#").toUpperCase(),nw=e=>{const r=e.toString(16);return(1===r.length?"0"+r:r).toUpperCase()},Y1=e=>{const r=nw(e.red)+nw(e.green)+nw(e.blue);return Mu(r)},KS=Math.min,YS=Math.max,rw=Math.round,r5=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,fE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,cm=(e,r,a,l)=>({red:e,green:r,blue:a,alpha:l}),XS=e=>{const r=parseInt(e,10);return r.toString()===e&&r>=0&&r<=255},bE=e=>{let r,a,l;const m=(e.hue||0)%360;let g=e.saturation/100,f=e.value/100;if(g=YS(0,KS(g,1)),f=YS(0,KS(f,1)),0===g)return r=a=l=rw(255*f),cm(r,a,l,1);const w=m/60,x=f*g,k=x*(1-Math.abs(w%2-1)),O=f-x;switch(Math.floor(w)){case 0:r=x,a=k,l=0;break;case 1:r=k,a=x,l=0;break;case 2:r=0,a=x,l=k;break;case 3:r=0,a=k,l=x;break;case 4:r=k,a=0,l=x;break;case 5:r=x,a=0,l=k;break;default:r=a=l=0}return r=rw(255*(r+O)),a=rw(255*(a+O)),l=rw(255*(l+O)),cm(r,a,l,1)},dv=e=>{const r=(g=>{const f={value:g.value.replace(ow,(O,A,D,P)=>A+A+D+D+P+P)},w=wa.exec(f.value);return null===w?["FFFFFF","FF","FF","FF"]:w})(e),a=parseInt(r[1],16),l=parseInt(r[2],16),m=parseInt(r[3],16);return cm(a,l,m,1)},JS=(e,r,a,l)=>{const m=parseInt(e,10),g=parseInt(r,10),f=parseInt(a,10),w=parseFloat(l);return cm(m,g,f,w)},sw=e=>{if("transparent"===e)return M.some(cm(0,0,0,0));const r=r5.exec(e);if(null!==r)return M.some(JS(r[1],r[2],r[3],"1"));const a=fE.exec(e);return null!==a?M.some(JS(a[1],a[2],a[3],a[4])):M.none()},vE=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,yE=cm(255,0,0,1),aw=(e,r)=>{e.dispatch("ResizeContent",r)},wE=(e,r)=>{e.dispatch("TextColorChange",r)},s5=(e,r)=>e.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),iw=(e,r)=>()=>{e(),r()},ki=e=>dm(e,"NodeChange",r=>{r.setEnabled(e.selection.isEditable())}),jh=(e,r)=>a=>{const l=ki(e)(a),m=((g,f)=>w=>{const x=jg(),k=()=>{w.setActive(g.formatter.match(f));const O=g.formatter.formatChanged(f,w.setActive);x.set(O)};return g.initialized?k():g.once("init",k),()=>{g.off("init",k),x.clear()}})(e,r)(a);return()=>{l(),m()}},dm=(e,r,a)=>l=>{const m=()=>a(l),g=()=>{a(l),e.on(r,m)};return e.initialized?g():e.once("init",g),()=>{e.off("init",g),e.off(r,m)}},Wh=e=>r=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("mceToggleFormat",!1,r.format)})},Kl=(e,r)=>()=>e.execCommand(r);var pp=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const xE={},CE=e=>jt(xE,e).getOrThunk(()=>{const r=`tinymce-custom-colors-${e}`,a=pp.getItem(r);if(Xt(a)){const m=pp.getItem("tinymce-custom-colors");pp.setItem(r,rt(m)?m:"[]")}const l=((m,g=10)=>{const f=pp.getItem(m),w=Zo(f)?JSON.parse(f):[],x=g-(k=w).length<0?k.slice(0,g):k;var k;const O=A=>{x.splice(A,1)};return{add:A=>{$r(x,A).each(O),x.unshift(A),x.length>g&&x.pop(),pp.setItem(m,JSON.stringify(x))},state:()=>x.slice(0)}})(r,10);return xE[e]=l,l}),SE=(e,r)=>{CE(e).add(r)},uv=(e,r,a)=>({hue:e,saturation:r,value:a}),lw=e=>{let r=0,a=0,l=0;const m=e.red/255,g=e.green/255,f=e.blue/255,w=Math.min(m,Math.min(g,f)),x=Math.max(m,Math.max(g,f));return w===x?(l=w,uv(0,0,100*l)):(r=m===w?3:f===w?1:5,r=60*(r-(m===w?g-f:f===w?m-g:f-m)/(x-w)),a=(x-w)/x,l=x,uv(Math.round(r),Math.round(100*a),Math.round(100*l)))},$h=e=>Y1(bE(e)),qh=e=>{return(r=e,qS(r)?M.some({value:GS(r)}):M.none()).orThunk(()=>sw(e).map(Y1)).getOrThunk(()=>{const a=document.createElement("canvas");a.height=1,a.width=1;const l=a.getContext("2d");l.clearRect(0,0,a.width,a.height),l.fillStyle="#FFFFFF",l.fillStyle=e,l.fillRect(0,0,1,1);const m=l.getImageData(0,0,1,1).data;return Y1(cm(m[0],m[1],m[2],m[3]))});var r},cw="forecolor",dw="hilitecolor",uw=e=>{const r=[];for(let a=0;a<e.length;a+=2)r.push({text:e[a+1],value:"#"+qh(e[a]).value,icon:"checkmark",type:"choiceitem"});return r},Zc=e=>r=>r.options.get(e),Gh="#000000",Kh=(e,r)=>r===cw&&e.options.isSet("color_map_foreground")?Zc("color_map_foreground")(e):r===dw&&e.options.isSet("color_map_background")?Zc("color_map_background")(e):Zc("color_map")(e),mv=(e,r="default")=>Math.max(5,Math.ceil(Math.sqrt(Kh(e,r).length))),QS=(e,r)=>{const a=Zc("color_cols")(e),l=mv(e,r);return a===mv(e)?l:a},kE=(e,r="default")=>Math.round(r===cw?Zc("color_cols_foreground")(e):r===dw?Zc("color_cols_background")(e):Zc("color_cols")(e)),ek=Zc("custom_colors"),a5=Zc("color_default_foreground"),i5=Zc("color_default_background"),tk=(e,r)=>{const a=ue(e.selection.getStart()),l="hilitecolor"===r?Pp(a,m=>{if(rn(m)){const g=cs(m,"background-color");return ns(sw(g).exists(f=>0!==f.alpha),g)}return M.none()}).getOr("rgba(0, 0, 0, 0)"):cs(a,"color");return sw(l).map(m=>"#"+Y1(m).value)},ok=e=>{const r="choiceitem",a={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[a,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},nk=(e,r,a,l)=>{"custom"===a?EE(e)(m=>{m.each(g=>{SE(r,g),e.execCommand("mceApplyTextcolor",r,g),l(g)})},tk(e,r).getOr(Gh)):"remove"===a?(l(""),e.execCommand("mceRemoveTextcolor",r)):(l(a),e.execCommand("mceApplyTextcolor",r,a))},mw=(e,r,a)=>{return e.concat((l=r,St(CE(l).state(),m=>({type:"choiceitem",text:m,icon:"checkmark",value:m}))).concat(ok(a)));var l},Yh=(e,r,a)=>l=>{l(mw(e,r,a))},rk=(e,r,a)=>{e.setIconFill("forecolor"===r?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",a)},_E=(e,r)=>{e.setTooltip(r)},gv=(e,r)=>a=>{const l=tk(e,r);return os(l,a.toUpperCase())},vc=(e,r,a)=>{if(ta(a))return"forecolor"===r?"Text color":"Background color";const l="forecolor"===r?"Text color {0}":"Background color {0}",m=mw(Kh(e,r),r,!1),g=Ue(m,f=>f.value===a).getOr({text:""}).text;return e.translate([l,e.translate(g)])},gw=(e,r,a,l)=>{e.ui.registry.addSplitButton(r,{tooltip:vc(e,a,l.get()),presets:"color",icon:"forecolor"===r?"text-color":"highlight-bg-color",select:gv(e,a),columns:kE(e,a),fetch:Yh(Kh(e,a),a,ek(e)),onAction:m=>{nk(e,a,l.get(),yt)},onItemAction:(m,g)=>{nk(e,a,g,f=>{l.set(f),wE(e,{name:r,color:f})})},onSetup:m=>{rk(m,r,l.get());const g=f=>{f.name===r&&(rk(m,f.name,f.color),_E(m,vc(e,a,f.color)))};return e.on("TextColorChange",g),iw(ki(e)(m),()=>{e.off("TextColorChange",g)})}})},sk=(e,r,a,l,m)=>{e.ui.registry.addNestedMenuItem(r,{text:l,icon:"forecolor"===r?"text-color":"highlight-bg-color",onSetup:g=>(_E(g,vc(e,a,m.get())),rk(g,r,m.get()),ki(e)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:gv(e,a),initData:{storageKey:a},onAction:g=>{nk(e,a,g.value,f=>{m.set(f),wE(e,{name:r,color:f})})}}]})},EE=e=>(r,a)=>{let l=!1;e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:a},onAction:(g,f)=>{"hex-valid"===f.name&&(l=f.value)},onSubmit:g=>{const f=g.getData().colorpicker;l?(r(M.from(f)),g.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",f]))},onClose:yt,onCancel:()=>{r(M.none())}})},ak=(e,r,a,l,m,g,f,w)=>{const x=z1(r),k=TE(r,a,l,"color"!==m?"normal":"color",g,f,w);return Z2(e,x,k,l,{menuType:m})},TE=(e,r,a,l,m,g,f)=>Ot(St(e,w=>{return"choiceitem"===w.type?(x=w,is("choicemenuitem",nE,x)).fold(tg,k=>M.some(((O,A,D,P,Z,te,oe,ae=!0)=>{const X=Uh({presets:D,textContent:A?O.text:M.none(),htmlContent:M.none(),ariaLabel:O.text,iconContent:O.icon,shortcutContent:A?O.shortcut:M.none(),checkMark:A?M.some(ew(oe.icons)):M.none(),caret:M.none(),value:O.value},oe,ae);return Zr(K1({data:sg(O),enabled:O.enabled,getApi:j=>({setActive:ne=>{vn.set(j,ne)},isActive:()=>vn.isOn(j),isEnabled:()=>!Ro.isDisabled(j),setEnabled:ne=>Ro.set(j,!ne)}),onAction:j=>P(O.value),onSetup:j=>(j.setActive(Z),yt),triggersSubmenu:!1,itemBehaviours:[]},X,te,oe),{toggling:{toggleClass:hS,toggleOnExecute:!1,selected:O.active,exclusive:!0}})})(k,1===a,l,r,g(k.value),m,f,z1(e)))):M.none();var x})),pv=(e,r)=>{const a=Ru(r);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===r?"tox-swatches__row":"tox-collection__group"),previousSelector:l=>"color"===r?Xr(l.element,"[aria-checked=true]"):M.none()}},ik=Jt("cell-over"),OE=Jt("cell-execute"),AE=(e,r,a)=>{const l=g=>io(g,OE,{row:e,col:r}),m=(g,f)=>{f.stop(),l(g)};return di({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:Re([on("insert-table-picker-cell",[Qe(uu(),Io.focus),Qe(rl(),l),Qe(va(),m),Qe(Ss(),m)]),vn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Io.config({onFocus:g=>io(g,ik,{row:e,col:r})})])})},NE=e=>Vt(e,r=>St(r,Tl)),lk=(e,r)=>Yr(`${r}x${e}`),l5={inserttable:(e,r)=>{const l=(f=>{const k=[];for(let O=0;O<10;O++){const A=[];for(let D=0;D<10;D++){const P=f(O+1,D+1);A.push(AE(O,D,P))}k.push(A)}return k})((f=>(w,x)=>f.shared.providers.translate(["{0} columns, {1} rows",x,w]))(r)),m=lk(0,0),g=pr({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[m],behaviours:Re([Ko.config({})])});return{type:"widget",data:{value:Jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$S.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:NE(l).concat(g.asSpec()),behaviours:Re([on("insert-table-picker",[Br(f=>{Ko.set(g.get(f),[m])}),pu(ik,(f,w,x)=>{const{row:k,col:O}=x.event;((A,D,P)=>{for(let oe=0;oe<10;oe++)for(let ae=0;ae<10;ae++)vn.set(A[oe][ae],oe<=D&&ae<=P)})(l,k,O),Ko.set(g.get(f),[lk(k+1,O+1)])}),pu(OE,(f,w,x)=>{const{row:k,col:O}=x.event;e.onAction({numRows:k+1,numColumns:O+1}),Hn(f,Eg())})]),Kt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,r)=>{const a=((f,w)=>{const x=f.initData.allowCustomColors&&w.colorinput.hasCustomColors();return f.initData.colors.fold(()=>mw(w.colorinput.getColors(f.initData.storageKey),f.initData.storageKey,x),k=>k.concat(ok(x)))})(e,r),l=r.colorinput.getColorCols(e.initData.storageKey),m="color",g={...ak(Jt("menu-value"),a,f=>{e.onAction({value:f})},l,m,Nu.CLOSE_ON_EXECUTE,e.select.getOr(Ke),r.shared.providers),markers:Ru(m),movement:pv(l,m)};return{type:"widget",data:{value:Jt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$S.widget(sp.sketch(g))]}}},pw=e=>({type:"separator",dom:{tag:"div",classes:[Vh,"tox-collection__group-heading"]},components:e.text.map(Yr).toArray()});var RE=Object.freeze({__proto__:null,getCoupled:(e,r,a,l)=>a.getOrCreate(e,r,l),getExistingCoupled:(e,r,a,l)=>a.getExisting(e,r,l)}),ME=[wi("others",Ec(pn.value,xn()))],DE=Object.freeze({__proto__:null,init:()=>{const e={},r=(l,m)=>{if(0===Sr(l.others).length)throw new Error("Cannot find any known coupled components");return jt(e,m)},a=ie({});return na({readState:a,getExisting:(l,m,g)=>r(m,g).orThunk(()=>(jt(m.others,g).getOrDie("No information found for coupled component: "+g),M.none())),getOrCreate:(l,m,g)=>r(m,g).getOrThunk(()=>{const f=jt(m.others,g).getOrDie("No information found for coupled component: "+g)(l),w=l.getSystem().build(f);return e[g]=w,w})})}});const zs=Da({fields:ME,name:"coupling",apis:RE,state:DE}),ck=e=>{let r=M.none(),a=[];const l=f=>{m()?g(f):a.push(f)},m=()=>r.isSome(),g=f=>{r.each(w=>{setTimeout(()=>{f(w)},0)})};return e(f=>{m()||(r=M.some(f),Qt(a,g),a=[])}),{get:l,map:f=>ck(w=>{l(x=>{w(f(x))})}),isReady:m}},BE={nu:ck,pure:e=>ck(r=>{r(e)})},LE=e=>{setTimeout(()=>{throw e},0)},Xh=e=>{const r=a=>{e().then(a,LE)};return{map:a=>Xh(()=>e().then(a)),bind:a=>Xh(()=>e().then(l=>a(l).toPromise())),anonBind:a=>Xh(()=>e().then(()=>a.toPromise())),toLazy:()=>BE.nu(r),toCached:()=>{let a=null;return Xh(()=>(null===a&&(a=e()),a))},toPromise:e,get:r}},um=e=>Xh(()=>new Promise(e)),mm=e=>Xh(()=>Promise.resolve(e)),IE=ie("sink"),hw=ie(It({name:IE(),overrides:ie({dom:{tag:"div"},behaviours:Re([gi.config({useFixed:fn})]),events:Dr([Fd(_l()),Fd(ci()),Fd(va())])})})),gm=(e,r)=>{const a=e.getHotspot(r).getOr(r),l="hotspot",m=e.getAnchorOverrides();return e.layouts.fold(()=>({type:l,hotspot:a,overrides:m}),g=>({type:l,hotspot:a,overrides:m,layouts:g}))},hp=(e,r,a,l,m,g,f)=>((x,k,O,A,D,P,Z)=>{const te=(X=k,(0,x.fetch)(A).map(X)),oe=HE(A,x);var X;return te.map(ae=>ae.bind(X=>M.from(Lh.sketch({...P.menu(),uid:sd(""),data:X,highlightOnOpen:Z,onOpenMenu:(j,ne)=>{const le=oe().getOrDie();gi.position(le,ne,{anchor:O}),Pn.decloak(D)},onOpenSubmenu:(j,ne,le)=>{const me=oe().getOrDie();gi.position(me,le,{anchor:{type:"submenu",item:ne}}),Pn.decloak(D)},onRepositionMenu:(j,ne,le)=>{const me=oe().getOrDie();gi.position(me,ne,{anchor:O}),Qt(le,xe=>{gi.position(me,xe.triggeredMenu,{anchor:{type:"submenu",item:xe.triggeringItem}})})},onEscape:()=>(Io.focus(A),Pn.close(D),M.some(!0))}))))})(e,r,gm(e,a),a,l,m,f).map(x=>(x.fold(()=>{Pn.isOpen(l)&&Pn.close(l)},k=>{Pn.cloak(l),Pn.open(l,k),g(l)}),l)),dk=(e,r,a,l,m,g,f)=>(Pn.close(l),mm(l)),uk=(e,r,a,l,m,g)=>{const f=zs.getCoupled(a,"sandbox");return(Pn.isOpen(f)?dk:hp)(e,r,a,f,l,m,g)},HE=(e,r)=>e.getSystem().getByUid(r.uid+"-"+IE()).map(a=>()=>pn.value(a)).getOrThunk(()=>r.lazySink.fold(()=>()=>pn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(e))),mk=e=>{Pn.getState(e).each(r=>{Lh.repositionMenus(r)})},hv=(e,r,a)=>{const l=yu(),m=HE(r,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:l.id,role:"listbox"}},behaviours:Gm(e.sandboxBehaviours,[Ft.config({store:{mode:"memory",initialValue:r}}),Pn.config({onOpen:(g,f)=>{const w=gm(e,r);l.link(r.element),e.matchWidth&&((x,k,O)=>{const A=bn.getCurrent(k).getOr(k),D=mr(x.element);O?Bo(A.element,"min-width",D+"px"):Dl.set(A.element,D)})(w.hotspot,f,e.useMinWidth),e.onOpen(w,g,f),void 0!==a&&void 0!==a.onOpen&&a.onOpen(g,f)},onClose:(g,f)=>{l.unlink(r.element),void 0!==a&&void 0!==a.onClose&&a.onClose(g,f)},isPartOf:(g,f,w)=>Ys(f,w)||Ys(r,w),getAttachPoint:()=>m().getOrDie()}),bn.config({find:g=>Pn.getState(g).bind(f=>bn.getCurrent(f))}),il.config({channels:{...Wm({isExtraPart:Ke}),...xh({doReposition:mk})}})])}},fw=e=>{const r=zs.getCoupled(e,"sandbox");mk(r)},fv=()=>[Ie("sandboxClasses",[]),_u("sandboxBehaviours",[bn,il,Pn,Ft])],xd=ie([Xe("dom"),Xe("fetch"),Rn("onOpen"),Hi("onExecute"),Ie("getHotspot",M.some),Ie("getAnchorOverrides",ie({})),cd(),La("dropdownBehaviours",[vn,zs,Kt,Io]),Xe("toggleClass"),Ie("eventOrder",{}),In("lazySink"),Ie("matchWidth",!1),Ie("useMinWidth",!1),In("role")].concat(fv())),PE=ie([vt({schema:[wu(),Ie("fakeFocus",!1)],name:"menu",defaults:e=>({onExecute:e.onExecute})}),hw()]),Uc=Si({name:"Dropdown",configFields:xd(),partFields:PE(),factory:(e,r,a,l)=>{const m=x=>{Pn.getState(x).each(k=>{Lh.highlightPrimary(k)})},g=(x,k,O)=>uk(e,ht,x,l,k,O),f={expand:x=>{vn.isOn(x)||g(x,yt,Xi.HighlightNone).get(yt)},open:x=>{vn.isOn(x)||g(x,yt,Xi.HighlightMenuAndItem).get(yt)},refetch:x=>zs.getExistingCoupled(x,"sandbox").fold(()=>g(x,yt,Xi.HighlightMenuAndItem).map(yt),k=>hp(e,ht,x,k,l,yt,Xi.HighlightMenuAndItem).map(yt)),isOpen:vn.isOn,close:x=>{vn.isOn(x)&&g(x,yt,Xi.HighlightMenuAndItem).get(yt)},repositionMenus:x=>{vn.isOn(x)&&fw(x)}},w=(x,k)=>(gu(x),M.some(!0));return{uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.dropdownBehaviours,[vn.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),zs.config({others:{sandbox:x=>hv(e,x,{onOpen:()=>vn.on(x),onClose:()=>vn.off(x)})}}),Kt.config({mode:"special",onSpace:w,onEnter:w,onDown:(x,k)=>{if(Uc.isOpen(x)){const O=zs.getCoupled(x,"sandbox");m(O)}else Uc.open(x);return M.some(!0)},onEscape:(x,k)=>Uc.isOpen(x)?(Uc.close(x),M.some(!0)):M.none()}),Io.config({})]),events:N1(M.some(x=>{g(x,m,Xi.HighlightMenuAndItem).get(yt)})),eventOrder:{...e.eventOrder,[rl()]:["disabling","toggling","alloy.base.behaviour"]},apis:f,domModification:{attributes:{"aria-haspopup":"true",...e.role.fold(()=>({}),x=>({role:x})),..."button"===e.dom.tag?{type:jt(e.dom,"attributes").bind(x=>jt(x,"type")).getOr("button")}:{}}}}},apis:{open:(e,r)=>e.open(r),refetch:(e,r)=>e.refetch(r),expand:(e,r)=>e.expand(r),close:(e,r)=>e.close(r),isOpen:(e,r)=>e.isOpen(r),repositionMenus:(e,r)=>e.repositionMenus(r)}}),FE=(e,r,a)=>{W_(e).each(l=>{var m,g;g=l,Ns(a.element,"id").each(w=>No(g.element,"aria-activedescendant",w)),(Li((m=r).element,ev)?M.some(m.element):Xr(m.element,"."+ev)).each(g=>{Ns(g,"id").each(f=>No(l.element,"aria-controls",f))})}),No(a.element,"aria-selected","true")},VE=(e,r,a)=>{No(a.element,"aria-selected","false")},gk=e=>zs.getExistingCoupled(e,"sandbox").bind(Qb).map(_S).map(r=>r.fetchPattern).getOr("");var X1;!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(X1||(X1={}));const pk=(e,r,a,l,m,g)=>{const f=z1(r),w=Ot(St(r,k=>{const O=A=>((e,r,a,l,m)=>{const g=a.shared.providers,f=x=>m?{...x,shortcut:M.none(),icon:x.text.isSome()?M.none():x.icon}:x;switch(e.type){case"menuitem":return(w=e,is("menuitem",sE,w)).fold(tg,x=>M.some(((k,O,A,D=!0)=>{const P=Uh({presets:"normal",iconContent:k.icon,textContent:k.text,htmlContent:M.none(),ariaLabel:k.text,caret:M.none(),checkMark:M.none(),shortcutContent:k.shortcut},A,D);return K1({data:sg(k),getApi:Z=>({isEnabled:()=>!Ro.isDisabled(Z),setEnabled:te=>Ro.set(Z,!te)}),enabled:k.enabled,onAction:k.onAction,onSetup:k.onSetup,triggersSubmenu:!1,itemBehaviours:[]},P,O,A)})(f(x),r,g,l)));case"nestedmenuitem":return(x=e,is("nestedmenuitem",aE,x)).fold(tg,x=>M.some(((k,O,A,D=!0,P=!1)=>{const Z=J2(P?"chevron-down":"chevron-right",A.icons,["tox-collection__item-caret"]),oe=Uh({presets:"normal",iconContent:k.icon,textContent:k.text,htmlContent:M.none(),ariaLabel:k.text,caret:M.some(Z),checkMark:M.none(),shortcutContent:k.shortcut},A,D);return K1({data:sg(k),getApi:ae=>({isEnabled:()=>!Ro.isDisabled(ae),setEnabled:X=>Ro.set(ae,!X),setIconFill:(X,j)=>{Xr(ae.element,`svg path[class="${X}"], rect[class="${X}"]`).each(ne=>{No(ne,"fill",j)})},setTooltip:X=>{const j=A.translate(X);Ta(ae.element,{"aria-label":j,title:j})}}),enabled:k.enabled,onAction:yt,onSetup:k.onSetup,triggersSubmenu:!0,itemBehaviours:[]},oe,O,A)})(f(x),r,g,l,m)));case"togglemenuitem":return(x=>is("togglemenuitem",iE,x))(e).fold(tg,x=>M.some(((k,O,A,D=!0)=>{const P=Uh({iconContent:k.icon,textContent:k.text,htmlContent:M.none(),ariaLabel:k.text,checkMark:M.some(ew(A.icons)),caret:M.none(),shortcutContent:k.shortcut,presets:"normal",meta:k.meta},A,D);return Zr(K1({data:sg(k),enabled:k.enabled,getApi:Z=>({setActive:te=>{vn.set(Z,te)},isActive:()=>vn.isOn(Z),isEnabled:()=>!Ro.isDisabled(Z),setEnabled:te=>Ro.set(Z,!te)}),onAction:k.onAction,onSetup:k.onSetup,triggersSubmenu:!1,itemBehaviours:[]},P,O,A),{toggling:{toggleClass:hS,toggleOnExecute:!1,selected:k.active}})})(f(x),r,g,l)));case"separator":return(x=>is("separatormenuitem",W2,x))(e).fold(tg,x=>M.some(pw(x)));case"fancymenuitem":return(x=>is("fancymenuitem",rE,x))(e).fold(tg,x=>{return O=a,jt(l5,(k=x).fancytype).map(A=>A(k,O));var k,O});default:return console.error("Unknown item in general menu",e),M.none()}var x,w})(A,a,l,m?!Fo(A,"text"):f,m);return"nestedmenuitem"===k.type&&k.getSubmenuItems().length<=0?O({...k,enabled:!1}):O(k)})),x="no-search"===(k=g).searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:k};var k;return(m?$_:Z2)(e,f,w,1,x)},bw=e=>Lh.singleData(e.value,e),c5=["visible","hidden","clip"],ZE=e=>ea(e).length>0&&!Do(c5,e),hk=e=>{if(bo(e)){const r=cs(e,"overflow-x"),a=cs(e,"overflow-y");return ZE(r)||ZE(a)}return!1},fp=(e,r)=>Qm(e)?(a=>{const l=ob(a,hk),m=0===l.length?ur(a).map(Ml).map(g=>ob(g,hk)).getOr([]):l;return Ar(m).map(g=>({element:g,others:m.slice(1)}))})(r):M.none(),bp=e=>{const r=[...St(e.others,Ds),ys()];return a=Ds(e.element),no(r,(m,g)=>sc(m,g),a);var a},Q1=(e,r,a)=>uc(e,r,a).isSome(),dl=(e,r)=>{let a=null;return{cancel:()=>{null!==a&&(clearTimeout(a),a=null)},schedule:(...l)=>{a=setTimeout(()=>{e.apply(null,l),a=null},r)}}},fk=e=>{const r=e.raw;return void 0===r.touches||1!==r.touches.length?M.none():M.some(r.touches[0])},UE=(e,r)=>{const a=jt(e,"target").getOr(r);return ho(a)},e0=tl([{stopped:[]},{resume:["element"]},{complete:[]}]),jE=(e,r,a,l,m,g)=>{const f=e(r,l),w=((x,k)=>{const O=ho(!1),A=ho(!1);return{stop:()=>{O.set(!0)},cut:()=>{A.set(!0)},isStopped:O.get,isCut:A.get,event:x,setSource:k.set,getSource:k.get}})(a,m);return f.fold(()=>(g.logEventNoHandlers(r,l),e0.complete()),x=>{const k=x.descHandler;return zd(k)(w),w.isStopped()?(g.logEventStopped(r,x.element,k.purpose),e0.stopped()):w.isCut()?(g.logEventCut(r,x.element,k.purpose),e0.complete()):xo(x.element).fold(()=>(g.logNoParent(r,x.element,k.purpose),e0.complete()),O=>(g.logEventResponse(r,x.element,k.purpose),e0.resume(O)))})},WE=(e,r,a,l,m,g)=>jE(e,r,a,l,m,g).fold(fn,f=>WE(e,r,a,f,m,g),Ke),$E=(e,r,a,l,m)=>{const g=UE(a,l);return WE(e,r,a,l,g,m)},zi=ql({name:"Container",factory:e=>{const{attributes:r,...a}=e.dom;return{uid:e.uid,dom:{tag:"div",attributes:{role:"presentation",...r},...a},components:e.components,behaviours:_h(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[Ie("components",[]),La("containerBehaviours",[]),Ie("events",{}),Ie("domModification",{}),Ie("eventOrder",{})]}),bv=e=>{const r=oe=>xo(e.element).fold(fn,ae=>se(oe,ae)),a=(()=>{const e=(()=>{const l={};return{registerId:(m,g,f)=>{Nn(f,(w,x)=>{const k=void 0!==l[x]?l[x]:{};var O;k[g]={cHandler:hr.apply(void 0,[(O=w).handler].concat(m)),purpose:O.purpose},l[x]=k})},unregisterId:m=>{Nn(l,(g,f)=>{Fo(g,m)&&delete g[m]})},filterByType:m=>jt(l,m).map(g=>Po(g,(f,w)=>((x,k)=>({id:x,descHandler:k}))(w,f))).getOr([]),find:(m,g,f)=>jt(l,g).bind(w=>Pp(f,x=>{return k=w,jp(O=x).bind(A=>jt(k,A)).map(A=>((D,P)=>({element:D,descHandler:P}))(O,A));var k,O},m))}})(),r={},a=l=>{jp(l.element).each(m=>{delete r[m],e.unregisterId(m)})};return{find:(l,m,g)=>e.find(l,m,g),filter:l=>e.filterByType(l),register:l=>{const m=jp((f=l).element).getOrThunk(()=>((x,k)=>{const O=Jt(R0+"uid-");return M0(k,O),O})(0,f.element));var f;ws(r,m)&&((f,w)=>{const x=r[w];if(x!==f)throw new Error('The tagId "'+w+'" is already used by: '+Nc(x.element)+"\nCannot use it for: "+Nc(f.element)+"\nThe conflicting element is"+(Is(x.element)?" ":" not ")+"already in the DOM");a(f)})(l,m),e.registerId([l],m,l.events),r[m]=l},unregister:a,getById:l=>jt(r,l)}})(),l=(oe,ae)=>a.find(r,oe,ae),m=((e,r)=>{const a={stopBackspace:!0,...r},l=(A=>{const D=Ur(),P=ho(!1),Z=dl(oe=>{A.triggerEvent(Hd(),oe),P.set(!0)},400),te=Ps([{key:td(),value:oe=>(fk(oe).each(ae=>{Z.cancel();const X={x:ae.clientX,y:ae.clientY,target:oe.target};Z.schedule(oe),P.set(!1),D.set(X)}),M.none())},{key:du(),value:oe=>(Z.cancel(),fk(oe).each(ae=>{D.on(X=>{((j,ne)=>{const le=Math.abs(j.clientX-ne.x),me=Math.abs(j.clientY-ne.y);return le>5||me>5})(ae,X)&&D.clear()})}),M.none())},{key:Tc(),value:oe=>(Z.cancel(),D.get().filter(ae=>se(ae.target,oe.target)).map(ae=>P.get()?(oe.prevent(),!1):A.triggerEvent(Ss(),oe)))}]);return{fireIfReady:(oe,ae)=>jt(te,ae).bind(X=>X(oe))}})(a),m=St(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),A=>Pi(e,A,D=>{l.fireIfReady(D,A).each(P=>{P&&D.kill()}),a.triggerEvent(A,D)&&D.kill()})),g=Ur(),f=Pi(e,"paste",A=>{l.fireIfReady(A,"paste").each(D=>{D&&A.kill()}),a.triggerEvent("paste",A)&&A.kill(),g.set(setTimeout(()=>{a.triggerEvent(Ef(),A)},0))}),w=Pi(e,"keydown",A=>{var D;a.triggerEvent("keydown",A)?A.kill():a.stopBackspace&&(D=A).raw.which===SA[0]&&!Do(["input","textarea"],Dt(D.target))&&!Q1(D.target,'[contenteditable="true"]')&&A.prevent()}),x=Pi(e,"focusin",A=>{a.triggerEvent("focusin",A)&&A.kill()}),k=Ur(),O=Pi(e,"focusout",A=>{a.triggerEvent("focusout",A)&&A.kill(),k.set(setTimeout(()=>{a.triggerEvent(km(),A)},0))});return{unbind:()=>{Qt(m,A=>{A.unbind()}),w.unbind(),x.unbind(),O.unbind(),f.unbind(),g.on(clearTimeout),k.on(clearTimeout)}}})(e.element,{triggerEvent:(oe,ae)=>H0(oe,ae.target,X=>{return $E(l,oe,le=ae,le.target,X);var le})}),g={debugInfo:ie("real"),triggerEvent:(oe,ae,X)=>{H0(oe,ae,j=>$E(l,oe,X,ae,j))},triggerFocus:(oe,ae)=>{jp(oe).fold(()=>{Ul(oe)},X=>{H0(Id(),oe,j=>(((ne,le,me,xe,ze)=>{const ot=UE(me,xe);jE(ne,le,me,xe,ot,ze)})(l,Id(),{originator:ae,kill:yt,prevent:yt,target:oe},oe,j),!1))})},triggerEscape:(oe,ae)=>{g.triggerEvent("keydown",oe.element,ae.event)},getByUid:oe=>Z(oe),getByDom:oe=>te(oe),build:di,buildOrPatch:Kp,addToGui:oe=>{x(oe)},removeFromGui:oe=>{k(oe)},addToWorld:oe=>{f(oe)},removeFromWorld:oe=>{w(oe)},broadcast:oe=>{A(oe)},broadcastOn:(oe,ae)=>{D(oe,ae)},broadcastEvent:(oe,ae)=>{P(oe,ae)},isConnected:fn},f=oe=>{oe.connect(g),An(oe.element)||(a.register(oe),Qt(oe.components(),f),g.triggerEvent(Vp(),oe.element,{target:oe.element}))},w=oe=>{An(oe.element)||(Qt(oe.components(),w),a.unregister(oe)),oe.disconnect()},x=oe=>{om(e,oe)},k=oe=>{hc(oe)},O=oe=>{const ae=a.filter(_m());Qt(ae,X=>{zd(X.descHandler)(oe)})},A=oe=>{O({universal:!0,data:oe})},D=(oe,ae)=>{O({universal:!1,channels:oe,data:ae})},P=(oe,ae)=>((X,j)=>{const le=(me=>{const xe=ho(!1);return{stop:()=>{xe.set(!0)},cut:yt,isStopped:xe.get,isCut:Ke,event:me,setSource:zr("Cannot set source of a broadcasted event"),getSource:zr("Cannot get source of a broadcasted event")}})(j);return Qt(X,me=>{zd(me.descHandler)(le)}),le.isStopped()})(a.filter(oe),ae),Z=oe=>a.getById(oe).fold(()=>pn.error(new Error('Could not find component with uid: "'+oe+'" in system.')),pn.value),te=oe=>{const ae=jp(oe).getOr("not found");return Z(ae)};return f(e),{root:e,element:e.element,destroy:()=>{m.unbind(),tn(e.element)},add:x,remove:k,getByUid:Z,getByDom:te,addToWorld:f,removeFromWorld:w,broadcast:A,broadcastOn:D,broadcastEvent:P}},GE=ie([Ie("prefix","form-field"),La("fieldBehaviours",[bn,Ft])]),yw=ie([It({schema:[Xe("dom")],name:"label"}),It({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xe("text")],name:"aria-descriptor"}),_t({factory:{sketch:e=>{const r=((a,l)=>{const m={};return Nn(a,(g,f)=>{Do(l,f)||(m[f]=g)}),m})(e,["factory"]);return e.factory.sketch(r)}},schema:[Xe("factory")],name:"field"})]),ir=Si({name:"FormField",configFields:GE(),partFields:yw(),factory:(e,r,a,l)=>{const m=gs(e.fieldBehaviours,[bn.config({find:w=>Jn(w,e,"field")}),Ft.config({store:{mode:"manual",getValue:w=>bn.getCurrent(w).bind(Ft.getValue),setValue:(w,x)=>{bn.getCurrent(w).each(k=>{Ft.setValue(k,x)})}}})]),g=Dr([Br((w,x)=>{const k=Eu(w,e,["label","field","aria-descriptor"]);k.field().each(O=>{const A=Jt(e.prefix);k.label().each(D=>{No(D.element,"for",A),No(O.element,"id",A)}),k["aria-descriptor"]().each(D=>{const P=Jt(e.prefix);No(D.element,"id",P),No(O.element,"aria-describedby",P)})})})]);return{uid:e.uid,dom:e.dom,components:r,behaviours:m,events:g,apis:{getField:w=>Jn(w,e,"field"),getLabel:w=>Jn(w,e,"label")}}},apis:{getField:(e,r)=>e.getField(r),getLabel:(e,r)=>e.getLabel(r)}});var u5=Object.freeze({__proto__:null,exhibit:(e,r)=>Mc({attributes:Ps([{key:r.tabAttr,value:"true"}])})}),m5=[Ie("tabAttr","data-alloy-tabstop")];const Es=Da({fields:m5,name:"tabstopping",active:u5});var KE=tinymce.util.Tools.resolve("tinymce.html.Entities");const jc=(e,r,a,l)=>{const m=ww(e,r,a,l);return ir.sketch(m)},ww=(e,r,a,l)=>({dom:YE(a),components:e.toArray().concat([r]),fieldBehaviours:Re(l)}),YE=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),vp=(e,r)=>ir.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yr(r.translate(e))]}),Yl=Jt("form-component-change"),t0=Jt("form-close"),pm=Jt("form-cancel"),Cd=Jt("form-action"),ag=Jt("form-submit"),Jh=Jt("form-block"),xw=Jt("form-unblock"),bk=Jt("form-tabchange"),vk=Jt("form-resize"),g5=["input","textarea"],JE=e=>{const r=Dt(e);return Do(g5,r)},QE=(e,r)=>{const a=r.getRoot(e).getOr(e.element);ms(a,r.invalidClass),r.notify.each(l=>{JE(e.element)&&No(e.element,"aria-invalid",!1),l.getContainer(e).each(m=>{Vd(m,l.validHtml)}),l.onValid(e)})},yk=(e,r,a,l)=>{const m=r.getRoot(e).getOr(e.element);Gn(m,r.invalidClass),r.notify.each(g=>{JE(e.element)&&No(e.element,"aria-invalid",!0),g.getContainer(e).each(f=>{Vd(f,l)}),g.onInvalid(e,l)})},wk=(e,r,a)=>r.validator.fold(()=>mm(pn.value(!0)),l=>l.validate(e)),Cw=(e,r,a)=>(r.notify.each(l=>{l.onValidate(e)}),wk(e,r).map(l=>e.getSystem().isConnected()?l.fold(m=>(yk(e,r,0,m),pn.error(m)),m=>(QE(e,r),pn.value(m))):pn.error("No longer in system")));var p5=Object.freeze({__proto__:null,markValid:QE,markInvalid:yk,query:wk,run:Cw,isInvalid:(e,r)=>{const a=r.getRoot(e).getOr(e.element);return Li(a,r.invalidClass)}}),eT=Object.freeze({__proto__:null,events:(e,r)=>e.validator.map(a=>Dr([Qe(a.onEvent,l=>{Cw(l,e).get(ht)})].concat(a.validateOnLoad?[Br(l=>{Cw(l,e).get(yt)})]:[]))).getOr({})}),vv=[Xe("invalidClass"),Ie("getRoot",M.none),el("notify",[Ie("aria","alert"),Ie("getContainer",M.none),Ie("validHtml",""),Rn("onValid"),Rn("onInvalid"),Rn("onValidate")]),el("validator",[Xe("validate"),Ie("onEvent","input"),Ie("validateOnLoad",!0)])];const Du=Da({fields:vv,name:"invalidating",active:eT,apis:p5,extra:{validation:e=>r=>{const a=Ft.getValue(r);return mm(e(a))}}}),yv=Da({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Dr([Ng(Ld(),fn)]),exhibit:()=>Mc({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),tT=Jt("color-input-change"),xk=Jt("color-swatch-change"),Ck=Jt("color-picker-cancel"),Sk=It({schema:[Xe("dom")],name:"label"}),Xl=e=>It({name:e+"-edge",overrides:r=>r.model.manager.edgeActions[e].fold(()=>({}),a=>({events:Dr([Rf(td(),(l,m,g)=>a(l,g),[r]),Rf(ci(),(l,m,g)=>a(l,g),[r]),Rf(kg(),(l,m,g)=>{g.mouseIsDown.get()&&a(l,g)},[r])])}))}),kk=Xl("top-left"),oT=Xl("top"),nT=Xl("top-right"),_k=Xl("right"),rT=Xl("bottom-right"),Sw=Xl("bottom"),sT=Xl("bottom-left"),aT=Xl("left"),h5=_t({name:"thumb",defaults:ie({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Dr([Mg(td(),e,"spectrum"),Mg(du(),e,"spectrum"),Mg(Tc(),e,"spectrum"),Mg(ci(),e,"spectrum"),Mg(kg(),e,"spectrum"),Mg(_f(),e,"spectrum")])})}),wv=e=>tp(e.event);var iT=[Sk,aT,_k,oT,Sw,kk,nT,sT,rT,h5,_t({schema:[qi("mouseIsDown",()=>ho(!1))],name:"spectrum",overrides:e=>{const r=e.model.manager,a=(l,m)=>r.getValueFromEvent(m).map(g=>r.setValueFrom(l,e,g));return{behaviours:Re([Kt.config({mode:"special",onLeft:(l,m)=>r.onLeft(l,e,wv(m)),onRight:(l,m)=>r.onRight(l,e,wv(m)),onUp:(l,m)=>r.onUp(l,e,wv(m)),onDown:(l,m)=>r.onDown(l,e,wv(m))}),Es.config({}),Io.config({})]),events:Dr([Qe(td(),a),Qe(du(),a),Qe(ci(),a),Qe(kg(),(l,m)=>{e.mouseIsDown.get()&&a(l,m)})])}}})];const xv=ie("slider.change.value"),Ek=e=>{const r=e.event.raw;return-1!==r.type.indexOf("touch")?void 0!==r.touches&&1===r.touches.length?M.some(r.touches[0]).map(l=>En(l.clientX,l.clientY)):M.none():void 0!==r.clientX?M.some(r).map(l=>En(l.clientX,l.clientY)):M.none()},Qh=e=>e.model.minX,hm=e=>e.model.minY,Cv=e=>e.model.minX-1,Sv=e=>e.model.minY-1,ig=e=>e.model.maxX,yp=e=>e.model.maxY,kw=e=>e.model.maxX+1,kv=e=>e.model.maxY+1,Tk=(e,r,a)=>r(e)-a(e),Ok=e=>Tk(e,ig,Qh),_w=e=>Tk(e,yp,hm),Ak=e=>Ok(e)/2,lT=e=>_w(e)/2,wp=(e,r)=>r?e.stepSize*e.speedMultiplier:e.stepSize,cT=e=>e.snapToGrid,o0=e=>e.snapStart,Ew=e=>e.rounded,n0=(e,r)=>void 0!==e[r+"-edge"],Tw=e=>n0(e,"left"),Nk=e=>n0(e,"right"),Rk=e=>n0(e,"top"),Mk=e=>n0(e,"bottom"),fm=e=>e.model.value.get(),lg=(e,r)=>({x:e,y:r}),Sd=(e,r)=>{io(e,xv(),{value:r})},Ow=(e,r,a,l)=>e<r?e:e>a?a:e===r?r-1:Math.max(r,e-l),Aw=(e,r,a,l)=>e>a?e:e<r?r:e===a?a+1:Math.min(a,e+l),dT=(e,r,a)=>Math.max(r,Math.min(a,e)),Dk=e=>{const{min:r,max:a,range:l,value:m,step:g,snap:f,snapStart:w,rounded:x,hasMinEdge:k,hasMaxEdge:O,minBound:A,maxBound:D,screenRange:P}=e,Z=k?r-1:r,te=O?a+1:a;if(m<A)return Z;if(m>D)return te;{const oe=(j=A,Math.min(D,Math.max(m,j))-j),ae=dT(oe/P*l+r,Z,te);return f&&ae>=r&&ae<=a?((X,j,ne,le,me)=>me.fold(()=>{const ze=Math.round((X-j)/le)*le;return dT(j+ze,j-1,ne+1)},xe=>{const ot=Math.round((X-xe)%le/le),st=Math.floor((X-xe)/le),nt=Math.floor((ne-xe)/le),Ht=xe+Math.min(nt,st+ot)*le;return Math.max(xe,Ht)}))(ae,r,a,g,w):x?Math.round(ae):ae}var j},Nw=e=>{const{min:r,max:a,range:l,value:m,hasMinEdge:g,hasMaxEdge:f,maxBound:w,maxOffset:x,centerMinEdge:k,centerMaxEdge:O}=e;return m<r?g?0:k:m>a?f?w:O:(m-r)/l*x},Ik="left",Bu=e=>e.element.dom.getBoundingClientRect(),kd=(e,r)=>e[r],Rw=e=>{const r=Bu(e);return kd(r,Ik)},mT=e=>{const r=Bu(e);return kd(r,"right")},_v=e=>{const r=Bu(e);return kd(r,"top")},gT=e=>{const r=Bu(e);return kd(r,"bottom")},Hk=e=>{const r=Bu(e);return kd(r,"width")},Pk=e=>{const r=Bu(e);return kd(r,"height")},Fk=(e,r,a)=>(e+r)/2-a,Vk=(e,r)=>{const a=Bu(e),l=Bu(r),m=kd(a,Ik),g=kd(a,"right"),f=kd(l,Ik);return Fk(m,g,f)},zk=(e,r)=>{const a=Bu(e),l=Bu(r),m=kd(a,"top"),g=kd(a,"bottom"),f=kd(l,"top");return Fk(m,g,f)},ef=(e,r)=>{io(e,xv(),{value:r})},Zk=(e,r,a)=>{const l={min:Qh(r),max:ig(r),range:Ok(r),value:a,step:wp(r),snap:cT(r),snapStart:o0(r),rounded:Ew(r),hasMinEdge:Tw(r),hasMaxEdge:Nk(r),minBound:Rw(e),maxBound:mT(e),screenRange:Hk(e)};return Dk(l)},Uk=e=>(r,a,l)=>((m,g,f,w)=>{const x=(m>0?Aw:Ow)(fm(f),Qh(f),ig(f),wp(f,w));return ef(g,x),M.some(x)})(e,r,a,l).map(fn),Mw=(e,r,a,l,m,g)=>{const f=((w,x,k,O,A)=>{const D=Hk(w),P=O.bind(oe=>M.some(Vk(oe,w))).getOr(0),Z=A.bind(oe=>M.some(Vk(oe,w))).getOr(D),te={min:Qh(x),max:ig(x),range:Ok(x),value:k,hasMinEdge:Tw(x),hasMaxEdge:Nk(x),minBound:Rw(w),minOffset:0,maxBound:mT(w),maxOffset:D,centerMinEdge:P,centerMaxEdge:Z};return Nw(te)})(r,g,a,l,m);return Rw(r)-Rw(e)+f},pT=Uk(-1),hT=Uk(1),jo=M.none,Ev=M.none,fT={"top-left":M.none(),top:M.none(),"top-right":M.none(),right:M.some((e,r)=>{Sd(e,kw(r))}),"bottom-right":M.none(),bottom:M.none(),"bottom-left":M.none(),left:M.some((e,r)=>{Sd(e,Cv(r))})};var bT=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=Zk(e,r,a);return ef(e,l),l},setToMin:(e,r)=>{const a=Qh(r);ef(e,a)},setToMax:(e,r)=>{const a=ig(r);ef(e,a)},findValueOfOffset:Zk,getValueFromEvent:e=>Ek(e).map(r=>r.left),findPositionOfValue:Mw,setPositionFromValue:(e,r,a,l)=>{const m=fm(a),g=Mw(e,l.getSpectrum(e),m,l.getLeftEdge(e),l.getRightEdge(e),a),f=mr(r.element)/2;Bo(r.element,"left",g-f+"px")},onLeft:pT,onRight:hT,onUp:jo,onDown:Ev,edgeActions:fT});const Tv=(e,r)=>{io(e,xv(),{value:r})},Dw=(e,r,a)=>{const l={min:hm(r),max:yp(r),range:_w(r),value:a,step:wp(r),snap:cT(r),snapStart:o0(r),rounded:Ew(r),hasMinEdge:Rk(r),hasMaxEdge:Mk(r),minBound:_v(e),maxBound:gT(e),screenRange:Pk(e)};return Dk(l)},jk=e=>(r,a,l)=>((m,g,f,w)=>{const x=(m>0?Aw:Ow)(fm(f),hm(f),yp(f),wp(f,w));return Tv(g,x),M.some(x)})(e,r,a,l).map(fn),tf=(e,r,a,l,m,g)=>{const f=((w,x,k,O,A)=>{const D=Pk(w),P=O.bind(oe=>M.some(zk(oe,w))).getOr(0),Z=A.bind(oe=>M.some(zk(oe,w))).getOr(D),te={min:hm(x),max:yp(x),range:_w(x),value:k,hasMinEdge:Rk(x),hasMaxEdge:Mk(x),minBound:_v(w),minOffset:0,maxBound:gT(w),maxOffset:D,centerMinEdge:P,centerMaxEdge:Z};return Nw(te)})(r,g,a,l,m);return _v(r)-_v(e)+f},vT=M.none,yT=M.none,Wk=jk(-1),wT=jk(1),xT={"top-left":M.none(),top:M.some((e,r)=>{Sd(e,Sv(r))}),"top-right":M.none(),right:M.none(),"bottom-right":M.none(),bottom:M.some((e,r)=>{Sd(e,kv(r))}),"bottom-left":M.none(),left:M.none()};var f5=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=Dw(e,r,a);return Tv(e,l),l},setToMin:(e,r)=>{const a=hm(r);Tv(e,a)},setToMax:(e,r)=>{const a=yp(r);Tv(e,a)},findValueOfOffset:Dw,getValueFromEvent:e=>Ek(e).map(r=>r.top),findPositionOfValue:tf,setPositionFromValue:(e,r,a,l)=>{const m=fm(a),g=tf(e,l.getSpectrum(e),m,l.getTopEdge(e),l.getBottomEdge(e),a),f=ds(r.element)/2;Bo(r.element,"top",g-f+"px")},onLeft:vT,onRight:yT,onUp:Wk,onDown:wT,edgeActions:xT});const Bw=(e,r)=>{io(e,xv(),{value:r})},Ov=(e,r)=>({x:e,y:r}),Lw=(e,r)=>(a,l,m)=>((g,f,w,x,k)=>{const O=g>0?Aw:Ow,A=f?fm(x).x:O(fm(x).x,Qh(x),ig(x),wp(x,k)),D=f?O(fm(x).y,hm(x),yp(x),wp(x,k)):fm(x).y;return Bw(w,Ov(A,D)),M.some(A)})(e,r,a,l,m).map(fn),b5=Lw(-1,!1),v5=Lw(1,!1),CT=Lw(-1,!0),y5=Lw(1,!0),ST={"top-left":M.some((e,r)=>{Sd(e,lg(Cv(r),Sv(r)))}),top:M.some((e,r)=>{Sd(e,lg(Ak(r),Sv(r)))}),"top-right":M.some((e,r)=>{Sd(e,lg(kw(r),Sv(r)))}),right:M.some((e,r)=>{Sd(e,lg(kw(r),lT(r)))}),"bottom-right":M.some((e,r)=>{Sd(e,lg(kw(r),kv(r)))}),bottom:M.some((e,r)=>{Sd(e,lg(Ak(r),kv(r)))}),"bottom-left":M.some((e,r)=>{Sd(e,lg(Cv(r),kv(r)))}),left:M.some((e,r)=>{Sd(e,lg(Cv(r),lT(r)))})};var kT=Object.freeze({__proto__:null,setValueFrom:(e,r,a)=>{const l=Zk(e,r,a.left),m=Dw(e,r,a.top),g=Ov(l,m);return Bw(e,g),g},setToMin:(e,r)=>{const a=Qh(r),l=hm(r);Bw(e,Ov(a,l))},setToMax:(e,r)=>{const a=ig(r),l=yp(r);Bw(e,Ov(a,l))},getValueFromEvent:e=>Ek(e),setPositionFromValue:(e,r,a,l)=>{const m=fm(a),g=Mw(e,l.getSpectrum(e),m.x,l.getLeftEdge(e),l.getRightEdge(e),a),f=tf(e,l.getSpectrum(e),m.y,l.getTopEdge(e),l.getBottomEdge(e),a),w=mr(r.element)/2,x=ds(r.element)/2;Bo(r.element,"left",g-w+"px"),Bo(r.element,"top",f-x+"px")},onLeft:b5,onRight:v5,onUp:CT,onDown:y5,edgeActions:ST});const Wc=Si({name:"Slider",configFields:[Ie("stepSize",1),Ie("speedMultiplier",10),Ie("onChange",yt),Ie("onChoose",yt),Ie("onInit",yt),Ie("onDragStart",yt),Ie("onDragEnd",yt),Ie("snapToGrid",!1),Ie("rounded",!0),In("snapStart"),wi("model",Qi("mode",{x:[Ie("minX",0),Ie("maxX",100),qi("value",e=>ho(e.mode.minX)),Xe("getInitialValue"),Vr("manager",bT)],y:[Ie("minY",0),Ie("maxY",100),qi("value",e=>ho(e.mode.minY)),Xe("getInitialValue"),Vr("manager",f5)],xy:[Ie("minX",0),Ie("maxX",100),Ie("minY",0),Ie("maxY",100),qi("value",e=>ho({x:e.mode.minX,y:e.mode.minY})),Xe("getInitialValue"),Vr("manager",kT)]})),La("sliderBehaviours",[Kt,Ft]),qi("mouseIsDown",()=>ho(!1))],partFields:iT,factory:(e,r,a,l)=>{const m=X=>ra(X,e,"thumb"),g=X=>ra(X,e,"spectrum"),f=X=>Jn(X,e,"left-edge"),w=X=>Jn(X,e,"right-edge"),x=X=>Jn(X,e,"top-edge"),k=X=>Jn(X,e,"bottom-edge"),O=e.model,A=O.manager,D=(X,j)=>{A.setPositionFromValue(X,j,e,{getLeftEdge:f,getRightEdge:w,getTopEdge:x,getBottomEdge:k,getSpectrum:g})},P=(X,j)=>{O.value.set(j);const ne=m(X);D(X,ne)},Z=X=>{const j=e.mouseIsDown.get();e.mouseIsDown.set(!1),j&&Jn(X,e,"thumb").each(ne=>{const le=O.value.get();e.onChoose(X,ne,le)})},te=(X,j)=>{j.stop(),e.mouseIsDown.set(!0),e.onDragStart(X,m(X))},oe=(X,j)=>{j.stop(),e.onDragEnd(X,m(X)),Z(X)},ae=X=>{Jn(X,e,"spectrum").map(Kt.focusIn)};return{uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.sliderBehaviours,[Kt.config({mode:"special",focusIn:ae}),Ft.config({store:{mode:"manual",getValue:X=>O.value.get(),setValue:P}}),il.config({channels:{[y1()]:{onReceive:Z}}})]),events:Dr([Qe(xv(),(X,j)=>{((ne,le)=>{P(ne,le);const me=m(ne);e.onChange(ne,me,le),M.some(!0)})(X,j.event.value)}),Br((X,j)=>{const ne=O.getInitialValue();O.value.set(ne);const le=m(X);D(X,le);const me=g(X);e.onInit(X,le,me,O.value.get())}),Qe(td(),te),Qe(Tc(),oe),Qe(ci(),(X,j)=>{ae(X),te(X,j)}),Qe(_f(),oe)]),apis:{resetToMin:X=>{A.setToMin(X,e)},resetToMax:X=>{A.setToMax(X,e)},setValue:P,refresh:D},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,r,a)=>{e.setValue(r,a)},resetToMin:(e,r)=>{e.resetToMin(r)},resetToMax:(e,r)=>{e.resetToMax(r)},refresh:(e,r)=>{e.refresh(r)}}}),Iw=Jt("rgb-hex-update"),$k=Jt("slider-update"),_T=Jt("palette-update"),Lu=[La("formBehaviours",[Ft])],Av=e=>"<alloy.field."+e+">",Hw=(e,r)=>({uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.formBehaviours,[Ft.config({store:{mode:"manual",getValue:a=>{const l=Tu(a,e);return Zn(l,(m,g)=>m().bind(f=>{return w=bn.getCurrent(f),x=new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Nc(f.element)),w.fold(()=>pn.error(x),pn.value);var w,x}).map(Ft.getValue))},setValue:(a,l)=>{Nn(l,(m,g)=>{Jn(a,e,g).each(f=>{bn.getCurrent(f).each(w=>{Ft.setValue(w,m)})})})}}})]),apis:{getField:(a,l)=>Jn(a,e,l).bind(bn.getCurrent)}}),xp={getField:Ma((e,r,a)=>e.getField(r,a)),sketch:e=>{const r=(()=>{const g=[];return{field:(f,w)=>(g.push(f),or("form",Av(f),w)),record:ie(g)}})(),a=e(r),l=r.record(),m=St(l,g=>_t({name:g,pname:Av(g)}));return pb("form",Lu,m,Hw,a)}},Pw=Jt("valid-input"),Gk=Jt("invalid-input"),Fw=Jt("validating-input"),Vw="colorcustom.rgb.",cg=()=>bn.config({find:M.some}),zw=e=>bn.config({find:r=>un(r.element,e).bind(a=>r.getSystem().getByDom(a).toOptional())}),TT=Ct([Ie("preprocess",ht),Ie("postprocess",ht)]),OT=(e,r)=>{const a=Aa("RepresentingConfigs.memento processors",TT,r);return Ft.config({store:{mode:"manual",getValue:l=>{const m=e.get(l),g=Ft.getValue(m);return a.postprocess(g)},setValue:(l,m)=>{const g=a.preprocess(m),f=e.get(l);Ft.setValue(f,g)}}})},Jl=(e,r,a)=>Ft.config({store:{mode:"manual",...e.map(l=>({initialValue:l})).getOr({}),getValue:r,setValue:a}}),Zw=(e,r,a)=>Jl(e,l=>r(l.element),(l,m)=>a(l.element,m)),dg=e=>Ft.config({store:{mode:"memory",initialValue:e}}),Nv={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"};var w5=tinymce.util.Tools.resolve("tinymce.Resource"),Iu=tinymce.util.Tools.resolve("tinymce.util.Tools");const r0=(e,r)=>{let a=null;const l=()=>{Zi(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...m)=>{l(),a=setTimeout(()=>{a=null,e.apply(null,m)},r)}}},Yk=Jt("alloy-fake-before-tabstop"),Uw=Jt("alloy-fake-after-tabstop"),jw=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Re([Io.config({ignore:!0}),Es.config({})])}),Xk=(e,r)=>({dom:{tag:"div",classes:["tox-navobj",...e.getOr([])]},components:[jw([Yk]),r,jw([Uw])],behaviours:Re([zw(1)])}),AT=(e,r)=>{io(e,_l(),{raw:{which:9,shiftKey:r}})},NT=(e,r)=>{const a=r.element;Li(a,Yk)?AT(e,!0):Li(a,Uw)&&AT(e,!1)},of=e=>Q1(e,["."+Yk,"."+Uw].join(","),Ke),Ww=Jt("update-dialog"),Jk=Jt("update-title"),RT=Jt("update-body"),$w=Jt("update-footer"),Qk=Jt("body-send-message"),qw=Jt("dialog-focus-shifted"),Gw=he().browser,Rv=Gw.isSafari(),Kw=Gw.isFirefox(),MT=Rv||Kw,Yw=Gw.isChromium(),x5=({scrollTop:e,scrollHeight:r,clientHeight:a})=>Math.ceil(e)+a>=r,Xw=(e,r)=>e.scrollTo(0,"bottom"===r?99999999:r),s0=(e,r,a)=>{const l=e.dom;M.from(l.contentDocument).fold(a,m=>{let g=0;const f=((x,k)=>{const O=x.body;return M.from(!/^<!DOCTYPE (html|HTML)/.test(k)&&(!Yw&&!Rv||rt(O)&&(0!==O.scrollTop||Math.abs(O.scrollHeight-O.clientHeight)>1))?O:x.documentElement)})(m,r).map(x=>(g=x.scrollTop,x)).forall(x5),w=()=>{const x=l.contentWindow;rt(x)&&(f?Xw(x,"bottom"):!f&&MT&&0!==g&&Xw(x,g))};Rv&&l.addEventListener("load",w,{once:!0}),m.open(),m.write(r),m.close(),Rv||w()})},DT=ns(MT,Rv?500:200).map(e=>((r,a)=>{let l=null,m=null;return{cancel:()=>{Zi(l)||(clearTimeout(l),l=null,m=null)},throttle:(...g)=>{m=g,Zi(l)&&(l=setTimeout(()=>{const f=m;l=null,m=null,r.apply(null,f)},a))}}})(s0,e)),e4=Jt("toolbar.button.execute"),Cp=Jt("common-button-display-events"),t4={[rl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Oc()]:["toolbar-button-events",Cp],[ci()]:["focusing","alloy.base.behaviour",Cp]},Mv=e=>Bo(e.element,"width",cs(e.element,"width")),Dv=(e,r,a)=>vd(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},r),Sp=(e,r)=>Dv(e,r,[]),ug=(e,r)=>Dv(e,r,[Ko.config({})]),o4=(e,r,a)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Yr(a.translate(e))],behaviours:Re([Ko.config({})])}),yc=Jt("update-menu-text"),mg=Jt("update-menu-icon"),n4=(e,r,a)=>{const l=ho(yt),m=e.text.map(D=>pr(o4(D,r,a.providers))),g=e.icon.map(D=>pr(ug(D,a.providers.icons))),f=(D,P)=>{const Z=Ft.getValue(D);return Io.focus(Z),io(Z,"keydown",{raw:P.event.raw}),Uc.close(Z),M.some(!0)},w=e.role.fold(()=>({}),D=>({role:D})),x=e.tooltip.fold(()=>({}),D=>{const P=a.providers.translate(D);return{title:P,"aria-label":P}}),k=vd("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},a.providers.icons),O=Jt("common-button-display-events");return pr(Uc.sketch({...e.uid?{uid:e.uid}:{},...w,dom:{tag:"button",classes:[r,`${r}--select`].concat(St(e.classes,D=>`${r}--${D}`)),attributes:{...x}},components:G1([g.map(D=>D.asSpec()),m.map(D=>D.asSpec()),M.some(k)]),matchWidth:!0,useMinWidth:!0,onOpen:(D,P,Z)=>{e.searchable&&W_(Z).each(oe=>Io.focus(oe))},dropdownBehaviours:Re([...e.dropdownBehaviours,Zh(()=>e.disabled||a.providers.isDisabled()),Ua(),yv.config({}),Ko.config({}),on("dropdown-events",[rg(e,l),gp(e,l)]),on(O,[Br((D,P)=>Mv(D))]),on("menubutton-update-display-text",[Qe(yc,(D,P)=>{m.bind(Z=>Z.getOpt(D)).each(Z=>{Ko.set(Z,[Yr(a.providers.translate(P.event.text))])})}),Qe(mg,(D,P)=>{g.bind(Z=>Z.getOpt(D)).each(Z=>{Ko.set(Z,[ug(P.event.icon,a.providers.icons)])})})])]),eventOrder:Zr(t4,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Oc()]:["toolbar-button-events","dropdown-events",O]}),sandboxBehaviours:Re([Kt.config({mode:"special",onLeft:f,onRight:f}),on("dropdown-sandbox-events",[Qe(CS,(D,P)=>{(Z=>{const te=Ft.getValue(Z),oe=Qb(Z).map(_S);Uc.refetch(te).get(()=>{const ae=zs.getCoupled(te,"sandbox");oe.each(X=>Qb(ae).each(j=>{return Ft.setValue(ne=j,(le=X).fetchPattern),ne.element.dom.selectionStart=le.selectionStart,void(ne.element.dom.selectionEnd=le.selectionEnd);var ne,le}))})})(D),P.stop()}),Qe(SS,(D,P)=>{var Z,te,oe;te=P,(oe=Z=D,Pn.getState(oe).bind(sr.getHighlighted).bind(sr.getHighlighted)).each(oe=>{((ae,X,j,ne)=>{const le={...ne,target:X};ae.getSystem().triggerEvent(j,X,le)})(Z,oe.element,te.event.eventType,te.event.interactionEvent)}),P.stop()})])]),lazySink:a.getSink,toggleClass:`${r}--active`,parts:{menu:{...Jb(0,0,e.presets),fakeFocus:e.searchable,onHighlightItem:FE,onCollapseMenu:(D,P,Z)=>{sr.getHighlighted(Z).each(te=>{FE(D,Z,te)})},onDehighlightItem:VE}},getAnchorOverrides:()=>({maxHeightFunction:(D,P)=>{$g()(D,P-10)}}),fetch:D=>um(hr(e.fetch,D))})).asSpec()},BT=e=>"separator"===e.type,r4={type:"separator"},LT=(e,r)=>{const a=((l,m)=>{const g=no(l,(f,w)=>Zo(w)?""===w?f:"|"===w?f.length>0&&!BT(f[f.length-1])?f.concat([r4]):f:Fo(m,w.toLowerCase())?f.concat([m[w.toLowerCase()]]):f:f.concat([w]),[]);return g.length>0&&BT(g[g.length-1])&&g.pop(),g})(Zo(e)?e.split(" "):e,r);return Bn(a,(l,m)=>{if(Fo(m,"getSubmenuItems")){const f=((w,x)=>{const k=w.getSubmenuItems(),O=LT(k,x);return{item:w,menus:Zr(O.menus,{[w.value]:O.items}),expansions:Zr(O.expansions,{[w.value]:w.value})}})((w=>{const x=jt(w,"value").getOrThunk(()=>Jt("generated-menu-item"));return Zr({value:x},w)})(m),r);return{menus:Zr(l.menus,f.menus),items:[f.item,...l.items],expansions:Zr(l.expansions,f.expansions)}}return{...l,items:[m,...l.items]}},{menus:{},expansions:{},items:[]})},a0=(e,r,a,l)=>{const m=Jt("primary-menu"),g=LT(e,a.shared.providers.menuItems());if(0===g.items.length)return M.none();const f=l.search.fold(()=>({searchMode:"no-search"}),D=>({searchMode:"search-with-field",placeholder:D.placeholder})),w=pk(m,g.items,r,a,l.isHorizontalMenu,f),x=l.search.fold(()=>({searchMode:"no-search"}),D=>({searchMode:"search-with-results"})),k=Zn(g.menus,(A,D)=>pk(D,A,r,a,!1,x)),O=Zr(k,ol(m,w));return M.from(Lh.tieredData(m,O,g.expansions))},s4=e=>!Fo(e,"items"),IT="data-value",HT=(e,r,a,l)=>St(a,m=>s4(m)?{type:"togglemenuitem",text:m.text,value:m.value,active:m.value===l,onAction:()=>{Ft.setValue(e,m.value),io(e,Yl,{name:r}),Io.focus(e)}}:{type:"nestedmenuitem",text:m.text,getSubmenuItems:()=>HT(e,r,m.items,l)}),a4=(e,r)=>hs(e,a=>s4(a)?ns(a.value===r,a):a4(a.items,r)),C5=ql({name:"HtmlSelect",configFields:[Xe("options"),La("selectBehaviours",[Io,Ft]),Ie("selectClasses",[]),Ie("selectAttributes",{}),In("data")],factory:(e,r)=>{const a=St(e.options,m=>({dom:{tag:"option",value:m.value,innerHtml:m.text}})),l=e.data.map(m=>ol("initialValue",m)).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:a,behaviours:gs(e.selectBehaviours,[Io.config({}),Ft.config({store:{mode:"manual",getValue:m=>Ki(m.element),setValue:(m,g)=>{const f=Ar(e.options);Ue(e.options,w=>w.value===g).isSome()?ld(m.element,g):-1===m.element.dom.selectedIndex&&""===g&&f.each(w=>ld(m.element,w.value))},...l}})])}}}),PT=ie([Ie("field1Name","field1"),Ie("field2Name","field2"),mc("onLockedChange"),Yu(["lockClass"]),Ie("locked",!1),_u("coupledFieldBehaviours",[bn,Ft])]),i0=(e,r)=>_t({factory:ir,name:e,overrides:a=>({fieldBehaviours:Re([on("coupled-input-behaviour",[Qe(Bd(),l=>{var m,g,f;(m=l,g=a,f=r,Jn(m,g,f).bind(bn.getCurrent)).each(m=>{Jn(l,a,"lock").each(g=>{vn.isOn(g)&&a.onLockedChange(l,m,g)})})})])])})}),S5=ie([i0("field1","field2"),i0("field2","field1"),_t({factory:pi,schema:[Xe("dom")],name:"lock",overrides:e=>({buttonBehaviours:Re([vn.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),wc=Si({name:"FormCoupledInputs",configFields:PT(),partFields:S5(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:Gm(e.coupledFieldBehaviours,[bn.config({find:M.some}),Ft.config({store:{mode:"manual",getValue:m=>{const g=Jg(m,e,["field1","field2"]);return{[e.field1Name]:Ft.getValue(g.field1()),[e.field2Name]:Ft.getValue(g.field2())}},setValue:(m,g)=>{const f=Jg(m,e,["field1","field2"]);ws(g,e.field1Name)&&Ft.setValue(f.field1(),g[e.field1Name]),ws(g,e.field2Name)&&Ft.setValue(f.field2(),g[e.field2Name])}}})]),apis:{getField1:m=>Jn(m,e,"field1"),getField2:m=>Jn(m,e,"field2"),getLock:m=>Jn(m,e,"lock")}}),apis:{getField1:(e,r)=>e.getField1(r),getField2:(e,r)=>e.getField2(r),getLock:(e,r)=>e.getLock(r)}}),Bv=e=>{const r=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==r){const a=parseFloat(r[1]);return pn.value({value:a,unit:r[2]})}return pn.error(e)},i4=(e,r)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=m=>Fo(a,m);return e.unit===r?M.some(e.value):l(e.unit)&&l(r)?M.some(a[e.unit]===a[r]?e.value:e.value/a[e.unit]*a[r]):M.none()},l4=e=>M.none(),FT=(e,r)=>{const a=e.label.map(O=>vp(O,r)),l=[Ro.config({disabled:()=>e.disabled||r.isDisabled()}),Ua(),Kt.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:O=>(Hn(O,ag),M.some(!0))}),on("textfield-change",[Qe(Bd(),(O,A)=>{io(O,Yl,{name:e.name})}),Qe(Ef(),(O,A)=>{io(O,Yl,{name:e.name})})]),Es.config({})],m=e.validation.map(O=>Du.config({getRoot:A=>eo(A.element),invalidClass:"tox-invalid",validator:{validate:A=>{const D=Ft.getValue(A),P=O.validator(D);return mm(!0===P?pn.value(D):pn.error(P))},validateOnLoad:O.validateOnLoad}})).toArray(),g={...e.placeholder.fold(ie({}),O=>({placeholder:r.translate(O)})),...e.inputMode.fold(ie({}),O=>({inputmode:O}))},f=ir.parts.field({tag:!0===e.multiline?"textarea":"input",...e.data.map(O=>({data:O})).getOr({}),inputAttributes:g,inputClasses:[e.classname],inputBehaviours:Re(dn([l,m])),selectOnFocus:!1,factory:up}),w=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[f]}:f,x=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),k=[Ro.config({disabled:()=>e.disabled||r.isDisabled(),onDisabled:O=>{ir.getField(O).each(Ro.disable)},onEnabled:O=>{ir.getField(O).each(Ro.enable)}}),Ua()];return jc(a,w,x,k)},Lv=(e,r)=>r.getAnimationRoot.fold(()=>e.element,a=>a(e)),gg=e=>e.dimension.property,nf=(e,r)=>e.dimension.getDimension(r),Jw=(e,r)=>{const a=Lv(e,r);ks(a,[r.shrinkingClass,r.growingClass])},c4=(e,r)=>{ms(e.element,r.openClass),Gn(e.element,r.closedClass),Bo(e.element,gg(r),"0px"),pl(e.element)},d4=(e,r)=>{ms(e.element,r.closedClass),Gn(e.element,r.openClass),Yn(e.element,gg(r))},VT=(e,r,a,l)=>{a.setCollapsed(),Bo(e.element,gg(r),nf(r,e.element)),Jw(e,r),c4(e,r),r.onStartShrink(e),r.onShrunk(e)},zT=(e,r,a,l)=>{const m=l.getOrThunk(()=>nf(r,e.element));a.setCollapsed(),Bo(e.element,gg(r),m),pl(e.element);const g=Lv(e,r);ms(g,r.growingClass),Gn(g,r.shrinkingClass),c4(e,r),r.onStartShrink(e)},u4=(e,r,a)=>{const l=nf(r,e.element);("0px"===l?VT:zT)(e,r,a,M.some(l))},Iv=(e,r,a)=>{const l=Lv(e,r),m=Li(l,r.shrinkingClass),g=nf(r,e.element);d4(e,r);const f=nf(r,e.element);(m?()=>{Bo(e.element,gg(r),g),pl(e.element)}:()=>{c4(e,r)})(),ms(l,r.shrinkingClass),Gn(l,r.growingClass),d4(e,r),Bo(e.element,gg(r),f),a.setExpanded(),r.onStartGrow(e)},m4=(e,r,a)=>{const l=Lv(e,r);return!0===Li(l,r.growingClass)},g4=(e,r,a)=>{const l=Lv(e,r);return!0===Li(l,r.shrinkingClass)};var ZT=Object.freeze({__proto__:null,refresh:(e,r,a)=>{if(a.isExpanded()){Yn(e.element,gg(r));const l=nf(r,e.element);Bo(e.element,gg(r),l)}},grow:(e,r,a)=>{a.isExpanded()||Iv(e,r,a)},shrink:(e,r,a)=>{a.isExpanded()&&u4(e,r,a)},immediateShrink:(e,r,a)=>{a.isExpanded()&&VT(e,r,a)},hasGrown:(e,r,a)=>a.isExpanded(),hasShrunk:(e,r,a)=>a.isCollapsed(),isGrowing:m4,isShrinking:g4,isTransitioning:(e,r,a)=>m4(e,r)||g4(e,r),toggleGrow:(e,r,a)=>{(a.isExpanded()?u4:Iv)(e,r,a)},disableTransitions:Jw,immediateGrow:(e,r,a)=>{a.isExpanded()||(d4(e,r),Bo(e.element,gg(r),nf(r,e.element)),Jw(e,r),a.setExpanded(),r.onStartGrow(e),r.onGrown(e))}}),UT=Object.freeze({__proto__:null,exhibit:(e,r,a)=>Mc(r.expanded?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:ol(r.dimension.property,"0px")}),events:(e,r)=>Dr([hu(Sm(),(a,l)=>{l.event.raw.propertyName===e.dimension.property&&(Jw(a,e),r.isExpanded()&&Yn(a.element,e.dimension.property),(r.isExpanded()?e.onGrown:e.onShrunk)(a))})])}),k5=[Xe("closedClass"),Xe("openClass"),Xe("shrinkingClass"),Xe("growingClass"),In("getAnimationRoot"),Rn("onShrunk"),Rn("onStartShrink"),Rn("onGrown"),Rn("onStartGrow"),Ie("expanded",!1),wi("dimension",Qi("property",{width:[Vr("property","width"),Vr("getDimension",e=>mr(e)+"px")],height:[Vr("property","height"),Vr("getDimension",e=>ds(e)+"px")]}))];const _i=Da({fields:k5,name:"sliding",active:UT,apis:ZT,state:Object.freeze({__proto__:null,init:e=>{const r=ho(e.expanded);return na({isExpanded:()=>!0===r.get(),isCollapsed:()=>!1===r.get(),setCollapsed:hr(r.set,!1),setExpanded:hr(r.set,!0),readState:()=>"expanded: "+r.get()})}})}),p4=e=>({isEnabled:()=>!Ro.isDisabled(e),setEnabled:r=>Ro.set(e,!r),setActive:r=>{const a=e.element;r?(Gn(a,"tox-tbtn--enabled"),No(a,"aria-pressed",!0)):(ms(a,"tox-tbtn--enabled"),Oo(a,"aria-pressed"))},isActive:()=>Li(e.element,"tox-tbtn--enabled"),setText:r=>{io(e,yc,{text:r})},setIcon:r=>io(e,mg,{icon:r})}),pg=(e,r,a,l,m=!0)=>n4({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:l,fetch:(g,f)=>{const w={pattern:e.search.isSome()?gk(g):""};e.fetch(x=>{f(a0(x,Nu.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:e.search}))},w,p4(g))},onSetup:e.onSetup,getApi:p4,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...m?[Es.config({})]:[]]},r,a.shared),Qw=(e,r,a)=>{const l=g=>f=>{const w=!f.isActive();f.setActive(w),g.storage.set(w),a.shared.getSink().each(x=>{r().getOpt(x).each(k=>{Ul(k.element),io(k,Cd,{name:g.name,value:g.storage.get()})})})},m=g=>f=>{f.setActive(g.storage.get())};return g=>{g(St(e,f=>{const w=f.text.fold(()=>({}),x=>({text:x}));return{type:f.type,active:!1,...w,onAction:l(f),onSetup:m(f)}}))}},h4=e=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Yr(e)]}),f4=Jt("leaf-label-event-id"),ex=({leaf:e,onLeafAction:r,visible:a,treeId:l,selectedId:m,backstage:g})=>{const f=e.menu.map(x=>pg(x,"tox-mbtn",g,M.none(),a)),w=[h4(e.title)];return f.each(x=>w.push(x)),pi.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:w,role:"treeitem",action:x=>{r(e.id),x.getSystem().broadcastOn([`update-active-item-${l}`],{value:e.id})},eventOrder:{[_l()]:[f4,"keying"]},buttonBehaviours:Re([...a?[Es.config({})]:[],vn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),il.config({channels:{[`update-active-item-${l}`]:{onReceive:(x,k)=>{(k.value===e.id?vn.on:vn.off)(x)}}}}),on(f4,[Br((x,k)=>{m.each(O=>{(O===e.id?vn.on:vn.off)(x)})}),Qe(_l(),(x,k)=>{const A="ArrowRight"===k.event.raw.code;"ArrowLeft"===k.event.raw.code?(al(x.element,".tox-tree--directory").each(D=>{x.getSystem().getByDom(D).each(P=>{qu(D,".tox-tree--directory__label").each(Z=>{P.getSystem().getByDom(Z).each(Io.focus)})})}),k.stop()):A&&k.stop()})])])})},jT=Jt("directory-label-event-id"),l0=({directory:e,visible:r,noChildren:a,backstage:l})=>{const m=e.menu.map(k=>pg(k,"tox-mbtn",l,M.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[(w=l.shared.providers.icons,O=w,vd("chevron-right",{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:[]},O))]},h4(e.title)];var O,w;m.each(k=>{g.push(k)});const x=k=>{al(k.element,".tox-tree--directory").each(O=>{k.getSystem().getByDom(O).each(A=>{const D=!vn.isOn(A);vn.toggle(A),io(k,"expand-tree-node",{expanded:D,node:e.id})})})};return pi.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:g,action:x,eventOrder:{[_l()]:[jT,"keying"]},buttonBehaviours:Re([...r?[Es.config({})]:[],on(jT,[Qe(_l(),(k,O)=>{const A="ArrowRight"===O.event.raw.code,D="ArrowLeft"===O.event.raw.code;A&&a&&O.stop(),(A||D)&&al(k.element,".tox-tree--directory").each(P=>{k.getSystem().getByDom(P).each(Z=>{!vn.isOn(Z)&&A||vn.isOn(Z)&&D?(x(k),O.stop()):D&&!vn.isOn(Z)&&(al(Z.element,".tox-tree--directory").each(te=>{qu(te,".tox-tree--directory__label").each(oe=>{Z.getSystem().getByDom(oe).each(Io.focus)})}),O.stop())})})})])])})},Hv=({children:e,onLeafAction:r,visible:a,treeId:l,expandedIds:m,selectedId:g,backstage:f})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:e.map(w=>"leaf"===w.type?ex({leaf:w,selectedId:g,onLeafAction:r,visible:a,treeId:l,backstage:f}):Pv({directory:w,expandedIds:m,selectedId:g,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:f})),behaviours:Re([_i.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Ko.config({})])}),b4=Jt("directory-event-id"),Pv=({directory:e,onLeafAction:r,labelTabstopping:a,treeId:l,backstage:m,expandedIds:g,selectedId:f})=>{const{children:w}=e,x=ho(g),k=g.includes(e.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[l0({directory:e,visible:a,noChildren:0===e.children.length,backstage:m}),Hv({children:w,expandedIds:g,selectedId:f,onLeafAction:r,visible:k,treeId:l,backstage:m})],behaviours:Re([on(b4,[Br((O,A)=>{vn.set(O,k)}),Qe("expand-tree-node",(O,A)=>{const{expanded:D,node:P}=A.event;x.set(D?[...x.get(),P]:x.get().filter(Z=>Z!==P))})]),vn.config({...e.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(O,A)=>{const D=O.components()[1],P=(Z=A,w.map(te=>"leaf"===te.type?ex({leaf:te,selectedId:f,onLeafAction:r,visible:Z,treeId:l,backstage:m}):Pv({directory:te,expandedIds:x.get(),selectedId:f,onLeafAction:r,labelTabstopping:Z,treeId:l,backstage:m})));var Z;A?_i.grow(D):_i.shrink(D),Ko.set(D,P)}})])}},Fv=Jt("tree-event-id");var WT=Object.freeze({__proto__:null,events:(e,r)=>{const a=e.stream.streams.setup(e,r);return Dr([Qe(e.event,a),rd(()=>r.cancel())].concat(e.cancelEvent.map(l=>[Qe(l,()=>r.cancel())]).getOr([])))}});const v4=e=>{const r=ho(null);return na({readState:()=>({timer:null!==r.get()?"set":"unset"}),setTimer:a=>{r.set(a)},cancel:()=>{const a=r.get();null!==a&&a.cancel()}})};var $T=Object.freeze({__proto__:null,throttle:v4,init:e=>e.stream.streams.state(e)}),y4=[wi("stream",Qi("mode",{throttle:[Xe("delay"),Ie("stopEvent",!0),Vr("streams",{setup:(e,r)=>{const a=e.stream,l=r0(e.onStream,a.delay);return r.setTimer(l),(m,g)=>{l.throttle(m,g),a.stopEvent&&g.stop()}},state:v4})]})),Ie("event","input"),In("cancelEvent"),mc("onStream")];const c0=Da({fields:y4,name:"streaming",active:WT,state:$T}),rf=(e,r,a)=>{const l=Ft.getValue(a);Ft.setValue(r,l),qT(r)},w4=(e,r)=>{const a=e.element,l=Ki(a),m=a.dom;"number"!==qr(a,"type")&&r(m,l)},qT=e=>{w4(e,(r,a)=>r.setSelectionRange(a.length,a.length))},Vv=ie("alloy.typeahead.itemexecute"),x4=ie([In("lazySink"),Xe("fetch"),Ie("minChars",5),Ie("responseTime",1e3),Rn("onOpen"),Ie("getHotspot",M.some),Ie("getAnchorOverrides",ie({})),Ie("layouts",M.none()),Ie("eventOrder",{}),Zu("model",{},[Ie("getDisplayText",e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value),Ie("selectsOver",!0),Ie("populateFromBrowse",!0)]),Rn("onSetValue"),Hi("onExecute"),Rn("onItemExecute"),Ie("inputClasses",[]),Ie("inputAttributes",{}),Ie("inputStyles",{}),Ie("matchWidth",!0),Ie("useMinWidth",!1),Ie("dismissOnBlur",!0),Yu(["openClass"]),In("initialData"),La("typeaheadBehaviours",[Io,Ft,c0,Kt,vn,zs]),qi("lazyTypeaheadComp",()=>ho(M.none)),qi("previewing",()=>ho(!0))].concat(U_()).concat(fv())),C4=ie([vt({schema:[wu()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlightItem:(r,a,l)=>{e.previewing.get()?e.lazyTypeaheadComp.get().each(m=>{((g,f,w)=>{if(g.selectsOver){const x=Ft.getValue(f),k=g.getDisplayText(x),O=Ft.getValue(w);return 0===g.getDisplayText(O).indexOf(k)?M.some(()=>{var D;rf(0,f,w),D=k.length,w4(f,(P,Z)=>P.setSelectionRange(D,Z.length))}):M.none()}return M.none()})(e.model,m,l).fold(()=>{e.model.selectsOver?(sr.dehighlight(a,l),e.previewing.set(!0)):e.previewing.set(!1)},g=>{g(),e.previewing.set(!1)})}):e.lazyTypeaheadComp.get().each(m=>{e.model.populateFromBrowse&&rf(0,m,l),Ns(l.element,"id").each(g=>No(m.element,"aria-activedescendant",g))})},onExecute:(r,a)=>e.lazyTypeaheadComp.get().map(l=>(io(l,Vv(),{item:a}),!0)),onHover:(r,a)=>{e.previewing.set(!1),e.lazyTypeaheadComp.get().each(l=>{e.model.populateFromBrowse&&rf(0,l,a)})}})})]),GT=Si({name:"Typeahead",configFields:x4(),partFields:C4(),factory:(e,r,a,l)=>{const m=(A,D,P)=>{e.previewing.set(!1);const Z=zs.getCoupled(A,"sandbox");if(Pn.isOpen(Z))bn.getCurrent(Z).each(te=>{sr.getHighlighted(te).fold(()=>{P(te)},()=>{Ac(Z,te.element,"keydown",D)})});else{const te=oe=>{bn.getCurrent(oe).each(P)};hp(e,f(A),A,Z,l,te,Xi.HighlightMenuAndItem).get(yt)}},g=wS(e),f=A=>D=>D.map(P=>{const Z=_a(P.menus),te=Vt(Z,oe=>zt(oe.items,ae=>"item"===ae.type));return Ft.getState(A).update(St(te,oe=>oe.data)),P}),w=A=>bn.getCurrent(A),x="typeaheadevents",k=[Io.config({}),Ft.config({onSetValue:e.onSetValue,store:{mode:"dataset",getDataKey:A=>Ki(A.element),getFallbackEntry:A=>({value:A,meta:{}}),setValue:(A,D)=>{ld(A.element,e.model.getDisplayText(D))},...e.initialData.map(A=>ol("initialValue",A)).getOr({})}}),c0.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(A,D)=>{const P=zs.getCoupled(A,"sandbox");if(Io.isFocused(A)&&Ki(A.element).length>=e.minChars){const Z=w(P).bind(oe=>sr.getHighlighted(oe).map(Ft.getValue));e.previewing.set(!0);const te=oe=>{w(P).each(ae=>{Z.fold(()=>{e.model.selectsOver&&sr.highlightFirst(ae)},X=>{sr.highlightBy(ae,j=>Ft.getValue(j).value===X.value),sr.getHighlighted(ae).orThunk(()=>(sr.highlightFirst(ae),M.none()))})})};hp(e,f(A),A,P,l,te,Xi.HighlightJustMenu).get(yt)}},cancelEvent:Tf()}),Kt.config({mode:"special",onDown:(A,D)=>(m(A,D,sr.highlightFirst),M.some(!0)),onEscape:A=>{const D=zs.getCoupled(A,"sandbox");return Pn.isOpen(D)?(Pn.close(D),M.some(!0)):M.none()},onUp:(A,D)=>(m(A,D,sr.highlightLast),M.some(!0)),onEnter:A=>{const D=zs.getCoupled(A,"sandbox"),P=Pn.isOpen(D);if(P&&!e.previewing.get())return w(D).bind(Z=>sr.getHighlighted(Z)).map(Z=>(io(A,Vv(),{item:Z}),!0));{const Z=Ft.getValue(A);return Hn(A,Tf()),e.onExecute(D,A,Z),P&&Pn.close(D),M.some(!0)}}}),vn.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),zs.config({others:{sandbox:A=>hv(e,A,{onOpen:()=>vn.on(A),onClose:()=>{e.lazyTypeaheadComp.get().each(D=>Oo(D.element,"aria-activedescendant")),vn.off(A)}})}}),on(x,[Br(A=>{e.lazyTypeaheadComp.set(M.some(A))}),rd(A=>{e.lazyTypeaheadComp.set(M.none())}),Gi(A=>{const D=yt;uk(e,f(A),A,l,D,Xi.HighlightMenuAndItem).get(yt)}),Qe(Vv(),(A,D)=>{const P=zs.getCoupled(A,"sandbox");rf(0,A,D.event.item),Hn(A,Tf()),e.onItemExecute(A,P,D.event.item,Ft.getValue(A)),Pn.close(P),qT(A)})].concat(e.dismissOnBlur?[Qe(km(),A=>{const D=zs.getCoupled(A,"sandbox");Hc(D.element).isNone()&&Pn.close(D)})]:[]))],O={[Og()]:[Ft.name(),c0.name(),x],...e.eventOrder};return{uid:e.uid,dom:xS(Zr(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...gs(e.typeaheadBehaviours,k)},eventOrder:O}}}),kp=e=>({...e,toCached:()=>kp(e.toCached()),bindFuture:r=>kp(e.bind(a=>a.fold(l=>mm(pn.error(l)),l=>r(l)))),bindResult:r=>kp(e.map(a=>a.bind(r))),mapResult:r=>kp(e.map(a=>a.map(r))),mapError:r=>kp(e.map(a=>a.mapError(r))),foldResult:(r,a)=>e.map(l=>l.fold(r,a)),withTimeout:(r,a)=>kp(um(l=>{let m=!1;const g=setTimeout(()=>{m=!0,l(pn.error(a()))},r);e.get(f=>{m||(clearTimeout(g),l(f))})}))}),tx=(e,r,a=[],l,m,g)=>{const f=r.fold(()=>({}),k=>({action:k})),w={buttonBehaviours:Re([Zh(()=>!e.enabled||g.isDisabled()),Ua(),Es.config({}),on("button press",[Rg("click"),Rg("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...f},x=Zr(w,{dom:l});return Zr(x,{components:m})},E5=(e,r,a,l=[])=>{const m={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map(w=>({"aria-label":a.translate(w),title:a.translate(w)})).getOr({})},g=e.icon.map(w=>Sp(w,a.icons)),f=G1([g]);return tx(e,r,l,m,f,a)},ox=e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},KT=(e,r,a,l=[],m=[])=>{const g=a.translate(e.text),f=e.icon.map(O=>Sp(O,a.icons)),w=[f.getOrThunk(()=>Yr(g))],x=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),k=[...ox(x),...f.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...m];return tx(e,r,l,{tag:"button",classes:k,attributes:{title:g}},w,a)},YT=(e,r,a,l=[],m=[])=>{const g=KT(e,M.some(r),a,l,m);return pi.sketch(g)},S4=(e,r)=>a=>{"custom"===r?io(a,Cd,{name:e,value:{}}):"submit"===r?Hn(a,ag):"cancel"===r?Hn(a,pm):console.error("Unknown button type: ",r)},zv=(e,r,a)=>{if(((l,m)=>"menu"===m)(0,r)){const l=()=>f,m=e,g={...e,type:"menubutton",search:M.none(),onSetup:w=>(w.setEnabled(e.enabled),yt),fetch:Qw(m.items,l,a)},f=pr(pg(g,"tox-tbtn",a,M.none()));return f.asSpec()}if(((l,m)=>"custom"===m||"cancel"===m||"submit"===m)(0,r)){const l=S4(e.name,r),m={...e,borderless:!1};return YT(m,l,a.shared.providers,[])}if(((l,m)=>"togglebutton"===m)(0,r))return((l,m)=>{var g,f;const w=l.icon.map(X=>ug(X,m.icons)).map(pr),x=l.buttonType.getOr(l.primary?"primary":"secondary"),k={...l,name:null!==(g=l.name)&&void 0!==g?g:"",primary:"primary"===x,tooltip:M.from(l.tooltip),enabled:null!==(f=l.enabled)&&void 0!==f&&f,borderless:!1},O=k.tooltip.map(X=>({"aria-label":m.translate(X),title:m.translate(X)})).getOr({}),A=ox(x??"secondary"),D=l.icon.isSome()&&l.text.isSome(),P={tag:"button",classes:[...A.concat(l.icon.isSome()?["tox-button--icon"]:[]),...l.active?["tox-button--enabled"]:[],...D?["tox-button--icon-and-text"]:[]],attributes:O},Z=m.translate(l.text.getOr("")),te=Yr(Z),oe=[...G1([w.map(X=>X.asSpec())]),...l.text.isSome()?[te]:[]],ae=tx(k,M.some(X=>{io(X,Cd,{name:l.name,value:{setIcon:j=>{w.map(ne=>ne.getOpt(X).each(le=>{Ko.set(le,[ug(j,m.icons)])}))}}})}),[],P,oe,m);return pi.sketch(ae)})(e,a.shared.providers);throw console.error("Unknown footer button type: ",r),new Error("Unknown footer button type")},$c={type:"separator"},T5=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:yt}),nx=(e,r)=>({type:"menuitem",value:r,text:e,meta:{attach:void 0},onAction:yt}),k4=(e,r)=>{return(a=>St(a,T5))((a=e,zt(r,m=>m.type===a)));var a},O5=e=>k4("header",e.targets),Zv=e=>k4("anchor",e.targets),rx=e=>M.from(e.anchorTop).map(r=>nx("<top>",r)).toArray(),A5=e=>M.from(e.anchorBottom).map(r=>nx("<bottom>",r)).toArray(),d0=(e,r)=>{const a=e.toLowerCase();return zt(r,l=>{var m;const f=null!==(m=l.value)&&void 0!==m?m:"";return fs((void 0!==l.meta&&void 0!==l.meta.text?l.meta.text:l.text).toLowerCase(),a)||fs(f.toLowerCase(),a)})},XT=Jt("aria-invalid"),N5=(e,r)=>{e.dom.checked=r},_d=e=>e.dom.checked,aa=e=>(r,a,l,m)=>jt(a,"name").fold(()=>e(a,m,M.none()),g=>r.field(g,e(a,m,jt(l,g)))),JT={bar:aa((e,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:St(e.items,r.shared.interpreter)})),collection:aa((e,r,a)=>((e,r,a)=>{const l=e.label.map(A=>vp(A,r)),m=r.icons(),g=A=>(D,P)=>{uc(P.event.target,"[data-collection-item-value]").each(Z=>{A(D,P,Z,qr(Z,"data-collection-item-value"))})},f=g((A,D,P,Z)=>{D.stop(),r.isDisabled()||io(A,Cd,{name:e.name,value:Z})}),w=[Qe(uu(),g((A,D,P)=>{Ul(P)})),Qe(va(),f),Qe(Ss(),f),Qe(mu(),g((A,D,P)=>{Xr(A.element,"."+V1).each(Z=>{ms(Z,V1)}),Gn(P,V1)})),Qe(T0(),g(A=>{Xr(A.element,"."+V1).each(D=>{ms(D,V1)})})),Gi(g((A,D,P,Z)=>{io(A,Cd,{name:e.name,value:Z})}))],x=(A,D)=>St(Fi(A.element,".tox-collection__item"),D),k=ir.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ht},behaviours:Re([Ro.config({disabled:r.isDisabled,onDisabled:A=>{x(A,D=>{Gn(D,"tox-collection__item--state-disabled"),No(D,"aria-disabled",!0)})},onEnabled:A=>{x(A,D=>{ms(D,"tox-collection__item--state-disabled"),Oo(D,"aria-disabled")})}}),Ua(),Ko.config({}),Ft.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(A,D)=>{((P,Z)=>{const te=St(Z,X=>{const j=bc.translate(X.text),ne=1===e.columns?`<div class="tox-collection__item-label">${j}</div>`:"",le=`<div class="tox-collection__item-icon">${ze=X.icon,null!==(ot=m[ze])&&void 0!==ot?ot:ze}</div>`,me={_:" "," - ":" ","-":" "},xe=j.replace(/\_| \- |\-/g,ze=>me[ze]);var ze,ot;return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${KE.encodeAllRaw(X.value)}" title="${xe}" aria-label="${xe}">${le}${ne}</div>`}),oe="auto"!==e.columns&&e.columns>1?yn(te,e.columns):[te],ae=St(oe,X=>`<div class="tox-collection__group">${X.join("")}</div>`);Vd(P.element,ae.join(""))})(A,D),"auto"===e.columns&&K2(A,5,"tox-collection__item").each(({numRows:P,numColumns:Z})=>{Kt.setGridSize(A,P,Z)}),Hn(A,vk)}}),Es.config({}),Kt.config((O=e.columns,1===O?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===O?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:`.${Vh}`}})),on("collection-events",w)]),eventOrder:{[rl()]:["disabling","alloy.base.behaviour","collection-events"]}});var O;return jc(l,k,["tox-form__group--collection"],[])})(e,r.shared.providers,a)),alertbanner:aa((e,r)=>((a,l)=>{const m=I_(a.icon,l.icons);return zi.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${a.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:a.url?void 0:m},components:a.url?[pi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:m,attributes:{title:l.translate(a.iconTooltip)}},action:g=>io(g,Cd,{name:"alert-banner",value:a.url}),buttonBehaviours:Re([zb()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:l.translate(a.text)}}]})})(e,r.shared.providers)),input:aa((e,r,a)=>{return m=r.shared.providers,g=a,FT({name:(l=e).name,multiline:!1,label:l.label,inputMode:l.inputMode,placeholder:l.placeholder,flex:!1,disabled:!l.enabled,classname:"tox-textfield",validation:M.none(),maximized:l.maximized,data:g},m);var l,m,g}),textarea:aa((e,r,a)=>{return m=r.shared.providers,g=a,FT({name:(l=e).name,multiline:!0,label:l.label,inputMode:M.none(),placeholder:l.placeholder,flex:!0,disabled:!l.enabled,classname:"tox-textarea",validation:M.none(),maximized:l.maximized,data:g},m);var l,m,g}),label:aa((e,r)=>((a,l)=>{const m="tox-label";return{dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:[m,..."center"===a.align?[`${m}--center`]:[],..."end"===a.align?[`${m}--end`]:[]]},components:[Yr(l.providers.translate(a.label))]},...St(a.items,l.interpreter)],behaviours:Re([cg(),Ko.config({}),(g=M.none(),Zw(g,Ra,Vd)),Kt.config({mode:"acyclic"})])};var g})(e,r.shared)),iframe:(SO=(e,r,a)=>((l,m,g)=>{const f="tox-dialog__iframe",w=l.transparent?[]:[`${f}--opaque`],x=l.border?["tox-navobj-bordered"]:[],k={...l.label.map(P=>({title:P})).getOr({}),...g.map(P=>({srcdoc:P})).getOr({}),...l.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},O=((P,Z)=>{const te=ho(P.getOr(""));return{getValue:oe=>te.get(),setValue:(oe,ae)=>{if(te.get()!==ae){const X=oe.element,j=()=>No(X,"srcdoc",ae);Z?DT.fold(ie(s0),ne=>ne.throttle)(X,ae,j):j()}te.set(ae)}}})(g,l.streamContent),A=l.label.map(P=>vp(P,m)),D=ir.parts.field({factory:{sketch:P=>Xk(M.from(x),{uid:P.uid,dom:{tag:"iframe",attributes:k,classes:[f,...w]},behaviours:Re([Es.config({}),Io.config({}),Jl(g,O.getValue,O.setValue),il.config({channels:{[qw]:{onReceive:(Z,te)=>{te.newFocus.each(oe=>{eo(Z.element).each(ae=>{(se(Z.element,oe)?Gn:ms)(ae,"tox-navobj-bordered-focus")})})}}}})])})}});return jc(A,D,["tox-form__group--stretched"],[])})(e,r.shared.providers,a),(e,r,a,l)=>{const m=Zr(r,{source:"dynamic"});return aa(SO)(e,m,a,l)}),button:aa((e,r)=>((a,l)=>{const m=S4(a.name,"custom");return g=M.none(),f=ir.parts.field({factory:pi,...KT(a,M.some(m),l,[dg(""),cg()])}),jc(g,f,[],[]);var g,f})(e,r.shared.providers)),checkbox:aa((e,r,a)=>((l,m,g)=>{const f=A=>(A.element.dom.click(),M.some(!0)),w=ir.parts.field({factory:{sketch:ht},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Re([cg(),Ro.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:A=>{eo(A.element).each(D=>Gn(D,"tox-checkbox--disabled"))},onEnabled:A=>{eo(A.element).each(D=>ms(D,"tox-checkbox--disabled"))}}),Es.config({}),Io.config({}),Zw(g,_d,N5),Kt.config({mode:"special",onEnter:f,onSpace:f,stopSpaceKeyup:!0}),on("checkbox-events",[Qe(od(),(A,D)=>{io(A,Yl,{name:l.name})})])])}),x=ir.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Yr(m.translate(l.label))],behaviours:Re([yv.config({})])}),k=A=>vd("checked"===A?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+A]},m.icons),O=pr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[k("checked"),k("unchecked")]});return ir.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[w,O.asSpec(),x],fieldBehaviours:Re([Ro.config({disabled:()=>!l.enabled||m.isDisabled()}),Ua()])})})(e,r.shared.providers,a)),colorinput:aa((e,r,a)=>((l,m,g,f)=>{const w=ir.parts.field({factory:up,inputClasses:["tox-textfield"],data:f,onSetValue:A=>Du.run(A).get(yt),inputBehaviours:Re([Ro.config({disabled:m.providers.isDisabled}),Ua(),Es.config({}),Du.config({invalidClass:"tox-textbox-field-invalid",getRoot:A=>eo(A.element),notify:{onValid:A=>{const D=Ft.getValue(A);io(A,tT,{color:D})}},validator:{validateOnLoad:!1,validate:A=>{const D=Ft.getValue(A);if(0===D.length)return mm(pn.value(!0));{const P=Ws("span");Bo(P,"background-color",D);const Z=rs(P,"background-color").fold(()=>pn.error("blah"),te=>pn.value(D));return mm(Z)}}}})]),selectOnFocus:!1}),x=l.label.map(A=>vp(A,m.providers)),k=(A,D)=>{io(A,xk,{value:D})},O=pr((A={dom:{tag:"span",attributes:{"aria-label":m.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Fs,Va,ya],onLtr:()=>[Va,Fs,ya]},components:[],fetch:Yh(g.getColors(l.storageKey),l.storageKey,g.hasCustomColors()),columns:g.getColorCols(l.storageKey),presets:"color",onItemAction:(A,D)=>{O.getOpt(A).each(P=>{"custom"===D?g.colorPicker(Z=>{Z.fold(()=>Hn(P,Ck),te=>{k(P,te),SE(l.storageKey,te)})},"#ffffff"):k(P,"remove"===D?"":D)})}},Uc.sketch({dom:A.dom,components:A.components,toggleClass:"mce-active",dropdownBehaviours:Re([Zh((D=m).providers.isDisabled),Ua(),yv.config({}),Es.config({})]),layouts:A.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:D.getSink,fetch:P=>um(Z=>A.fetch(Z)).map(Z=>M.from(bw(Zr(ak(Jt("menu-value"),Z,te=>{A.onItemAction(P,te)},A.columns,A.presets,Nu.CLOSE_ON_EXECUTE,Ke,D.providers),{movement:pv(A.columns,A.presets)})))),parts:{menu:Jb(0,0,A.presets)}})));var A,D;return ir.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:x.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[w,O.asSpec()]}]),fieldBehaviours:Re([on("form-field-events",[Qe(tT,(A,D)=>{O.getOpt(A).each(P=>{Bo(P.element,"background-color",D.event.color)}),io(A,Yl,{name:l.name})}),Qe(xk,(A,D)=>{ir.getField(A).each(P=>{Ft.setValue(P,D.event.value),bn.getCurrent(A).each(Io.focus)})}),Qe(Ck,(A,D)=>{ir.getField(A).each(P=>{bn.getCurrent(A).each(Io.focus)})})])])})})(e,r.shared,r.colorinput,a)),colorpicker:aa((e,r,a)=>((l,m,g)=>{const f=k=>"tox-"+k,w=((e,r)=>ql({name:"ColourPicker",configFields:[Xe("dom"),Ie("onValidHex",yt),Ie("onInvalidHex",yt)],factory:l=>{const m=((e,r,a,l)=>{const m=(O,A)=>Du.config({invalidClass:r("invalid"),notify:{onValidate:D=>{io(D,Fw,{type:O})},onValid:D=>{io(D,Pw,{type:O,value:Ft.getValue(D)})},onInvalid:D=>{io(D,Gk,{type:O,value:Ft.getValue(D)})}},validator:{validate:D=>{const P=Ft.getValue(D),Z=A(P)?pn.value(!0):pn.error(e("aria.input.invalid"));return mm(Z)},validateOnLoad:!1}}),g=(O,A,D,P,Z)=>{const te=e(Vw+"range"),X=[ir.parts.label({dom:{tag:"label",attributes:{"aria-label":P}},components:[Yr(D)]}),ir.parts.field({data:Z,factory:up,inputAttributes:{type:"text",..."hex"===A?{"aria-live":"polite"}:{}},inputClasses:[r("textfield")],inputBehaviours:Re([m(A,O),Es.config({})]),onSetValue:ne=>{Du.isInvalid(ne)&&Du.run(ne).get(yt)}})],j="hex"!==A?[ir.parts["aria-descriptor"]({text:te})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:X.concat(j)}},f=(O,A)=>{Ft.setValue(O,{red:A.red,green:A.green,blue:A.blue})},w=pr({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=(O,A)=>{w.getOpt(O).each(D=>{Bo(D.element,"background-color","#"+A.value)})};return ql({factory:()=>{const O={red:ho(M.some(255)),green:ho(M.some(255)),blue:ho(M.some(255)),hex:ho(M.some("ffffff"))},A=le=>O[le].get(),D=(le,me)=>{O[le].set(me)},P=le=>{const xe=le.green,ze=le.blue;D("red",M.some(le.red)),D("green",M.some(xe)),D("blue",M.some(ze))},Z=(le,me)=>{const xe=me.event;"hex"!==xe.type?D(xe.type,M.none()):l(le)},te=(le,me)=>{const xe=me.event;"hex"===xe.type?((ze,ot)=>{a(ze);const st=Mu(ot);D("hex",M.some(st.value));const nt=dv(st);f(ze,nt),P(nt),io(ze,Iw,{hex:st}),x(ze,st)})(le,xe.value):((ze,ot,st)=>{const nt=parseInt(st,10);D(ot,M.some(nt)),A("red").bind(Ht=>A("green").bind(Yt=>A("blue").map(go=>cm(Ht,Yt,go,1)))).each(Ht=>{const Yt=((go,Uo)=>{const $o=Y1(Uo);return xp.getField(go,"hex").each(On=>{Io.isFocused(On)||Ft.setValue(go,{hex:$o.value})}),$o})(ze,Ht);io(ze,Iw,{hex:Yt}),x(ze,Yt)})})(le,xe.type,xe.value)},oe=le=>({label:e(Vw+le+".label"),description:e(Vw+le+".description")}),ae=oe("red"),X=oe("green"),j=oe("blue"),ne=oe("hex");return Zr(xp.sketch(le=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[le.field("red",ir.sketch(g(XS,"red",ae.label,ae.description,255))),le.field("green",ir.sketch(g(XS,"green",X.label,X.description,255))),le.field("blue",ir.sketch(g(XS,"blue",j.label,j.description,255))),le.field("hex",ir.sketch(g(qS,"hex",ne.label,ne.description,"ffffff"))),w.asSpec()],formBehaviours:Re([Du.config({invalidClass:r("form-invalid")}),on("rgb-form-events",[Qe(Pw,te),Qe(Gk,Z),Qe(Fw,Z)])])})),{apis:{updateHex:(le,me)=>{Ft.setValue(le,{hex:me.value}),((xe,ze)=>{const ot=dv(ze);f(xe,ot),P(ot)})(le,me),x(le,me)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(O,A,D)=>{O.updateHex(A,D)}},extraApis:{}})})(e,r,l.onValidHex,l.onInvalidHex),g=((te,oe)=>{const ae=Wc.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[oe("sv-palette-spectrum")]}}),X=Wc.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[oe("sv-palette-thumb")],innerHtml:`<div class=${oe("sv-palette-inner-thumb")} role="presentation"></div>`}}),j=(ne,le)=>{const{width:me,height:xe}=ne,ze=ne.getContext("2d");if(null===ze)return;ze.fillStyle=le,ze.fillRect(0,0,me,xe);const ot=ze.createLinearGradient(0,0,me,0);ot.addColorStop(0,"rgba(255,255,255,1)"),ot.addColorStop(1,"rgba(255,255,255,0)"),ze.fillStyle=ot,ze.fillRect(0,0,me,xe);const st=ze.createLinearGradient(0,0,0,xe);st.addColorStop(0,"rgba(0,0,0,0)"),st.addColorStop(1,"rgba(0,0,0,1)"),ze.fillStyle=st,ze.fillRect(0,0,me,xe)};return ql({factory:ne=>{const le=ie({x:0,y:0}),me=Re([bn.config({find:M.some}),Io.config({})]);return Wc.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":te(["Saturation {0}%, Brightness {1}%",0,0])},classes:[oe("sv-palette")]},model:{mode:"xy",getInitialValue:le},rounded:!1,components:[ae,X],onChange:(xe,ze,ot)=>{Nt(ot)||No(xe.element,"aria-valuetext",te(["Saturation {0}%, Brightness {1}%",Math.floor(ot.x),Math.floor(100-ot.y)])),io(xe,_T,{value:ot})},onInit:(xe,ze,ot,st)=>{j(ot.element.dom,vE(yE))},sliderBehaviours:me})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(ne,le,me)=>{((xe,ze)=>{const ot=xe.components()[0].element.dom,st=uv(ze,100,100),nt=bE(st);j(ot,vE(nt))})(le,me)},setThumb:(ne,le,me)=>{((xe,ze)=>{const ot=lw(dv(ze));Wc.setValue(xe,{x:ot.saturation,y:100-ot.value}),No(xe.element,"aria-valuetext",te(["Saturation {0}%, Brightness {1}%",ot.saturation,ot.value]))})(le,me)}},extraApis:{}})})(e,r),f={paletteRgba:ho(yE),paletteHue:ho(0)},w=pr(((te,oe)=>{const ae=Wc.parts.spectrum({dom:{tag:"div",classes:[oe("hue-slider-spectrum")],attributes:{role:"presentation"}}}),X=Wc.parts.thumb({dom:{tag:"div",classes:[oe("hue-slider-thumb")],attributes:{role:"presentation"}}});return Wc.sketch({dom:{tag:"div",classes:[oe("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:ie(0)},components:[ae,X],sliderBehaviours:Re([Io.config({})]),onChange:(j,ne,le)=>{No(j.element,"aria-valuenow",Math.floor(360-3.6*le)),io(j,$k,{value:le})}})})(0,r)),x=pr(g.sketch({})),k=pr(m.sketch({})),O=(te,oe,ae)=>{x.getOpt(te).each(X=>{g.setHue(X,ae)})},A=(te,oe)=>{k.getOpt(te).each(ae=>{m.updateHex(ae,oe)})},D=(te,oe,ae)=>{w.getOpt(te).each(X=>{Wc.setValue(X,100-ae/360*100)})},P=(te,oe)=>{x.getOpt(te).each(ae=>{g.setThumb(ae,oe)})},Z=(te,oe,ae,X)=>{((j,ne)=>{const le=dv(j);f.paletteRgba.set(le),f.paletteHue.set(ne)})(oe,ae),Qt(X,j=>{j(te,oe,ae)})};return{uid:l.uid,dom:l.dom,components:[x.asSpec(),w.asSpec(),k.asSpec()],behaviours:Re([on("colour-picker-events",[Qe(Iw,(()=>{const te=[O,D,P];return(oe,ae)=>{const X=ae.event.hex,j=lw(dv(X));Z(oe,X,j.hue,te)}})()),Qe(_T,(()=>{const te=[A];return(oe,ae)=>{const X=ae.event.value,j=f.paletteHue.get(),ne=uv(j,X.x,100-X.y),le=$h(ne);Z(oe,le,j,te)}})()),Qe($k,(()=>{const te=[O,A];return(oe,ae)=>{const X=(100-ae.event.value)/100*360,j=f.paletteRgba.get(),ne=lw(j),le=uv(X,ne.saturation,ne.value),me=$h(le);Z(oe,me,X,te)}})())]),bn.config({find:te=>k.getOpt(te)}),Kt.config({mode:"acyclic"})])}}}))((k=>O=>Zo(O)?k.translate(Nv[O]):k.translate(O))(m),f),x=pr(w.sketch({dom:{tag:"div",classes:[f("color-picker-container")],attributes:{role:"presentation"}},onValidHex:k=>{io(k,Cd,{name:"hex-valid",value:!0})},onInvalidHex:k=>{io(k,Cd,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:Re([Jl(g,k=>{const O=x.get(k);return bn.getCurrent(O).bind(A=>Ft.getValue(A).hex).map(A=>"#"+gl(A,"#")).getOr("")},(k,O)=>{const A=M.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(O)).bind(P=>ps(P,1)),D=x.get(k);bn.getCurrent(D).fold(()=>{console.log("Can not find form")},P=>{Ft.setValue(P,{hex:A.getOr("")}),xp.getField(P,"hex").each(Z=>{Hn(Z,Bd())})})}),cg()])}})(0,r.shared.providers,a)),dropzone:aa((e,r,a)=>((l,m,g)=>{const f=(Z,te)=>{te.stop()},w=Z=>(te,oe)=>{Qt(Z,ae=>{ae(te,oe)})},x=(Z,te)=>{var oe;Ro.isDisabled(Z)||O(Z,null===(oe=te.event.raw.dataTransfer)||void 0===oe?void 0:oe.files)},k=(Z,te)=>{O(Z,te.event.raw.target.files)},O=(Z,te)=>{te&&(Ft.setValue(Z,((oe,ae)=>{const X=Iu.explode(ae.getOption("images_file_types"));return zt(Ha(oe),j=>zn(X,ne=>As(j.name.toLowerCase(),`.${ne.toLowerCase()}`)))})(te,m)),io(Z,Yl,{name:l.name}))},A=pr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Re([on("input-file-events",[Fd(va()),Fd(Ss())])])}),D=l.label.map(Z=>vp(Z,m)),P=ir.parts.field({factory:{sketch:Z=>({uid:Z.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Re([dg(g.getOr([])),cg(),Ro.config({}),vn.config({toggleClass:"dragenter",toggleOnExecute:!1}),on("dropzone-events",[Qe("dragenter",w([f,vn.toggle])),Qe("dragleave",w([f,vn.toggle])),Qe("dragover",f),Qe("drop",w([f,x])),Qe(od(),k)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Yr(m.translate("Drop an image here"))]},pi.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Yr(m.translate("Browse for an image")),A.asSpec()],action:te=>{A.get(te).element.dom.click()},buttonBehaviours:Re([Es.config({}),Zh(m.isDisabled),Ua()])})]}]})}});return jc(D,P,["tox-form__group--stretched"],[])})(e,r.shared.providers,a)),grid:aa((e,r)=>{return{dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${(a=e).columns}col`]},components:St(a.items,r.shared.interpreter)};var a}),listbox:aa((e,r,a)=>((l,m,g)=>{const f=m.shared.providers,w=g.bind(A=>a4(l.items,A)).orThunk(()=>Ar(l.items).filter(s4)),x=l.label.map(A=>vp(A,f)),O={dom:{tag:"div",classes:["tox-listboxfield"]},components:[ir.parts.field({dom:{},factory:{sketch:A=>n4({uid:A.uid,text:w.map(D=>D.text),icon:M.none(),tooltip:l.label,role:M.none(),fetch:(D,P)=>{const Z=HT(D,l.name,l.items,Ft.getValue(D));P(a0(Z,Nu.CLOSE_ON_EXECUTE,m,{isHorizontalMenu:!1,search:M.none()}))},onSetup:ie(yt),getApi:ie({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Es.config({}),Jl(w.map(D=>D.value),D=>qr(D.element,IT),(D,P)=>{a4(l.items,P).each(Z=>{No(D.element,IT,Z.value),io(D,yc,{text:Z.text})})})]},"tox-listbox",m.shared)}})]};return ir.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dn([x.toArray(),[O]]),fieldBehaviours:Re([Ro.config({disabled:ie(!l.enabled),onDisabled:A=>{ir.getField(A).each(Ro.disable)},onEnabled:A=>{ir.getField(A).each(Ro.enable)}})])})})(e,r,a)),selectbox:aa((e,r,a)=>((l,m,g)=>{const f=St(l.items,A=>({text:m.translate(A.text),value:A.value})),w=l.label.map(A=>vp(A,m)),x=ir.parts.field({dom:{},...g.map(A=>({data:A})).getOr({}),selectAttributes:{size:l.size},options:f,factory:C5,selectBehaviours:Re([Ro.config({disabled:()=>!l.enabled||m.isDisabled()}),Es.config({}),on("selectbox-change",[Qe(od(),(A,D)=>{io(A,Yl,{name:l.name})})])])}),k=l.size>1?M.none():M.some(vd("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},m.icons)),O={dom:{tag:"div",classes:["tox-selectfield"]},components:dn([[x],k.toArray()])};return ir.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:dn([w.toArray(),[O]]),fieldBehaviours:Re([Ro.config({disabled:()=>!l.enabled||m.isDisabled(),onDisabled:A=>{ir.getField(A).each(Ro.disable)},onEnabled:A=>{ir.getField(A).each(Ro.enable)}}),Ua()])})})(e,r.shared.providers,a)),sizeinput:aa((e,r)=>((a,l)=>{let m=l4;const g=Jt("ratio-event"),f=P=>vd(P,{tag:"span",classes:["tox-icon","tox-lock-icon__"+P]},l.icons),w=wc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:l.translate(a.label.getOr("Constrain proportions"))}},components:[f("lock"),f("unlock")],buttonBehaviours:Re([Ro.config({disabled:()=>!a.enabled||l.isDisabled()}),Ua(),Es.config({})])}),x=P=>({dom:{tag:"div",classes:["tox-form__group"]},components:P}),k=P=>ir.parts.field({factory:up,inputClasses:["tox-textfield"],inputBehaviours:Re([Ro.config({disabled:()=>!a.enabled||l.isDisabled()}),Ua(),Es.config({}),on("size-input-events",[Qe(mu(),(Z,te)=>{io(Z,g,{isField1:P})}),Qe(od(),(Z,te)=>{io(Z,Yl,{name:a.name})})])]),selectOnFocus:!1}),O=P=>({dom:{tag:"label",classes:["tox-label"]},components:[Yr(l.translate(P))]}),A=wc.parts.field1(x([ir.parts.label(O("Width")),k(!0)])),D=wc.parts.field2(x([ir.parts.label(O("Height")),k(!1)]));return wc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[A,D,x([O("\xa0"),w])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(P,Z,te)=>{Bv(Ft.getValue(P)).each(oe=>{m(oe).each(ae=>{Ft.setValue(Z,(X=>{const j={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let ne=X.value.toFixed((le=X.unit)in j?j[le]:1);var le;return-1!==ne.indexOf(".")&&(ne=ne.replace(/\.?0*$/,"")),ne+X.unit})(ae))})})},coupledFieldBehaviours:Re([Ro.config({disabled:()=>!a.enabled||l.isDisabled(),onDisabled:P=>{wc.getField1(P).bind(ir.getField).each(Ro.disable),wc.getField2(P).bind(ir.getField).each(Ro.disable),wc.getLock(P).each(Ro.disable)},onEnabled:P=>{wc.getField1(P).bind(ir.getField).each(Ro.enable),wc.getField2(P).bind(ir.getField).each(Ro.enable),wc.getLock(P).each(Ro.enable)}}),Ua(),on("size-input-events2",[Qe(g,(P,Z)=>{const te=Z.event.isField1,oe=te?wc.getField1(P):wc.getField2(P),ae=te?wc.getField2(P):wc.getField1(P),X=oe.map(Ft.getValue).getOr(""),j=ae.map(Ft.getValue).getOr("");m=((ne,le)=>{const me=Bv(ne).toOptional(),xe=Bv(le).toOptional();return wn(me,xe,(ze,ot)=>i4(ze,ot.unit).map(st=>ot.value/st).map(st=>{return nt=st,Ht=ot.unit,Yt=>i4(Yt,Ht).map(go=>({value:go*nt,unit:Ht}));var nt,Ht}).getOr(l4)).getOr(l4)})(X,j)})])])})})(e,r.shared.providers)),slider:aa((e,r,a)=>((l,m,g)=>{const f=Wc.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yr(m.translate(l.label))]}),w=Wc.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),x=Wc.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Wc.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:l.min,maxX:l.max,getInitialValue:ie(g.getOrThunk(()=>(Math.abs(l.max)-Math.abs(l.min))/2))},components:[f,w,x],sliderBehaviours:Re([cg(),Io.config({})]),onChoose:(k,O,A)=>{io(k,Yl,{name:l.name,value:A})}})})(e,r.shared.providers,a)),urlinput:aa((e,r,a)=>((l,m,g,f)=>{const w=m.shared.providers,x=X=>{const j=Ft.getValue(X);g.addToHistory(j.value,l.filetype)},k={...f.map(X=>({initialData:X})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":XT,type:"url"},minChars:0,responseTime:0,fetch:X=>{const j=((le,me,xe)=>{var ze,ot;const st=Ft.getValue(me),nt=null!==(ot=null===(ze=st?.meta)||void 0===ze?void 0:ze.text)&&void 0!==ot?ot:st.value;return xe.getLinkInformation().fold(()=>[],Ht=>{const Yt=d0(nt,(Uo=xe.getHistory(le),St(Uo,$o=>nx($o,$o))));var Uo,go;return"file"===le?(go=[Yt,d0(nt,O5(Ht)),d0(nt,dn([rx(Ht),Zv(Ht),A5(Ht)]))],no(go,(Uo,$o)=>0===Uo.length||0===$o.length?Uo.concat($o):Uo.concat($c,$o),[])):Yt})})(l.filetype,X,g),ne=a0(j,Nu.BUBBLE_TO_SANDBOX,m,{isHorizontalMenu:!1,search:M.none()});return mm(ne)},getHotspot:X=>oe.getOpt(X),onSetValue:(X,j)=>{X.hasConfigured(Du)&&Du.run(X).get(yt)},typeaheadBehaviours:Re([...g.getValidationHandler().map(X=>Du.config({getRoot:j=>eo(j.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(j,ne)=>{D.getOpt(j).each(le=>{No(le.element,"title",w.translate(ne))})}},validator:{validate:j=>{const ne=Ft.getValue(j);return kp(um(le=>{X({type:l.filetype,url:ne.value},me=>{if("invalid"===me.status){const xe=pn.error(me.message);le(xe)}else{const xe=pn.value(me.message);le(xe)}})}))},validateOnLoad:!1}})).toArray(),Ro.config({disabled:()=>!l.enabled||w.isDisabled()}),Es.config({}),on("urlinput-events",[Qe(Bd(),X=>{const j=Ki(X.element),ne=j.trim();ne!==j&&ld(X.element,ne),"file"===l.filetype&&io(X,Yl,{name:l.name})}),Qe(od(),X=>{io(X,Yl,{name:l.name}),x(X)}),Qe(Ef(),X=>{io(X,Yl,{name:l.name}),x(X)})])]),eventOrder:{[Bd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:X=>X.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:m.shared.getSink,parts:{menu:Jb(0,0,"normal")},onExecute:(X,j,ne)=>{io(j,ag,{})},onItemExecute:(X,j,ne,le)=>{x(X),io(X,Yl,{name:l.name})}},O=ir.parts.field({...k,factory:GT}),A=l.label.map(X=>vp(X,w)),D=pr(((X,j,ne=X,le=X)=>vd(ne,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+X],attributes:{title:w.translate(le),"aria-live":"polite",...j.fold(()=>({}),me=>({id:me}))}},w.icons))("invalid",M.some(XT),"warning")),P=pr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),Z=g.getUrlPicker(l.filetype),te=Jt("browser.url.event"),oe=pr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[O,P.asSpec()],behaviours:Re([Ro.config({disabled:()=>!l.enabled||w.isDisabled()})])}),ae=pr(YT({name:l.name,icon:M.some("browse"),text:l.picker_text.or(l.label).getOr(""),enabled:l.enabled,primary:!1,buttonType:M.none(),borderless:!0},X=>Hn(X,te),w,[],["tox-browse-url"]));return ir.sketch({dom:YE([]),components:A.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:dn([[oe.asSpec()],Z.map(()=>ae.asSpec()).toArray()])}]),fieldBehaviours:Re([Ro.config({disabled:()=>!l.enabled||w.isDisabled(),onDisabled:X=>{ir.getField(X).each(Ro.disable),ae.getOpt(X).each(Ro.disable)},onEnabled:X=>{ir.getField(X).each(Ro.enable),ae.getOpt(X).each(Ro.enable)}}),Ua(),on("url-input-events",[Qe(te,X=>{bn.getCurrent(X).each(j=>{const ne=Ft.getValue(j),le={fieldname:l.name,...ne};Z.each(me=>{me(le).get(xe=>{Ft.setValue(j,xe),io(X,Yl,{name:l.name})})})})})])])})})(e,r,r.urlinput,a)),customeditor:aa(e=>{const r=Ur(),a=pr({dom:{tag:e.tag}}),l=Ur();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Re([on("custom-editor-events",[Br(m=>{a.getOpt(m).each(g=>{var f;(f=e,Fo(f,"init")?e.init(g.element.dom):w5.load(e.scriptId,e.scriptUrl).then(f=>f(g.element.dom,e.settings))).then(f=>{l.on(w=>{f.setValue(w)}),l.clear(),r.set(f)})})})]),Jl(M.none(),()=>r.get().fold(()=>l.get().getOr(""),m=>m.getValue()),(m,g)=>{r.get().fold(()=>l.set(g),f=>f.setValue(g))}),cg()]),components:[a.asSpec()]}}),htmlpanel:aa(e=>zi.sketch("presentation"===e.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Re([Es.config({}),Io.config({})])})),imagepreview:aa((e,r,a)=>((l,m)=>{const g=ho(m.getOr({url:""})),f=pr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:m.map(O=>({src:O.url})).getOr({})}}),w=pr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[f.asSpec()]}),x={};l.height.each(O=>x.height=O);const k=m.map(O=>({url:O.url,zoom:M.from(O.zoom),cachedWidth:M.from(O.cachedWidth),cachedHeight:M.from(O.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:x,attributes:{role:"presentation"}},components:[w.asSpec()],behaviours:Re([cg(),Jl(k,()=>g.get(),(O,A)=>{const D={url:A.url};A.zoom.each(Z=>D.zoom=Z),A.cachedWidth.each(Z=>D.cachedWidth=Z),A.cachedHeight.each(Z=>D.cachedHeight=Z),g.set(D);const P=()=>{const{cachedWidth:Z,cachedHeight:te,zoom:oe}=D;if(!kn(Z)&&!kn(te)){if(kn(oe)){const X=((j,ne,le)=>{const me=mr(j),xe=ds(j);return Math.min(me/ne,xe/le,1)})(O.element,Z,te);D.zoom=X}const ae=((X,j,ne,le,me)=>{const xe=ne*me,ze=le*me,ot=Math.max(0,X/2-xe/2),st=Math.max(0,j/2-ze/2);return{left:ot.toString()+"px",top:st.toString()+"px",width:xe.toString()+"px",height:ze.toString()+"px"}})(mr(O.element),ds(O.element),Z,te,D.zoom);w.getOpt(O).each(X=>{wt(X.element,ae)})}};f.getOpt(O).each(Z=>{const te=Z.element;var oe;A.url!==qr(te,"src")&&(No(te,"src",A.url),ms(O.element,"tox-imagepreview__loaded")),P(),(oe=te,new Promise((ae,X)=>{const j=()=>{le(),ae(oe)},ne=[Pi(oe,"load",j),Pi(oe,"error",()=>{le(),X("Unable to load data from image: "+oe.dom.src)})],le=()=>Qt(ne,me=>me.unbind());oe.dom.complete&&j()})).then(ae=>{O.getSystem().isConnected()&&(Gn(O.element,"tox-imagepreview__loaded"),D.cachedWidth=ae.dom.naturalWidth,D.cachedHeight=ae.dom.naturalHeight,P())})})})])}})(e,a)),table:aa((e,r)=>((a,l)=>{const m=w=>({dom:{tag:"td",innerHtml:l.translate(w)}});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(f=a.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:St(f,w=>({dom:{tag:"th",innerHtml:l.translate(w)}}))}]}),(g=a.cells,{dom:{tag:"tbody"},components:St(g,w=>({dom:{tag:"tr"},components:St(w,m)}))})],behaviours:Re([Es.config({}),Io.config({})])};var g,f})(e,r.shared.providers)),tree:aa((e,r)=>((a,l)=>{const m=a.onLeafAction.getOr(yt),g=a.onToggleExpand.getOr(yt),w=ho(a.defaultExpandedIds),x=ho(a.defaultSelectedId),k=Jt("tree-id"),O=(A,D)=>a.items.map(P=>"leaf"===P.type?ex({leaf:P,selectedId:A,onLeafAction:m,visible:!0,treeId:k,backstage:l}):Pv({directory:P,selectedId:A,onLeafAction:m,expandedIds:D,labelTabstopping:!0,treeId:k,backstage:l}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:O(x.get(),w.get()),behaviours:Re([Kt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),on(Fv,[Qe("expand-tree-node",(A,D)=>{const{expanded:P,node:Z}=D.event;w.set(P?[...w.get(),Z]:w.get().filter(te=>te!==Z)),g(w.get(),{expanded:P,node:Z})})]),il.config({channels:{[`update-active-item-${k}`]:{onReceive:(A,D)=>{x.set(M.some(D.value)),Ko.set(A,O(M.some(D.value),w.get()))}}}}),Ko.config({})])}})(e,r)),panel:aa((e,r)=>{return{dom:{tag:"div",classes:(a=e).classes},components:St(a.items,r.shared.interpreter)};var a})},QT={field:(e,r)=>r,record:ie([])},eO=(e,r,a,l)=>{const m=Zr(l,{shared:{interpreter:g=>sx(e,g,a,m)}});return sx(e,r,a,m)},sx=(e,r,a,l)=>jt(JT,r.type).fold(()=>(console.error(`Unknown factory type "${r.type}", defaulting to container: `,r),r),m=>m(e,r,a,l)),tO=(e,r,a)=>sx(QT,e,r,a),hg="layout-inset",ax=e=>e.x,_4=(e,r)=>e.x+e.width/2-r.width/2,ix=(e,r)=>e.x+e.width-r.width,lx=e=>e.y,cx=(e,r)=>e.y+e.height-r.height,E4=(e,r)=>e.y+e.height/2-r.height/2,dx=(e,r,a)=>Ya(ix(e,r),cx(e,r),a.insetSouthwest(),Qp(),"southwest",Xa(e,{right:0,bottom:3}),hg),ux=(e,r,a)=>Ya(ax(e),cx(e,r),a.insetSoutheast(),Fg(),"southeast",Xa(e,{left:1,bottom:3}),hg),Uv=(e,r,a)=>Ya(ix(e,r),lx(e),a.insetNorthwest(),qe(),"northwest",Xa(e,{right:0,top:2}),hg),jv=(e,r,a)=>Ya(ax(e),lx(e),a.insetNortheast(),Ud(),"northeast",Xa(e,{left:1,top:2}),hg),Xd=(e,r,a)=>Ya(_4(e,r),lx(e),a.insetNorth(),Lc(),"north",Xa(e,{top:2}),hg),u0=(e,r,a)=>Ya(_4(e,r),cx(e,r),a.insetSouth(),F0(),"south",Xa(e,{bottom:3}),hg),mx=(e,r,a)=>Ya(ix(e,r),E4(e,r),a.insetEast(),z0(),"east",Xa(e,{right:0}),hg),Wv=(e,r,a)=>Ya(ax(e),E4(e,r),a.insetWest(),V0(),"west",Xa(e,{left:1}),hg),oO=e=>{switch(e){case"north":return Xd;case"northeast":return jv;case"northwest":return Uv;case"south":return u0;case"southeast":return ux;case"southwest":return dx;case"east":return mx;case"west":return Wv}},nO=(e,r,a,l,m)=>ky(l).map(oO).getOr(Xd)(e,r,a,l,m),R5=e=>{switch(e){case"north":return u0;case"northeast":return ux;case"northwest":return dx;case"south":return Xd;case"southeast":return jv;case"southwest":return Uv;case"east":return Wv;case"west":return mx}},M5=(e,r,a,l,m)=>ky(l).map(R5).getOr(Xd)(e,r,a,l,m),sf={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},gx=(e,r,a)=>{const l={maxHeightFunction:Qu()};return()=>a()?{type:"node",root:bs(Wn(e())),node:M.from(e()),bubble:gc(12,12,sf),layouts:{onRtl:()=>[jv],onLtr:()=>[Uv]},overrides:l}:{type:"hotspot",hotspot:r(),bubble:gc(-12,12,sf),layouts:{onRtl:()=>[Va,Fs,ya],onLtr:()=>[Fs,Va,ya]},overrides:l}},rO=(e,r,a,l)=>{const m={maxHeightFunction:Qu()};return()=>l()?{type:"node",root:bs(Wn(r())),node:M.from(r()),bubble:gc(12,12,sf),layouts:{onRtl:()=>[Xd],onLtr:()=>[Xd]},overrides:m}:e?{type:"node",root:bs(Wn(r())),node:M.from(r()),bubble:gc(0,-Ga(r()),sf),layouts:{onRtl:()=>[mi],onLtr:()=>[mi]},overrides:m}:{type:"hotspot",hotspot:a(),bubble:gc(0,0,sf),layouts:{onRtl:()=>[mi],onLtr:()=>[mi]},overrides:m}},sO=(e,r,a)=>()=>a()?{type:"node",root:bs(Wn(e())),node:M.from(e()),layouts:{onRtl:()=>[Xd],onLtr:()=>[Xd]}}:{type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[ya],onLtr:()=>[ya]}},T4=(e,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const a=e.selection.getRng(),l=e.model.table.getSelectedCells();if(l.length>1){const g=l[l.length-1],f={firstCell:ue(l[0]),lastCell:ue(g)};return M.some(f)}return M.some(Gg.range(ue(a.startContainer),a.startOffset,ue(a.endContainer),a.endOffset))}}),D5=e=>r=>({type:"node",root:e(),node:r}),aO=(e,r,a,l)=>{const m=Fh(e),g=()=>ue(e.getBody()),f=()=>ue(e.getContentAreaContainer()),w=()=>m||!l();return{inlineDialog:gx(f,r,w),inlineBottomDialog:rO(e.inline,f,a,w),banner:sO(f,r,w),cursor:T4(e,g),node:D5(g)}},m0=e=>(r,a)=>{EE(e)(r,a)},iO=e=>()=>ek(e),B5=e=>r=>Kh(e,r),L5=e=>r=>kE(e,r),O4=e=>()=>Au(e),A4=e=>ws(e,"items"),N4=e=>ws(e,"format"),$v=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],px=e=>no(e,(r,a)=>{if(Fo(a,"items")){const l=px(a.items);return{customFormats:r.customFormats.concat(l.customFormats),formats:r.formats.concat([{title:a.title,items:l.formats}])}}if(Fo(a,"inline")||Fo(a,"block")||Fo(a,"selector")){const l=`custom-${Zo(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:l,format:a}]),formats:r.formats.concat([{title:a.title,format:l,icon:a.icon}])}}return{...r,formats:r.formats.concat(a)}},{customFormats:[],formats:[]}),lO=e=>y2(e).map(r=>{const a=((l,m)=>{const g=px(m),f=w=>{Qt(w,x=>{l.formatter.has(x.name)||l.formatter.register(x.name,x.format)})};return l.formatter?f(g.customFormats):l.on("init",()=>{f(g.customFormats)}),g.formats})(e,r);return w2(e)?$v.concat(a):a}).getOr($v),R4=(e,r,a)=>({...e,type:"formatter",isSelected:r(e.format),getStylePreview:a(e.format)}),M4=(e,r,a,l)=>{const m=g=>St(g,f=>A4(f)?(w=>{const x=m(w.items);return{...w,type:"submenu",getStyleItems:ie(x)}})(f):N4(f)?R4(f,a,l):(w=>{const x=Sr(w);return 1===x.length&&Do(x,"title")})(f)?{...f,type:"separator"}:(w=>{const x=Zo(w.name)?w.name:Jt(w.title),k=`custom-${x}`,O={...w,type:"formatter",format:k,isSelected:a(k),getStylePreview:l(k)};return e.formatter.register(x,O),O})(f));return m(r)},D4=Iu.trim,cO=e=>r=>{return!(!rt(a=r)||1!==a.nodeType||r.contentEditable!==e&&r.getAttribute("data-mce-contenteditable")!==e);var a},dO=cO("true"),uO=cO("false"),B4=(e,r,a,l,m)=>({type:e,title:r,url:a,level:l,attach:m}),L4=e=>e.innerText||e.textContent,I4=e=>{return(r=e)&&"A"===r.nodeName&&void 0!==(r.id||r.name)&&mO(e);var r},hx=e=>e&&/^(H[1-6])$/.test(e.nodeName),mO=e=>(r=>{let a=r;for(;a=a.parentNode;){const l=a.contentEditable;if(l&&"inherit"!==l)return dO(a)}return!1})(e)&&!uO(e),I5=e=>hx(e)&&mO(e),H5=e=>{var r;const a=(l=e).id?l.id:Jt("h");var l;return B4("header",null!==(r=L4(e))&&void 0!==r?r:"","#"+a,(l=>hx(l)?parseInt(l.nodeName.substr(1),10):0)(e),()=>{e.id=a})},P5=e=>{const r=e.id||e.name,a=L4(e);return B4("anchor",a||"#"+r,"#"+r,0,yt)},gO=e=>D4(e.title).length>0,fx=e=>{const r=St(Fi(ue(e),"h1,h2,h3,h4,h5,h6,a:not([href])"),m=>m.dom);return zt((a=r,St(zt(a,I5),H5)).concat((a=>St(zt(a,I4),P5))(r)),gO);var a},g0="tinymce-url-history",H4=e=>Zo(e)&&/^https?/.test(e),fg=e=>Ia(e)&&ga(e,r=>{return!(Or(a=r)&&a.length<=5&&ka(a,H4));var a}).isNone(),P4=()=>{const e=pp.getItem(g0);if(null===e)return{};let r;try{r=JSON.parse(e)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+g0+" was not valid JSON",a),{};throw a}return fg(r)?r:(console.log("Local storage "+g0+" was not valid format",r),{})},pO=e=>{const r=P4();return jt(r,e).getOr([])},F4=(e,r)=>{if(!H4(e))return;const a=P4(),l=jt(a,r).getOr([]),m=zt(l,g=>g!==e);a[r]=[e].concat(m).slice(0,5),(g=>{if(!fg(g))throw new Error("Bad format for history:\n"+JSON.stringify(g));pp.setItem(g0,JSON.stringify(g))})(a)},hO=e=>!!e,fO=e=>Zn(Iu.makeMap(e,/[, ]/),hO),bx=e=>M.from(nS(e)),V4=e=>M.from(e).filter(Zo).getOrUndefined(),ja=lC,Hu=Xn,F5=ie([Ie("shell",!1),Xe("makeItem"),Ie("setupItem",yt),_u("listBehaviours",[Ko])]),vO=It({name:"items",overrides:()=>({behaviours:Re([Ko.config({})])})}),V5=ie([vO]),yO=Si({name:ie("CustomList")(),configFields:F5(),partFields:V5(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[Ko.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:gs(e.listBehaviours,m.behaviours),apis:{setItems:(g,f)=>{var w;(w=g,e.shell?M.some(w):Jn(w,e,"items")).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},x=>{const k=Ko.contents(x),O=f.length,A=O-k.length,D=A>0?$(A,()=>e.makeItem()):[],P=k.slice(O);Qt(P,te=>Ko.remove(x,te)),Qt(D,te=>Ko.append(x,te));const Z=Ko.contents(x);Qt(Z,(te,oe)=>{e.setupItem(g,te,f[oe],oe)})})}}}},apis:{setItems:(e,r,a)=>{e.setItems(r,a)}}}),p0=ie([Xe("dom"),Ie("shell",!0),La("toolbarBehaviours",[Ko])]),wO=ie([It({name:"groups",overrides:()=>({behaviours:Re([Ko.config({})])})})]),Pu=Si({name:"Toolbar",configFields:p0(),partFields:wO(),factory:(e,r,a,l)=>{const m=e.shell?{behaviours:[Ko.config({})],components:[]}:{behaviours:[],components:r};return{uid:e.uid,dom:e.dom,components:m.components,behaviours:gs(e.toolbarBehaviours,m.behaviours),apis:{setGroups:(g,f)=>{var w;(w=g,e.shell?M.some(w):Jn(w,e,"groups")).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},x=>{Ko.set(x,f)})},refresh:yt},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)}}}),xO=yt,CO=Ke,z4=ie([]);var SO,h0=Object.freeze({__proto__:null,setup:xO,isDocked:CO,getBehaviours:z4});const Z4=e=>(os(rs(e,"position"),"fixed")?M.none():sn(e)).orThunk(()=>{const r=Ws("span");return xo(e).bind(a=>{Co(a,r);const l=sn(r);return tn(r),l})}),kO=e=>Z4(e).map(si).getOrThunk(()=>En(0,0)),z5=(e,r)=>{const a=e.element;Gn(a,r.transitionClass),ms(a,r.fadeOutClass),Gn(a,r.fadeInClass),r.onShow(e)},Z5=(e,r)=>{const a=e.element;Gn(a,r.transitionClass),ms(a,r.fadeInClass),Gn(a,r.fadeOutClass),r.onHide(e)},vx=(e,r)=>e.y>=r.y,U4=(e,r)=>e.bottom<=r.bottom,yx=(e,r,a)=>({location:"top",leftX:r,topY:a.bounds.y-e.y}),wx=(e,r,a)=>({location:"bottom",leftX:r,bottomY:e.bottom-a.bounds.bottom}),j4=e=>e.box.x-e.win.x,xx=(e,r,a)=>a.getInitialPos().map(l=>{const m=((g,f)=>{const w=f.optScrollEnv.fold(ie(g.bounds.y),x=>x.scrollElmTop+(g.bounds.y-x.currentScrollTop));return En(g.bounds.x,w)})(l,r);return{box:Gr(m.left,m.top,mr(e),ds(e)),location:l.location}}),_O=(e,r,a,l,m)=>{const g=((w,x)=>{const k=x.optScrollEnv.fold(ie(w.y),O=>w.y+O.currentScrollTop-O.scrollElmTop);return En(w.x,k)})(r,a),f=Gr(g.left,g.top,r.width,r.height);l.setInitialPos({style:tu(e),position:cs(e,"position")||"static",bounds:f,location:m.location})},EO=(e,r,a)=>a.getInitialPos().bind(l=>{var m;switch(a.clearInitialPos(),l.position){case"static":return M.some({morph:"static"});case"absolute":const g=Z4(e).getOr(Ri()),f=Ds(g),w=null!==(m=g.dom.scrollTop)&&void 0!==m?m:0;return M.some({morph:"absolute",positionCss:jl("absolute",jt(l.style,"left").map(x=>r.x-f.x),jt(l.style,"top").map(x=>r.y-f.y+w),jt(l.style,"right").map(x=>f.right-r.right),jt(l.style,"bottom").map(x=>f.bottom-r.bottom))});default:return M.none()}}),f0=e=>{switch(e.location){case"top":return M.some({morph:"fixed",positionCss:jl("fixed",M.some(e.leftX),M.some(e.topY),M.none(),M.none())});case"bottom":return M.some({morph:"fixed",positionCss:jl("fixed",M.some(e.leftX),M.none(),M.none(),M.some(e.bottomY))});default:return M.none()}},W4=(e,r,a)=>{a.setDocked(!1),Qt(["left","right","top","bottom","position"],l=>Yn(e.element,l)),r.onUndocked(e)},Cx=(e,r,a,l)=>{const m="fixed"===l.position;a.setDocked(m),G0(e.element,l),(m?r.onDocked:r.onUndocked)(e)},$4=(e,r,a,l,m=!1)=>{r.contextual.each(g=>{g.lazyContext(e).each(f=>{const w=(x=f).y<(k=l.bounds).bottom&&x.bottom>k.y;var x,k;w!==a.isVisible()&&(a.setVisible(w),m&&!w?(Ii(e.element,[g.fadeOutClass]),g.onHide(e)):(w?z5:Z5)(e,g))})})},q4=(e,r,a,l,m)=>{$4(e,r,a,l,!0),Cx(e,r,a,m.positionCss)},_p=(e,r,a)=>{e.getSystem().isConnected()&&((l,m,g)=>{const f=m.lazyViewport(l);$4(l,m,g,f),((e,r,a)=>{const l=e.element;return os(rs(l,"position"),"fixed")?(w=m=l,x=g=r,k=f=a,xx(w,x,k).filter(({box:O})=>{return A=k.getModes(),D=O,P=x,ka(A,Z=>{switch(Z){case"bottom":return U4(D,P.bounds);case"top":return vx(D,P.bounds)}});var A,D,P}).bind(({box:O})=>EO(w,O,k))).orThunk(()=>g.optScrollEnv.bind(w=>xx(m,g,f)).bind(({box:w,location:x})=>{const k=ys(),O=j4({win:k,box:w}),A="top"===x?yx(k,O,g):wx(k,O,g);return f0(A)})):((m,g,f)=>{const w=Ds(m),x=ys(),k=((O,A,D)=>{const P=A.win,Z=A.box,te=j4(A);return hs(O,oe=>{switch(oe){case"bottom":return U4(Z,D.bounds)?M.none():M.some(wx(P,te,D));case"top":return vx(Z,D.bounds)?M.none():M.some(yx(P,te,D));default:return M.none()}}).getOr({location:"no-dock"})})(f.getModes(),{win:x,box:w},g);return"top"===k.location||"bottom"===k.location?(_O(m,w,g,f,k),f0(k)):M.none()})(l,r,a);var m,g,f,w,x,k})(l,f,g).each(w=>{((x,k,O,A,D)=>{switch(D.morph){case"static":return W4(x,k,O);case"absolute":return Cx(x,k,O,D.positionCss);case"fixed":q4(x,k,O,A,D)}})(l,m,g,f,w)})})(e,r,a)},OO=(e,r,a)=>{a.isDocked()&&((l,m,g)=>{const f=l.element;g.setDocked(!1);const w=m.lazyViewport(l);((x,k,O)=>{const A=x.element;return xx(A,k,O).bind(({box:D})=>EO(A,D,O))})(l,w,g).each(x=>{switch(x.morph){case"static":W4(l,m,g);break;case"absolute":Cx(l,m,g,x.positionCss)}}),g.setVisible(!0),m.contextual.each(x=>{ks(f,[x.fadeInClass,x.fadeOutClass,x.transitionClass]),x.onShow(l)}),_p(l,m,g)})(e,r,a)},G4=e=>(r,a,l)=>{const m=a.lazyViewport(r);((g,f,w,x)=>{const k=Ds(g),O=ys(),A=x(O,j4({win:O,box:k}),f);return"bottom"===A.location||"top"===A.location?(D=g,P=k,Z=f,oe=A,(te=w).getInitialPos().fold(()=>_O(D,P,Z,te,oe),()=>yt),f0(A)):M.none();var D,P,Z,te,oe})(r.element,m,l,e).each(g=>{q4(r,a,l,m,g)})},AO=G4(yx),U5=G4(wx);var qv=Object.freeze({__proto__:null,refresh:_p,reset:OO,isDocked:(e,r,a)=>a.isDocked(),getModes:(e,r,a)=>a.getModes(),setModes:(e,r,a,l)=>a.setModes(l),forceDockToTop:AO,forceDockToBottom:U5}),NO=Object.freeze({__proto__:null,events:(e,r)=>Dr([hu(Sm(),(a,l)=>{e.contextual.each(m=>{Li(a.element,m.transitionClass)&&(ks(a.element,[m.transitionClass,m.fadeInClass]),(r.isVisible()?m.onShown:m.onHidden)(a)),l.stop()})}),Qe(Em(),(a,l)=>{_p(a,e,r)}),Qe(Of(),(a,l)=>{_p(a,e,r)}),Qe(Tm(),(a,l)=>{OO(a,e,r)})])}),j5=[el("contextual",[Ln("fadeInClass"),Ln("fadeOutClass"),Ln("transitionClass"),ba("lazyContext"),Rn("onShow"),Rn("onShown"),Rn("onHide"),Rn("onHidden")]),Bs("lazyViewport",()=>({bounds:ys(),optScrollEnv:M.none()})),zu("modes",["top","bottom"],vr),Rn("onDocked"),Rn("onUndocked")];const Js=Da({fields:j5,name:"docking",active:NO,apis:qv,state:Object.freeze({__proto__:null,init:e=>{const r=ho(!1),a=ho(!0),l=Ur(),m=ho(e.modes);return na({isDocked:r.get,setDocked:r.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:m.get,setModes:m.set,readState:()=>`docked:  ${r.get()}, visible: ${a.get()}, modes: ${m.get().join(",")}`})}})}),Sx=ie(Jt("toolbar-height-change")),Jd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},K4="tox-tinymce--toolbar-sticky-on",Y4="tox-tinymce--toolbar-sticky-off",bg=(e,r)=>Do(Js.getModes(e),r),b0=e=>{const r=e.element;eo(r).each(a=>{const l="padding-"+Js.getModes(e)[0];if(Js.isDocked(e)){const m=mr(a);Bo(r,"width",m+"px"),Bo(a,l,Ga(g=r)+(parseInt(cs(g,"margin-top"),10)||0)+(parseInt(cs(g,"margin-bottom"),10)||0)+"px")}else Yn(r,"width"),Yn(a,l);var g})},kx=(e,r)=>{r?(ms(e,Jd.fadeOutClass),Ii(e,[Jd.transitionClass,Jd.fadeInClass])):(ms(e,Jd.fadeInClass),Ii(e,[Jd.fadeOutClass,Jd.transitionClass]))},X4=(e,r)=>{const a=ue(e.getContainer());r?(Gn(a,K4),ms(a,Y4)):(Gn(a,Y4),ms(a,K4))},J4=(e,r)=>{const a=Ur(),l=r.getSink,m=w=>{l().each(x=>w(x.element))},g=w=>{e.inline||b0(w),X4(e,Js.isDocked(w)),w.getSystem().broadcastOn([Xg()],{}),l().each(x=>x.getSystem().broadcastOn([Xg()],{}))},f=e.inline?[]:[il.config({channels:{[Sx()]:{onReceive:b0}}})];return[Io.config({}),Js.config({contextual:{lazyContext:w=>{const x=Ga(w.element),k=e.inline?e.getContentAreaContainer():e.getContainer();return M.from(k).map(O=>{const A=Ds(ue(O));return fp(e,w.element).fold(()=>{const D=A.height-x,P=A.y+(bg(w,"top")?0:x);return Gr(A.x,P,A.width,D)},D=>{const P=sc(A,bp(D)),Z=bg(w,"top")?P.y:P.y+x;return Gr(P.x,Z,P.width,P.height-x)})})},onShow:()=>{m(w=>kx(w,!0))},onShown:w=>{m(x=>ks(x,[Jd.transitionClass,Jd.fadeInClass])),a.get().each(x=>{((k,O)=>{const A=Ve(O);Yi(A).filter(D=>!se(O,D)).filter(D=>se(D,ue(A.dom.body))||we(k,D)).each(()=>Ul(O))})(w.element,x),a.clear()})},onHide:w=>{var x,k;(x=w.element,k=l,Hc(x).orThunk(()=>k().toOptional().bind(O=>Hc(O.element)))).fold(a.clear,a.set),m(x=>kx(x,!1))},onHidden:()=>{m(w=>ks(w,[Jd.transitionClass]))},...Jd},lazyViewport:w=>fp(e,w.element).fold(()=>{const x=ys(),k=F_(e),O=x.y+(bg(w,"top")?k:0),A=x.height-(bg(w,"bottom")?k:0);return{bounds:Gr(x.x,O,x.width,A),optScrollEnv:M.none()}},x=>({bounds:bp(x),optScrollEnv:M.some({currentScrollTop:x.element.dom.scrollTop,scrollElmTop:si(x.element).top})})),modes:[r.header.getDockingMode()],onDocked:g,onUndocked:g}),...f]};var RO=Object.freeze({__proto__:null,setup:(e,r,a)=>{e.inline||(r.header.isPositionedAtTop()||e.on("ResizeEditor",()=>{a().each(Js.reset)}),e.on("ResizeWindow ResizeEditor",()=>{a().each(b0)}),e.on("SkinLoaded",()=>{a().each(l=>{Js.isDocked(l)?Js.reset(l):Js.refresh(l)})}),e.on("FullscreenStateChanged",()=>{a().each(Js.reset)})),e.on("AfterScrollIntoView",l=>{a().each(m=>{Js.refresh(m);const g=m.element;np(g)&&((f,w)=>{const x=Ve(w),k=Rt(w).dom.innerHeight,O=mn(x),A=ue(f.elm),D=Gs(A),P=ds(A),Z=D.y,te=Z+P,oe=si(w),ae=ds(w),X=oe.top,j=X+ae,ne=Math.abs(X-O.top)<2,le=Math.abs(j-(O.top+k))<2;ne&&Z<j?gn(O.left,Z-ae,x):le&&te>X&&gn(O.left,Z-k+P+ae,x)})(l,g)})}),e.on("PostRender",()=>{X4(e,!1)})},isDocked:e=>e().map(Js.isDocked).getOr(!1),getBehaviours:J4});const MO=Ct([sa,wi("items",so([Qo([RS,zl("items",vr)]),vr]))].concat(U1)),_x=[li("text"),li("tooltip"),li("icon"),Cl("search",!1,so([tr,Ct([li("placeholder")])],e=>ua(e)?e?M.some({placeholder:M.none()}):M.none():M.some(e))),ba("fetch"),Bs("onSetup",()=>yt)],Q4=Ct([sa,..._x]),e3=e=>is("menubutton",Q4,e),t3=Ct([sa,U2,ei,mp,ov,DS,lm,Qc("presets","normal",["normal","color","listpreview"]),rv(1),Z1,tv]);var Ex=ql({factory:(e,r)=>{const a={focus:Kt.focusIn,setMenus:(l,m)=>{const g=St(m,f=>{const x=e3({type:"menubutton",text:f.text,fetch:k=>{k(f.getItems())}}).mapError(k=>xl(k)).getOrDie();return pg(x,"tox-mbtn",r.backstage,M.some("menuitem"))});Ko.set(l,g)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Re([Ko.config({}),on("menubar-events",[Br(l=>{e.onSetup(l)}),Qe(uu(),(l,m)=>{Xr(l.element,".tox-mbtn--active").each(g=>{uc(m.event.target,".tox-mbtn").each(f=>{se(g,f)||l.getSystem().getByDom(g).each(w=>{l.getSystem().getByDom(f).each(x=>{Uc.expand(x),Uc.close(w),Io.focus(x)})})})})}),Qe(Om(),(l,m)=>{m.event.prevFocus.bind(g=>l.getSystem().getByDom(g).toOptional()).each(g=>{m.event.newFocus.bind(f=>l.getSystem().getByDom(f).toOptional()).each(f=>{Uc.isOpen(g)&&(Uc.expand(f),Uc.close(g))})})})]),Kt.config({mode:"flow",selector:".tox-mbtn",onEscape:l=>(e.onEscape(l),M.some(!0))}),Es.config({})]),apis:a,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Xe("dom"),Xe("uid"),Xe("onEscape"),Xe("backstage"),Ie("onSetup",yt)],apis:{focus:(e,r)=>{e.focus(r)},setMenus:(e,r,a)=>{e.setMenus(r,a)}}});const DO="container",Tx=[La("slotBehaviours",[])],o3=e=>"<alloy.field."+e+">",BO=(e,r)=>{const a=O=>Km(e),l=(O,A)=>(D,P)=>Jn(D,e,P).map(Z=>O(Z,P)).getOr(A),m=(O,A)=>"true"!==qr(O.element,"aria-hidden"),g=l(m,!1),f=l((O,A)=>{if(m(O)){const D=O.element;Bo(D,"display","none"),No(D,"aria-hidden","true"),io(O,Zp(),{name:A,visible:!1})}}),w=(O=>(A,D)=>{Qt(D,P=>O(A,P))})(f),x=l((O,A)=>{if(!m(O)){const D=O.element;Yn(D,"display"),Oo(D,"aria-hidden"),io(O,Zp(),{name:A,visible:!0})}}),k={getSlotNames:a,getSlot:(O,A)=>Jn(O,e,A),isShowing:g,hideSlot:f,hideAllSlots:O=>w(O,a()),showSlot:x};return{uid:e.uid,dom:e.dom,components:r,behaviours:_h(e.slotBehaviours),apis:k}},LO=Zn({getSlotNames:(e,r)=>e.getSlotNames(r),getSlot:(e,r,a)=>e.getSlot(r,a),isShowing:(e,r,a)=>e.isShowing(r,a),hideSlot:(e,r,a)=>e.hideSlot(r,a),hideAllSlots:(e,r)=>e.hideAllSlots(r),showSlot:(e,r,a)=>e.showSlot(r,a)},e=>Ma(e)),Ji={...LO,sketch:e=>{const r=(()=>{const g=[];return{slot:(f,w)=>(g.push(f),or(DO,o3(f),w)),record:ie(g)}})(),a=e(r),l=r.record(),m=St(l,g=>_t({name:g,pname:o3(g)}));return pb(DO,Tx,m,BO,a)}},IO=Ct([ei,U2,Bs("onShow",yt),Bs("onHide",yt),lm]),W5=e=>({element:()=>e.element.dom}),n3=(e,r)=>{const a=St(Sr(r),l=>{const g=lc(is("sidebar",IO,r[l]));return{name:l,getApi:W5,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return St(a,l=>{const m=ho(yt);return e.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:av([rg(l,m),gp(l,m),Qe(Zp(),(g,f)=>{const w=f.event;Ue(a,k=>k.name===w.name).each(k=>{(w.visible?k.onShow:k.onHide)(k.getApi(g))})})])})})},$5=e=>Ji.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:n3(r,e),slotBehaviours:av([Br(a=>Ji.hideAllSlots(a))])})),v0=(e,r)=>{No(e,"role",r)},HO=e=>bn.getCurrent(e).bind(r=>_i.isGrowing(r)||_i.hasGrown(r)?bn.getCurrent(r).bind(a=>Ue(Ji.getSlotNames(a),l=>Ji.isShowing(a,l))):M.none()),Ox=Jt("FixSizeEvent"),Gv=Jt("AutoSizeEvent");var PO=Object.freeze({__proto__:null,block:(e,r,a,l)=>{No(e.element,"aria-busy",!0);const m=r.getRoot(e).getOr(e),g=Re([Kt.config({mode:"special",onTab:()=>M.some(!0),onShiftTab:()=>M.some(!0)}),Io.config({})]),f=l(m,g),w=m.getSystem().build(f);Ko.append(m,Tl(w)),w.hasConfigured(Kt)&&r.focus&&Kt.focusIn(w),a.isBlocked()||r.onBlock(e),a.blockWith(()=>Ko.remove(m,w))},unblock:(e,r,a)=>{Oo(e.element,"aria-busy"),a.isBlocked()&&r.onUnblock(e),a.clear()},isBlocked:(e,r,a)=>a.isBlocked()}),r3=[Bs("getRoot",M.none),Na("focus",!0),Rn("onBlock"),Rn("onUnblock")];const Qd=Da({fields:r3,name:"blocking",apis:PO,state:Object.freeze({__proto__:null,init:()=>{const e=Su(r=>r.destroy());return na({readState:e.isSet,blockWith:r=>{e.set({destroy:r})},clear:e.clear,isBlocked:e.isSet})}})}),FO=e=>bn.getCurrent(e).each(r=>Ul(r.element,!0)),Ax=(e,r,a)=>({within:e,extra:r,withinWidth:a}),a3=(e,r,a)=>{const l=no(e,(f,w)=>((x,k)=>{const O=a(x);return M.some({element:x,start:k,finish:k+O,width:O})})(w,f.len).fold(ie(f),x=>({len:x.finish,list:f.list.concat([x])})),{len:0,list:[]}).list,m=zt(l,f=>f.finish<=r),g=Bn(m,(f,w)=>f+w.width,0);return{within:m,extra:l.slice(m.length),withinWidth:g}},Kv=e=>St(e,r=>r.element),VO=(e,r)=>{const a=St(r,l=>Tl(l));Pu.setGroups(e,a)},Ep=(e,r,a)=>{const l=r.builtGroups.get();if(0===l.length)return;const m=ra(e,r,"primary"),g=zs.getCoupled(e,"overflowGroup");Bo(m.element,"visibility","hidden");const f=l.concat([g]),w=hs(f,k=>Hc(k.element).bind(O=>k.getSystem().getByDom(O).toOptional()));a([]),VO(m,f);const x=((k,O,A,D)=>{const P=((ae,X,j)=>{const ne=a3(X,ae,j);return 0===ne.extra.length?M.some(ne):M.none()})(k,O,A).getOrThunk(()=>a3(O,k-A(D),A)),Z=P.within,te=P.extra,oe=P.withinWidth;return 1===te.length&&te[0].width<=A(D)?((ae,X,j)=>{const ne=Kv(ae.concat(X));return Ax(ne,[],j)})(Z,te,oe):te.length>=1?((ae,X,j,ne)=>{const le=Kv(ae).concat([j]);return Ax(le,Kv(X),ne)})(Z,te,D,oe):(j=oe,Ax(Kv(Z),[],j));var j})(mr(m.element),r.builtGroups.get(),k=>mr(k.element),g);0===x.extra.length?(Ko.remove(m,g),a([])):(VO(m,x.within),a(x.extra)),Yn(m.element,"visibility"),pl(m.element),w.each(Io.focus)},i3=ie([La("splitToolbarBehaviours",[zs]),qi("builtGroups",()=>ho([]))]),zO=ie([Yu(["overflowToggledClass"]),Hs("getOverflowBounds"),Xe("lazySink"),qi("overflowGroups",()=>ho([])),Rn("onOpened"),Rn("onClosed")].concat(i3())),q5=ie([_t({factory:Pu,schema:p0(),name:"primary"}),vt({schema:p0(),name:"overflow"}),vt({name:"overflow-button"}),vt({name:"overflow-group"})]),Nx=ie((e,r)=>{((a,l)=>{const m=Dl.max(a,l,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Bo(a,"max-width",m+"px")})(e,Math.floor(r))}),ZO=ie([Yu(["toggledClass"]),Xe("lazySink"),ba("fetch"),Hs("getBounds"),el("fireDismissalEventInstead",[Ie("event",Pd())]),cd(),Rn("onToggled")]),G5=ie([vt({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Re([vn.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])})}),vt({factory:Pu,schema:p0(),name:"toolbar",overrides:e=>({toolbarBehaviours:Re([Kt.config({mode:"cyclic",onEscape:r=>(Jn(r,e,"button").each(Io.focus),M.none())})])})})]),Tp=Ur(),l3=(e,r)=>{const a=zs.getCoupled(e,"toolbarSandbox");Pn.isOpen(a)?Pn.close(a):Pn.open(a,r.toolbar())},Yv=(e,r,a,l)=>{const m=a.getBounds.map(f=>f()),g=a.lazySink(e).getOrDie();gi.positionWithinBounds(g,r,{anchor:{type:"hotspot",hotspot:e,layouts:l,overrides:{maxWidthFunction:Nx()}}},m)},UO=(e,r,a,l,m)=>{Pu.setGroups(r,m),Yv(e,r,a,l),vn.on(e)},Op=Si({name:"FloatingToolbarButton",factory:(e,r,a,l)=>({...pi.sketch({...l.button(),action:m=>{l3(m,l)},buttonBehaviours:Gm({dump:l.button().buttonBehaviours},[zs.config({others:{toolbarSandbox:m=>((g,f,w)=>{const x=yu();return{dom:{tag:"div",attributes:{id:x.id}},behaviours:Re([Kt.config({mode:"special",onEscape:k=>(Pn.close(k),M.some(!0))}),Pn.config({onOpen:(k,O)=>{const A=Tp.get().getOr(!1);w.fetch().get(D=>{UO(g,O,w,f.layouts,D),x.link(g.element),A||Kt.focusIn(O)})},onClose:()=>{vn.off(g),Tp.get().getOr(!1)||Io.focus(g),x.unlink(g.element)},isPartOf:(k,O,A)=>Ys(O,A)||Ys(g,A),getAttachPoint:()=>w.lazySink(g).getOrDie()}),il.config({channels:{...Wm({isExtraPart:Ke,...w.fireDismissalEventInstead.map(k=>({fireEventInstead:{event:k.event}})).getOr({})}),...xh({doReposition:()=>{Pn.getState(zs.getCoupled(g,"toolbarSandbox")).each(k=>{Yv(g,k,w,f.layouts)})}})}})])}})(m,a,e)}})])}),apis:{setGroups:(m,g)=>{Pn.getState(zs.getCoupled(m,"toolbarSandbox")).each(f=>{UO(m,f,e,a.layouts,g)})},reposition:m=>{Pn.getState(zs.getCoupled(m,"toolbarSandbox")).each(g=>{Yv(m,g,e,a.layouts)})},toggle:m=>{l3(m,l)},toggleWithoutFocusing:m=>{var g,f;g=m,f=l,Tp.set(!0),l3(g,f),Tp.clear()},getToolbar:m=>Pn.getState(zs.getCoupled(m,"toolbarSandbox")),isOpen:m=>Pn.isOpen(zs.getCoupled(m,"toolbarSandbox"))}}),configFields:ZO(),partFields:G5(),apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggleWithoutFocusing(r)},getToolbar:(e,r)=>e.getToolbar(r),isOpen:(e,r)=>e.isOpen(r)}}),K5=ie([Xe("items"),Yu(["itemSelector"]),La("tgroupBehaviours",[Kt])]),Y5=ie([Eo({name:"items",unit:"item"})]),Rx=Si({name:"ToolbarGroup",configFields:K5(),partFields:Y5(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.tgroupBehaviours,[Kt.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),Xv=e=>St(e,r=>Tl(r)),jO=(e,r,a)=>{Ep(e,a,l=>{a.overflowGroups.set(l),r.getOpt(e).each(m=>{Op.setGroups(m,Xv(l))})})},WO=Si({name:"SplitFloatingToolbar",configFields:zO(),partFields:q5(),factory:(e,r,a,l)=>{const m=pr(Op.sketch({fetch:()=>um(g=>{g(Xv(e.overflowGroups.get()))}),layouts:{onLtr:()=>[Fs,Va],onRtl:()=>[Va,Fs],onBottomLtr:()=>[Tr,ui],onBottomRtl:()=>[ui,Tr]},getBounds:a.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,f)=>e[f?"onOpened":"onClosed"](g)}));return{uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.splitToolbarBehaviours,[zs.config({others:{overflowGroup:()=>Rx.sketch({...l["overflow-group"](),items:[m.asSpec()]})}})]),apis:{setGroups:(g,f)=>{e.builtGroups.set(St(f,g.getSystem().build)),jO(g,m,e)},refresh:g=>jO(g,m,e),toggle:g=>{m.getOpt(g).each(f=>{Op.toggle(f)})},toggleWithoutFocusing:g=>{m.getOpt(g).each(Op.toggleWithoutFocusing)},isOpen:g=>m.getOpt(g).map(Op.isOpen).getOr(!1),reposition:g=>{m.getOpt(g).each(f=>{Op.reposition(f)})},getOverflow:g=>m.getOpt(g).bind(Op.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},reposition:(e,r)=>{e.reposition(r)},toggle:(e,r)=>{e.toggle(r)},toggleWithoutFocusing:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r),getOverflow:(e,r)=>e.getOverflow(r)}}),$O=ie([Yu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Rn("onOpened"),Rn("onClosed")].concat(i3())),X5=ie([_t({factory:Pu,schema:p0(),name:"primary"}),_t({factory:Pu,schema:p0(),name:"overflow",overrides:e=>({toolbarBehaviours:Re([_i.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:r=>{Jn(r,e,"overflow-button").each(a=>{vn.off(a),Io.focus(a)}),e.onClosed(r)},onGrown:r=>{Kt.focusIn(r),e.onOpened(r)},onStartGrow:r=>{Jn(r,e,"overflow-button").each(vn.on)}}),Kt.config({mode:"acyclic",onEscape:r=>(Jn(r,e,"overflow-button").each(Io.focus),M.some(!0))})])})}),vt({name:"overflow-button",overrides:e=>({buttonBehaviours:Re([vn.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),vt({name:"overflow-group"})]),qO=(e,r)=>{Jn(e,r,"overflow-button").bind(()=>Jn(e,r,"overflow")).each(a=>{c3(e,r),_i.toggleGrow(a)})},c3=(e,r)=>{Jn(e,r,"overflow").each(a=>{Ep(e,r,l=>{const m=St(l,g=>Tl(g));Pu.setGroups(a,m)}),Jn(e,r,"overflow-button").each(l=>{_i.hasGrown(a)&&vn.on(l)}),_i.refresh(a)})},Jv=Si({name:"SplitSlidingToolbar",configFields:$O(),partFields:X5(),factory:(e,r,a,l)=>{const m="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:r,behaviours:gs(e.splitToolbarBehaviours,[zs.config({others:{overflowGroup:g=>Rx.sketch({...l["overflow-group"](),items:[pi.sketch({...l["overflow-button"](),action:f=>{Hn(g,m)}})]})}}),on("toolbar-toggle-events",[Qe(m,g=>{qO(g,e)})])]),apis:{setGroups:(g,f)=>{((w,x)=>{const k=St(x,w.getSystem().build);e.builtGroups.set(k)})(g,f),c3(g,e)},refresh:g=>c3(g,e),toggle:g=>qO(g,e),isOpen:g=>Jn(g,e,"overflow").map(_i.hasGrown).getOr(!1)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,r,a)=>{e.setGroups(r,a)},refresh:(e,r)=>{e.refresh(r)},toggle:(e,r)=>{e.toggle(r)},isOpen:(e,r)=>e.isOpen(r)}}),d3=e=>({dom:{tag:"div",classes:["tox-toolbar__group"],...e.title.fold(()=>({}),a=>({attributes:{title:a}}))},components:[Rx.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Re([Es.config({}),Io.config({})])}),Mx=e=>Rx.sketch(d3(e)),u3=(e,r)=>{const a=Br(l=>{const m=St(e.initGroups,Mx);Pu.setGroups(l,m)});return Re([X2(e.providers.isDisabled),Ua(),Kt.config({mode:r,onEscape:e.onEscape,selector:".tox-toolbar__group"}),on("toolbar-events",[a])])},GO=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":d3({title:M.none(),items:[]}),"overflow-button":E5({name:"more",icon:M.some("more-drawer"),enabled:!0,tooltip:M.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:M.none(),borderless:!1},M.none(),e.providers)},splitToolbarBehaviours:u3(e,r)}},J5=e=>{const r=GO(e),a=WO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return WO.sketch({...r,lazySink:e.getSink,getOverflowBounds:()=>{const l=e.moreDrawerData.lazyHeader().element,m=Gs(l),g=lt(l),f=Gs(g),w=Math.max(g.dom.scrollHeight,f.height);return Gr(m.x+4,f.y,m.width-8,w)},parts:{...r.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}},components:[a],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:l=>e.onToggled(l,!0),onClosed:l=>e.onToggled(l,!1)})},KO=e=>{const r=Jv.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=Jv.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=GO(e);return Jv.sketch({...l,components:[r,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:m=>{m.getSystem().broadcastOn([Sx()],{type:"opened"}),e.onToggled(m,!0)},onClosed:m=>{m.getSystem().broadcastOn([Sx()],{type:"closed"}),e.onToggled(m,!1)}})},Dx=e=>{const r=e.cyclicKeying?"cyclic":"acyclic";return Pu.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===zc.scrolling?["tox-toolbar--scrolling"]:[])},components:[Pu.parts.groups({})],toolbarBehaviours:u3(e,r)})},Ap=[mp,ei,li("tooltip"),Qc("buttonType","secondary",["primary","secondary"]),Na("borderless",!1),ba("onAction")],Bx={button:[...Ap,Qa,cc("type",["button"])],togglebutton:[...Ap,Na("active",!1),cc("type",["togglebutton"])]},Lx=[cc("type",["group"]),zu("buttons",[],Qi("type",Bx))],af=Qi("type",{...Bx,group:Lx}),YO=Ct([zu("buttons",[],af),ba("onShow"),ba("onHide")]),XO=(e,r)=>((a,l)=>{var m,g;const f="togglebutton"===a.type,w=a.icon.map(X=>ug(X,l.icons)).map(pr),x={...a,name:f?a.text.getOr(a.icon.getOr("")):null!==(m=a.text)&&void 0!==m?m:a.icon.getOr(""),primary:"primary"===a.buttonType,buttonType:M.from(a.buttonType),tooltip:a.tooltip,icon:a.icon,enabled:!0,borderless:a.borderless},k=ox(null!==(g=a.buttonType)&&void 0!==g?g:"secondary"),O=f?a.text.map(l.translate):M.some(l.translate(a.text)),A=O.map(Yr),D=x.tooltip.or(O).map(X=>({"aria-label":l.translate(X),title:l.translate(X)})).getOr({}),P=w.map(X=>X.asSpec()),Z=G1([P,A]),te=a.icon.isSome()&&A.isSome(),oe={tag:"button",classes:k.concat(...a.icon.isSome()&&!te?["tox-button--icon"]:[]).concat(...te?["tox-button--icon-and-text"]:[]).concat(...a.borderless?["tox-button--naked"]:[]).concat(..."togglebutton"===a.type&&a.active?["tox-button--enabled"]:[]),attributes:D},ae=tx(x,M.some(X=>{const j=ne=>{w.map(le=>le.getOpt(X).each(me=>{Ko.set(me,[ug(ne,l.icons)])}))};return f?a.onAction({setIcon:j,setActive:ne=>{const le=X.element;ne?(Gn(le,"tox-button--enabled"),No(le,"aria-pressed",!0)):(ms(le,"tox-button--enabled"),Oo(le,"aria-pressed"))},isActive:()=>Li(X.element,"tox-button--enabled")}):"button"===a.type?a.onAction({setIcon:j}):void 0}),[],oe,Z,l);return pi.sketch(ae)})(e,r),JO=he().deviceType,m3=JO.isPhone(),Qv=JO.isTablet();var Np=Si({name:"silver.View",configFields:[Xe("viewConfig")],partFields:[It({factory:{sketch:e=>{let r=!1;const a=St(e.buttons,l=>{return"group"===l.type?(r=!0,g=e.providers,{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:St(l.buttons,f=>XO(f,g))}):XO(l,e.providers);var g});return{uid:e.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...m3||Qv?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Re([Io.config({}),Kt.config({mode:"flow",selector:"button, .tox-button",focusInside:op.OnEnterOrSpaceMode})]),components:r?a:[zi.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),zi.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}}},schema:[Xe("buttons"),Xe("providers")],name:"header"}),It({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}})},schema:[],name:"pane"})],factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,apis:{getPane:g=>ja.getPart(g,e,"pane"),getOnShow:g=>e.viewConfig.onShow,getOnHide:g=>e.viewConfig.onHide}}),apis:{getPane:(e,r)=>e.getPane(r),getOnShow:(e,r)=>e.getOnShow(r),getOnHide:(e,r)=>e.getOnHide(r)}});const Ix=(e,r,a)=>Po(r,(l,m)=>{const g=lc(is("view",YO,l));return e.slot(m,Np.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[Np.parts.header({buttons:g.buttons,providers:a})]:[],Np.parts.pane({})]}))}),lf=(e,r)=>Ji.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:Ix(a,e,r),slotBehaviours:av([Br(l=>Ji.hideAllSlots(l))])})),ey=e=>Ue(Ji.getSlotNames(e),r=>Ji.isShowing(e,r)),g3=(e,r,a)=>{Ji.getSlot(e,r).each(l=>{Np.getPane(l).each(m=>{a(l)({getContainer:ie(m.element.dom)})})})};var ty=ql({factory:(e,r)=>{const a={setViews:(l,m)=>{Ko.set(l,[lf(m,r.backstage.shared.providers)])},whichView:l=>bn.getCurrent(l).bind(ey),toggleView:(l,m,g,f)=>bn.getCurrent(l).exists(w=>{const x=ey(w),k=x.exists(A=>f===A),O=Ji.getSlot(w,f).isSome();return O&&(Ji.hideAllSlots(w),k?((A=>{const D=A.element;Bo(D,"display","none"),No(D,"aria-hidden","true")})(l),m()):(g(),(A=>{const D=A.element;Yn(D,"display"),Oo(D,"aria-hidden")})(l),Ji.showSlot(w,f),g3(w,f,Np.getOnShow)),x.each(A=>g3(w,A,Np.getOnHide))),O})};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Re([Ko.config({}),bn.config({find:l=>{const m=Ko.contents(l);return Ar(m)}})]),apis:a}},name:"silver.ViewWrapper",configFields:[Xe("backstage")],apis:{setViews:(e,r,a)=>e.setViews(r,a),toggleView:(e,r,a,l,m)=>e.toggleView(r,a,l,m),whichView:(e,r)=>e.whichView(r)}});const QO=Hu.optional({factory:Ex,name:"menubar",schema:[Xe("backstage")]}),Q5=Hu.optional({factory:{sketch:e=>yO.sketch({uid:e.uid,dom:e.dom,listBehaviours:Re([Kt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Dx({type:e.type,uid:Jt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),M.some(!0))}),setupItem:(r,a,l,m)=>{Pu.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Xe("dom"),Xe("onEscape")]}),eA=Hu.optional({factory:{sketch:e=>{return((a=e).type===zc.sliding?KO:a.type===zc.floating?J5:Dx)({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),M.some(!0)),onToggled:(a,l)=>e.onToolbarToggled(l),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes});var a}},name:"toolbar",schema:[Xe("dom"),Xe("onEscape"),Xe("getSink")]}),tA=Hu.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:e.components,behaviours:Re((e.sticky?J4:z4)(e.editor,e.sharedBackstage))})},name:"header",schema:[Xe("dom")]}),p3=Hu.optional({factory:{sketch:e=>({uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]})},name:"promotion",schema:[Xe("dom")]}),eN=Hu.optional({name:"socket",schema:[Xe("dom")]}),oA=Hu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Re([Es.config({}),Io.config({}),_i.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{bn.getCurrent(r).each(Ji.hideAllSlots),Hn(r,Gv)},onGrown:r=>{Hn(r,Gv)},onStartGrow:r=>{io(r,Ox,{width:rs(r.element,"width").getOr("")})},onStartShrink:r=>{io(r,Ox,{width:mr(r.element)+"px"})}}),Ko.config({}),bn.config({find:r=>{const a=Ko.contents(r);return Ar(a)}})])}],behaviours:Re([zw(0),on("sidebar-sliding-events",[Qe(Ox,(r,a)=>{Bo(r.element,"width",a.event.width)}),Qe(Gv,(r,a)=>{Yn(r.element,"width")})])])})},name:"sidebar",schema:[Xe("dom")]}),h3=Hu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Re([Ko.config({}),Qd.config({focus:!1}),bn.config({find:r=>Ar(r.components())})]),components:[]})},name:"throbber",schema:[Xe("dom")]}),f3=Hu.optional({factory:ty,name:"viewWrapper",schema:[Xe("backstage")]}),tN=Hu.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components})},name:"editorContainer",schema:[]});var Hr=Si({name:"OuterContainer",factory:(e,r,a)=>{let l=!1;const m={getSocket:g=>ja.getPart(g,e,"socket"),setSidebar:(g,f,w)=>{ja.getPart(g,e,"sidebar").each(x=>{return O=f,A=w,void bn.getCurrent(k=x).each(D=>{Ko.set(D,[$5(O)]);const P=A?.toLowerCase();Zo(P)&&Fo(O,P)&&bn.getCurrent(D).each(Z=>{Ji.showSlot(Z,P),_i.immediateGrow(D),Yn(D.element,"width"),v0(k.element,"region")})});var k,O,A})},toggleSidebar:(g,f)=>{ja.getPart(g,e,"sidebar").each(w=>{return k=f,void bn.getCurrent(x=w).each(O=>{bn.getCurrent(O).each(A=>{_i.hasGrown(O)?Ji.isShowing(A,k)?(_i.shrink(O),v0(x.element,"presentation")):(Ji.hideAllSlots(A),Ji.showSlot(A,k),v0(x.element,"region")):(Ji.hideAllSlots(A),Ji.showSlot(A,k),_i.grow(O),v0(x.element,"region"))})});var x,k})},whichSidebar:g=>ja.getPart(g,e,"sidebar").bind(HO).getOrNull(),getHeader:g=>ja.getPart(g,e,"header"),getToolbar:g=>ja.getPart(g,e,"toolbar"),setToolbar:(g,f)=>{ja.getPart(g,e,"toolbar").each(w=>{const x=St(f,Mx);w.getApis().setGroups(w,x)})},setToolbars:(g,f)=>{ja.getPart(g,e,"multiple-toolbar").each(w=>{const x=St(f,k=>St(k,Mx));yO.setItems(w,x)})},refreshToolbar:g=>{ja.getPart(g,e,"toolbar").each(f=>f.getApis().refresh(f))},toggleToolbarDrawer:g=>{ja.getPart(g,e,"toolbar").each(f=>{wo(f.getApis().toggle,w=>w(f))})},toggleToolbarDrawerWithoutFocusing:g=>{ja.getPart(g,e,"toolbar").each(f=>{wo(f.getApis().toggleWithoutFocusing,w=>w(f))})},isToolbarDrawerToggled:g=>ja.getPart(g,e,"toolbar").bind(f=>M.from(f.getApis().isOpen).map(w=>w(f))).getOr(!1),getThrobber:g=>ja.getPart(g,e,"throbber"),focusToolbar:g=>{ja.getPart(g,e,"toolbar").orThunk(()=>ja.getPart(g,e,"multiple-toolbar")).each(f=>{Kt.focusIn(f)})},setMenubar:(g,f)=>{ja.getPart(g,e,"menubar").each(w=>{Ex.setMenus(w,f)})},focusMenubar:g=>{ja.getPart(g,e,"menubar").each(f=>{Ex.focus(f)})},setViews:(g,f)=>{ja.getPart(g,e,"viewWrapper").each(w=>{ty.setViews(w,f)})},toggleView:(g,f)=>ja.getPart(g,e,"viewWrapper").exists(w=>ty.toggleView(w,()=>m.showMainView(g),()=>m.hideMainView(g),f)),whichView:g=>ja.getPart(g,e,"viewWrapper").bind(ty.whichView).getOrNull(),hideMainView:g=>{l=m.isToolbarDrawerToggled(g),l&&m.toggleToolbarDrawer(g),ja.getPart(g,e,"editorContainer").each(f=>{const w=f.element;Bo(w,"display","none"),No(w,"aria-hidden","true")})},showMainView:g=>{l&&m.toggleToolbarDrawer(g),ja.getPart(g,e,"editorContainer").each(f=>{const w=f.element;Yn(w,"display"),Oo(w,"aria-hidden")})}};return{uid:e.uid,dom:e.dom,components:r,apis:m,behaviours:e.behaviours}},configFields:[Xe("dom"),Xe("behaviours")],partFields:[tA,QO,eA,Q5,eN,oA,p3,h3,f3,tN],apis:{getSocket:(e,r)=>e.getSocket(r),setSidebar:(e,r,a,l)=>{e.setSidebar(r,a,l)},toggleSidebar:(e,r,a)=>{e.toggleSidebar(r,a)},whichSidebar:(e,r)=>e.whichSidebar(r),getHeader:(e,r)=>e.getHeader(r),getToolbar:(e,r)=>e.getToolbar(r),setToolbar:(e,r,a)=>{e.setToolbar(r,a)},setToolbars:(e,r,a)=>{e.setToolbars(r,a)},refreshToolbar:(e,r)=>e.refreshToolbar(r),toggleToolbarDrawer:(e,r)=>{e.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(e,r)=>{e.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(e,r)=>e.isToolbarDrawerToggled(r),getThrobber:(e,r)=>e.getThrobber(r),setMenubar:(e,r,a)=>{e.setMenubar(r,a)},focusMenubar:(e,r)=>{e.focusMenubar(r)},focusToolbar:(e,r)=>{e.focusToolbar(r)},setViews:(e,r,a)=>{e.setViews(r,a)},toggleView:(e,r,a)=>e.toggleView(r,a),whichView:(e,r)=>e.whichView(r)}});const nA={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Hx=e=>e.split(" "),rA=(e,r)=>{const a={...nA,...r.menus},l=Sr(r.menus).length>0,m=Hx(void 0===r.menubar||!0===r.menubar?"file edit view insert format tools table help":!1===r.menubar?"":r.menubar),g=zt(m,w=>{const x=Fo(nA,w);return l?x||jt(r.menus,w).exists(k=>Fo(k,"items")):x}),f=St(g,w=>{const x=a[w];return((k,O,A)=>{const D=P_(A).split(/[ ,]/);return{text:k.title,getItems:()=>Vt(k.items,P=>{const Z=P.toLowerCase();return 0===Z.trim().length||zn(D,te=>te===Z)?[]:"separator"===Z||"|"===Z?[{type:"separator"}]:O.menuItems[Z]?[O.menuItems[Z]]:[]})}})({title:x.title,items:Hx(x.items)},r,e)});return zt(f,w=>w.getItems().length>0&&zn(w.getItems(),x=>Zo(x)||"separator"!==x.type))},Rp=(e,r,a)=>(e.on("remove",()=>a.unload(r)),a.load(r)),Px=(e,r,a,l)=>(e.on("remove",()=>l.unloadRawCss(r)),l.loadRawCss(r,a)),oN=async(e,r)=>{const a="ui/"+dp(e).getOr("default")+"/skin.css",l=tinymce.Resource.get(a);return Zo(l)?Promise.resolve(Px(e,a,l,e.ui.styleSheetLoader)):Rp(e,r+"/skin.min.css",e.ui.styleSheetLoader)},Fx=async(e,r)=>{var a;if(a=ue(e.getElement()),ur(a).isSome()){const l="ui/"+dp(e).getOr("default")+"/skin.shadowdom.css",m=tinymce.Resource.get(l);return Zo(m)?(Px(e,l,m,lp.DOM.styleSheetLoader),Promise.resolve()):Rp(e,r+"/skin.shadowdom.min.css",lp.DOM.styleSheetLoader)}},cf=(e,r)=>(async(a,l)=>{dp(l).fold(()=>{const g=qb(l);g&&l.contentCSS.push(g+(a?"/content.inline":"/content")+".min.css")},g=>{const f="ui/"+g+(a?"/content.inline":"/content")+".css",w=tinymce.Resource.get(f);if(Zo(w))Px(l,f,w,l.ui.styleSheetLoader);else{const x=qb(l);x&&l.contentCSS.push(x+(a?"/content.inline":"/content")+".min.css")}});const m=qb(l);if(!B2(l)&&Zo(m))return Promise.all([oN(l,m),Fx(l,m)]).then()})(e,r).then((a=>{const l=()=>{a._skinLoaded=!0,a.dispatch("SkinLoaded")};return()=>{a.initialized?l():a.on("init",l)}})(r),(a=>()=>{a.dispatch("SkinLoadError",{message:"Skin could not be loaded"})})(r)),Vx=hr(cf,!1),zx=hr(cf,!0),df=(e,r,a)=>e.translate([r,e.translate(a)]),Ql=(e,r)=>{const a=(g,f,w,x)=>{const k=e.shared.providers.translate(g.title);if("separator"===g.type)return M.some({type:"separator",text:k});if("submenu"===g.type){const O=Vt(g.getStyleItems(),A=>l(A,f,x));return 0===f&&O.length<=0?M.none():M.some({type:"nestedmenuitem",text:k,enabled:O.length>0,getSubmenuItems:()=>Vt(g.getStyleItems(),A=>l(A,f,x))})}return M.some({type:"togglemenuitem",text:k,icon:g.icon,active:g.isSelected(x),enabled:!w,onAction:r.onAction(g),...g.getStylePreview().fold(()=>({}),O=>({meta:{style:O}}))})},l=(g,f,w)=>{const x="formatter"===g.type&&r.isInvalid(g);return 0===f?x?[]:a(g,f,!1,w).toArray():a(g,f,x,w).toArray()},m=g=>{const f=r.getCurrentValue(),w=r.shouldHide?0:1;return Vt(g,x=>l(x,w,f))};return{validateItems:m,getFetch:(g,f)=>(w,x)=>{const k=f(),O=m(k);x(a0(O,Nu.CLOSE_ON_EXECUTE,g,{isHorizontalMenu:!1,search:M.none()}))}}},vg=(e,r,a)=>{const l=a.dataset,m="basic"===l.type?()=>St(l.data,g=>R4(g,a.isSelectedFor,a.getPreviewFor)):l.getData;return{items:Ql(r,a),getStyleItems:m}},y0=(e,r,a,l,m)=>{const{items:g,getStyleItems:f}=vg(0,r,a);return n4({text:a.icon.isSome()?M.none():a.text,icon:a.icon,tooltip:M.from(a.tooltip),role:M.none(),fetch:g.getFetch(r,f),onSetup:w=>{const x=k=>w.setTooltip(df(e,l,k.value));return e.on(m,x),iw(dm(e,"NodeChange",k=>{const O=k.getComponent();a.updateText(O),Ro.set(k.getComponent(),!e.selection.isEditable())})(w),()=>e.off(m,x))},getApi:w=>({getComponent:ie(w),setTooltip:x=>{const k=r.shared.providers.translate(x);Ta(w.element,{"aria-label":k,title:k})}}),columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)};var uf;!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(uf||(uf={}));const b3=(e,r,a)=>{var g,m;return{type:"basic",data:(g=e.options.get(r),m=a===uf.SemiColon?g.replace(/;$/,"").split(";"):g.split(" "),St(m,g=>{let f=g,w=g;const x=g.split("=");return x.length>1&&(f=x[0],w=x[1]),{title:f,format:w}}))}},yg="Alignment {0}",Zx=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],mf=e=>{const r={type:"basic",data:Zx};return{tooltip:df(e,yg,"left"),text:M.none(),icon:M.some("align-left"),isSelectedFor:a=>()=>e.formatter.match(a),getCurrentValue:M.none,getPreviewFor:a=>M.none,onAction:a=>()=>Ue(Zx,l=>l.format===a.format).each(l=>e.execCommand(l.command)),updateText:a=>{const l=Ue(Zx,m=>e.formatter.match(m.format)).fold(ie("left"),m=>m.title.toLowerCase());io(a,mg,{icon:`align-${l}`}),e.dispatch("AlignTextUpdate",{value:l})},dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},oy=(e,r)=>{const a=r(),l=St(a,m=>m.format);return M.from(e.formatter.closest(l)).bind(m=>Ue(a,g=>g.format===m)).orThunk(()=>ns(e.formatter.match("p"),{title:"Paragraph",format:"p"}))},v3="Block {0}",Mp="Paragraph",aA=e=>{const r=b3(e,"block_formats",uf.SemiColon);return{tooltip:df(e,v3,Mp),text:M.some(Mp),icon:M.none(),isSelectedFor:a=>()=>e.formatter.match(a),getCurrentValue:M.none,getPreviewFor:a=>()=>{const l=e.formatter.get(a);return l?M.some({tag:l.length>0&&(l[0].inline||l[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(a))}):M.none()},onAction:Wh(e),updateText:a=>{const l=oy(e,()=>r.data).fold(ie(Mp),m=>m.title);io(a,yc,{text:l}),e.dispatch("BlocksTextUpdate",{value:l})},dataset:r,shouldHide:!1,isInvalid:a=>!e.formatter.canApply(a.format)}},iA="Font {0}",gf="System Font",nN=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],y3=e=>{const r=e.split(/\s*,\s*/);return St(r,a=>a.replace(/^['"]+|['"]+$/g,""))},t=(e,r)=>r.length>0&&ka(r,a=>e.indexOf(a.toLowerCase())>-1),o=e=>{const r=()=>{const l=k=>k?y3(k)[0]:"",m=e.queryCommandValue("FontName"),g=a.data,f=m?m.toLowerCase():"",w=V_(e);return{matchOpt:Ue(g,k=>{const O=k.format;return O.toLowerCase()===f||l(O).toLowerCase()===l(f).toLowerCase()}).orThunk(()=>ns(((k,O)=>{if(0===k.indexOf("-apple-system")||O.length>0){const A=y3(k.toLowerCase());return t(A,nN)||t(A,O)}return!1})(f,w),{title:gf,format:f})),font:m}},a=b3(e,"font_family_formats",uf.SemiColon);return{tooltip:df(e,iA,gf),text:M.some(gf),icon:M.none(),isSelectedFor:l=>m=>m.exists(g=>g.format===l),getCurrentValue:()=>{const{matchOpt:l}=r();return l},getPreviewFor:l=>()=>M.some({tag:"div",styles:-1===l.indexOf("dings")?{"font-family":l}:{}}),onAction:l=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontName",!1,l.format)})},updateText:l=>{const{matchOpt:m,font:g}=r(),f=m.fold(ie(g),w=>w.title);io(l,yc,{text:f}),e.dispatch("FontFamilyTextUpdate",{value:f})},dataset:a,shouldHide:!1,isInvalid:Ke}},n={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},s=(()=>{const e="[0-9]+",r="[eE][+-]?"+e,a=m=>`(?:${m})?`,l=["Infinity",e+"\\."+a(e)+a(r),"\\."+e+a(r),e+a(r)].join("|");return new RegExp(`^([+-]?(?:${l}))(.*)$`)})(),i=(e,r)=>M.from(s.exec(e)).bind(a=>{const l=Number(a[1]),m=a[2];return g=m,zn(r,w=>zn(n[w],x=>g===x))?M.some({value:l,unit:m}):M.none();var g}),c={tab:ie(9),escape:ie(27),enter:ie(13),backspace:ie(8),delete:ie(46),left:ie(37),up:ie(38),right:ie(39),down:ie(40),space:ie(32),home:ie(36),end:ie(35),pageUp:ie(33),pageDown:ie(34)},d="Font size {0}",u="12pt",h={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},v={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},y=(e,r)=>/[0-9.]+px$/.test(e)?((a,l)=>{const m=Math.pow(10,l);return Math.round(a*m)/m})(72*parseInt(e,10)/96,r||0)+"pt":jt(v,e).getOr(e),C=e=>jt(h,e).getOr(""),E=e=>{const r=()=>{let m=M.none();const g=l.data,f=e.queryCommandValue("FontSize");if(f)for(let w=3;m.isNone()&&w>=0;w--){const x=y(f,w),k=C(x);m=Ue(g,O=>O.format===f||O.format===x||O.format===k)}return{matchOpt:m,size:f}},a=ie(M.none),l=b3(e,"font_size_formats",uf.Space);return{tooltip:df(e,d,u),text:M.some(u),icon:M.none(),isSelectedFor:m=>g=>g.exists(f=>f.format===m),getPreviewFor:a,getCurrentValue:()=>{const{matchOpt:m}=r();return m},onAction:m=>()=>{e.undoManager.transact(()=>{e.focus(),e.execCommand("FontSize",!1,m.format)})},updateText:m=>{const{matchOpt:g,size:f}=r(),w=g.fold(ie(f),x=>x.title);io(m,yc,{text:w}),e.dispatch("FontSizeTextUpdate",{value:w})},dataset:l,shouldHide:!1,isInvalid:Ke}},R="Format {0}",T=(e,r)=>{const a="Paragraph";return{tooltip:df(e,R,a),text:M.some(a),icon:M.none(),isSelectedFor:l=>()=>e.formatter.match(l),getCurrentValue:M.none,getPreviewFor:l=>()=>{const m=e.formatter.get(l);return void 0!==m?M.some({tag:m.length>0&&(m[0].inline||m[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):M.none()},onAction:Wh(e),updateText:l=>{const m=w=>A4(w)?Vt(w.items,m):N4(w)?[{title:w.title,format:w.format}]:[],g=Vt(lO(e),m),f=oy(e,ie(g)).fold(ie(a),w=>w.title);io(l,yc,{text:f}),e.dispatch("StylesTextUpdate",{value:f})},shouldHide:x2(e),isInvalid:l=>!e.formatter.canApply(l.format),dataset:r}},I=ie([Xe("toggleClass"),Xe("fetch"),mc("onExecute"),Ie("getHotspot",M.some),Ie("getAnchorOverrides",ie({})),cd(),mc("onItemExecute"),In("lazySink"),Xe("dom"),Rn("onOpen"),La("splitDropdownBehaviours",[zs,Kt,Io]),Ie("matchWidth",!1),Ie("useMinWidth",!1),Ie("eventOrder",{}),In("role")].concat(fv())),N=_t({factory:pi,schema:[Xe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Re([Io.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(gu)},buttonBehaviours:Re([vn.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),H=_t({factory:pi,schema:[Xe("dom")],name:"button",defaults:()=>({buttonBehaviours:Re([Io.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(e.uid).each(a=>{e.onExecute(a,r)})}})}),z=ie([N,H,It({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[Xe("text")],name:"aria-descriptor"}),vt({schema:[wu()],name:"menu",defaults:e=>({onExecute:(r,a)=>{r.getSystem().getByUid(e.uid).each(l=>{e.onItemExecute(l,r,a)})}})}),hw()]),U=Si({name:"SplitDropdown",configFields:I(),partFields:z(),factory:(e,r,a,l)=>{const m=k=>{bn.getCurrent(k).each(O=>{sr.highlightFirst(O),Kt.focusIn(O)})},g=k=>{uk(e,ht,k,l,m,Xi.HighlightMenuAndItem).get(yt)},f=k=>{const O=ra(k,e,"button");return gu(O),M.some(!0)},w={...Dr([Br((k,O)=>{Jn(k,e,"aria-descriptor").each(A=>{const D=Jt("aria");No(A.element,"id",D),No(k.element,"aria-describedby",D)})})]),...N1(M.some(g))};return{uid:e.uid,dom:e.dom,components:r,apis:{repositionMenus:k=>{vn.isOn(k)&&fw(k)}},eventOrder:{...e.eventOrder,[rl()]:["disabling","toggling","alloy.base.behaviour"]},events:w,behaviours:gs(e.splitDropdownBehaviours,[zs.config({others:{sandbox:k=>{const O=ra(k,e,"arrow");return hv(e,k,{onOpen:()=>{vn.on(O),vn.on(k)},onClose:()=>{vn.off(O),vn.off(k)}})}}}),Kt.config({mode:"special",onSpace:f,onEnter:f,onDown:k=>(g(k),M.some(!0))}),Io.config({}),vn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,r)=>e.repositionMenus(r)}}),J=e=>({isEnabled:()=>!Ro.isDisabled(e),setEnabled:r=>Ro.set(e,!r),setText:r=>io(e,yc,{text:r}),setIcon:r=>io(e,mg,{icon:r})}),Y=e=>({setActive:r=>{vn.set(e,r)},isActive:()=>vn.isOn(e),isEnabled:()=>!Ro.isDisabled(e),setEnabled:r=>Ro.set(e,!r),setText:r=>io(e,yc,{text:r}),setIcon:r=>io(e,mg,{icon:r})}),ge=(e,r)=>e.map(a=>({"aria-label":r.translate(a),title:r.translate(a)})).getOr({}),Ee=Jt("focus-button"),Ne=(e,r,a,l,m)=>{const g=r.map(w=>pr(o4(w,"tox-tbtn",m))),f=e.map(w=>pr(ug(w,m.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:ge(a,m)},components:G1([f.map(w=>w.asSpec()),g.map(w=>w.asSpec())]),eventOrder:{[ci()]:["focusing","alloy.base.behaviour",Cp],[Oc()]:[Cp,"toolbar-group-button-events"]},buttonBehaviours:Re([X2(m.isDisabled),Ua(),on(Cp,[Br((w,x)=>Mv(w)),Qe(yc,(w,x)=>{g.bind(k=>k.getOpt(w)).each(k=>{Ko.set(k,[Yr(m.translate(x.event.text))])})}),Qe(mg,(w,x)=>{f.bind(k=>k.getOpt(w)).each(k=>{Ko.set(k,[ug(x.event.icon,m.icons)])})}),Qe(ci(),(w,x)=>{x.event.prevent(),Hn(w,Ee)})])].concat(l.getOr([])))}},Me=(e,r,a)=>{var l;const m=ho(yt),g=Ne(e.icon,e.text,e.tooltip,M.none(),a);return pi.sketch({dom:g.dom,components:g.components,eventOrder:t4,buttonBehaviours:{...Re([on("toolbar-button-events",[(f={onAction:e.onAction,getApi:r.getApi},Gi((w,x)=>{lv(f,w)(k=>{io(w,e4,{buttonApi:k}),f.onAction(k)})})),rg(r,m),gp(r,m)]),X2(()=>!e.enabled||a.isDisabled()),Ua()].concat(r.toolbarButtonBehaviours)),[Cp]:null===(l=g.buttonBehaviours)||void 0===l?void 0:l[Cp]}});var f},Fe=(e,r,a)=>Me(e,{toolbarButtonBehaviours:a.length>0?[on("toolbarButtonWith",a)]:[],getApi:J,onSetup:e.onSetup},r),ye=(e,r,a)=>Me(e,{toolbarButtonBehaviours:[Ko.config({}),vn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[on("toolbarToggleButtonWith",a)]:[]),getApi:Y,onSetup:e.onSetup},r),Te=(e,r,a)=>l=>um(m=>r.fetch(m)).map(m=>M.from(bw(Zr(ak(Jt("menu-value"),m,g=>{r.onItemAction(e(l),g)},r.columns,r.presets,Nu.CLOSE_ON_EXECUTE,r.select.getOr(Ke),a),{movement:pv(r.columns,r.presets),menuBehaviours:av("auto"!==r.columns?[]:[Br((g,f)=>{K2(g,4,yS(r.presets)).each(({numRows:w,numColumns:x})=>{Kt.setGridSize(g,w,x)})})])})))),Be=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],tt=(e,r)=>(a,l,m)=>{const g=e(a).mapError(f=>xl(f)).getOrDie();return r(g,l,m)},Zt={button:tt($2,(e,r)=>Fe(e,r.shared.providers,[])),togglebutton:tt(K_,(e,r)=>ye(e,r.shared.providers,[])),menubutton:tt(e3,(e,r)=>pg(e,"tox-tbtn",r,M.none(),!1)),splitbutton:tt(e=>is("SplitButton",t3,e),(e,r)=>((a,l)=>{const m=w=>({isEnabled:()=>!Ro.isDisabled(w),setEnabled:x=>Ro.set(w,!x),setIconFill:(x,k)=>{Xr(w.element,`svg path[class="${x}"], rect[class="${x}"]`).each(O=>{No(O,"fill",k)})},setActive:x=>{No(w.element,"aria-pressed",x),Xr(w.element,"span").each(k=>{w.getSystem().getByDom(k).each(O=>vn.set(O,x))})},isActive:()=>Xr(w.element,"span").exists(x=>w.getSystem().getByDom(x).exists(vn.isOn)),setText:x=>Xr(w.element,"span").each(k=>w.getSystem().getByDom(k).each(O=>io(O,yc,{text:x}))),setIcon:x=>Xr(w.element,"span").each(k=>w.getSystem().getByDom(k).each(O=>io(O,mg,{icon:x}))),setTooltip:x=>{const k=l.providers.translate(x);Ta(w.element,{"aria-label":k,title:k})}}),g=ho(yt),f={getApi:m,onSetup:a.onSetup};return U.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...ge(a.tooltip,l.providers)}},onExecute:w=>{const x=m(w);x.isEnabled()&&a.onAction(x)},onItemExecute:(w,x,k)=>{},splitDropdownBehaviours:Re([mE(l.providers.isDisabled),Ua(),on("split-dropdown-events",[Br((w,x)=>Mv(w)),Qe(Ee,Io.focus),rg(f,g),gp(f,g)]),yv.config({})]),eventOrder:{[Oc()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:l.getSink,fetch:Te(m,a,l.providers),parts:{menu:Jb(0,0,a.presets)},components:[U.parts.button(Ne(a.icon,a.text,M.none(),M.some([vn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),l.providers)),U.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:I_("chevron-down",l.providers.icons)},buttonBehaviours:Re([mE(l.providers.isDisabled),Ua(),zb()])}),U.parts["aria-descriptor"]({text:l.providers.translate("To open the popup, press Shift+Enter")})]})})(e,r.shared)),grouptoolbarbutton:tt(e=>is("GroupToolbarButton",MO,e),(e,r,a)=>{const l=a.ui.registry.getAll().buttons,m={[ch]:r.shared.header.isPositionedAtTop()?jd.TopToBottom:jd.BottomToTop};if(L1(a)===zc.floating)return((g,f,w,x)=>{const k=f.shared,O=ho(yt),A={toolbarButtonBehaviours:[],getApi:J,onSetup:g.onSetup},D=[on("toolbar-group-button-events",[rg(A,O),gp(A,O)])];return Op.sketch({lazySink:k.getSink,fetch:()=>um(P=>{P(St((g=>mo(a,{buttons:l,toolbar:g,allowToolbarGroups:!1},r,M.none()))(g.items),Mx))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Ne(g.icon,g.text,g.tooltip,M.some(D),k.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:x}}}})})(e,r,0,m);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})},Mt={styles:(e,r)=>{const a={type:"advanced",...r.styles};return y0(e,r,T(e,a),R,"StylesTextUpdate")},fontsize:(e,r)=>y0(e,r,E(e),d,"FontSizeTextUpdate"),fontsizeinput:(e,r)=>((a,l,m)=>{let g=M.none();const f=dm(a,"NodeChange SwitchMode",j=>{const ne=j.getComponent();g=M.some(ne),m.updateInputValue(ne),Ro.set(ne,!a.selection.isEditable())}),w=j=>({getComponent:ie(j)}),x=ho(yt),k=Jt("custom-number-input-events"),O=(j,ne,le)=>{const me=g.map(nt=>Ft.getValue(nt)).getOr(""),xe=m.getNewValue(me,j),ze=me.length-`${xe}`.length,ot=g.map(nt=>nt.element.dom.selectionStart-ze),st=g.map(nt=>nt.element.dom.selectionEnd-ze);m.onAction(xe,le),g.each(nt=>{Ft.setValue(nt,xe),ne&&(ot.each(Ht=>nt.element.dom.selectionStart=Ht),st.each(Ht=>nt.element.dom.selectionEnd=Ht))})},A=(j,ne)=>O((le,me)=>le-me,j,ne),D=(j,ne)=>O((le,me)=>le+me,j,ne),P=j=>eo(j.element).fold(M.none,ne=>(Ul(ne),M.some(!0))),Z=j=>za(j.element)?(en(j.element).each(ne=>Ul(ne)),M.some(!0)):M.none(),te=(j,ne,le,me)=>{const xe=ho(yt),ze=l.shared.providers.translate(le),ot=Jt("altExecuting"),st=dm(a,"NodeChange SwitchMode",Ht=>{Ro.set(Ht.getComponent(),!a.selection.isEditable())}),nt=Ht=>{Ro.isDisabled(Ht)||j(!0)};return pi.sketch({dom:{tag:"button",attributes:{title:ze,"aria-label":ze},classes:me.concat(ne)},components:[Sp(ne,l.shared.providers.icons)],buttonBehaviours:Re([Ro.config({}),on(ot,[rg({onSetup:st,getApi:w},xe),gp({getApi:w},xe),Qe(_l(),(Ht,Yt)=>{Yt.event.raw.keyCode!==c.space()&&Yt.event.raw.keyCode!==c.enter()||Ro.isDisabled(Ht)||j(!1)}),Qe(va(),nt),Qe(Tc(),nt)])]),eventOrder:{[_l()]:[ot,"keying"],[va()]:[ot,"alloy.base.behaviour"],[Tc()]:[ot,"alloy.base.behaviour"]}})},oe=pr(te(j=>A(!1,j),"minus","Decrease font size",[])),ae=pr(te(j=>D(!1,j),"plus","Increase font size",[])),X=pr({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[up.sketch({inputBehaviours:Re([Ro.config({}),on(k,[rg({onSetup:f,getApi:w},x),gp({getApi:w},x)]),on("input-update-display-text",[Qe(yc,(j,ne)=>{Ft.setValue(j,ne.event.text)}),Qe(T0(),j=>{m.onAction(Ft.getValue(j))}),Qe(od(),j=>{m.onAction(Ft.getValue(j))})]),Kt.config({mode:"special",onEnter:j=>(O(ht,!0,!0),M.some(!0)),onEscape:P,onUp:j=>(D(!0,!1),M.some(!0)),onDown:j=>(A(!0,!1),M.some(!0)),onLeft:(j,ne)=>(ne.cut(),M.none()),onRight:(j,ne)=>(ne.cut(),M.none())})])})],behaviours:Re([Io.config({}),Kt.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:P}),on("input-wrapper-events",[Qe(uu(),j=>{Qt([oe,ae],ne=>{const le=ue(ne.get(j).element.dom);za(le)&&q0(le)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[oe.asSpec(),X.asSpec(),ae.asSpec()],behaviours:Re([Io.config({}),Kt.config({mode:"flow",focusInside:op.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:j=>za(j.element)?M.none():(Ul(j.element),M.some(!0))})])}})(e,r,(a=>{const l=()=>a.queryCommandValue("FontSize");return{updateInputValue:m=>io(m,yc,{text:l()}),onAction:(m,g)=>a.execCommand("FontSize",!1,m,{skip_focus:!g}),getNewValue:(m,g)=>{i(m,["unsupportedLength","empty"]);const f=l(),w=i(m,["unsupportedLength","empty"]).or(i(f,["unsupportedLength","empty"])),x=w.map(P=>P.value).getOr(16),k=T2(a),O=w.map(P=>P.unit).filter(P=>""!==P).getOr(k),A=g(x,(P=O,null!==(Z={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[P])&&void 0!==Z?Z:{step:1}).step),D=`${(P=>P>=0)(A)?A:x}${O}`;var P,Z;return D!==f&&((P,Z)=>{P.dispatch("FontSizeInputTextUpdate",Z)})(a,{value:D}),D}}})(e)),fontfamily:(e,r)=>y0(e,r,o(e),iA,"FontFamilyTextUpdate"),blocks:(e,r)=>y0(e,r,aA(e),v3,"BlocksTextUpdate"),align:(e,r)=>y0(e,r,mf(e),yg,"AlignTextUpdate")},mo=(e,r,a,l)=>{const m=(f=>{const w=f.toolbar;return!1===w?[]:void 0===w||!0===w?(k=>{const O=St(Be,A=>{const D=zt(A.items,P=>Fo(k,P)||Fo(Mt,P));return{name:A.name,items:D}});return zt(O,A=>A.items.length>0)})(f.buttons):Zo(w)?(k=>{const O=k.split("|");return St(O,A=>({items:A.trim().split(" ")}))})(w):Wr(w,O=>Fo(O,"name")&&Fo(O,"items"))?w:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])})(r),g=St(m,f=>{const w=Vt(f.items,x=>{return 0===x.trim().length?[]:(k=e,O=r.buttons,A=x,D=r.allowToolbarGroups,P=a,Z=l,jt(O,A.toLowerCase()).orThunk(()=>Z.bind(te=>hs(te,oe=>jt(O,oe+A.toLowerCase())))).fold(()=>jt(Mt,A.toLowerCase()).map(te=>te(k,P)),te=>{return"grouptoolbarbutton"!==te.type||D?(ae=P,X=k,jt(Zt,(oe=te).type).fold(()=>(console.error("skipping button defined by",oe),M.none()),j=>M.some(j(oe,ae,X)))):(console.warn(`Ignoring the '${A}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),M.none());var oe,ae,X})).toArray();var k,O,A,D,P,Z});return{title:M.from(e.translate(f.name)),items:w}});return zt(g,f=>f.items.length>0)},co=(e,r,a,l)=>{const m=r.mainUi.outerContainer,g=a.toolbar,f=a.buttons;if(Wr(g,Zo)){const w=g.map(x=>mo(e,{toolbar:x,buttons:f,allowToolbarGroups:a.allowToolbarGroups},l,M.none()));Hr.setToolbars(m,w)}else Hr.setToolbar(m,mo(e,a,l,M.none()))},Mo=he(),So=Mo.os.isiOS()&&Mo.os.version.major<=12;var $t=Object.freeze({__proto__:null,render:(e,r,a,l,m)=>{const{mainUi:g,uiMotherships:f}=r,w=ho(0),x=g.outerContainer;Vx(e);const k=ue(m.targetNode),O=bs(Wn(k));var te,oe;f1(k,g.mothership),te=O,oe=r,Qm(e)&&f1(oe.mainUi.mothership.element,oe.popupUi.mothership),Um(te,oe.dialogUi.mothership),e.on("SkinLoaded",()=>{Hr.setSidebar(x,a.sidebar,D2(e)),co(e,r,a,l),w.set(e.getWin().innerWidth),Hr.setMenubar(x,rA(e,a)),Hr.setViews(x,a.views),((Z,te)=>{const{uiMotherships:oe}=te,ae=Z.dom;let X=Z.getWin();const j=Z.getDoc().documentElement,ne=ho(En(X.innerWidth,X.innerHeight)),le=ho(En(j.offsetWidth,j.offsetHeight)),me=()=>{const st=ne.get();st.left===X.innerWidth&&st.top===X.innerHeight||(ne.set(En(X.innerWidth,X.innerHeight)),aw(Z))},xe=()=>{const st=Z.getDoc().documentElement,nt=le.get();nt.left===st.offsetWidth&&nt.top===st.offsetHeight||(le.set(En(st.offsetWidth,st.offsetHeight)),aw(Z))},ze=st=>{Z.dispatch("ScrollContent",st)};ae.bind(X,"resize",me),ae.bind(X,"scroll",ze);const ot=ah(ue(Z.getBody()),"load",xe);Z.on("hide",()=>{Qt(oe,st=>{Bo(st.element,"display","none")})}),Z.on("show",()=>{Qt(oe,st=>{Yn(st.element,"display")})}),Z.on("NodeChange",xe),Z.on("remove",()=>{ot.unbind(),ae.unbind(X,"resize",me),ae.unbind(X,"scroll",ze),X=null})})(e,r)});const A=Hr.getSocket(x).getOrDie("Could not find expected socket element");if(So){wt(A.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Z=(oe=>{let X=null;return{cancel:()=>{Zi(X)||(clearTimeout(X),X=null)},throttle:(...j)=>{Zi(X)&&(X=setTimeout(()=>{X=null,oe.apply(null,j)},20))}}})(()=>{e.dispatch("ScrollContent")}),te=Pi(A.element,"scroll",Z.throttle);e.on("remove",te.unbind)}zS(e,r),e.addCommand("ToggleSidebar",(Z,te)=>{Hr.toggleSidebar(x,te),e.dispatch("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",()=>{var Z;return null!==(Z=Hr.whichSidebar(x))&&void 0!==Z?Z:""}),e.addCommand("ToggleView",(Z,te)=>{if(Hr.toggleView(x,te)){const oe=x.element;g.mothership.broadcastOn([gd()],{target:oe}),Qt(f,ae=>{ae.broadcastOn([gd()],{target:oe})}),Zi(Hr.whichView(x))&&(e.focus(),e.nodeChanged(),Hr.refreshToolbar(x))}}),e.addQueryValueHandler("ToggleView",()=>{var Z;return null!==(Z=Hr.whichView(x))&&void 0!==Z?Z:""});const D=L1(e);D!==zc.sliding&&D!==zc.floating||e.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Z=e.getWin().innerWidth;Z!==w.get()&&(Hr.refreshToolbar(r.mainUi.outerContainer),w.set(Z))});return{iframeContainer:A.element.dom,editorContainer:x.element.dom,api:{setEnabled:Z=>{q1(r,!Z)},isEnabled:()=>!Ro.isDisabled(x)}}}});const oo=e=>/^[0-9\.]+(|px)$/i.test(""+e)?M.some(parseInt(""+e,10)):M.none(),Wo=e=>Nt(e)?e+"px":e,ke=(e,r,a)=>{const l=r.filter(g=>e<g),m=a.filter(g=>e>g);return l.or(m).getOr(e)},Oe=e=>{const r=b2(e),a=Ub(e),l=cp(e);return oo(r).map(m=>ke(m,a,l))},{ToolbarLocation:it,ToolbarMode:mt}=uS,ro=(e,r)=>{const a=Ds(e);return{pos:r?a.y:a.bottom,bounds:a}};var To=Object.freeze({__proto__:null,render:(e,r,a,l,m)=>{const{mainUi:g}=r,f=Ur(),w=ue(m.targetNode),x=((e,r,a,l,m)=>{const{mainUi:g,uiMotherships:f}=a,w=lp.DOM,x=Fh(e),k=F1(e),O=cp(e).or(Oe(e)),A=l.shared.header,D=A.isPositionedAtTop,P=L1(e),Z=P===mt.sliding||P===mt.floating,te=ho(!1),oe=()=>te.get()&&!e.removed,ae=le=>Z?le.fold(ie(0),me=>me.components().length>1?ds(me.components()[1].element):0):0,X=()=>{Qt(f,le=>{le.broadcastOn([Xg()],{})})},j=le=>{if(!oe())return;x||m.on(xe=>{const ze=O.getOrThunk(()=>{const ot=oo(cs(Ri(),"margin-left")).getOr(0);return mr(Ri())-si(r).left+ot});Bo(xe.element,"max-width",ze+"px")});const me=x?M.none():(()=>{if(x)return M.none();if(si(g.outerContainer.element).left+Oa(g.outerContainer.element)>=window.innerWidth-40||rs(g.outerContainer.element,"width").isSome()){Bo(g.outerContainer.element,"position","absolute"),Bo(g.outerContainer.element,"left","0px"),Yn(g.outerContainer.element,"width");const xe=Oa(g.outerContainer.element);return M.some(xe)}return M.none()})();var xe;Z&&Hr.refreshToolbar(g.outerContainer),x||(xe=me,m.on(ze=>{const ot=Hr.getToolbar(g.outerContainer),st=ae(ot),nt=Ds(r),{top:Ht,left:Yt}=($o=e,On=g.outerContainer.element,Qm($o)?Z4(On):M.none()).fold(()=>({top:D()?Math.max(nt.y-ds(ze.element)+st,0):nt.bottom,left:nt.x}),$o=>{var On;const Qr=Ds($o),Ls=null!==(On=$o.dom.scrollTop)&&void 0!==On?On:0,qo=se($o,Ri()),Oi=qo?Math.max(nt.y-ds(ze.element)+st,0):nt.y-Qr.y+Ls-ds(ze.element)+st;return{top:D()?Oi:nt.bottom,left:qo?nt.x:nt.x-Qr.x}}),go={position:"absolute",left:Math.round(Yt)+"px",top:Math.round(Ht)+"px"},Uo=xe.map($o=>{const On=mn(),Qr=window.innerWidth-(Yt-On.left);return{width:Math.max(Math.min($o,Qr),150)+"px"}}).getOr({});var $o,On;wt(g.outerContainer.element,{...go,...Uo})})),k&&m.on(le),X()},ne=()=>!(x||!k||!oe())&&m.get().exists(le=>{const me=A.getDockingMode(),xe=(ot=>{switch(k2(e)){case it.auto:const st=Hr.getToolbar(g.outerContainer),nt=ae(st),Ht=ds(ot.element)-nt,Yt=Ds(r);if(Yt.y>Ht)return"top";{const go=lt(r),Uo=Math.max(go.dom.scrollHeight,ds(go));return Yt.bottom<Uo-Ht||ys().bottom<Yt.bottom-Ht?"bottom":"top"}case it.bottom:return"bottom";default:return"top"}})(le);return xe!==me&&(ze=xe,m.on(ot=>{Js.setModes(ot,[ze]),A.setDockingMode(ze);const st=D()?jd.TopToBottom:jd.BottomToTop;No(ot.element,ch,st)}),!0);var ze});return{isVisible:oe,isPositionedAtTop:D,show:()=>{te.set(!0),Bo(g.outerContainer.element,"display","flex"),w.addClass(e.getBody(),"mce-edit-focus"),Qt(f,le=>{Yn(le.element,"display")}),ne(),Qm(e)?j(le=>Js.isDocked(le)?Js.reset(le):Js.refresh(le)):j(Js.refresh)},hide:()=>{te.set(!1),Bo(g.outerContainer.element,"display","none"),w.removeClass(e.getBody(),"mce-edit-focus"),Qt(f,le=>{Bo(le.element,"display","none")})},update:j,updateMode:()=>{ne()&&j(Js.reset)},repositionPopups:X}})(e,w,r,l,f),k=_2(e);zx(e);const O=()=>{if(f.isSet())return void x.show();f.set(Hr.getHeader(g.outerContainer).getOrDie());const D=Kb(e);Qm(e)?(f1(w,g.mothership),f1(w,r.popupUi.mothership)):Um(D,g.mothership),Um(D,r.dialogUi.mothership),co(e,r,a,l),Hr.setMenubar(g.outerContainer,rA(e,a)),x.show(),((P,Z,te,oe)=>{const ae=ho(ro(Z,te.isPositionedAtTop())),X=me=>{const{pos:xe,bounds:ze}=ro(Z,te.isPositionedAtTop()),{pos:ot,bounds:st}=ae.get(),nt=ze.height!==st.height||ze.width!==st.width;ae.set({pos:xe,bounds:ze}),nt&&aw(P,me),te.isVisible()&&(ot!==xe?te.update(Js.reset):nt&&(te.updateMode(),te.repositionPopups()))};oe||(P.on("activate",te.show),P.on("deactivate",te.hide)),P.on("SkinLoaded ResizeWindow",()=>te.update(Js.reset)),P.on("NodeChange keydown",me=>{requestAnimationFrame(()=>X(me))});let j=0;const ne=r0(()=>te.update(Js.refresh),33);P.on("ScrollWindow",()=>{const me=mn().left;me!==j&&(j=me,ne.throttle()),te.updateMode()}),Qm(P)&&P.on("ElementScroll",me=>{te.update(Js.refresh)});const le=jg();le.set(ah(ue(P.getBody()),"load",me=>X(me.raw))),P.on("remove",()=>{le.clear()})})(e,w,x,k),e.nodeChanged()};return e.on("show",O),e.on("hide",x.hide),k||(e.on("focus",O),e.on("blur",x.hide)),e.on("init",()=>{(e.hasFocus()||k)&&O()}),zS(e,r),{editorContainer:g.outerContainer.element.dom,api:{show:O,hide:x.hide,setEnabled:D=>{q1(r,!D)},isEnabled:()=>!Ro.isDisabled(g.outerContainer)}}}});const Yo="contexttoolbar-hide",Ho=(e,r)=>Qe(e4,(a,l)=>{const m=(g=>({hide:()=>Hn(g,Eg()),getValue:()=>Ft.getValue(g)}))(e.get(a));r.onAction(m,l.event.buttonApi)}),lo=(e,r,a)=>r.bottom-e.y>=a&&e.bottom-r.y>=a,Cn=e=>{const r=(a=>{const l=a.getBoundingClientRect();if(l.height<=0&&l.width<=0){const m=Cs(ue(a.startContainer),a.startOffset).element;return(An(m)?xo(m):M.some(m)).filter(rn).map(g=>g.dom.getBoundingClientRect()).getOr(l)}return l})(e.selection.getRng());if(e.inline){const a=mn();return Gr(a.left+r.left,a.top+r.top,r.width,r.height)}{const a=Gs(ue(e.getBody()));return Gr(a.x+r.left,a.y+r.top,r.width,r.height)}},Mn=(e,r,a,l=0)=>{const m=Mr(window),g=Ds(ue(e.getContentAreaContainer())),f=$b(e)||Gb(e)||P1(e),{x:w,width:x}=((k,O,A)=>{const D=Math.max(k.x+A,O.x);return{x:D,width:Math.min(k.right-A,O.right)-D}})(g,m,l);if(e.inline&&!f)return Gr(w,m.y,x,m.height);{const k=r.header.isPositionedAtTop(),{y:O,bottom:A}=((D,P,Z,te,oe,ae)=>{const X=ue(D.getContainer()),j=Xr(X,".tox-editor-header").getOr(X),ne=Ds(j),me=te&&!(ne.y>=P.bottom);if(D.inline&&me)return{y:Math.max(ne.bottom+ae,Z.y),bottom:Z.bottom};if(D.inline&&!me)return{y:Z.y,bottom:Math.min(ne.y-ae,Z.bottom)};const xe="line"===oe?Ds(X):P;return me?{y:Math.max(ne.bottom+ae,Z.y),bottom:Math.min(xe.bottom-ae,Z.bottom)}:{y:Math.max(xe.y+ae,Z.y),bottom:Math.min(ne.y-ae,Z.bottom)}})(e,g,m,k,a,l);return Gr(w,O,x,A-O)}},nn={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},Vn={maxHeightFunction:Qu(),maxWidthFunction:Nx()},ti=e=>"node"===e,ko=(e,r,a,l,m)=>{const g=Cn(e),f=l.lastElement().exists(w=>se(a,w));return((w,x)=>{const k=w.selection.getRng(),O=Cs(ue(k.startContainer),k.startOffset);return k.startContainer===k.endContainer&&k.startOffset===k.endOffset-1&&se(O.element,x)})(e,a)?f?nO:Xd:f?((w,x)=>{const O=rs(w,"position");Bo(w,"position",x);const A=lo(g,Ds(r),-20)&&!l.isReposition()?M5:nO;return O.each(D=>Bo(w,"position",D)),A})(r,l.getMode()):("fixed"===l.getMode()?m.y+mn().top:m.y)+(ds(r)+12)<=g.y?Xd:u0},Dn=(e,r,a,l)=>{const m=f=>(w,x,k,O,A)=>({...ko(e,O,f,a,A)({...w,y:A.y,height:A.height},x,k,O,A),alwaysFit:!0}),g=f=>ti(l)?[m(f)]:[];return r?{onLtr:f=>[ya,Va,Fs,ui,Tr,mi].concat(g(f)),onRtl:f=>[ya,Fs,Va,Tr,ui,mi].concat(g(f))}:{onLtr:f=>[mi,ya,ui,Va,Tr,Fs].concat(g(f)),onRtl:f=>[mi,ya,Tr,Fs,ui,Va].concat(g(f))}},Ts=(e,r)=>{const a=zt(r,g=>g.predicate(e.dom)),{pass:l,fail:m}=ri(a,g=>"contexttoolbar"===g.type);return{contextToolbars:l,contextForms:m}},Ei=Jt("forward-slide"),ul=Jt("backward-slide"),xc=Jt("change-slide-event"),Ti="tox-pop--resizing",Cc="tox-pop--transition",bm=(e,r)=>{const a=()=>{const l=r.getOptions(e),m=r.getCurrent(e).map(r.hash),g=Ur();return St(l,f=>({type:"togglemenuitem",text:r.display(f),onSetup:w=>{const x=O=>{O&&(g.on(A=>A.setActive(!1)),g.set(w)),w.setActive(O)};x(os(m,r.hash(f)));const k=r.watcher(e,f,x);return()=>{g.clear(),k()}},onAction:()=>r.setCurrent(e,f)}))};e.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:l=>l(a()),onSetup:r.onToolbarSetup}),e.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:a,onSetup:r.onMenuSetup})},eu=e=>dm(e,"NodeChange",r=>{r.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}),Dp=(e,r)=>a=>{a.setActive(r.get());const l=m=>{r.set(m.state),a.setActive(m.state)};return e.on("PastePlainTextToggle",l),iw(()=>e.off("PastePlainTextToggle",l),ki(e)(a))},pf=(e,r)=>()=>{e.execCommand("mceToggleFormat",!1,r)},ec=(e,r)=>dm(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!e.mode.isReadOnly()&&e.undoManager[r]())}),Ux=e=>dm(e,"VisualAid",r=>{r.setActive(e.hasVisual)}),Fu=e=>Zo(e)?e.split(/[ ,]/):e,Bp=e=>r=>r.options.get(e),w0=Bp("contextmenu_never_use_native"),w3=Bp("contextmenu_avoid_overlap"),x3=e=>{const r=e.ui.registry.getAll().contextMenus,a=e.options.get("contextmenu");return e.options.isSet("contextmenu")?a:zt(a,l=>Fo(r,l))},x0=(e,r)=>({type:"makeshift",x:e,y:r}),lA=e=>"longpress"===e.type||0===e.type.indexOf("touch"),Wx=e=>({type:"selection",root:ue(e.selection.getNode())}),Lp=(e,r,a)=>{switch(a){case"node":return{type:"node",node:M.some(ue((l=e).selection.getNode())),root:ue(l.getBody())};case"point":return((e,r)=>"contextmenu"===r.type||"longpress"===r.type?e.inline?(a=>{if(lA(a)){const l=a.touches[0];return x0(l.pageX,l.pageY)}return x0(a.pageX,a.pageY)})(r):((a,l)=>{const m=lp.DOM.getPos(a);return x0((g=l).x+m.x,g.y+m.y);var g})(e.getContentAreaContainer(),(a=>{if(lA(a)){const l=a.touches[0];return x0(l.clientX,l.clientY)}return x0(a.clientX,a.clientY)})(r)):Wx(e))(e,r);case"selection":return Wx(e)}var l},ny=(e,r,a,l,m,g)=>{const f=a(),w=Lp(e,r,g);a0(f,Nu.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:M.none()}).map(x=>{r.preventDefault(),_s.showMenuAt(m,{anchor:w},{menu:{markers:Ru("normal")},data:x})})},cA={onLtr:()=>[ya,Va,Fs,ui,Tr,mi,Xd,u0,jv,ux,Uv,dx],onRtl:()=>[ya,Fs,Va,Tr,ui,mi,Xd,u0,Uv,dx,jv,ux]},dA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},$x=(e,r,a,l,m,g)=>{const f=he(),w=f.os.isiOS(),x=f.os.isMacOS(),k=f.os.isAndroid(),O=f.deviceType.isTouch(),A=()=>{const D=a();((P,Z,te,oe,ae,X,j)=>{const ne=((le,me,xe)=>{const ze=Lp(le,me,xe);return{bubble:gc(0,"point"===xe?12:0,dA),layouts:cA,overrides:{maxWidthFunction:Nx(),maxHeightFunction:Qu()},...ze}})(P,Z,X);a0(te,Nu.CLOSE_ON_EXECUTE,oe,{isHorizontalMenu:!0,search:M.none()}).map(le=>{Z.preventDefault();const me=j?Xi.HighlightMenuAndItem:Xi.HighlightNone;_s.showMenuWithinBounds(ae,{anchor:ne},{menu:{markers:Ru("normal"),highlightOnOpen:me},data:le,type:"horizontal"},()=>M.some(Mn(P,oe.shared,"node"===X?"node":"selection"))),P.dispatch(Yo)})})(e,r,D,l,m,g,!(k||w||x&&O))};if((x||w)&&"node"!==g){const D=()=>{(P=>{const Z=P.selection.getRng(),te=()=>{Mb.setEditorTimeout(P,()=>{P.selection.setRng(Z)},10),X()};P.once("touchend",te);const oe=j=>{j.preventDefault(),j.stopImmediatePropagation()};P.on("mousedown",oe,!0);const ae=()=>X();P.once("longpresscancel",ae);const X=()=>{P.off("touchend",te),P.off("longpresscancel",ae),P.off("mousedown",oe)}})(e),A()};((P,Z)=>{const te=P.selection;if(te.isCollapsed()||Z.touches.length<1)return!1;{const oe=Z.touches[0],ae=te.getRng();return nb(P.getWin(),Gg.domRange(ae)).exists(X=>X.left<=oe.clientX&&X.right>=oe.clientX&&X.top<=oe.clientY&&X.bottom>=oe.clientY)}})(e,r)?D():(e.once("selectionchange",D),e.once("touchend",()=>e.off("selectionchange",D)))}else A()},vm=e=>Zo(e)?"|"===e:"separator"===e.type,qx={type:"separator"},C3=e=>{const r=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Zo(e))return e;switch(e.type){case"separator":return qx;case"submenu":return{type:"nestedmenuitem",...r(e),getSubmenuItems:()=>{const l=e.getSubmenuItems();return Zo(l)?l:St(l,C3)}};default:const a=e;return{type:"menuitem",...r(a),onAction:Bt(a.onAction)}}},S3=(e,r)=>{if(0===r.length)return e;const a=nr(e).filter(l=>!vm(l)).fold(()=>[],l=>[qx]);return e.concat(a).concat(r).concat([qx])},k3=(e,r)=>{return!("longpress"===(a=r).type||Fo(a,"touches")||2===r.button&&(r.target!==e.getBody()||""!==r.pointerType));var a},uA=(e,r)=>k3(e,r)?e.selection.getStart(!0):r.target,je=(e,r,a)=>{const l=he().deviceType.isTouch,m=di(_s.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>e.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Re([on("dismissContextMenu",[Qe(Pd(),(w,x)=>{Pn.close(w),e.focus()})])])})),g=()=>_s.hide(m),f=w=>{if(w0(e)&&w.preventDefault(),w.ctrlKey&&!w0(e)||(k=>0===x3(k).length)(e))return;const x=((k,O)=>{const A=w3(k),D=k3(k,O)?"selection":"point";if(Ea(A)){const P=uA(k,O);return Q1(ue(P),A)?"node":D}return D})(e,w);(l()?$x:ny)(e,w,()=>{const k=uA(e,w),O=e.ui.registry.getAll(),A=x3(e);return((D,P,Z)=>{const te=no(P,(oe,ae)=>jt(D,ae.toLowerCase()).map(X=>{const j=X.update(Z);if(Zo(j)&&Ea(ea(j)))return S3(oe,j.split(" "));if(Or(j)&&j.length>0){const ne=St(j,C3);return S3(oe,ne)}return oe}).getOrThunk(()=>oe.concat([ae])),[]);return te.length>0&&vm(te[te.length-1])&&te.pop(),te})(O.contextMenus,A,k)},a,m,x)};e.on("init",()=>{const w="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(l()?"":" ResizeWindow");e.on(w,g),e.on("longpress contextmenu",f)})},uo=tl([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),zo=e=>r=>r.translate(-e.left,-e.top),_r=e=>r=>r.translate(e.left,e.top),Pr=e=>(r,a)=>no(e,(l,m)=>m(l),En(r,a)),Os=(e,r,a)=>e.fold(Pr([_r(a),zo(r)]),Pr([zo(r)]),Pr([])),ls=(e,r,a)=>e.fold(Pr([_r(a)]),Pr([]),Pr([_r(r)])),ia=(e,r,a)=>e.fold(Pr([]),Pr([zo(a)]),Pr([_r(r),zo(a)])),ff=(e,r,a)=>{const l=e.fold((m,g)=>({position:M.some("absolute"),left:M.some(m+"px"),top:M.some(g+"px")}),(m,g)=>({position:M.some("absolute"),left:M.some(m-a.left+"px"),top:M.some(g-a.top+"px")}),(m,g)=>({position:M.some("fixed"),left:M.some(m+"px"),top:M.some(g+"px")}));return{right:M.none(),bottom:M.none(),...l}},_3=(e,r,a,l)=>{const m=(g,f)=>(w,x)=>{const k=g(r,a,l);return f(w.getOr(k.left),x.getOr(k.top))};return e.fold(m(ia,ry),m(ls,bf),m(Os,sy))},ry=uo.offset,bf=uo.absolute,sy=uo.fixed,_N=(e,r)=>{const a=qr(e,r);return kn(a)?NaN:parseInt(a,10)},EN=(e,r,a,l)=>hs(e,m=>((w,x,k,O,A,D)=>{const P=ls(w,A,D),Z=ls(x,A,D);return Math.abs(P.left-Z.left)<=k&&Math.abs(P.top-Z.top)<=O})(r,m.sensor,m.range.left,m.range.top,a,l)?M.some({output:_3(m.output,r,a,l),extra:m.extra}):M.none());var VR=Object.freeze({__proto__:null,snapTo:(e,r,a,l)=>{const m=r.getTarget(e.element);if(r.repositionTarget){const g=Ve(e.element),f=mn(g),w=kO(m),x={coord:_3((O=l).output,O.output,f,w),extra:O.extra},k=ff(x.coord,0,w);Mi(m,k)}var O}});const rN="data-initial-z-index",TN=(e,r)=>{var a;e.getSystem().addToGui(r),xo((a=r).element).filter(rn).each(l=>{rs(l,"z-index").each(m=>{No(l,rN,m)}),Bo(l,"z-index",cs(a.element,"z-index"))})},zR=e=>{xo(e.element).filter(rn).each(a=>{Ns(a,rN).fold(()=>Yn(a,"z-index"),l=>Bo(a,"z-index",l)),Oo(a,rN)}),e.getSystem().removeFromGui(e)},ON=(e,r,a)=>e.getSystem().build(zi.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:a}));var ZR=el("snaps",[Xe("getSnapPoints"),Rn("onSensor"),Xe("leftAttr"),Xe("topAttr"),Ie("lazyViewport",ys),Ie("mustSnap",!1)]);const sN=[Ie("useFixed",Ke),Xe("blockerClass"),Ie("getTarget",ht),Ie("onDrag",yt),Ie("repositionTarget",!0),Ie("onDrop",yt),Bs("getBounds",ys),ZR],AN=(e,r)=>({bounds:e.getBounds(),height:Ga(r.element),width:Oa(r.element)}),aN=(e,r,a,l,m)=>{const g=a.update(l,m),f=a.getStartData().getOrThunk(()=>AN(r,e));g.each(w=>{((x,k,O,A)=>{const D=k.getTarget(x.element);if(k.repositionTarget){const P=Ve(x.element),Z=mn(P),te=kO(D),oe=(e=>{return(r=rs(e,"left"),a=rs(e,"top"),l=rs(e,"position"),r.isSome()&&a.isSome()&&l.isSome()?M.some((m=r.getOrDie(),g=a.getOrDie(),f=l.getOrDie(),("fixed"===f?sy:ry)(parseInt(m,10),parseInt(g,10)))):M.none()).getOrThunk(()=>{const m=si(e);return bf(m.left,m.top)});var m,g,f,r,a,l})(D),ae=(j=x,le=oe,me=Z,xe=te,ze=A,ot=O,((st,nt,Ht,Yt,go)=>{const Uo=go.bounds,$o=ls(nt,Ht,Yt),On=Al($o.left,Uo.x,Uo.x+Uo.width-go.width),Qr=Al($o.top,Uo.y,Uo.y+Uo.height-go.height),Ls=bf(On,Qr);return nt.fold(()=>{const qo=ia(Ls,Ht,Yt);return ry(qo.left,qo.top)},ie(Ls),()=>{const qo=Os(Ls,Ht,Yt);return sy(qo.left,qo.top)})})(0,k.snaps.fold(()=>{const st=(Ht=ze.left,Yt=ze.top,le.fold((Uo,$o)=>ry(Uo+Ht,$o+Yt),(Uo,$o)=>bf(Uo+Ht,$o+Yt),(Uo,$o)=>sy(Uo+Ht,$o+Yt)));var Ht,Yt;const go=Os(st,me,xe);return sy(go.left,go.top)},st=>{const nt=((e,r,a,l,m,g)=>{const f=(A=a,D=l,((P,Z)=>{const te=P.element,oe=_N(te,Z.leftAttr),ae=_N(te,Z.topAttr);return isNaN(oe)||isNaN(ae)?M.none():M.some(En(oe,ae))})(e,r).fold(()=>A,P=>sy(P.left+D.left,P.top+D.top))),w=r.mustSnap?((e,r,a,l,m)=>{const g=r.getSnapPoints(e);return EN(g,a,l,m).orThunk(()=>no(g,(w,x)=>{const O=((A,D,P,Z,te,oe)=>{const ae=ls(A,te,oe),X=ls(D,te,oe),j=Math.abs(ae.left-X.left),ne=Math.abs(ae.top-X.top);return En(j,ne)})(a,x.sensor,0,0,l,m);return w.deltas.fold(()=>({deltas:M.some(O),snap:M.some(x)}),A=>(O.left+O.top)/2<=(A.left+A.top)/2?{deltas:M.some(O),snap:M.some(x)}:w)},{deltas:M.none(),snap:M.none()}).snap.map(w=>({output:_3(w.output,a,l,m),extra:w.extra})))})(e,r,f,m,g):((e,r,a,l,m)=>{const g=r.getSnapPoints(e);return EN(g,a,l,m)})(e,r,f,m,g),x=Os(f,m,g);var A,D;return((k,O,A)=>{const D=k.element;No(D,O.leftAttr,A.left+"px"),No(D,O.topAttr,A.top+"px")})(e,r,x),w.fold(()=>({coord:sy(x.left,x.top),extra:M.none()}),k=>({coord:k.output,extra:k.extra}))})(j,st,le,ze,me,xe);return nt.extra.each(Ht=>{st.onSensor(j,Ht)}),nt.coord}),me,xe,ot)),X=ff(ae,0,te);Mi(D,X)}var j,le,me,xe,ze,ot;k.onDrag(x,D,A)})(e,r,f,w)})},NN=(e,r,a,l)=>{r.each(zR),a.snaps.each(g=>{((x,k)=>{const O=x.element;Oo(O,k.leftAttr),Oo(O,k.topAttr)})(e,g)});const m=a.getTarget(e.element);l.reset(),a.onDrop(e,m)},iN=e=>(r,a)=>{const l=m=>{a.setStartData(AN(r,m))};return Dr([Qe(Em(),m=>{a.getStartData().each(()=>l(m))}),...e(r,a,l)])};var jR=Object.freeze({__proto__:null,getData:e=>M.from(En(e.x,e.y)),getDelta:(e,r)=>En(r.left-e.left,r.top-e.top)});const RN=(e,r,a)=>[Qe(ci(),(l,m)=>{if(0!==m.event.raw.button)return;m.stop();const g=()=>NN(l,M.some(x),e,r),f=dl(g,200),w={drop:g,delayDrop:f.schedule,forceDrop:g,move:k=>{f.cancel(),aN(l,e,r,jR,k)}},x=ON(l,e.blockerClass,(k=w,Dr([Qe(ci(),k.forceDrop),Qe(_f(),k.drop),Qe(kg(),(O,A)=>{k.move(A.event)}),Qe(Fp(),k.delayDrop)])));var k;a(l),TN(l,x)})],WR=[...sN,Vr("dragger",{handlers:iN(RN)})];var MN=Object.freeze({__proto__:null,getData:e=>{const r=e.raw.touches;return 1===r.length?(a=>{const l=a[0];return M.some(En(l.clientX,l.clientY))})(r):M.none()},getDelta:(e,r)=>En(r.left-e.left,r.top-e.top)});const DN=(e,r,a)=>{const l=Ur(),m=g=>{NN(g,l.get(),e,r),l.clear()};return[Qe(td(),(g,f)=>{f.stop();const w=()=>m(g),x={drop:w,delayDrop:yt,forceDrop:w,move:O=>{aN(g,e,r,MN,O)}},k=ON(g,e.blockerClass,(O=x,Dr([Qe(td(),O.forceDrop),Qe(Tc(),O.drop),Qe(Dd(),O.drop),Qe(du(),(A,D)=>{O.move(D.event)})])));var O;l.set(k),a(g),TN(g,k)}),Qe(du(),(g,f)=>{f.stop(),aN(g,e,r,MN,f.event)}),Qe(Tc(),(g,f)=>{f.stop(),m(g)}),Qe(Dd(),m)]},$R=WR,qR=[...sN,Vr("dragger",{handlers:iN(DN)})],GR=[...sN,Vr("dragger",{handlers:iN((e,r,a)=>[...RN(e,r,a),...DN(e,r,a)])})];var KR=Object.freeze({__proto__:null,mouse:$R,touch:qR,mouseOrTouch:GR}),YR=Object.freeze({__proto__:null,init:()=>{let e=M.none(),r=M.none();const a=ie({});return na({readState:a,reset:()=>{e=M.none(),r=M.none()},update:(l,m)=>l.getData(m).bind(g=>((f,w)=>{const x=e.map(k=>f.getDelta(k,w));return e=M.some(w),x})(l,g)),getStartData:()=>r,setStartData:l=>{r=M.some(l)}})}});const ay=Zg({branchKey:"mode",branches:KR,name:"dragging",active:{events:(e,r)=>e.dragger.handlers(e,r)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:M.from(e.extra)})},state:YR,apis:VR}),BN=(e,r,a,l,m,g)=>e.fold(()=>ay.snap({sensor:bf(a-20,l-20),range:En(m,g),output:bf(M.some(a),M.some(l)),extra:{td:r}}),f=>{const w=a-20,x=l-20,k=f.element.dom.getBoundingClientRect();return ay.snap({sensor:bf(w,x),range:En(40,40),output:bf(M.some(a-k.width/2),M.some(l-k.height/2)),extra:{td:r}})}),LN=(e,r,a)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(l,m)=>{const g=m.td;var f,w;f=r.get(),w=g,f.exists(x=>se(x,w))||(r.set(g),a(g))},mustSnap:!0}),IN=e=>pr(pi.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Re([ay.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),yv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}));var C0;!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(C0||(C0={}));const HN=(e,r,a)=>{const l=ue(e.getContainer()),m=((g,f,w,x,k)=>{const O={height:ke(x+f.top,v2(g),oS(g))};return w===C0.Both&&(O.width=ke(k+f.left,Ub(g),cp(g))),O})(e,r,a,ds(l),mr(l));Nn(m,(g,f)=>{Nt(g)&&Bo(l,f,Wo(g))}),e.dispatch("ResizeEditor")},mA=(e,r,a,l)=>{const m=En(20*a,20*l);return HN(e,m,r),M.some(!0)},QR=(e,r)=>({dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const l=(()=>{const l=[],m=iS(e),g=H1(e),f=N2(e)||e.hasPlugin("wordcount");return g&&l.push(((e,r,a)=>{var l;const m=null!==(l={}.delimiter)&&void 0!==l?l:"\u203a";return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Re([Kt.config({mode:"flow",selector:"div[role=button]"}),Ro.config({disabled:a.isDisabled}),Ua(),Es.config({}),Ko.config({}),on("elementPathEvents",[Br((g,f)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Kt.focusIn(g)),e.on("NodeChange",w=>{const x=(O=>{const A=[];let D=O.length;for(;D-- >0;){const Z=O[D];if(1===Z.nodeType&&"BR"!==(P=Z).nodeName&&!P.getAttribute("data-mce-bogus")&&"bookmark"!==P.getAttribute("data-mce-type")){const te=s5(e,Z);if(te.isDefaultPrevented()||A.push({name:te.name,element:Z}),te.isPropagationStopped())break}}var P;return A})(w.parents),k=x.length>0?no(x,(O,A,D)=>{const P=(te=A.element,pi.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":oe=D,"aria-level":oe+1}},components:[Yr(A.name)],action:ae=>{e.focus(),e.selection.select(te),e.nodeChanged()},buttonBehaviours:Re([Zh(a.isDisabled),Ua()])}));var te,oe;return O.concat(0===D?[P]:[{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Yr(` ${m} `)]},P])},[]):[];Ko.set(g,k)})})])]),components:[]}})(e,0,r)),m&&l.push((()=>{const w=ZS("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Yr(bc.translate(["Press {0} for help",w]))]}})()),f&&l.push((()=>{const w=[];return e.hasPlugin("wordcount")&&w.push(((x,k)=>{const O=(A,D,P)=>Ko.set(A,[Yr(k.translate(["{0} "+P,D[P]]))]);return pi.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Re([Zh(k.isDisabled),Ua(),Es.config({}),Ko.config({}),Ft.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),on("wordcount-events",[Gi(A=>{const D=Ft.getValue(A),P="words"===D.mode?"characters":"words";Ft.setValue(A,{mode:P,count:D.count}),O(A,D.count,P)}),Br(A=>{x.on("wordCountUpdate",D=>{const{mode:P}=Ft.getValue(A);Ft.setValue(A,{mode:P,count:D.wordCount}),O(A,D.wordCount,P)})})])]),eventOrder:{[rl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,r)),N2(e)&&w.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":bc.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Re([Io.config({})])}]}),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:w}})()),l.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...(()=>{const w="tox-statusbar__text-container--flex-start",x="tox-statusbar__text-container--flex-end";if(m){const k="tox-statusbar__text-container-3-cols";return f||g?f&&!g?[k,x]:[k,w]:[k,"tox-statusbar__text-container--space-around"]}return[f&&!g?x:w]})()]},components:l}]:[]})(),m=((g,f)=>{const w=(k=>{const O=R2(k);return!1===O?C0.None:"both"===O?C0.Both:C0.Vertical})(g);if(w===C0.None)return M.none();const x=w===C0.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return M.some(vd("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:f.translate("Resize"),"aria-label":f.translate(x)},behaviours:[ay.config({mode:"mouse",repositionTarget:!1,onDrag:(k,O,A)=>HN(g,A,w),blockerClass:"tox-blocker"}),Kt.config({mode:"special",onLeft:()=>mA(g,w,-1,0),onRight:()=>mA(g,w,1,0),onUp:()=>mA(g,w,0,-1),onDown:()=>mA(g,w,0,1)}),Es.config({}),Io.config({})]},f.icons))})(e,r);return l.concat(m.toArray())})()}),PN=(e,r)=>r.get().getOrDie(`UI for ${e} has not been rendered`),eM=(e,r)=>{const a=e.inline,l=a?To:$t,m=F1(e)?RO:h0,g=(()=>{const me=Ur(),xe=Ur(),ze=Ur();return{dialogUi:me,popupUi:xe,mainUi:ze,getUiMotherships:()=>{const ot=me.get().map(nt=>nt.mothership),st=xe.get().map(nt=>nt.mothership);return ot.fold(()=>st.toArray(),nt=>st.fold(()=>[nt],Ht=>se(nt.element,Ht.element)?[nt]:[nt,Ht]))},lazyGetInOuterOrDie:(ot,st)=>()=>ze.get().bind(nt=>st(nt.outerContainer)).getOrDie(`Could not find ${ot} element in OuterContainer`)}})(),f=Ur(),w=Ur(),x=Ur(),k=he().deviceType.isTouch()?["tox-platform-touch"]:[],O=I2(e),A=L1(e),D=pr({dom:{tag:"div",classes:["tox-anchorbar"]}}),P=pr({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Z=()=>g.mainUi.get().map(me=>me.outerContainer).bind(Hr.getHeader),te=g.lazyGetInOuterOrDie("anchor bar",D.getOpt),oe=g.lazyGetInOuterOrDie("bottom anchor bar",P.getOpt),ae=g.lazyGetInOuterOrDie("toolbar",Hr.getToolbar),X=g.lazyGetInOuterOrDie("throbber",Hr.getThrobber),j=((me,xe,ze,ot)=>{const st=ho(!1),nt=(qo=>{const Oi=ho(I2(qo)?"bottom":"top");return{isPositionedAtTop:()=>"top"===Oi.get(),getDockingMode:Oi.get,setDockingMode:Oi.set}})(xe),Ht={icons:()=>xe.ui.registry.getAll().icons,menuItems:()=>xe.ui.registry.getAll().menuItems,translate:bc.translate,isDisabled:()=>xe.mode.isReadOnly()||!xe.ui.isEnabled(),getOption:xe.options.get},Yt=(e=>({getHistory:pO,addToHistory:F4,getLinkInformation:()=>{return O2(r=e)?M.some({targets:fx(r.getBody()),anchorTop:V4(Wb(r)),anchorBottom:V4(sS(r))}):M.none();var r},getValidationHandler:()=>M.from(E2(e)),getUrlPicker:r=>{return((m,g)=>{const f=(w=>{const x=M.from(rS(w)).filter(hO).map(fO);return bx(w).fold(Ke,k=>x.fold(fn,O=>Sr(O).length>0&&O))})(m);return ua(f)?f?bx(m):M.none():f[g]?bx(m):M.none()})(a=e,l=r).map(m=>g=>um(f=>{const w={filetype:l,fieldname:g.fieldname,...M.from(g.meta).getOr({})};m.call(a,(x,k)=>{if(!Zo(x))throw new Error("Expected value to be string");if(void 0!==k&&!Ia(k))throw new Error("Expected meta to be a object");f({value:x,meta:k})},g.value,w)}));var a,l}}))(xe),go=(qo=>{const Oi=la=>()=>qo.formatter.match(la),Xo=la=>()=>{const Ai=qo.formatter.get(la);return void 0!==Ai?M.some({tag:Ai.length>0&&(Ai[0].inline||Ai[0].block)||"div",styles:qo.dom.parseStyle(qo.formatter.getCssText(la))}):M.none()},xa=ho([]),jr=ho([]),Rl=ho(!1);return qo.on("PreInit",la=>{const Ai=lO(qo),qc=M4(qo,Ai,Oi,Xo);xa.set(qc)}),qo.on("addStyleModifications",la=>{const Ai=M4(qo,la.items,Oi,Xo);jr.set(Ai),Rl.set(la.replace)}),{getData:()=>{const la=Rl.get()?[]:xa.get(),Ai=jr.get();return la.concat(Ai)}}})(xe),Uo={colorPicker:m0(qo=xe),hasCustomColors:iO(qo),getColors:B5(qo),getColorCols:L5(qo)},$o=(qo=>({isDraggableModal:O4(qo)}))(xe),On={shared:{providers:Ht,anchors:aO(xe,ze,ot,nt.isPositionedAtTop),header:nt},urlinput:Yt,styles:go,colorinput:Uo,dialog:$o,isContextMenuOpen:()=>st.get(),setContextMenuState:qo=>st.set(qo)},Qr={...On,shared:{...On.shared,interpreter:qo=>tO(qo,{},Qr),getSink:me.popup}},Ls={...On,shared:{...On.shared,interpreter:qo=>tO(qo,{},Ls),getSink:me.dialog}};var qo;return{popup:Qr,dialog:Ls}})({popup:()=>pn.fromOption(g.popupUi.get().map(me=>me.sink),"(popup) UI has not been rendered"),dialog:()=>pn.fromOption(g.dialogUi.get().map(me=>me.sink),"UI has not been rendered")},e,te,oe),le=me=>{const xe=Wo((nt=>{const Ht=f2(nt),Yt=v2(nt),go=oS(nt);return oo(Ht).map(Uo=>ke(Uo,Yt,go))})(ot=e).getOr(f2(ot))),ze=Wo((ot=>Oe(ot).getOr(b2(ot)))(e));var ot;return e.inline||(Gc("div","width",ze)&&Bo(me.element,"width",ze),Gc("div","height",xe)?Bo(me.element,"height",xe):Bo(me.element,"height","400px")),xe};return{popups:{backstage:j.popup,getMothership:()=>PN("popups",x)},dialogs:{backstage:j.dialog,getMothership:()=>PN("dialogs",w)},renderUI:()=>{const me=(()=>{const me=(()=>{const On={attributes:{[ch]:O?jd.BottomToTop:jd.TopToBottom}},Qr=Hr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:j.popup,onEscape:()=>{e.focus()}}),Ls=Hr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:j.popup.shared.getSink,providers:j.popup.shared.providers,onEscape:()=>{e.focus()},onToolbarToggled:qc=>{e.dispatch("ToggleToolbarDrawer",{state:qc})},type:A,lazyToolbar:ae,lazyHeader:()=>Z().getOrDie("Could not find header element"),...On}),qo=Hr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:j.popup.shared.providers,onEscape:()=>{e.focus()},type:A}),Oi=P1(e),Xo=Gb(e),xa=$b(e),jr=aS(e),Rl=Hr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ai=jr?[Rl,Qr]:[Qr];return Hr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Oi||Xo||xa?[]:["tox-editor-header--empty"]),...On},components:dn([xa?Ai:[],Oi?[qo]:Xo?[Ls]:[],Fh(e)?[]:[D.asSpec()]]),sticky:F1(e),editor:e,sharedBackstage:j.popup.shared})})(),xe={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Hr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Hr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},ze=Hr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:j.popup}),ot=Hr.parts.viewWrapper({backstage:j.popup}),st=A2(e)&&!a?M.some(QR(e,j.popup.shared.providers)):M.none(),nt=dn([O?[]:[me],a?[]:[xe],O?[me]:[]]),Ht=Hr.parts.editorContainer({components:dn([nt,a?[]:[P.asSpec(),...st.toArray()]])}),Yt=Yb(e),go={role:"application",...bc.isRtl()?{dir:"rtl"}:{},...Yt?{"aria-hidden":"true"}:{}},Uo=di(Hr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(O?["tox-tinymce--toolbar-bottom"]:[]).concat(k),styles:{visibility:"hidden",...Yt?{opacity:"0",border:"0"}:{}},attributes:go},components:[Ht,...a?[]:[ot],ze],behaviours:Re([Ua(),Ro.config({disableClass:"tox-tinymce--disabled"}),Kt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),$o=bv(Uo);return f.set($o),{mothership:$o,outerContainer:Uo}})(),xe=(()=>{const ot=Kb(e),st=se(Ri(),ot)&&"grid"===cs(ot,"display"),nt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(k),attributes:{...bc.isRtl()?{dir:"rtl"}:{}}},behaviours:Re([gi.config({useFixed:()=>m.isDocked(Z)})])},Ht={dom:{styles:{width:document.body.clientWidth+"px"}},events:Dr([Qe(Tm(),Uo=>{Bo(Uo.element,"width",document.body.clientWidth+"px")})])},Yt=di(Zr(nt,st?Ht:{})),go=bv(Yt);return w.set(go),{sink:Yt,mothership:go}})(),ze=Qm(e)?(()=>{const ot={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(k),attributes:{...bc.isRtl()?{dir:"rtl"}:{}}},behaviours:Re([gi.config({useFixed:()=>m.isDocked(Z),getBounds:()=>r.getPopupSinkBounds()})])},st=di(ot),nt=bv(st);return x.set(nt),{sink:st,mothership:nt}})():(x.set((ot=xe).mothership),ot);var ot;return g.dialogUi.set(xe),g.popupUi.set(ze),g.mainUi.set(me),(ot=>{const{mainUi:st,popupUi:nt,uiMotherships:Ht}=ot;Zn(S2(e),(Xo,xa)=>{e.ui.registry.addGroupToolbarButton(xa,Xo)});const{buttons:Yt,menuItems:go,contextToolbars:Uo,sidebars:$o,views:On}=e.ui.registry.getAll(),Qr=L2(e),Ls={menuItems:go,menus:dS(e),menubar:jb(e),toolbar:Qr.getOrThunk(()=>I1(e)),allowToolbarGroups:A===zc.floating,buttons:Yt,sidebar:$o,views:On};var qo;qo=st.outerContainer,e.addShortcut("alt+F9","focus menubar",()=>{Hr.focusMenubar(qo)}),e.addShortcut("alt+F10","focus toolbar",()=>{Hr.focusToolbar(qo)}),e.addCommand("ToggleToolbarDrawer",(Xo,xa)=>{xa?.skipFocus?Hr.toggleToolbarDrawerWithoutFocusing(qo):Hr.toggleToolbarDrawer(qo)}),e.addQueryStateHandler("ToggleToolbarDrawer",()=>Hr.isToolbarDrawerToggled(qo)),((Xo,xa,jr)=>{const Rl=(es,E0)=>{Qt([xa,...jr],xg=>{xg.broadcastEvent(es,E0)})},la=(es,E0)=>{Qt([xa,...jr],xg=>{xg.broadcastOn([es],E0)})},Ai=es=>la(gd(),{target:es.target}),qc=Ka(),Yx=Pi(qc,"touchstart",Ai),Xx=Pi(qc,"touchmove",es=>Rl(Tg(),es)),S0=Pi(qc,"touchend",es=>Rl(zp(),es)),vf=Pi(qc,"mousedown",Ai),E3=Pi(qc,"mouseup",es=>{0===es.raw.button&&la(y1(),{target:es.target})}),k0=es=>la(gd(),{target:ue(es.target)}),yf=es=>{0===es.button&&la(y1(),{target:ue(es.target)})},ly=()=>{Qt(Xo.editorManager.get(),es=>{Xo!==es&&es.dispatch("DismissPopups",{relatedTarget:Xo})})},cy=es=>Rl(Em(),Y0(es)),T3=es=>{la(Xg(),{}),Rl(Tm(),Y0(es))},hA=Wn(ue(Xo.getElement())),O3=ah(hA,"scroll",es=>{requestAnimationFrame(()=>{if(null!=Xo.getContainer()){const E0=fp(Xo,xa.element).map(xg=>[xg.element,...xg.others]).getOr([]);zn(E0,xg=>se(xg,es.target))&&(Xo.dispatch("ElementScroll",{target:es.target.dom}),Rl(Of(),es))}})}),_0=()=>la(Xg(),{}),wf=es=>{es.state&&la(gd(),{target:ue(Xo.getContainer())})},xf=es=>{la(gd(),{target:ue(es.relatedTarget.getContainer())})};Xo.on("PostRender",()=>{Xo.on("click",k0),Xo.on("tap",k0),Xo.on("mouseup",yf),Xo.on("mousedown",ly),Xo.on("ScrollWindow",cy),Xo.on("ResizeWindow",T3),Xo.on("ResizeEditor",_0),Xo.on("AfterProgressState",wf),Xo.on("DismissPopups",xf)}),Xo.on("remove",()=>{Xo.off("click",k0),Xo.off("tap",k0),Xo.off("mouseup",yf),Xo.off("mousedown",ly),Xo.off("ScrollWindow",cy),Xo.off("ResizeWindow",T3),Xo.off("ResizeEditor",_0),Xo.off("AfterProgressState",wf),Xo.off("DismissPopups",xf),vf.unbind(),Yx.unbind(),Xx.unbind(),S0.unbind(),E3.unbind(),O3.unbind()}),Xo.on("detach",()=>{Qt([xa,...jr],Ly),Qt([xa,...jr],es=>es.destroy())})})(e,st.mothership,Ht),m.setup(e,j.popup.shared,Z),((e,r)=>{var a;a=e,Qt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Kl(a,l.cmd),onSetup:jh(a,l.name)})}),a.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:ki(a),onAction:Kl(a,"JustifyNone")}),(e=>{var r,a;(a=>{Iu.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(l,m)=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:jh(a,l.name),onAction:pf(a,l.name)})});for(let l=1;l<=6;l++){const m="h"+l;a.ui.registry.addToggleButton(m,{text:m.toUpperCase(),tooltip:"Heading "+l,onSetup:jh(a,m),onAction:pf(a,m)})}})(r=e),a=r,Iu.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Kl(a,l.action)})}),Iu.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],l=>{a.ui.registry.addButton(l.name,{tooltip:l.text,icon:l.icon,onSetup:ki(a),onAction:Kl(a,l.action)})}),(a=>{Iu.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],l=>{a.ui.registry.addToggleButton(l.name,{tooltip:l.text,icon:l.icon,onAction:Kl(a,l.action),onSetup:jh(a,l.name)})})})(r),(r=>{Iu.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onAction:Kl(r,a.action)})}),Iu.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],a=>{r.ui.registry.addMenuItem(a.name,{text:a.text,icon:a.icon,shortcut:a.shortcut,onSetup:ki(r),onAction:Kl(r,a.action)})}),r.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:ki(r),onAction:pf(r,"code")})})(e)})(e),((a,l)=>{((m,g)=>{const f=vg(0,g,mf(m));m.ui.registry.addNestedMenuItem("align",{text:g.shared.providers.translate("Align"),onSetup:ki(m),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(a,l),((m,g)=>{const f=vg(0,g,o(m));m.ui.registry.addNestedMenuItem("fontfamily",{text:g.shared.providers.translate("Fonts"),onSetup:ki(m),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(a,l),((m,g)=>{const f={type:"advanced",...g.styles},w=vg(0,g,T(m,f));m.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:ki(m),getSubmenuItems:()=>w.items.validateItems(w.getStyleItems())})})(a,l),((m,g)=>{const f=vg(0,g,aA(m));m.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:ki(m),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(a,l),((m,g)=>{const f=vg(0,g,E(m));m.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:ki(m),getSubmenuItems:()=>f.items.validateItems(f.getStyleItems())})})(a,l)})(e,r),(a=>{var l;(l=a).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:ec(l,"hasUndo"),onAction:Kl(l,"undo")}),l.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:ec(l,"hasRedo"),onAction:Kl(l,"redo")}),(l=>{l.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:ec(l,"hasUndo"),onAction:Kl(l,"undo")}),l.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:ec(l,"hasRedo"),onAction:Kl(l,"redo")})})(a)})(e),(a=>{var w;(w=a).addCommand("mceApplyTextcolor",(x,k)=>{var O,A,D;A=x,D=k,(O=w).undoManager.transact(()=>{O.focus(),O.formatter.apply(A,{value:D}),O.nodeChanged()})}),w.addCommand("mceRemoveTextcolor",x=>{var k,O;O=x,(k=w).undoManager.transact(()=>{k.focus(),k.formatter.remove(O,{value:null},void 0,!0),k.nodeChanged()})});const l=a5(a),m=i5(a),g=ho(l),f=ho(m);gw(a,"forecolor","forecolor",g),gw(a,"backcolor","hilitecolor",f),sk(a,"forecolor","forecolor","Text color",g),sk(a,"backcolor","hilitecolor","Background color",f)})(e),(a=>{var l;(l=a).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Kl(l,"mceToggleVisualAid")}),(l=>{l.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Ux(l),onAction:Kl(l,"mceToggleVisualAid")})})(a)})(e),(a=>{var l;(l=a).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:eu(l),onAction:Kl(l,"outdent")}),l.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:ki(l),onAction:Kl(l,"indent")})})(e),(e=>{var r;bm(e,{name:"lineheight",text:"Line height",icon:"line-height",getOptions:lS,hash:a=>{return(l=a,i(l,["fixed","relative","empty"]).map(({value:g,unit:f})=>g+f)).getOr(a);var l},display:ht,watcher:(a,l,m)=>a.formatter.formatChanged("lineheight",m,!1,{value:l}).unbind,getCurrent:a=>M.from(a.queryCommandValue("LineHeight")),setCurrent:(a,l)=>a.execCommand("LineHeight",!1,l),onToolbarSetup:ki(r=e),onMenuSetup:ki(r)}),(r=>M.from(C2(r)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:ie(a),hash:l=>kn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,m,g)=>{var f;return l.formatter.formatChanged("lang",g,!1,{value:m.code,customValue:null!==(f=m.customCode)&&void 0!==f?f:null}).unbind},getCurrent:l=>{const m=ue(l.selection.getNode());return Pp(m,g=>M.some(g).filter(rn).bind(f=>Ns(f,"lang").map(w=>({code:w,customCode:Ns(f,"data-mce-lang").getOrUndefined(),title:""}))))},setCurrent:(l,m)=>l.execCommand("Lang",!1,m),onToolbarSetup:l=>{const m=jg();return l.setActive(r.formatter.match("lang",{},void 0,!0)),m.set(r.formatter.formatChanged("lang",l.setActive,!0)),iw(m.clear,ki(r)(l))},onMenuSetup:ki(r)})))(e).each(r=>bm(e,r))})(e),(a=>{const l=ho(M2(a)),m=()=>a.execCommand("mceTogglePlainTextPaste");a.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:m,onSetup:Dp(a,l)}),a.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:m,onSetup:Dp(a,l)})})(e)})(e,j.popup),je(e,j.popup.shared.getSink,j.popup),(Xo=>{const{sidebars:xa}=Xo.ui.registry.getAll();Qt(Sr(xa),jr=>{const Rl=xa[jr],la=()=>os(M.from(Xo.queryCommandValue("ToggleSidebar")),jr);Xo.ui.registry.addToggleButton(jr,{icon:Rl.icon,tooltip:Rl.tooltip,onAction:Ai=>{Xo.execCommand("ToggleSidebar",!1,jr),Ai.setActive(la())},onSetup:Ai=>{Ai.setActive(la());const qc=()=>Ai.setActive(la());return Xo.on("ToggleSidebar",qc),()=>{Xo.off("ToggleSidebar",qc)}}})})})(e),((e,r,a)=>{const l=ho(!1),m=Ur(),g=w=>{var x;l.get()&&("focusin"!==(x=w).type||!(x.composed?Ar(x.composedPath()):M.from(x.target)).map(ue).filter(rn).exists(k=>Li(k,"mce-pastebin")))&&(w.preventDefault(),FO(r()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",()=>{e.dom.bind(e.getWin(),"focusin",g),e.on("BeforeExecCommand",w=>{"mcefocus"===w.command.toLowerCase()&&!0!==w.value&&g(w)})});const f=w=>{w!==l.get()&&(l.set(w),((x,k,O,A)=>{const D=k.element;if(((P,Z)=>{const te="tabindex",oe=`data-mce-${te}`;M.from(P.iframeElement).map(ue).each(ae=>{Z?(Ns(ae,te).each(X=>No(ae,oe,X)),No(ae,te,-1)):(Oo(ae,te),Ns(ae,oe).each(X=>{No(ae,te,X),Oo(ae,oe)}))})})(x,O),O)Qd.block(k,(P=>(Z,te)=>({dom:{tag:"div",attributes:{"aria-label":P.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:im('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(A)),Yn(D,"display"),Oo(D,"aria-hidden"),x.hasFocus()&&FO(k);else{const P=bn.getCurrent(k).exists(Z=>za(Z.element));Qd.unblock(k),Bo(D,"display","none"),No(D,"aria-hidden","true"),P&&x.focus()}})(e,r(),w,a.providers),e.dispatch("AfterProgressState",{state:w}))};e.on("ProgressState",w=>{if(m.on(clearTimeout),Nt(w.time)){const x=Mb.setEditorTimeout(e,()=>f(w.state),w.time);m.set(x)}else f(w.state),m.clear()})})(e,X,j.popup.shared),((e,r,a,l)=>{const m=l.backstage,g=m.shared,f=he().deviceType.isTouch,w=Ur(),x=Ur(),k=Ur(),O=di((me=>{const xe=ho([]);return _s.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:ze=>{xe.set([]),_s.getContent(ze).each(ot=>{Yn(ot.element,"visibility")}),ms(ze.element,Ti),Yn(ze.element,"width")},inlineBehaviours:Re([on("context-toolbar-events",[hu(Sm(),(ze,ot)=>{"width"===ot.event.raw.propertyName&&(ms(ze.element,Ti),Yn(ze.element,"width"))}),Qe(xc,(ze,ot)=>{const st=ze.element;Yn(st,"width");const nt=mr(st);_s.setContent(ze,ot.event.contents),Gn(st,Ti);const Ht=mr(st);Bo(st,"width",nt+"px"),_s.getContent(ze).each(Yt=>{ot.event.focus.bind(go=>(Ul(go),Hc(st))).orThunk(()=>(Kt.focusIn(Yt),Yi(Wn(st))))}),setTimeout(()=>{Bo(ze.element,"width",Ht+"px")},0)}),Qe(Ei,(ze,ot)=>{_s.getContent(ze).each(st=>{xe.set(xe.get().concat([{bar:st,focus:Yi(Wn(ze.element))}]))}),io(ze,xc,{contents:ot.event.forwardContents,focus:M.none()})}),Qe(ul,(ze,ot)=>{nr(xe.get()).each(st=>{xe.set(xe.get().slice(0,xe.get().length-1)),io(ze,xc,{contents:Tl(st.bar),focus:st.focus})})})]),Kt.config({mode:"special",onEscape:ze=>nr(xe.get()).fold(()=>me.onEscape(),ot=>(Hn(ze,ul),M.some(!0)))})]),lazySink:()=>pn.value(me.sink)})})({sink:a,onEscape:()=>(e.focus(),M.some(!0))})),A=()=>{const me=k.get().getOr("node"),xe=ti(me)?1:0;return Mn(e,g,me,xe)},D=()=>!(e.removed||f()&&m.isContextMenuOpen()),P=()=>{if(D()){const me=A(),xe=os(k.get(),"node")?(ze=e,w.get().filter(st=>Is(st)&&bo(st)).map(Gs).getOrThunk(()=>Cn(ze))):Cn(e);return me.height<=0||!lo(xe,me,.01)}var ze;return!0},Z=()=>{w.clear(),x.clear(),k.clear(),_s.hide(O)},te=()=>{if(_s.isOpen(O)){const me=O.element;Yn(me,"display"),P()?Bo(me,"display","none"):(x.set(0),_s.reposition(O))}},oe=me=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[me],behaviours:Re([Kt.config({mode:"acyclic"}),on("pop-dialog-wrap-events",[Br(xe=>{e.shortcuts.add("ctrl+F9","focus statusbar",()=>Kt.focusIn(xe))}),rd(xe=>{e.shortcuts.remove("ctrl+F9")})])])}),ae=ss(()=>((e,r)=>{const a={},l=[],m=[],g={},f={},w=Sr(e);return Qt(w,x=>{const k=e[x];var O,A,D;"contextform"===k.type?((O,A)=>{const D=lc(is("ContextForm",JA,A));a[O]=D,D.launch.map(P=>{g["form:"+O]={...A.launch,type:"contextformtogglebutton"===P.type?"togglebutton":"button",onAction:()=>{r(D)}}}),"editor"===D.scope?m.push(D):l.push(D),f[O]=D})(x,k):"contexttoolbar"===k.type&&(O=x,(D=A=k,is("ContextToolbar",J_,D)).each(P=>{"editor"===A.scope?m.push(P):l.push(P),f[O]=P}))}),{forms:a,inNodeScope:l,inEditorScope:m,lookupTable:f,formNavigators:g}})(r,me=>{const xe=X([me]);io(O,Ei,{forwardContents:oe(xe)})})),X=me=>{const{buttons:xe}=e.ui.registry.getAll(),ze={...xe,...ae().formNavigators},ot=L1(e)===zc.scrolling?zc.scrolling:zc.default,st=dn(St(me,nt=>"contexttoolbar"===nt.type?mo(e,{buttons:ze,toolbar:nt.items,allowToolbarGroups:!1},l.backstage,M.some(["form:"])):((e,r)=>{const a=e.label.fold(()=>({}),g=>({"aria-label":g})),l=pr(up.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:Re([Kt.config({mode:"special",onEnter:g=>m.findPrimary(g).map(f=>(gu(f),!0)),onLeft:(g,f)=>(f.cut(),M.none()),onRight:(g,f)=>(f.cut(),M.none())})])})),m=((g,f,w)=>{const x=St(f,k=>{return pr((O=g,D=w,"contextformtogglebutton"===(A=k).type?((P,Z,te)=>{const{primary:oe,...ae}=Z.original,X=lc(K_({...ae,type:"togglebutton",onAction:yt}));return ye(X,te,[Ho(P,Z)])})(O,A,D):((P,Z,te)=>{const{primary:oe,...ae}=Z.original,X=lc($2({...ae,type:"button",onAction:yt}));return Fe(X,te,[Ho(P,Z)])})(O,A,D)));var O,A,D});return{asSpecs:()=>St(x,k=>k.asSpec()),findPrimary:k=>hs(f,(O,A)=>O.primary?M.from(x[A]).bind(D=>D.getOpt(k)).filter(_o(Ro.isDisabled)):M.none())}})(l,e.commands,r);return[{title:M.none(),items:[l.asSpec()]},{title:M.none(),items:m.asSpecs()}]})(nt,g.providers)));return Dx({type:ot,uid:Jt("context-toolbar"),initGroups:st,onEscape:M.none,cyclicKeying:!0,providers:g.providers})},j=(me,xe)=>{if(le.cancel(),!D())return;const ze=X(me),ot=me[0].position,st=((Ht,Yt)=>{const go="node"===Ht?g.anchors.node(Yt):g.anchors.cursor(),Uo=($o=e,On=Ht,Qr=f(),Ls={lastElement:w.get,isReposition:()=>os(x.get(),0),getMode:()=>gi.getMode(a)},"line"===On?{bubble:gc(12,0,nn),layouts:{onLtr:()=>[$f],onRtl:()=>[xi]},overrides:Vn}:{bubble:gc(0,12,nn,1/12),layouts:Dn($o,Qr,Ls,On),overrides:Vn});var $o,On,Qr,Ls;return Zr(go,Uo)})(ot,xe);k.set(ot),x.set(1);const nt=O.element;Yn(nt,"display"),os(wn(xe,w.get(),se),!0)||(ms(nt,Cc),gi.reset(a,O)),_s.showWithinBounds(O,oe(ze),{anchor:st,transition:{classes:[Cc],mode:"placement"}},()=>M.some(A())),xe.fold(w.clear,w.set),P()&&Bo(nt,"display","none")};let ne=!1;const le=r0(()=>{!e.hasFocus()||e.removed||ne||(Li(O.element,Cc)?le.throttle():((me,xe)=>{const ze=ue(xe.getBody()),ot=nt=>se(nt,ze),st=ue(xe.selection.getNode());return ot(nt=st)||we(ze,nt)?((nt,Ht,Yt)=>{const go=Ts(nt,Ht);if(go.contextForms.length>0)return M.some({elem:nt,toolbars:[go.contextForms[0]]});{const Uo=Ts(nt,Yt);if(Uo.contextForms.length>0)return M.some({elem:nt,toolbars:[Uo.contextForms[0]]});if(go.contextToolbars.length>0||Uo.contextToolbars.length>0){const $o=(On=>{if(On.length<=1)return On;{const Qr=Xo=>zn(On,xa=>xa.position===Xo),Ls=Xo=>zt(On,xa=>xa.position===Xo),qo=Qr("selection"),Oi=Qr("node");if(qo||Oi){if(Oi&&qo){const Xo=Ls("node"),xa=St(Ls("selection"),jr=>({...jr,position:"node"}));return Xo.concat(xa)}return Ls(qo?"selection":"node")}return Ls("line")}})(go.contextToolbars.concat(Uo.contextToolbars));return M.some({elem:nt,toolbars:$o})}return M.none()}})(st,me.inNodeScope,me.inEditorScope).orThunk(()=>((nt,Ht,Yt)=>nt(Ht)?M.none():nl(Ht,go=>{if(rn(go)){const{contextToolbars:Uo,contextForms:$o}=Ts(go,Yt.inNodeScope),On=$o.length>0?$o:(Qr=>{if(Qr.length<=1)return Qr;{const Ls=qo=>Ue(Qr,Oi=>Oi.position===qo);return Ls("selection").orThunk(()=>Ls("node")).orThunk(()=>Ls("line")).map(qo=>qo.position).fold(()=>[],qo=>zt(Qr,Oi=>Oi.position===qo))}})(Uo);return On.length>0?M.some({elem:go,toolbars:On}):M.none()}return M.none()},nt))(ot,st,me)):M.none();var nt})(ae(),e).fold(Z,me=>{j(me.toolbars,M.some(me.elem))}))},17);e.on("init",()=>{e.on("remove",Z),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",te),e.on("click keyup focus SetContent",le.throttle),e.on(Yo,Z),e.on("contexttoolbar-show",me=>{const xe=ae();jt(xe.lookupTable,me.toolbarKey).each(ze=>{j([ze],ns(me.target!==e,me.target)),_s.getContent(O).each(Kt.focusIn)})}),e.on("focusout",me=>{Mb.setEditorTimeout(e,()=>{Hc(a.element).isNone()&&Hc(O.element).isNone()&&Z()},0)}),e.on("SwitchMode",()=>{e.mode.isReadOnly()&&Z()}),e.on("AfterProgressState",me=>{me.state?Z():e.hasFocus()&&le.throttle()}),e.on("dragstart",()=>{ne=!0}),e.on("dragend drop",()=>{ne=!1}),e.on("NodeChange",me=>{Hc(O.element).fold(le.throttle,yt)})})})(e,Uo,nt.sink,{backstage:j.popup}),((e,r)=>{const a=ho([]),l=ho([]),m=ho(!1),g=Ur(),f=Ur(),w=X=>{const j=Gs(X);return BN(A.getOpt(r),X,j.x,j.y,j.width,j.height)},x=X=>{const j=Gs(X);return BN(D.getOpt(r),X,j.right,j.bottom,j.width,j.height)},k=LN(()=>St(a.get(),X=>w(X)),g,X=>{f.get().each(j=>{e.dispatch("TableSelectorChange",{start:X,finish:j})})}),O=LN(()=>St(l.get(),X=>x(X)),f,X=>{g.get().each(j=>{e.dispatch("TableSelectorChange",{start:j,finish:X})})}),A=IN(k),D=IN(O),P=di(A.asSpec()),Z=di(D.asSpec()),te=(X,j,ne,le)=>{const me=ne(j);ay.snapTo(X,me),((xe,ze)=>{const nt=ze.dom.getBoundingClientRect();Yn(xe.element,"display");const Ht=Rt(ue(e.getBody())).dom.innerHeight;(nt[le]<0||nt[le]>Ht)&&Bo(xe.element,"display","none")})(X,j)},oe=X=>te(P,X,w,"top"),ae=X=>te(Z,X,x,"bottom");he().deviceType.isTouch()&&(e.on("TableSelectionChange",X=>{m.get()||(om(r,P),om(r,Z),m.set(!0)),g.set(X.start),f.set(X.finish),X.otherCells.each(j=>{a.set(j.upOrLeftCells),l.set(j.downOrRightCells),oe(X.start),ae(X.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",()=>{g.get().each(oe),f.get().each(ae)}),e.on("TableSelectionClear",()=>{m.get()&&(hc(P),hc(Z),m.set(!1)),g.clear(),f.clear()}))})(e,nt.sink);const Oi={targetNode:e.getElement(),height:le(st.outerContainer)};return l.render(e,ot,Ls,j.popup,Oi)})({popupUi:ze,dialogUi:xe,mainUi:me,uiMotherships:g.getUiMotherships()})}}},tM=ie([Xe("lazySink"),In("dragBlockClass"),Bs("getBounds",ys),Ie("useTabstopAt",fn),Ie("firstTabstop",0),Ie("eventOrder",{}),La("modalBehaviours",[Kt]),Hi("onExecute"),Jp("onEscape")]),lN={sketch:ht},oM=ie([It({name:"draghandle",overrides:(e,r)=>({behaviours:Re([ay.config({mode:"mouse",getTarget:a=>al(a,'[role="dialog"]').getOr(a),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(r,null,2)).message),getBounds:e.getDragBounds})])})}),_t({schema:[Xe("dom")],name:"title"}),_t({factory:lN,schema:[Xe("dom")],name:"close"}),_t({factory:lN,schema:[Xe("dom")],name:"body"}),It({factory:lN,schema:[Xe("dom")],name:"footer"}),vt({factory:{sketch:(e,r)=>({...e,dom:r.dom,components:r.components})},schema:[Ie("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ie("components",[])],name:"blocker"})]),hi=Si({name:"ModalDialog",configFields:tM(),partFields:oM(),factory:(e,r,a,l)=>{const m=Ur(),g=Jt("modal-events"),f={...e.eventOrder,[Oc()]:[g].concat(e.eventOrder["alloy.system.attached"]||[])};return{uid:e.uid,dom:e.dom,components:r,apis:{show:w=>{m.set(w);const x=e.lazySink(w).getOrDie(),k=l.blocker(),O=x.getSystem().build({...k,components:k.components.concat([Tl(w)]),behaviours:Re([Io.config({}),on("dialog-blocker-events",[hu(mu(),()=>{Qd.isBlocked(w)||Kt.focusIn(w)})])])});om(x,O),Kt.focusIn(w)},hide:w=>{m.clear(),xo(w.element).each(x=>{w.getSystem().getByDom(x).each(k=>{hc(k)})})},getBody:w=>ra(w,e,"body"),getFooter:w=>Jn(w,e,"footer"),setIdle:w=>{Qd.unblock(w)},setBusy:(w,x)=>{Qd.block(w,x)}},eventOrder:f,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:gs(e.modalBehaviours,[Ko.config({}),Kt.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),Qd.config({getRoot:m.get}),on(g,[Br(w=>{((x,k)=>{const O=Ns(x,"id").fold(()=>{const A=Jt("dialog-label");return No(k,"id",A),A},ht);No(x,"aria-labelledby",O)})(w.element,ra(w,e,"title").element)})])])}},apis:{show:(e,r)=>{e.show(r)},hide:(e,r)=>{e.hide(r)},getBody:(e,r)=>e.getBody(r),getFooter:(e,r)=>e.getFooter(r),setBusy:(e,r,a)=>{e.setBusy(r,a)},setIdle:(e,r)=>{e.setIdle(r)}}}),nM=Ct([sa,RS].concat(j1)),rM=tr,cN=[IS("button"),ei,Qc("align","end",["start","end"]),og,jn,xm("buttonType",["primary","secondary"])],FN=[...cN,Qa],dN=[cc("type",["submit","cancel","custom"]),...FN],sM=[cc("type",["menu"]),mp,U2,ei,zl("items",nM),...cN],aM=[...cN,cc("type",["togglebutton"]),Ln("tooltip"),ei,mp,Na("active",!1)],iM=Qi("type",{submit:dN,cancel:dN,custom:dN,menu:sM,togglebutton:aM}),lM=[sa,Qa,cc("level",["info","warn","error","success"]),q_,Ie("url","")],cM=Ct(lM),dM=[sa,Qa,jn,IS("button"),ei,Yd,xm("buttonType",["primary","secondary","toolbar"]),og],uM=Ct(dM),Gx=[sa,RS],wg=Gx.concat([LS]),mM=Gx.concat([MS,jn]),gM=Ct(mM),pM=tr,hM=wg.concat([rv("auto")]),fM=Ct(hM),bM=Qo([zh,Qa,q_]),vM=wg.concat([Sl("storageKey","default")]),yM=Ct(vM),wM=vr,xM=Ct(wg),CM=vr,SM=Gx.concat([Sl("tag","textarea"),Ln("scriptId"),Ln("scriptUrl"),Cl("settings",void 0,Wt)]),kM=Gx.concat([Sl("tag","textarea"),ba("init")]),_M=Vl(e=>is("customeditor.old",ao(kM),e).orThunk(()=>is("customeditor.new",ao(SM),e))),EM=vr,TM=Ct(wg),OM=Tn(Et),AM=e=>[sa,Hp("columns"),e],NM=[sa,Ln("html"),Qc("presets","presentation",["presentation","document"])],RM=Ct(NM),MM=wg.concat([Na("border",!1),Na("sandboxed",!0),Na("streamContent",!1),Na("transparent",!0)]),DM=Ct(MM),BM=vr,LM=Ct(Gx.concat([li("height")])),IM=Ct([Ln("url"),lu("zoom"),lu("cachedWidth"),lu("cachedHeight")]),HM=wg.concat([li("inputMode"),li("placeholder"),Na("maximized",!1),jn]),PM=Ct(HM),FM=vr,VM=e=>[sa,MS,e,Qc("align","start",["start","center","end"])],zM=[Qa,zh],ZM=[Qa,zl("items",kf(0,()=>VN))],VN=so([Ct(zM),Ct(ZM)]),UM=wg.concat([zl("items",VN),jn]),jM=Ct(UM),WM=vr,$M=wg.concat([Vu("items",[Qa,zh]),cu("size",1),jn]),qM=Ct($M),GM=vr,KM=wg.concat([Na("constrain",!0),jn]),YM=Ct(KM),zN=Ct([Ln("width"),Ln("height")]),XM=Gx.concat([MS,cu("min",0),cu("max",0)]),JM=Ct(XM),QM=er,e6=[sa,zl("header",vr),zl("cells",Tn(vr))],t6=Ct(e6),o6=wg.concat([li("placeholder"),Na("maximized",!1),jn]),n6=Ct(o6),r6=vr,ZN=[cc("type",["directory","leaf"]),Kd,Ln("id"),Md("menu",Q4)],UN=Ct(ZN),s6=ZN.concat([zl("children",kf(0,()=>wl("type",{directory:jN,leaf:UN})))]),jN=Ct(s6),a6=wl("type",{directory:jN,leaf:UN}),i6=[sa,zl("items",a6),Hs("onLeafAction"),Hs("onToggleExpand"),zu("defaultExpandedIds",[],vr),li("defaultSelectedId")],l6=Ct(i6),c6=wg.concat([Qc("filetype","file",["image","media","file"]),jn,li("picker_text")]),d6=Ct(c6),u6=Ct([zh,j2]),uN=e=>pt("items","items",{tag:"required",process:{}},Tn(Vl(r=>is(`Checking item of ${e}`,mN,r).fold(a=>pn.error(xl(a)),a=>pn.value(a))))),mN=to(()=>{return wl("type",{alertbanner:cM,bar:Ct((e=uN("bar"),[sa,e])),button:uM,checkbox:gM,colorinput:yM,colorpicker:xM,dropzone:TM,grid:Ct(AM(uN("grid"))),iframe:DM,input:PM,listbox:jM,selectbox:qM,sizeinput:YM,slider:JM,textarea:n6,urlinput:d6,customeditor:_M,htmlpanel:RM,imagepreview:LM,collection:fM,label:Ct(VM(uN("label"))),table:t6,tree:l6,panel:WN});var e}),m6=[sa,Ie("classes",[]),zl("items",mN)],WN=Ct(m6),g6=[IS("tab"),Kd,zl("items",mN)],p6=[sa,Vu("tabs",g6)],h6=Ct(p6),f6=FN,b6=iM,v6=Ct([Ln("title"),wi("body",wl("type",{panel:WN,tabpanel:h6})),Sl("size","normal"),zu("buttons",[],b6),Ie("initialData",{}),Bs("onAction",yt),Bs("onChange",yt),Bs("onSubmit",yt),Bs("onClose",yt),Bs("onCancel",yt),Bs("onTabChange",yt)]),y6=Ct([cc("type",["cancel","custom"]),...f6]),w6=Ct([Ln("title"),Ln("url"),lu("height"),lu("width"),Jc("buttons",y6),Bs("onAction",yt),Bs("onCancel",yt),Bs("onClose",yt),Bs("onMessage",yt)]),gN=e=>Ia(e)?[e].concat(Vt(_a(e),gN)):Or(e)?Vt(e,gN):[],x6=e=>Zo(e.type)&&Zo(e.name),C6={checkbox:pM,colorinput:wM,colorpicker:CM,dropzone:OM,input:FM,iframe:BM,imagepreview:IM,selectbox:GM,sizeinput:zN,slider:QM,listbox:WM,size:zN,textarea:r6,urlinput:u6,customeditor:EM,collection:bM,togglemenuitem:rM},S6=e=>{const r=zt(gN(e),x6),a=Vt(r,l=>{return(m=l,M.from(C6[m.type])).fold(()=>[],m=>[wi(l.name,m)]);var m});return Ct(a)},$N=e=>{var r;return{internalDialog:lc(is("dialog",v6,e)),dataValidator:S6(e),initialData:null!==(r=e.initialData)&&void 0!==r?r:{}}},iy={open:(e,r)=>{const a=$N(r);return e(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(e,r)=>e(lc(is("dialog",w6,r))),redial:e=>$N(e)};var k6=Object.freeze({__proto__:null,events:(e,r)=>{const a=(l,m)=>{e.updateState.each(g=>{const f=g(l,m);r.set(f)}),e.renderComponents.each(g=>{const f=g(m,r.get());(e.reuseDom?BC:u_)(l,f)})};return Dr([Qe(_m(),(l,m)=>{const g=m;g.universal||Do(g.channels,e.channel)&&a(l,g.data)}),Br((l,m)=>{e.initialData.each(g=>{a(l,g)})})])}}),_6=Object.freeze({__proto__:null,getState:(e,r,a)=>a}),E6=[Xe("channel"),In("renderComponents"),In("updateState"),In("initialData"),Na("reuseDom",!0)];const Td=Da({fields:E6,name:"reflecting",active:k6,apis:_6,state:Object.freeze({__proto__:null,init:()=>{const e=ho(M.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(M.none())}}})}),qN=e=>{const r=[],a={};return Nn(e,(l,m)=>{l.fold(()=>{r.push(m)},g=>{a[m]=g})}),r.length>0?pn.error(r):pn.value(a)},T6=(e,r,a)=>{const l=pr(xp.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:St(e.items,f=>eO(g,f,r,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[l.asSpec()]}],behaviours:Re([Kt.config({mode:"acyclic",useTabstopAt:_o(of)}),(m=l,bn.config({find:m.getOpt})),OT(l,{postprocess:g=>qN(g).fold(f=>(console.error(f),{}),ht)}),on("dialog-body-panel",[Qe(mu(),(g,f)=>{g.getSystem().broadcastOn([qw],{newFocus:M.some(f.event.target)})})])])};var m},O6=ql({name:"TabButton",configFields:[Ie("uid",void 0),Xe("value"),pt("dom","dom",re(()=>({attributes:{role:"tab",id:Jt("aria"),"aria-selected":"false"}})),xn()),In("action"),Ie("domModification",{}),La("tabButtonBehaviours",[Io,Kt,Ft]),Xe("view")],factory:(e,r)=>({uid:e.uid,dom:e.dom,components:e.components,events:N1(e.action),behaviours:gs(e.tabButtonBehaviours,[Io.config({}),Kt.config({mode:"execution",useSpace:!0,useEnter:!0}),Ft.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),A6=ie([Xe("tabs"),Xe("dom"),Ie("clickToDismiss",!1),La("tabbarBehaviours",[sr,Kt]),Yu(["tabClass","selectedClass"])]),N6=Eo({factory:O6,name:"tabs",unit:"tab",overrides:e=>{const r=(l,m)=>{sr.dehighlight(l,m),io(l,Af(),{tabbar:l,button:m})},a=(l,m)=>{sr.highlight(l,m),io(l,nd(),{tabbar:l,button:m})};return{action:l=>{const m=l.getSystem().getByUid(e.uid).getOrDie(),g=sr.isHighlighted(m,l);(g&&e.clickToDismiss?r:g?yt:a)(m,l)},domModification:{classes:[e.markers.tabClass]}}}}),R6=ie([N6]),GN=Si({name:"Tabbar",configFields:A6(),partFields:R6(),factory:(e,r,a,l)=>({uid:e.uid,dom:e.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:gs(e.tabbarBehaviours,[sr.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(m,g)=>{No(g.element,"aria-selected","true")},onDehighlight:(m,g)=>{No(g.element,"aria-selected","false")}}),Kt.config({mode:"flow",getInitial:m=>sr.getHighlighted(m).map(g=>g.element),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),M6=ql({name:"Tabview",configFields:[La("tabviewBehaviours",[Ko])],factory:(e,r)=>({uid:e.uid,dom:e.dom,behaviours:gs(e.tabviewBehaviours,[Ko.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),D6=ie([Ie("selectFirst",!0),Rn("onChangeTab"),Rn("onDismissTab"),Ie("tabs",[]),La("tabSectionBehaviours",[])]),B6=_t({factory:GN,schema:[Xe("dom"),xr("markers",[Xe("tabClass"),Xe("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),L6=_t({factory:M6,name:"tabview"}),I6=ie([B6,L6]),Kx=Si({name:"TabSection",configFields:D6(),partFields:I6(),factory:(e,r,a,l)=>{const m=(g,f)=>{Jn(g,e,"tabbar").each(w=>{f(w).each(gu)})};return{uid:e.uid,dom:e.dom,components:r,behaviours:_h(e.tabSectionBehaviours),events:Dr(dn([e.selectFirst?[Br((g,f)=>{m(g,sr.getFirst)})]:[],[Qe(nd(),(g,f)=>{(w=>{const x=Ft.getValue(w);Jn(w,e,"tabview").each(k=>{Ue(e.tabs,O=>O.value===x).each(O=>{const A=O.view();Ns(w.element,"id").each(D=>{No(k.element,"aria-labelledby",D)}),Ko.set(k,A),e.onChangeTab(k,w,A)})})})(f.event.button)}),Qe(Af(),(g,f)=>{e.onDismissTab(g,f.event.button)})]])),apis:{getViewItems:g=>Jn(g,e,"tabview").map(f=>Ko.contents(f)).getOr([]),showTab:(g,f)=>{m(g,w=>{const x=sr.getCandidates(w);return Ue(x,k=>Ft.getValue(k)===f).filter(k=>!sr.isHighlighted(w,k))})}}}},apis:{getViewItems:(e,r)=>e.getViewItems(r),showTab:(e,r,a)=>{e.showTab(r,a)}}}),KN=(e,r)=>{Bo(e,"height",r+"px"),Bo(e,"flex-basis",r+"px")},gA=(e,r,a)=>{al(e,'[role="dialog"]').each(l=>{Xr(l,'[role="tablist"]').each(m=>{a.get().map(g=>(Bo(r,"height","0"),Bo(r,"flex-basis","0"),Math.min(g,((f,w,x)=>{const k=lt(f).dom,O=al(f,".tox-dialog-wrap").getOr(f);let A;A="fixed"===cs(O,"position")?Math.max(k.clientHeight,window.innerHeight):Math.max(k.offsetHeight,k.scrollHeight);const D=ds(w),P=w.dom.offsetLeft>=x.dom.offsetLeft+mr(x)?Math.max(ds(x),D):D,Z=parseInt(cs(f,"margin-top"),10)||0,te=parseInt(cs(f,"margin-bottom"),10)||0;return A-(ds(f)+Z+te-P)})(l,r,m)))).each(g=>{KN(r,g)})})})},pN=e=>Xr(e,'[role="tabpanel"]'),YN="send-data-to-section",XN="send-data-to-view",H6=(e,r,a)=>{const l=ho({}),m=k=>{const O=Ft.getValue(k),A=qN(O).getOr({}),D=l.get(),P=Zr(D,A);l.set(P)},g=k=>{const O=l.get();Ft.setValue(k,O)},f=ho(null),w=St(e.tabs,k=>({value:k.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Yr(a.shared.providers.translate(k.title))],view:()=>[xp.sketch(O=>({dom:{tag:"div",classes:["tox-form"]},components:St(k.items,A=>eO(O,A,r,a)),formBehaviours:Re([Kt.config({mode:"acyclic",useTabstopAt:_o(of)}),on("TabView.form.events",[Br(g),rd(m)]),il.config({channels:Ps([{key:YN,value:{onReceive:m}},{key:XN,value:{onReceive:g}}])})])}))]})),x=(k=>{const O=Ur();return{extraEvents:[Br(D=>{const P=D.element;pN(P).each(Z=>{var oe;Bo(Z,"visibility","hidden"),D.getSystem().getByDom(Z).toOptional().each(te=>{var X,j,ne;(X=>Ar(ji(X,(j,ne)=>j>ne?-1:j<ne?1:0)))((j=Z,ne=te,St(X=k,(le,me)=>{Ko.set(ne,X[me].view());const xe=j.dom.getBoundingClientRect();return Ko.set(ne,[]),xe.height}))).fold(O.clear,O.set)}),gA(P,Z,O),Yn(Z,"visibility"),oe=D,Ar(k).each(ae=>Kx.showTab(oe,ae.value)),requestAnimationFrame(()=>{gA(P,Z,O)})})}),Qe(Tm(),D=>{const P=D.element;pN(P).each(Z=>{gA(P,Z,O)})}),Qe(vk,(D,P)=>{const Z=D.element;pN(Z).each(te=>{const oe=Yi(Wn(te));Bo(te,"visibility","hidden");const ae=rs(te,"height").map(j=>parseInt(j,10));Yn(te,"height"),Yn(te,"flex-basis");const X=te.dom.getBoundingClientRect().height;ae.forall(j=>X>j)?(O.set(X),gA(Z,te,O)):ae.each(j=>{KN(te,j)}),Yn(te,"visibility"),oe.each(Ul)})})],selectFirst:!1}})(w);return Kx.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(k,O,A)=>{const D=Ft.getValue(O);io(k,bk,{name:D,oldName:f.get()}),f.set(D)},tabs:w,components:[Kx.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[GN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Re([Es.config({})])}),Kx.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:x.selectFirst,tabSectionBehaviours:Re([on("tabpanel",x.extraEvents),Kt.config({mode:"acyclic"}),bn.config({find:k=>Ar(Kx.getViewItems(k))}),Jl(M.none(),k=>(k.getSystem().broadcastOn([YN],{}),l.get()),(k,O)=>{l.set(O),k.getSystem().broadcastOn([XN],{})})])})},JN=(e,r,a,l,m)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(g=>({id:g})).getOr({}),...m?{"aria-live":"polite"}:{}}},components:[],behaviours:Re([zw(0),Td.config({channel:`${RT}-${r}`,updateState:(g,f)=>M.some({isTabPanel:()=>"tabpanel"===f.body.type}),renderComponents:g=>{const f=g.body;return"tabpanel"===f.type?[H6(f,g.initialData,l)]:[T6(f,g.initialData,l)]},initialData:e})])}),P6=B1.deviceType.isTouch(),QN=(e,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,r]}),eR=(e,r)=>hi.parts.close(pi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:e,buttonBehaviours:Re([Es.config({})])})),tR=()=>hi.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),oR=(e,r)=>hi.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:im(`<p>${p2(r.translate(e))}</p>`)}]}]}),nR=e=>hi.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),rR=(e,r)=>[zi.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),zi.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],hN=e=>{const r="tox-dialog",a=r+"-wrap",l=a+"__backdrop",m=r+"__disable-scroll";return hi.sketch({lazySink:e.lazySink,onEscape:g=>(e.onEscape(g),M.some(!0)),useTabstopAt:g=>!of(g),firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[r].concat(e.extraClasses),styles:{position:"relative",...e.extraStyles}},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:im(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:P6?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:Re([Io.config({}),on("dialog-events",e.dialogEvents.concat([hu(mu(),(g,f)=>{Qd.isBlocked(g)||Kt.focusIn(g)}),Qe(Om(),(g,f)=>{g.getSystem().broadcastOn([qw],{newFocus:f.event.newFocus})})])),on("scroll-lock",[Br(()=>{Gn(Ri(),m)}),rd(()=>{ms(Ri(),m)})]),...e.extraBehaviours]),eventOrder:{[rl()]:["dialog-events"],[Oc()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Og()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...e.eventOrder}})},sR=e=>pi.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:Re([Es.config({})]),components:[vd("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:r=>{Hn(r,pm)}}),aR=(e,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(m=>({id:m})).getOr({})}},components:[],behaviours:Re([Td.config({channel:`${Jk}-${r}`,initialData:e,renderComponents:m=>[Yr(l.translate(m.title))]})])}),iR=()=>({dom:im('<div class="tox-dialog__draghandle"></div>')}),lR=(e,r,a)=>((l,m,g)=>{const f=hi.parts.title(aR(l,m,M.none(),g)),w=hi.parts.draghandle(iR()),x=hi.parts.close(sR(g)),k=[f].concat(l.draggable?[w]:[]).concat([x]);return zi.sketch({dom:im('<div class="tox-dialog__header"></div>'),components:k})})({title:a.shared.providers.translate(e),draggable:a.dialog.isDraggableModal()},r,a.shared.providers),cR=(e,r,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:im('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),dR=(e,r,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const m=Xr(e().element,".tox-dialog__header").map(g=>ds(g));hi.setBusy(e(),(g,f)=>cR(l.message,f,r,m))},onUnblock:()=>{hi.setIdle(e())}}),uR="tox-dialog--fullscreen",fN="tox-dialog--width-lg",bN="tox-dialog--width-md",pA=e=>{switch(e){case"large":return M.some(fN);case"medium":return M.some(bN);default:return M.none()}},mR=(e,r)=>{const a=ue(r.element.dom);Li(a,uR)||(ks(a,[fN,bN]),pA(e).each(l=>Gn(a,l)))},gR=(e,r)=>{const a=ue(e.element.dom),l=Ff(a),m=Ue(l,g=>g===fN||g===bN).or(pA(r));var g,f;g=a,f=[uR,...m.toArray()],Qt(f,w=>{var x,k,A,D;k=w,ad(x=g)?x.dom.classList.toggle(k):(D=k,Do(Lr(A=x),D)?id(A,D):B0(A,D)),Mm(x)})},pR=(e,r,a)=>di(hN({...e,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[dg({}),...e.extraBehaviours],onEscape:l=>{Hn(l,pm)},dialogEvents:r,eventOrder:{[_m()]:[Td.name(),il.name()],[Oc()]:["scroll-lock",Td.name(),"messages","dialog-events","alloy.base.behaviour"],[Og()]:["alloy.base.behaviour","dialog-events","messages",Td.name(),"scroll-lock"]}})),vN=(e,r={})=>St(e,a=>"menu"===a.type?(l=>{const m=St(l.items,g=>{const f=jt(r,g.name).getOr(ho(!1));return{...g,storage:f}});return{...l,items:m}})(a):a),hR=e=>no(e,(r,a)=>"menu"===a.type?no(a.items,(l,m)=>(l[m.name]=m.storage,l),r):r,{}),fR=(e,r)=>[pu(mu(),NT),e(t0,(a,l,m,g)=>{Yi(Wn(g.element)).fold(yt,q0),r.onClose(),l.onClose()}),e(pm,(a,l,m,g)=>{l.onCancel(a),Hn(g,t0)}),Qe(xw,(a,l)=>r.onUnblock()),Qe(Jh,(a,l)=>r.onBlock(l.event))],bR=(e,r,a)=>{const l=(g,f)=>Qe(g,(w,x)=>{m(w,(k,O)=>{f(e(),k,x.event,w)})}),m=(g,f)=>{Td.getState(g).get().each(w=>{f(w.internalDialog,g)})};return[...fR(l,r),l(ag,(g,f)=>f.onSubmit(g)),l(Yl,(g,f,w)=>{f.onChange(g,{name:w.name})}),l(Cd,(g,f,w,x)=>{const k=()=>x.getSystem().isConnected()?Kt.focusIn(x):void 0,O=P=>Sc(P,"disabled")||Ns(P,"aria-disabled").exists(Z=>"true"===Z),A=Wn(x.element),D=Yi(A);f.onAction(g,{name:w.name,value:w.value}),Yi(A).fold(k,P=>{O(P)||D.exists(Z=>we(P,Z)&&O(Z))?k():a().toOptional().filter(Z=>!we(Z.element,P)).each(k)})}),l(bk,(g,f,w)=>{f.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),rd(g=>{const f=e();Ft.setValue(g,f.getData())})]},F6=(e,r)=>{const a=r.map(g=>g.footerButtons).getOr([]),l=ri(a,g=>"start"===g.align),m=(g,f)=>zi.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${g}`]},components:St(f,w=>w.memento.asSpec())});return[m("start",l.pass),m("end",l.fail)]},vR=(e,r,a)=>({dom:im('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Re([Td.config({channel:`${$w}-${r}`,initialData:e,updateState:(l,m)=>{const g=St(m.buttons,f=>{const w=pr(zv(x=f,x.type,a));var x;return{name:f.name,align:f.align,memento:w}});return M.some({lookupByName:f=>{return w=l,k=f,Ue(g,O=>O.name===k).bind(O=>O.memento.getOpt(w));var w,k},footerButtons:g})},renderComponents:F6})])}),yR=(e,r,a)=>hi.parts.footer(vR(e,r,a)),wR=(e,r)=>{if(e.getRoot().getSystem().isConnected()){const a=bn.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return xp.getField(a,r).orThunk(()=>e.getFooter().bind(m=>Td.getState(m).get()).bind(m=>m.lookupByName(r)))}return M.none()},xR=(e,r,a)=>{const l=g=>{const f=e.getRoot();f.getSystem().isConnected()&&g(f)},m={getData:()=>{const g=e.getRoot(),f=g.getSystem().isConnected()?e.getFormWrapper():g;return{...Ft.getValue(f),...Zn(a,w=>w.get())}},setData:g=>{l(f=>{const w=m.getData(),x=Zr(w,g),k=((A,D)=>{const P=A.getRoot();return Td.getState(P).get().map(Z=>lc(is("data",Z.dataValidator,D))).getOr(D)})(e,x),O=e.getFormWrapper();Ft.setValue(O,k),Nn(a,(A,D)=>{Fo(x,D)&&A.set(x[D])})})},setEnabled:(g,f)=>{wR(e,g).each(f?Ro.enable:Ro.disable)},focus:g=>{wR(e,g).each(Io.focus)},block:g=>{if(!Zo(g))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(f=>{io(f,Jh,{message:g})})},unblock:()=>{l(g=>{Hn(g,xw)})},showTab:g=>{l(f=>{const w=e.getBody();Td.getState(w).get().exists(x=>x.isTabPanel())&&bn.getCurrent(w).each(x=>{Kx.showTab(x,g)})})},redial:g=>{l(f=>{const w=e.getId(),x=r(g),k=vN(x.internalDialog.buttons,a);f.getSystem().broadcastOn([`${Ww}-${w}`],x),f.getSystem().broadcastOn([`${Jk}-${w}`],x.internalDialog),f.getSystem().broadcastOn([`${RT}-${w}`],x.internalDialog),f.getSystem().broadcastOn([`${$w}-${w}`],{...x.internalDialog,buttons:k}),m.setData(x.initialData)})},close:()=>{l(g=>{Hn(g,t0)})},toggleFullscreen:e.toggleFullscreen};return m},CR=(e,r,a,l=!1,m)=>{const g=Jt("dialog"),f=Jt("dialog-label"),w=Jt("dialog-content"),x=e.internalDialog,k=ho(x.size),O=pA(k.get()).toArray(),A=pr((j={title:x.title,draggable:!0},ne=g,le=f,me=a.shared.providers,zi.sketch({dom:im('<div class="tox-dialog__header"></div>'),components:[aR(j,ne,M.some(le),me),iR(),sR(me)],containerBehaviours:Re([ay.config({mode:"mouse",blockerClass:"blocker",getTarget:xe=>uc(xe,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),D=pr(((j,ne,le,me,xe)=>JN(j,ne,M.some(le),me,xe))({body:x.body,initialData:x.initialData},g,w,a,l)),P=vN(x.buttons),Z=hR(P),te=ns(0!==P.length,pr(((j,ne,le)=>vR(j,ne,le))({buttons:P},g,a))),oe=bR(()=>X,{onBlock:j=>{Qd.block(ae,(ne,le)=>{const me=A.getOpt(ae).map(xe=>ds(xe.element));return cR(j.message,le,a.shared.providers,me)})},onUnblock:()=>{Qd.unblock(ae)},onClose:()=>r.closeWindow()},a.shared.getSink),ae=di({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...O],attributes:{role:"dialog","aria-labelledby":f}},eventOrder:{[_m()]:[Td.name(),il.name()],[rl()]:["execute-on-form"],[Oc()]:["reflecting","execute-on-form"]},behaviours:Re([Kt.config({mode:"cyclic",onEscape:j=>(Hn(j,t0),M.some(!0)),useTabstopAt:j=>!of(j)&&("button"!==Dt(j)||"disabled"!==qr(j,"disabled")),firstTabstop:1}),Td.config({channel:`${Ww}-${g}`,updateState:(j,ne)=>(k.set(ne.internalDialog.size),mR(ne.internalDialog.size,j),m(),M.some(ne)),initialData:e}),Io.config({}),on("execute-on-form",oe.concat([hu(mu(),(j,ne)=>{Kt.focusIn(j)}),Qe(Om(),(j,ne)=>{j.getSystem().broadcastOn([qw],{newFocus:ne.event.newFocus})})])),Qd.config({getRoot:()=>M.some(ae)}),Ko.config({}),dg({})]),components:[A.asSpec(),D.asSpec(),...te.map(j=>j.asSpec()).toArray()]}),X=xR({getId:ie(g),getRoot:ie(ae),getFooter:()=>te.map(j=>j.get(ae)),getBody:()=>D.get(ae),getFormWrapper:()=>{const j=D.get(ae);return bn.getCurrent(j).getOr(j)},toggleFullscreen:()=>{gR(ae,k.get())}},r.redial,Z);var j,ne,le,me;return{dialog:ae,instanceApi:X}};var yN=tinymce.util.Tools.resolve("tinymce.util.URI");const V6=["insertContent","setContent","execCommand","close","block","unblock"],SR=e=>Ia(e)&&-1!==V6.indexOf(e.mceAction),kR=(e,r)=>lc(is("data",r,e)),_R=e=>Q1(e,".tox-alert-dialog")||Q1(e,".tox-confirm-dialog"),Z6=(e,r,a)=>r&&a?[]:[Js.config({contextual:{lazyContext:()=>M.some(Ds(ue(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>fp(e,l.element).map(m=>({bounds:bp(m),optScrollEnv:M.some({currentScrollTop:m.element.dom.scrollTop,scrollElmTop:si(m.element).top})})).getOrThunk(()=>({bounds:ys(),optScrollEnv:M.none()}))})];ac.add("silver",e=>{var f;eS(f=e),(w=>{const x=w.options.register,k=A=>Wr(A,Zo)?{value:uw(A),valid:!0}:{valid:!1,message:"Must be an array of strings."},O=A=>Nt(A)&&A>0?{value:A,valid:!0}:{valid:!1,message:"Must be a positive number."};x("color_map",{processor:k,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),x("color_map_background",{processor:k}),x("color_map_foreground",{processor:k}),x("color_cols",{processor:O,default:mv(w)}),x("color_cols_foreground",{processor:O,default:QS(w,cw)}),x("color_cols_background",{processor:O,default:QS(w,dw)}),x("custom_colors",{processor:"boolean",default:!0}),x("color_default_foreground",{processor:"string",default:Gh}),x("color_default_background",{processor:"string",default:Gh})})(f),(w=>{const x=w.options.register;x("contextmenu_avoid_overlap",{processor:"string",default:""}),x("contextmenu_never_use_native",{processor:"boolean",default:!1}),x("contextmenu",{processor:k=>!1===k?{value:[],valid:!0}:Zo(k)||Wr(k,Zo)?{value:Fu(k),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(f);let r=()=>ys();const{dialogs:a,popups:l,renderUI:m}=eM(e,{getPopupSinkBounds:()=>r()});((e,r)=>{const a=Jt("autocompleter"),l=ho(!1),m=ho(!1),g=di(_s.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Re([on("dismissAutocompleter",[Qe(Pd(),()=>O()),Qe(Am(),(P,Z)=>{Ns(Z.event.target,"id").each(te=>No(ue(e.getBody()),"aria-activedescendant",te))})])]),lazySink:r.getSink})),f=()=>_s.isOpen(g),w=m.get,x=()=>{if(f()){_s.hide(g),e.dom.remove(a,!1);const P=ue(e.getBody());Ns(P,"aria-owns").filter(Z=>Z===a).each(()=>{Oo(P,"aria-owns"),Oo(P,"aria-activedescendant")})}},k=()=>_s.getContent(g).bind(P=>ps(P.components(),0)),O=()=>e.execCommand("mceAutocompleterClose"),A=P=>{const Z=(te=>{const oe=hs(te,ae=>M.from(ae.columns)).getOr(1);return Vt(te,ae=>((e,r,a,l,m,g,f)=>{const w=1===l,x=!w||z1(e);return Ot(St(e,k=>{switch(k.type){case"separator":return(O=k,is("Autocompleter.Separator",W2,O)).fold(tg,A=>M.some(pw(A)));case"cardmenuitem":return(A=k,is("cardmenuitem",t5,A)).fold(tg,A=>M.some(((D,P,Z,te)=>{const oe={dom:jS(D.label),optComponents:[M.some({dom:{tag:"div",classes:[bS,vS]},components:WS(D.items,te)})]};return K1({data:sg({text:M.none(),...D}),enabled:D.enabled,getApi:ae=>({isEnabled:()=>!Ro.isDisabled(ae),setEnabled:X=>{Ro.set(ae,!X),Qt(Fi(ae.element,"*"),j=>{ae.getSystem().getByDom(j).each(ne=>{ne.hasConfigured(Ro)&&Ro.set(ne,!X)})})}}),onAction:D.onAction,onSetup:D.onSetup,triggersSubmenu:!1,itemBehaviours:M.from(te.itemBehaviours).getOr([])},oe,P,Z.providers)})({...A,onAction:D=>{A.onAction(D),a(A.value,A.meta)}},m,g,{itemBehaviours:tw(A.meta,g),cardText:{matchText:r,highlightOn:f}})));default:return(A=>is("Autocompleter.Item",qA,A))(k).fold(tg,A=>M.some(((D,P,Z,te,oe,ae,X,j=!0)=>{const ne=Uh({presets:"normal",textContent:M.none(),htmlContent:Z?D.text.map(le=>cv(le,P)):M.none(),ariaLabel:D.text,iconContent:D.icon,shortcutContent:M.none(),checkMark:M.none(),caret:M.none(),value:D.value},X.providers,j,D.icon);return K1({data:sg(D),enabled:D.enabled,getApi:ie({}),onAction:le=>oe(D.value,D.meta),onSetup:ie(yt),triggersSubmenu:!1,itemBehaviours:tw(D.meta,X)},ne,ae,X.providers)})(A,r,w,0,a,m,g,x)))}var A,O}))})(ae.items,ae.matchText,(j,ne)=>{const le=e.selection.getRng();var me,xe;(me=e.dom,xe=le,gS(ue(xe.startContainer)).map(ze=>{const ot=me.createRng();return ot.selectNode(ze.dom),ot})).each(me=>{const xe={hide:()=>O(),reload:ze=>{x(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:ze})}};l.set(!0),ae.onAction(xe,me,j,ne),l.set(!1)})},oe,Nu.BUBBLE_TO_SANDBOX,r,ae.highlightOn))})(P);var te,oe,ae;Z.length>0?(te=P,oe=Z,(ae=ue(e.getBody()),Xr(ae,mS)).each(X=>{const j=hs(te,ne=>M.from(ne.columns)).getOr(1);_s.showMenuAt(g,{anchor:{type:"node",root:ue(e.getBody()),node:M.from(X)}},((ne,le,me,xe)=>{const ze=pv(le,xe),ot=Ru(xe);return{data:bw({...ne,movement:ze,menuBehaviours:av("auto"!==le?[]:[Br((st,nt)=>{K2(st,4,ot.item).each(({numColumns:Ht,numRows:Yt})=>{Kt.setGridSize(st,Yt,Ht)})})])}),menu:{markers:Ru(xe),fakeFocus:me===X1.ContentFocus}}})(Z2("autocompleter-value",!0,oe,j,{menuType:"normal"}),j,X1.ContentFocus,"normal"))}),k().each(sr.highlightFirst),No(ue(e.getBody()),"aria-owns",a),e.inline||D()):x()},D=()=>{e.dom.get(a)&&e.dom.remove(a,!1);const P=e.getDoc().documentElement,Z=e.selection.getNode(),te=Wu(g.element,!0);wt(te,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${Z.offsetTop}px`,left:`${Z.offsetLeft}px`}),e.dom.add(P,te.dom),Xr(te,'[role="menu"]').each(oe=>{Yn(oe,"position"),Yn(oe,"max-height")})};e.on("AutocompleterStart",({lookupData:P})=>{m.set(!0),l.set(!1),A(P)}),e.on("AutocompleterUpdate",({lookupData:P})=>A(P)),e.on("AutocompleterEnd",()=>{x(),m.set(!1),l.set(!1)}),((P,Z)=>{const te=(ae,X)=>{io(ae,_l(),{raw:X})},oe=()=>P.getMenu().bind(sr.getHighlighted);Z.on("keydown",ae=>{const X=ae.which;P.isActive()&&(P.isMenuOpen()?13===X?(oe().each(gu),ae.preventDefault()):40===X?(oe().fold(()=>{P.getMenu().each(sr.highlightFirst)},j=>{te(j,ae)}),ae.preventDefault(),ae.stopImmediatePropagation()):37!==X&&38!==X&&39!==X||oe().each(j=>{te(j,ae),ae.preventDefault(),ae.stopImmediatePropagation()}):13!==X&&38!==X&&40!==X||P.cancelIfNecessary())}),Z.on("NodeChange",ae=>{P.isActive()&&!P.isProcessingAction()&&gS(ue(ae.element)).isNone()&&P.cancelIfNecessary()})})({cancelIfNecessary:O,isMenuOpen:f,isActive:w,isProcessingAction:l.get,getMenu:k},e)})(e,l.backstage.shared);const g=(e=>{const r=e.editor,a=F1(r),l=(x=>{const k=x.shared;return{open:(O,A)=>{const D=()=>{hi.hide(oe),A()},P=pr(zv({name:"close-alert",text:"OK",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"cancel",x)),Z=tR(),te=eR(D,k.providers),oe=di(hN({lazySink:()=>k.getSink(),header:QN(Z,te),body:oR(O,k.providers),footer:M.some(nR(rR([],[P.asSpec()]))),onEscape:D,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qe(pm,D)],eventOrder:{}}));hi.show(oe);const ae=P.get(oe);Io.focus(ae)}}})(e.backstages.dialog),m=(x=>{const k=x.shared;return{open:(O,A)=>{const D=j=>{hi.hide(ae),A(j)},P=pr(zv({name:"yes",text:"Yes",primary:!0,buttonType:M.some("primary"),align:"end",enabled:!0,icon:M.none()},"submit",x)),Z=zv({name:"no",text:"No",primary:!1,buttonType:M.some("secondary"),align:"end",enabled:!0,icon:M.none()},"cancel",x),te=tR(),oe=eR(()=>D(!1),k.providers),ae=di(hN({lazySink:()=>k.getSink(),header:QN(te,oe),body:oR(O,k.providers),footer:M.some(nR(rR([],[Z,P.asSpec()]))),onEscape:()=>D(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Qe(pm,()=>D(!1)),Qe(ag,()=>D(!0))],eventOrder:{}}));hi.show(ae);const X=P.get(ae);Io.focus(X)}}})(e.backstages.dialog),f=(x,k,O,A)=>iy.open((D,P,Z)=>{const te=kR(P,Z),oe=Ur(),ae=e.backstages.popup.shared.header.isPositionedAtTop(),X=()=>oe.on(le=>{_s.reposition(le),a&&ae||Js.refresh(le)}),j=CR({dataValidator:Z,initialData:te,internalDialog:D},{redial:iy.redial,closeWindow:()=>{oe.on(_s.hide),r.off("ResizeEditor",X),oe.clear(),O(j.instanceApi)}},e.backstages.popup,A.ariaAttrs,X),ne=di(_s.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:A.persistent?{event:"doNotDismissYet"}:{},...ae?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Re([on("window-manager-inline-events",[Qe(Pd(),(le,me)=>{Hn(j.dialog,pm)})]),...Z6(r,a,ae)]),isExtraPart:(le,me)=>_R(me)}));return oe.set(ne),_s.showWithinBounds(ne,Tl(j.dialog),{anchor:k},()=>{const le=r.inline?Ri():ue(r.getContainer()),me=Ds(le);return M.some(me)}),a&&ae||(Js.refresh(ne),r.on("ResizeEditor",X)),j.instanceApi.setData(te),Kt.focusIn(j.dialog),j.instanceApi},x);return{open:(x,k,O)=>{if(!kn(k)){if("toolbar"===k.inline)return f(x,e.backstages.popup.shared.anchors.inlineDialog(),O,k);if("bottom"===k.inline)return((x,k,O,A)=>iy.open((D,P,Z)=>{const te=kR(P,Z),oe=Ur(),ae=e.backstages.popup.shared.header.isPositionedAtTop(),X=()=>oe.on(le=>{_s.reposition(le),Js.refresh(le)}),j=CR({dataValidator:Z,initialData:te,internalDialog:D},{redial:iy.redial,closeWindow:()=>{oe.on(_s.hide),r.off("ResizeEditor ScrollWindow ElementScroll",X),oe.clear(),O(j.instanceApi)}},e.backstages.popup,A.ariaAttrs,X),ne=di(_s.sketch({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:A.persistent?{event:"doNotDismissYet"}:{},...ae?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Re([on("window-manager-inline-events",[Qe(Pd(),(le,me)=>{Hn(j.dialog,pm)})]),Js.config({contextual:{lazyContext:()=>M.some(Ds(ue(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:le=>fp(r,le.element).map(me=>({bounds:bp(me),optScrollEnv:M.some({currentScrollTop:me.element.dom.scrollTop,scrollElmTop:si(me.element).top})})).getOrThunk(()=>({bounds:ys(),optScrollEnv:M.none()}))})]),isExtraPart:(le,me)=>_R(me)}));return oe.set(ne),_s.showWithinBounds(ne,Tl(j.dialog),{anchor:k},()=>e.backstages.popup.shared.getSink().toOptional().bind(le=>{const me=fp(r,le.element).map(ot=>bp(ot)).getOr(ys()),xe=Ds(ue(r.getContentAreaContainer())),ze=sc(xe,me);return M.some(Gr(ze.x,ze.y,ze.width,ze.height-15))})),Js.refresh(ne),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",X),j.instanceApi.setData(te),Kt.focusIn(j.dialog),j.instanceApi},x))(x,e.backstages.popup.shared.anchors.inlineBottomDialog(),O,k);if("cursor"===k.inline)return f(x,e.backstages.popup.shared.anchors.cursor(),O,k)}return((x,k)=>iy.open((O,A,D)=>{const P=A,Z=((te,oe,ae)=>{const X=Jt("dialog"),j=te.internalDialog,ne=lR(j.title,X,ae),le=ho(j.size),me=pA(le.get()).toArray(),xe=(($o,On,Qr)=>{const Ls=JN($o,On,M.none(),Qr,!1);return hi.parts.body(Ls)})({body:j.body,initialData:j.initialData},X,ae),ze=vN(j.buttons),ot=hR(ze),st=ns(0!==ze.length,yR({buttons:ze},X,ae)),nt=bR(()=>Uo,dR(()=>Yt,ae.shared.providers,oe),ae.shared.getSink),Ht={id:X,header:ne,body:xe,footer:st,extraClasses:me,extraBehaviours:[Td.config({channel:`${Ww}-${X}`,updateState:($o,On)=>(le.set(On.internalDialog.size),mR(On.internalDialog.size,$o),M.some(On)),initialData:te})],extraStyles:{}},Yt=pR(Ht,nt,ae),go={getId:ie(X),getRoot:ie(Yt),getBody:()=>hi.getBody(Yt),getFooter:()=>hi.getFooter(Yt),getFormWrapper:()=>{const $o=hi.getBody(Yt);return bn.getCurrent($o).getOr($o)},toggleFullscreen:()=>{gR(Yt,le.get())}},Uo=xR(go,oe.redial,ot);return{dialog:Yt,instanceApi:Uo}})({dataValidator:D,initialData:P,internalDialog:O},{redial:iy.redial,closeWindow:()=>{hi.hide(Z.dialog),k(Z.instanceApi)}},e.backstages.dialog);return hi.show(Z.dialog),Z.instanceApi.setData(P),Z.instanceApi},x))(x,O)},openUrl:(x,k)=>{return A=k,iy.openUrl(D=>{const P=((e,r,a,l)=>{const m=Jt("dialog"),g=lR(e.title,m,l),f=(ae=>{const X={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Xk(M.none(),{dom:{tag:"iframe",attributes:{src:ae.url}},behaviours:Re([Es.config({}),Io.config({})])})]}],behaviours:Re([Kt.config({mode:"acyclic",useTabstopAt:_o(of)})])};return hi.parts.body(X)})(e),w=e.buttons.bind(ae=>0===ae.length?M.none():M.some(yR({buttons:ae},m,l))),x=((ae,X)=>{const j=(le,me)=>Qe(le,(xe,ze)=>{ne(xe,(ot,st)=>{me(oe,ot,ze.event,xe)})}),ne=(le,me)=>{Td.getState(le).get().each(xe=>{me(xe,le)})};return[...fR(j,X),j(Cd,(le,me,xe)=>{me.onAction(le,{name:xe.name})})]})(0,dR(()=>te,l.shared.providers,r)),k={...e.height.fold(()=>({}),ae=>({height:ae+"px","max-height":ae+"px"})),...e.width.fold(()=>({}),ae=>({width:ae+"px","max-width":ae+"px"}))},O=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],A=new yN(e.url,{base_uri:new yN(window.location.href)}),D=`${A.protocol}://${A.host}${A.port?":"+A.port:""}`,P=jg(),Z=[Td.config({channel:`${Ww}-${m}`,updateState:(ae,X)=>M.some(X),initialData:e}),on("messages",[Br(()=>{const ae=Pi(ue(window),"message",X=>{if(A.isSameOrigin(new yN(X.raw.origin))){const j=X.raw.data;SR(j)?((ne,le,me)=>{switch(me.mceAction){case"insertContent":ne.insertContent(me.content);break;case"setContent":ne.setContent(me.content);break;case"execCommand":const xe=!!ua(me.ui)&&me.ui;ne.execCommand(me.cmd,xe,me.value);break;case"close":le.close();break;case"block":le.block(me.message);break;case"unblock":le.unblock()}})(a,oe,j):!SR(ne=j)&&Ia(ne)&&Fo(ne,"mceAction")&&e.onMessage(oe,j)}var ne});P.set(ae)}),rd(P.clear)]),il.config({channels:{[Qk]:{onReceive:(ae,X)=>{Xr(ae.element,"iframe").each(j=>{const ne=j.dom.contentWindow;rt(ne)&&ne.postMessage(X,D)})}}}})],te=pR({id:m,header:g,body:f,footer:w,extraClasses:O,extraBehaviours:Z,extraStyles:k},x,l),oe=(ae=>{const X=j=>{ae.getSystem().isConnected()&&j(ae)};return{block:j=>{if(!Zo(j))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");X(ne=>{io(ne,Jh,{message:j})})},unblock:()=>{X(j=>{Hn(j,xw)})},close:()=>{X(j=>{Hn(j,t0)})},sendMessage:j=>{X(ne=>{ne.getSystem().broadcastOn([Qk],j)})}}})(te);return{dialog:te,instanceApi:oe}})(D,{closeWindow:()=>{hi.hide(P.dialog),A(P.instanceApi)}},r,e.backstages.dialog);return hi.show(P.dialog),P.instanceApi},x);var A},alert:(x,k)=>{l.open(x,k)},close:x=>{x.close()},confirm:(x,k)=>{m.open(x,k)}}})({editor:e,backstages:{popup:l.backstage,dialog:a.backstage}});return{renderUI:()=>{const f=m();return fp(e,l.getMothership().element).each(w=>{r=()=>bp(w)}),f},getWindowManagerImpl:ie(g),getNotificationManagerImpl:()=>((f,w,x)=>{const k=w.backstage.shared,O=()=>{const A=Ds(ue(f.getContentAreaContainer())),D=ys(),P=Al(D.x,A.x,A.right),Z=Al(D.y,A.y,A.bottom),te=Math.max(A.right,D.right),oe=Math.max(A.bottom,D.bottom);return M.some(Gr(P,Z,te-P,oe-Z))};return{open:(A,D)=>{const P=()=>{D(),_s.hide(te)},Z=di(D1.sketch({text:A.text,level:Do(["success","error","warning","warn","info"],A.type)?A.type:void 0,progress:!0===A.progressBar,icon:A.icon,closeButton:A.closeButton,onAction:P,iconProvider:k.providers.icons,translationProvider:k.providers.translate})),te=di(_s.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:k.getSink,fireDismissalEventInstead:{},...k.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));x.add(te),Nt(A.timeout)&&A.timeout>0&&Mb.setEditorTimeout(f,()=>{P()},A.timeout);const oe={close:P,reposition:()=>{const ae=Tl(Z),X={maxHeightFunction:Qu()},j=f.notificationManager.getNotifications();if(j[0]===oe){const ne={...k.anchors.banner(),overrides:X};_s.showWithinBounds(te,ae,{anchor:ne},O)}else $r(j,oe).each(ne=>{const le=j[ne-1].getEl(),me={type:"node",root:Ri(),node:M.some(ue(le)),overrides:X,layouts:{onRtl:()=>[ya],onLtr:()=>[ya]}};_s.showWithinBounds(te,ae,{anchor:me},O)})},text:ae=>{D1.updateText(Z,ae)},settings:A,getEl:()=>Z.element.dom,progressBar:{value:ae=>{D1.updateProgress(Z,ae)}}};return oe},close:A=>{A.close()},getArgs:A=>A.settings}})(e,{backstage:l.backstage},l.getMothership())}})}(),function(){"use strict";var Od=tinymce.util.Tools.resolve("tinymce.PluginManager");const $a=Object.getPrototypeOf,fi=(se,we,Ve)=>{var gt;return!!Ve(se,we.prototype)||(null===(gt=se.constructor)||void 0===gt?void 0:gt.name)===we.name},Sa=se=>we=>(Ve=>{const gt=typeof Ve;return null===Ve?"null":"object"===gt&&Array.isArray(Ve)?"array":"object"===gt&&fi(Ve,String,(lt,Rt)=>Rt.isPrototypeOf(lt))?"string":gt})(we)===se,da=se=>we=>typeof we===se,Zo=Sa("string"),Ia=Sa("object"),Us=se=>{return we=se,Ve=Object,Ia(we)&&fi(we,Ve,(gt,lt)=>$a(gt)===lt);var we,Ve},Or=Sa("array"),ua=da("boolean"),kn=se=>!(null==se),Xt=da("function"),rt=da("number"),Ut=()=>{};class Nt{constructor(we,Ve){this.tag=we,this.value=Ve}static some(we){return new Nt(!0,we)}static none(){return Nt.singletonNone}fold(we,Ve){return this.tag?Ve(this.value):we()}isSome(){return this.tag}isNone(){return!this.tag}map(we){return this.tag?Nt.some(we(this.value)):Nt.none()}bind(we){return this.tag?we(this.value):Nt.none()}exists(we){return this.tag&&we(this.value)}forall(we){return!this.tag||we(this.value)}filter(we){return!this.tag||we(this.value)?this:Nt.none()}getOr(we){return this.tag?this.value:we}or(we){return this.tag?this:we}getOrThunk(we){return this.tag?this.value:we()}orThunk(we){return this.tag?this:we()}getOrDie(we){if(this.tag)return this.value;throw new Error(we??"Called getOrDie on None")}static from(we){return kn(we)?Nt.some(we):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(we){this.tag&&we(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const Wr=Object.keys,yt=Object.hasOwnProperty,Bt=(se,we)=>yt.call(se,we),yr=Array.prototype.push,ie=se=>{const we=[];for(let Ve=0,gt=se.length;Ve<gt;++Ve){if(!Or(se[Ve]))throw new Error("Arr.flatten item "+Ve+" was not an array, input: "+se);yr.apply(we,se[Ve])}return we};typeof window<"u"||Function("return this;")();const ht=(se,we,Ve)=>{((gt,lt,Rt)=>{if(!(Zo(Rt)||ua(Rt)||rt(Rt)))throw console.error("Invalid call to Attribute.set. Key ",lt,":: Value ",Rt,":: Element ",gt),new Error("Attribute value was not simple");gt.setAttribute(lt,Rt+"")})(se.dom,we,Ve)},hr=se=>{if(null==se)throw new Error("Node cannot be null or undefined");return{dom:se}};var _o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),zr=tinymce.util.Tools.resolve("tinymce.util.URI");const Er=se=>se.length>0,Ke=se=>we=>we.options.get(se),fn=Ke("image_dimensions"),M=Ke("image_advtab"),at=Ke("image_uploadtab"),bi=Ke("image_prepend_url"),Kn=Ke("image_class_list"),Cr=Ke("image_description"),$r=Ke("image_title"),Do=Ke("image_caption"),zn=Ke("image_list"),$=Ke("a11y_advanced_options"),yn=Ke("automatic_uploads"),St=(se,we)=>Math.max(parseInt(se,10),parseInt(we,10)),Qt=se=>(se&&(se=se.replace(/px$/,"")),se),ri=se=>(se.length>0&&/^[0-9]+$/.test(se)&&(se+="px"),se),zt=se=>"IMG"===se.nodeName&&(se.hasAttribute("data-mce-object")||se.hasAttribute("data-mce-placeholder")),Bn=(se,we)=>{const Ve=se.options.get;return zr.isDomSafe(we,"img",{allow_html_data_urls:Ve("allow_html_data_urls"),allow_script_urls:Ve("allow_script_urls"),allow_svg_data_urls:Ve("allow_svg_data_urls")})},no=_o.DOM,Ue=se=>se.style.marginLeft&&se.style.marginRight&&se.style.marginLeft===se.style.marginRight?Qt(se.style.marginLeft):"",ma=se=>se.style.marginTop&&se.style.marginBottom&&se.style.marginTop===se.style.marginBottom?Qt(se.style.marginTop):"",dn=se=>se.style.borderWidth?Qt(se.style.borderWidth):"",Vt=(se,we)=>{var Ve;return se.hasAttribute(we)&&null!==(Ve=se.getAttribute(we))&&void 0!==Ve?Ve:""},ka=se=>null!==se.parentNode&&"FIGURE"===se.parentNode.nodeName,lr=(se,we,Ve)=>{""===Ve||null===Ve?se.removeAttribute(we):se.setAttribute(we,Ve)},qa=(se,we)=>{const Ve=se.getAttribute("style"),gt=we(null!==Ve?Ve:"");gt.length>0?(se.setAttribute("style",gt),se.setAttribute("data-mce-style",gt)):se.removeAttribute("style")},wr=(se,we)=>(Ve,gt,lt)=>{const Rt=Ve.style;Rt[gt]?(Rt[gt]=ri(lt),qa(Ve,we)):lr(Ve,gt,lt)},Ui=(se,we)=>se.style[we]?Qt(se.style[we]):Vt(se,we),ji=(se,we)=>{const Ve=ri(we);se.style.marginLeft=Ve,se.style.marginRight=Ve},ps=(se,we)=>{const Ve=ri(we);se.style.marginTop=Ve,se.style.marginBottom=Ve},Ar=(se,we)=>{const Ve=ri(we);se.style.borderWidth=Ve},nr=(se,we)=>{se.style.borderStyle=we},Ha=se=>{var we;return null!==(we=se.style.borderStyle)&&void 0!==we?we:""},hs=se=>kn(se)&&"FIGURE"===se.nodeName,Sr=se=>0===no.getAttrib(se,"alt").length&&"presentation"===no.getAttrib(se,"role"),ml=se=>Sr(se)?"":Vt(se,"alt"),Nn=(se,we)=>{var Ve;const gt=document.createElement("img");return lr(gt,"style",we.style),(Ue(gt)||""!==we.hspace)&&ji(gt,we.hspace),(ma(gt)||""!==we.vspace)&&ps(gt,we.vspace),(dn(gt)||""!==we.border)&&Ar(gt,we.border),(Ha(gt)||""!==we.borderStyle)&&nr(gt,we.borderStyle),se(null!==(Ve=gt.getAttribute("style"))&&void 0!==Ve?Ve:"")},Zn=(se,we)=>({src:Vt(we,"src"),alt:ml(we),title:Vt(we,"title"),width:Ui(we,"width"),height:Ui(we,"height"),class:Vt(we,"class"),style:se(Vt(we,"style")),caption:ka(we),hspace:Ue(we),vspace:ma(we),border:dn(we),borderStyle:Ha(we),isDecorative:Sr(we)}),fr=(se,we,Ve,gt,lt)=>{Ve[gt]!==we[gt]&&lt(se,gt,String(Ve[gt]))},Ni=(se,we,Ve)=>{if(Ve){no.setAttrib(se,"role","presentation");const gt=hr(se);ht(gt,"alt","")}else{if((se=>null===se)(we))hr(se).dom.removeAttribute("alt");else{const gt=hr(se);ht(gt,"alt",we)}"presentation"===no.getAttrib(se,"role")&&no.setAttrib(se,"role","")}},cr=(se,we)=>(Ve,gt,lt)=>{se(Ve,lt),qa(Ve,we)},Wi=(se,we,Ve)=>{const gt=Zn(se,Ve);var Rt,xo;fr(Ve,gt,we,"caption",(lt,Rt,xo)=>{var eo;ka(eo=lt)?(sn=>{const ln=sn.parentNode;kn(ln)&&(no.insertAfter(sn,ln),no.remove(ln))})(eo):(sn=>{const ln=no.create("figure",{class:"image"});no.insertAfter(ln,sn),ln.appendChild(sn),ln.appendChild(no.create("figcaption",{contentEditable:"true"},"Caption")),ln.contentEditable="false"})(eo)}),fr(Ve,gt,we,"src",lr),fr(Ve,gt,we,"title",lr),fr(Ve,gt,we,"width",wr(0,se)),fr(Ve,gt,we,"height",wr(0,se)),fr(Ve,gt,we,"class",lr),fr(Ve,gt,we,"style",cr((lt,Rt)=>lr(lt,"style",Rt),se)),fr(Ve,gt,we,"hspace",cr(ji,se)),fr(Ve,gt,we,"vspace",cr(ps,se)),fr(Ve,gt,we,"border",cr(Ar,se)),fr(Ve,gt,we,"borderStyle",cr(nr,se)),(xo=we).alt===(Rt=gt).alt&&xo.isDecorative===Rt.isDecorative||Ni(Ve,xo.alt,xo.isDecorative)},Po=(se,we)=>{const Ve=(lt=>{if(lt.margin){const Rt=String(lt.margin).split(" ");switch(Rt.length){case 1:lt["margin-top"]=lt["margin-top"]||Rt[0],lt["margin-right"]=lt["margin-right"]||Rt[0],lt["margin-bottom"]=lt["margin-bottom"]||Rt[0],lt["margin-left"]=lt["margin-left"]||Rt[0];break;case 2:lt["margin-top"]=lt["margin-top"]||Rt[0],lt["margin-right"]=lt["margin-right"]||Rt[1],lt["margin-bottom"]=lt["margin-bottom"]||Rt[0],lt["margin-left"]=lt["margin-left"]||Rt[1];break;case 3:lt["margin-top"]=lt["margin-top"]||Rt[0],lt["margin-right"]=lt["margin-right"]||Rt[1],lt["margin-bottom"]=lt["margin-bottom"]||Rt[2],lt["margin-left"]=lt["margin-left"]||Rt[1];break;case 4:lt["margin-top"]=lt["margin-top"]||Rt[0],lt["margin-right"]=lt["margin-right"]||Rt[1],lt["margin-bottom"]=lt["margin-bottom"]||Rt[2],lt["margin-left"]=lt["margin-left"]||Rt[3]}delete lt.margin}return lt})(se.dom.styles.parse(we)),gt=se.dom.styles.parse(se.dom.styles.serialize(Ve));return se.dom.styles.serialize(gt)},ga=se=>{const we=se.selection.getNode(),Ve=se.dom.getParent(we,"figure.image");return Ve?se.dom.select("img",Ve)[0]:we&&("IMG"!==we.nodeName||zt(we))?null:we},_a=(se,we)=>{var Ve;const gt=se.dom,lt=(xo=>{const sn={};var ln,dr,Cs;return ln=sn,dr=(un,en)=>{ln[en]=un},Cs=Ut,(($s,vi)=>{const oa=Wr($s);for(let Wn=0,bs=oa.length;Wn<bs;Wn++){const ur=oa[Wn];vi($s[ur],ur)}})(xo,($s,vi)=>{(se.schema.isValidChild(vi,"figure")?Cs:dr)($s,vi)}),sn})(se.schema.getTextBlockElements()),Rt=gt.getParent(we.parentNode,xo=>{return Bt(eo=lt,sn=xo.nodeName)&&null!=eo[sn];var eo,sn},se.getBody());return Rt&&null!==(Ve=gt.split(Rt,we))&&void 0!==Ve?Ve:we},ws=(os=(se,we)=>Us(se)&&Us(we)?ws(se,we):we,(...se)=>{if(0===se.length)throw new Error("Can't merge zero objects");const we={};for(let Ve=0;Ve<se.length;Ve++){const gt=se[Ve];for(const lt in gt)Bt(gt,lt)&&(we[lt]=os(we[lt],gt[lt]))}return we});var os,Ot=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),wn=tinymce.util.Tools.resolve("tinymce.util.Tools");const wo=se=>Zo(se.value)?se.value:"",ns=(se,we)=>{const Ve=[];return wn.each(se,gt=>{const lt=Zo((Rt=gt).text)?Rt.text:Zo(Rt.title)?Rt.title:"";var Rt;if(void 0!==gt.menu){const Rt=ns(gt.menu,we);Ve.push({text:lt,items:Rt})}else{const Rt=we(gt);Ve.push({text:lt,value:Rt})}}),Ve},Qn=(se=wo)=>we=>we?Nt.from(we).map(Ve=>ns(Ve,se)):Nt.none(),gl=(se,we)=>(Ve=>{for(let Rt=0;Rt<Ve.length;Rt++){const xo=(eo=lt=Ve[Rt],Bt(eo,"items")?gl(lt.items,we):lt.value===we?Nt.some(lt):Nt.none());if(xo.isSome())return xo}var eo,lt;return Nt.none()})(se),fs=Qn,Pa=(se,we)=>se.bind(Ve=>gl(Ve,we)),ea=se=>{const we=se.imageList.map(Rt=>({name:"images",type:"listbox",label:"Image list",items:Rt})),Ve={name:"alt",type:"input",label:"Alternative description",enabled:!(se.hasAccessibilityOptions&&se.image.isDecorative)},gt=se.classList.map(Rt=>({name:"classes",type:"listbox",label:"Class",items:Rt}));return ie([[{name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"}],we.toArray(),se.hasAccessibilityOptions&&se.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],se.hasDescription?[Ve]:[],se.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],se.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{...(lt=se.classList.isSome()&&se.hasImageCaption,lt?{type:"grid",columns:2}:{type:"panel"}),items:ie([gt.toArray(),se.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]]);var lt},Ea=se=>({title:"General",name:"general",items:ea(se)}),ta=ea,xs=se=>({src:{value:se.src,meta:{}},images:se.src,alt:se.alt,title:se.title,dimensions:{width:se.width,height:se.height},classes:se.class,caption:se.caption,style:se.style,vspace:se.vspace,border:se.border,hspace:se.hspace,borderstyle:se.borderStyle,fileinput:[],isDecorative:se.isDecorative}),Nr=(se,we)=>({src:se.src.value,alt:null!==se.alt&&0!==se.alt.length||!we?se.alt:null,title:se.title,width:se.dimensions.width,height:se.dimensions.height,class:se.classes,style:se.style,caption:se.caption,hspace:se.hspace,vspace:se.vspace,border:se.border,borderStyle:se.borderstyle,isDecorative:se.isDecorative}),js=(se,we,Ve,gt)=>{((lt,Rt)=>{const xo=Rt.getData();var eo,sn;(eo=lt,sn=xo.src.value,/^(?:[a-zA-Z]+:)?\/\//.test(sn)?Nt.none():eo.prependURL.bind(ln=>sn.substring(0,ln.length)!==ln?Nt.some(ln+sn):Nt.none())).each(eo=>{Rt.setData({src:{value:eo,meta:xo.src.meta}})})})(we,gt),((lt,Rt)=>{const xo=Rt.getData(),eo=xo.src.meta;if(void 0!==eo){const sn=ws({},xo);un=sn,en=eo,(ln=lt).hasDescription&&Zo(en.alt)&&(un.alt=en.alt),ln.hasAccessibilityOptions&&(un.isDecorative=en.isDecorative||un.isDecorative||!1),ln.hasImageTitle&&Zo(en.title)&&(un.title=en.title),ln.hasDimensions&&(Zo(en.width)&&(un.dimensions.width=en.width),Zo(en.height)&&(un.dimensions.height=en.height)),Zo(en.class)&&Pa(ln.classList,en.class).each(dr=>{un.classes=dr.value}),ln.hasImageCaption&&ua(en.caption)&&(un.caption=en.caption),ln.hasAdvTab&&(Zo(en.style)&&(un.style=en.style),Zo(en.vspace)&&(un.vspace=en.vspace),Zo(en.border)&&(un.border=en.border),Zo(en.hspace)&&(un.hspace=en.hspace),Zo(en.borderstyle)&&(un.borderstyle=en.borderstyle)),Rt.setData(sn)}var ln,un,en})(we,gt),((lt,Rt,xo,eo)=>{const sn=eo.getData(),ln=sn.src.value,un=sn.src.meta||{};un.width||un.height||!Rt.hasDimensions||(Er(ln)?lt.imageSize(ln).then(en=>{xo.open&&eo.setData({dimensions:en})}).catch(en=>console.error(en)):eo.setData({dimensions:{width:"",height:""}}))})(se,we,Ve,gt),((lt,Rt,xo)=>{const eo=xo.getData(),sn=Pa(lt.imageList,eo.src.value);Rt.prevImage=sn,xo.setData({images:sn.map(ln=>ln.value).getOr("")})})(we,Ve,gt)},Le=(se,we,Ve)=>(gt,lt)=>{"src"===lt.name?js(se,we,Ve,gt):"images"===lt.name?((Rt,xo,eo,sn)=>{const ln=sn.getData(),un=Pa(xo.imageList,ln.images);un.each(en=>{""===ln.alt||eo.prevImage.map(Cs=>Cs.text===ln.alt).getOr(!1)?sn.setData(""===en.value?{src:en,alt:eo.prevAlt}:{src:en,alt:en.text}):sn.setData({src:en})}),eo.prevImage=un,js(Rt,xo,eo,sn)})(se,we,Ve,gt):"alt"===lt.name?Ve.prevAlt=gt.getData().alt:"fileinput"===lt.name?((se,we,Ve,gt)=>{const lt=gt.getData();var Rt,xo;gt.block("Uploading image"),(Rt=lt.fileinput,xo=Rt,0<xo.length?Nt.some(xo[0]):Nt.none()).fold(()=>{gt.unblock()},xo=>{const eo=URL.createObjectURL(xo),sn=()=>{gt.unblock(),URL.revokeObjectURL(eo)},ln=en=>{gt.setData({src:{value:en,meta:{}}}),gt.showTab("general"),js(se,we,Ve,gt)};var un;(un=xo,new Promise((en,dr)=>{const Cs=new FileReader;Cs.onload=()=>{en(Cs.result)},Cs.onerror=()=>{var $s;dr(null===($s=Cs.error)||void 0===$s?void 0:$s.message)},Cs.readAsDataURL(un)})).then(en=>{const dr=se.createBlobCache(xo,eo,en);we.automaticUploads?se.uploadImage(dr).then(Cs=>{ln(Cs.url),sn()}).catch(Cs=>{sn(),se.alertErr(Cs)}):(se.addToBlobCache(dr),ln(dr.blobUri()),gt.unblock())})})})(se,we,Ve,gt):"isDecorative"===lt.name&&gt.setEnabled("alt",!gt.getData().isDecorative)},ue=se=>()=>{se.open=!1},Je=se=>se.hasAdvTab||se.hasUploadUrl||se.hasUploadHandler?{type:"tabpanel",tabs:ie([[Ea(se)],se.hasAdvTab?[{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}]:[],se.hasUploadTab&&(se.hasUploadUrl||se.hasUploadHandler)?[{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}]:[]])}:{type:"panel",items:ta(se)},$e=(se,we,Ve)=>gt=>{const lt=ws(xs(we.image),gt.getData()),Rt={...lt,style:Nn(Ve.normalizeCss,Nr(lt,!1))};se.execCommand("mceUpdateImage",!1,Nr(Rt,we.hasAccessibilityOptions)),se.editorUpload.uploadImagesAuto(),gt.close()},Lt=se=>we=>{return Bn(se,we)?(Ve=se.documentBaseURI.toAbsolute(we),new Promise(gt=>{const lt=document.createElement("img"),Rt=eo=>{lt.onload=lt.onerror=null,lt.parentNode&&lt.parentNode.removeChild(lt),gt(eo)};lt.onload=()=>{const eo={width:St(lt.width,lt.clientWidth),height:St(lt.height,lt.clientHeight)};Rt(Promise.resolve(eo))},lt.onerror=()=>{Rt(Promise.reject(`Failed to get image dimensions for: ${Ve}`))};const xo=lt.style;xo.visibility="hidden",xo.position="fixed",xo.bottom=xo.left="0px",xo.width=xo.height="auto",document.body.appendChild(lt),lt.src=Ve})).then(Ve=>({width:String(Ve.width),height:String(Ve.height)})):Promise.resolve({width:"",height:""});var Ve},Pt=se=>(we,Ve,gt)=>{var lt;return se.editorUpload.blobCache.create({blob:we,blobUri:Ve,name:null===(lt=we.name)||void 0===lt?void 0:lt.replace(/\.[^\.]+$/,""),filename:we.name,base64:gt.split(",")[1]})},Dt=se=>we=>{se.editorUpload.blobCache.add(we)},po=se=>we=>{se.windowManager.alert(we)},bo=se=>we=>Po(se,we),rn=se=>we=>se.dom.parseStyle(we),An=se=>(we,Ve)=>se.dom.serializeStyle(we,Ve),_n=se=>we=>Ot(se).upload([we],!1).then(Ve=>{var gt;return 0===Ve.length?Promise.reject("Failed to upload image"):!1===Ve[0].status?Promise.reject(null===(gt=Ve[0].error)||void 0===gt?void 0:gt.message):Ve[0]}),an=se=>{const we={imageSize:Lt(se),addToBlobCache:Dt(se),createBlobCache:Pt(se),alertErr:po(se),normalizeCss:bo(se),parseStyle:rn(se),serializeStyle:An(se),uploadImage:_n(se)};return{open:()=>{(se=>{const we=fs(Wn=>se.convertURL(Wn.value||Wn.url||"","src")),Ve=new Promise(Wn=>{((bs,ur)=>{const Ml=zn(bs);Zo(Ml)?fetch(Ml).then(Is=>{Is.ok&&Is.json().then(ur)}):Xt(Ml)?Ml(ur):ur(Ml)})(se,bs=>{Wn(we(bs).map(ur=>ie([[{text:"None",value:""}],ur])))})}),gt=(oa=Kn(se),Qn(wo)(oa)),lt=M(se),Rt=at(se),xo=Er(se.options.get("images_upload_url")),eo=kn(se.options.get("images_upload_handler")),sn=(Wn=>{const bs=ga(Wn);return bs?Zn(ur=>Po(Wn,ur),bs):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(se),ln=Cr(se),un=$r(se),en=fn(se),dr=Do(se),Cs=$(se),$s=yn(se),vi=Nt.some(bi(se)).filter(Wn=>Zo(Wn)&&Wn.length>0);var oa;return Ve.then(Wn=>({image:sn,imageList:Wn,classList:gt,hasAdvTab:lt,hasUploadTab:Rt,hasUploadUrl:xo,hasUploadHandler:eo,hasDescription:ln,hasImageTitle:un,hasDimensions:en,hasImageCaption:dr,prependURL:vi,hasAccessibilityOptions:Cs,automaticUploads:$s}))})(se).then(Ve=>{const gt={prevImage:Pa((lt=Ve).imageList,lt.image.src),prevAlt:lt.image.alt,open:!0};var lt;return{title:"Insert/Edit Image",size:"normal",body:Je(Ve),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:xs(Ve.image),onSubmit:$e(se,Ve,we),onChange:Le(we,Ve,gt),onClose:ue(gt)}}).then(se.windowManager.open)}}},Rr=se=>{const we=se.attr("class");return kn(we)&&/\bimage\b/.test(we)},Fr=se=>we=>{let Ve=we.length;const gt=lt=>{lt.attr("contenteditable",se?"true":null)};for(;Ve--;){const lt=we[Ve];Rr(lt)&&(lt.attr("contenteditable",se?"false":null),wn.each(lt.getAll("figcaption"),gt))}},br=se=>we=>{const Ve=()=>{we.setEnabled(se.selection.isEditable())};return se.on("NodeChange",Ve),Ve(),()=>{se.off("NodeChange",Ve)}};Od.add("image",se=>{var we;(we=>{const Ve=we.options.register;Ve("image_dimensions",{processor:"boolean",default:!0}),Ve("image_advtab",{processor:"boolean",default:!1}),Ve("image_uploadtab",{processor:"boolean",default:!0}),Ve("image_prepend_url",{processor:"string",default:""}),Ve("image_class_list",{processor:"object[]"}),Ve("image_description",{processor:"boolean",default:!0}),Ve("image_title",{processor:"boolean",default:!1}),Ve("image_caption",{processor:"boolean",default:!1}),Ve("image_list",{processor:gt=>{const lt=!1===gt||Zo(gt)||((Rt,xo)=>{if(Or(Rt)){for(let eo=0,sn=Rt.length;eo<sn;++eo)if(!xo(Rt[eo]))return!1;return!0}return!1})(gt,Ia)||Xt(gt);return lt?{value:gt,valid:lt}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})})(se),(we=se).on("PreInit",()=>{we.parser.addNodeFilter("figure",Fr(!0)),we.serializer.addNodeFilter("figure",Fr(!1))}),(we=>{we.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:an(we).open,onSetup:Ve=>{Ve.setActive(kn(ga(we)));const gt=we.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",Ve.setActive).unbind,lt=br(we)(Ve);return()=>{gt(),lt()}}}),we.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:an(we).open,onSetup:br(we)}),we.ui.registry.addContextMenu("image",{update:Ve=>we.selection.isEditable()&&(hs(Ve)||"IMG"===Ve.nodeName&&!zt(Ve))?["image"]:[]})})(se),(we=>{we.addCommand("mceImage",an(we).open),we.addCommand("mceUpdateImage",(Ve,gt)=>{we.undoManager.transact(()=>((se,we)=>{const Ve=ga(se);if(Ve){const gt={...Zn(Rt=>Po(se,Rt),Ve),...we},lt=((Rt,xo)=>{const eo=xo.src;return{...xo,src:Bn(Rt,eo)?eo:""}})(se,gt);gt.src?((Rt,xo)=>{const eo=ga(Rt);var ln;eo&&(Wi(sn=>Po(Rt,sn),xo,eo),Rt.dom.setAttrib(ln=eo,"src",ln.getAttribute("src")),hs(eo.parentNode)?(_a(Rt,eo.parentNode),Rt.selection.select(eo.parentNode)):(Rt.selection.select(eo),((sn,ln,un)=>{const en=()=>{un.onload=un.onerror=null,sn.selection&&(sn.selection.select(un),sn.nodeChanged())};un.onload=()=>{ln.width||ln.height||!fn(sn)||sn.dom.setAttribs(un,{width:String(un.clientWidth),height:String(un.clientHeight)}),en()},un.onerror=en})(Rt,xo,eo)))})(se,lt):((Rt,xo)=>{if(xo){const eo=Rt.dom.is(xo.parentNode,"figure.image")?xo.parentNode:xo;Rt.dom.remove(eo),Rt.focus(),Rt.nodeChanged(),Rt.dom.isEmpty(Rt.getBody())&&(Rt.setContent(""),Rt.selection.setCursorLocation())}})(se,Ve)}else we.src&&((se,we)=>{const Ve=((lt,Rt)=>{const xo=document.createElement("img");if(Wi(eo=>Po(se,eo),{...Rt,caption:!1},xo),Ni(xo,Rt.alt,Rt.isDecorative),Rt.caption){const eo=no.create("figure",{class:"image"});return eo.appendChild(xo),eo.appendChild(no.create("figcaption",{contentEditable:"true"},"Caption")),eo.contentEditable="false",eo}return xo})(0,we);se.dom.setAttrib(Ve,"data-mce-id","__mcenew"),se.focus(),se.selection.setContent(Ve.outerHTML);const gt=se.dom.select('*[data-mce-id="__mcenew"]')[0];if(se.dom.setAttrib(gt,"data-mce-id",null),hs(gt)){const lt=_a(se,gt);se.selection.select(lt)}else se.selection.select(gt)})(se,{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1,...we})})(we,gt))})})(se)})}(),function(){"use strict";var Od=tinymce.util.Tools.resolve("tinymce.PluginManager");const $a=q=>ee=>(ce=>{const Ce=typeof ce;return null===ce?"null":"object"===Ce&&Array.isArray(ce)?"array":"object"===Ce&&(he=Pe=ce,(Ge=String).prototype.isPrototypeOf(he)||(null===(ct=Pe.constructor)||void 0===ct?void 0:ct.name)===Ge.name)?"string":Ce;var he,Pe,Ge,ct})(ee)===q,fi=q=>ee=>typeof ee===q,Sa=$a("string"),da=$a("object"),Zo=$a("array"),Ia=fi("boolean"),Us=q=>!(null==q),Or=fi("function"),Zi=fi("number"),ua=()=>{},kn=q=>()=>q,Xt=(q,ee)=>q===ee,rt=q=>ee=>!q(ee),Ut=kn(!1);class Nt{constructor(ee,ce){this.tag=ee,this.value=ce}static some(ee){return new Nt(!0,ee)}static none(){return Nt.singletonNone}fold(ee,ce){return this.tag?ce(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?Nt.some(ee(this.value)):Nt.none()}bind(ee){return this.tag?ee(this.value):Nt.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:Nt.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return Us(ee)?Nt.some(ee):Nt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Nt.singletonNone=new Nt(!1);const Wr=Array.prototype.slice,yt=Array.prototype.indexOf,Bt=Array.prototype.push,yr=(q,ee)=>yt.call(q,ee)>-1,ie=(q,ee)=>{for(let ce=0,Ce=q.length;ce<Ce;ce++)if(ee(q[ce],ce))return!0;return!1},ht=(q,ee)=>{const ce=q.length,Ce=new Array(ce);for(let he=0;he<ce;he++)Ce[he]=ee(q[he],he);return Ce},Ae=(q,ee)=>{for(let ce=0,Ce=q.length;ce<Ce;ce++)ee(q[ce],ce)},hr=(q,ee)=>{const ce=[];for(let Ce=0,he=q.length;Ce<he;Ce++){const Pe=q[Ce];ee(Pe,Ce)&&ce.push(Pe)}return ce},_o=(q,ee,ce)=>(Ae(q,(Ce,he)=>{ce=ee(ce,Ce,he)}),ce),zr=(q,ee,ce)=>{for(let Ce=0,he=q.length;Ce<he;Ce++){const Pe=q[Ce];if(ee(Pe,Ce))return Nt.some(Pe);if(ce(Pe,Ce))break}return Nt.none()},Er=(q,ee)=>zr(q,ee,Ut),Ke=(q,ee)=>(ce=>{const Ce=[];for(let he=0,Pe=ce.length;he<Pe;++he){if(!Zo(ce[he]))throw new Error("Arr.flatten item "+he+" was not an array, input: "+ce);Bt.apply(Ce,ce[he])}return Ce})(ht(q,ee)),fn=q=>{const ee=Wr.call(q,0);return ee.reverse(),ee},M=(q,ee)=>ee>=0&&ee<q.length?Nt.some(q[ee]):Nt.none(),at=q=>M(q,0),bi=q=>M(q,q.length-1),Kn=(q,ee)=>{const ce=[],Ce=Or(ee)?he=>ie(ce,Pe=>ee(Pe,he)):he=>yr(ce,he);for(let he=0,Pe=q.length;he<Pe;he++){const Ge=q[he];Ce(Ge)||ce.push(Ge)}return ce},Cr=(q,ee,ce=Xt)=>q.exists(Ce=>ce(Ce,ee)),$r=(q,ee,ce)=>q.isSome()&&ee.isSome()?Nt.some(ce(q.getOrDie(),ee.getOrDie())):Nt.none(),Do=q=>{if(null==q)throw new Error("Node cannot be null or undefined");return{dom:q}},zn=(q,ee)=>{const ce=(ee||document).createElement("div");if(ce.innerHTML=q,!ce.hasChildNodes()||ce.childNodes.length>1){const Ce="HTML does not have a single root node";throw console.error(Ce,q),new Error(Ce)}return Do(ce.childNodes[0])},$=(q,ee)=>{const ce=(ee||document).createElement(q);return Do(ce)},yn=Do,St=(q,ee)=>{const ce=q.dom;if(1!==ce.nodeType)return!1;{const Ce=ce;if(void 0!==Ce.matches)return Ce.matches(ee);if(void 0!==Ce.msMatchesSelector)return Ce.msMatchesSelector(ee);if(void 0!==Ce.webkitMatchesSelector)return Ce.webkitMatchesSelector(ee);if(void 0!==Ce.mozMatchesSelector)return Ce.mozMatchesSelector(ee);throw new Error("Browser lacks native selectors")}},Qt=(q,ee)=>q.dom===ee.dom,ri=St,zt=typeof window<"u"?window:Function("return this;")(),Bn=(q,ee)=>((ce,Ce)=>{let he=Ce??zt;for(let Pe=0;Pe<ce.length&&null!=he;++Pe)he=he[ce[Pe]];return he})(q.split("."),ee),no=Object.getPrototypeOf,ma=q=>q.dom.nodeName.toLowerCase(),dn=q=>q.dom.nodeType,Vt=q=>ee=>dn(ee)===q,ka=q=>lr(q)&&(q=>{const ee=Bn("ownerDocument.defaultView",q);return da(q)&&((ce=ee,((Ce,he)=>{const Pe=Bn(Ce,he);if(null==Pe)throw new Error(Ce+" not available on this browser");return Pe})("HTMLElement",ce)).prototype.isPrototypeOf(q)||/^HTML\w*Element$/.test(no(q).constructor.name));var ce})(q.dom),lr=Vt(1),qa=Vt(3),wr=Vt(9),Ui=Vt(11),ji=q=>ee=>lr(ee)&&ma(ee)===q,ps=q=>Nt.from(q.dom.parentNode).map(yn),Ar=q=>ht(q.dom.childNodes,yn),nr=(q,ee)=>Nt.from(q.dom.childNodes[ee]).map(yn),Ha=q=>nr(q,0),hs=q=>nr(q,q.dom.childNodes.length-1),Sr=Or(Element.prototype.attachShadow)&&Or(Node.prototype.getRootNode)?q=>yn(q.dom.getRootNode()):q=>wr(q)?q:yn(q.dom.ownerDocument),ml=q=>yn(q.dom.host),Nn=q=>{const ee=qa(q)?q.dom.parentNode:q.dom;if(null==ee||null===ee.ownerDocument)return!1;const ce=ee.ownerDocument;return(Pe=>{const Ge=Sr(Pe);return Ui(ct=Ge)&&Us(ct.dom.host)?Nt.some(Ge):Nt.none();var ct})(yn(ee)).fold(()=>ce.body.contains(ee),(Ce=Nn,he=ml,Pe=>Ce(he(Pe))));var Ce,he};var Zn=(q,ee,ce,Ce,he)=>q(ce,Ce)?Nt.some(ce):Or(he)&&he(ce)?Nt.none():ee(ce,Ce,he);const fr=(q,ee,ce)=>{let Ce=q.dom;const he=Or(ce)?ce:Ut;for(;Ce.parentNode;){Ce=Ce.parentNode;const Pe=yn(Ce);if(ee(Pe))return Nt.some(Pe);if(he(Pe))break}return Nt.none()},Ni=(q,ee,ce)=>Zn((Ce,he)=>he(Ce),fr,q,ee,ce),cr=(q,ee,ce)=>fr(q,Ce=>St(Ce,ee),ce),Wi=(q,ee)=>{ps(q).each(ce=>{ce.dom.insertBefore(ee.dom,q.dom)})},Po=(q,ee)=>{q.dom.appendChild(ee.dom)},ga=(q,ee)=>{Ae(ee,ce=>{Po(q,ce)})},_a=q=>{q.dom.textContent="",Ae(Ar(q),ee=>{jt(ee)})},jt=q=>{const ee=q.dom;null!==ee.parentNode&&ee.parentNode.removeChild(ee)};var Fo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),ws=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),os=tinymce.util.Tools.resolve("tinymce.util.VK");const Ot=q=>ht(q,yn),wn=Object.keys,wo=(q,ee)=>{const ce=wn(q);for(let Ce=0,he=ce.length;Ce<he;Ce++){const Pe=ce[Ce];ee(q[Pe],Pe)}},ns=(q,ee)=>{const ce=q.dom;wo(ee,(Ce,he)=>{((Pe,Ge,ct)=>{if(!(Sa(ct)||Ia(ct)||Zi(ct)))throw console.error("Invalid call to Attribute.set. Key ",Ge,":: Value ",ct,":: Element ",Pe),new Error("Attribute value was not simple");Pe.setAttribute(Ge,ct+"")})(ce,he,Ce)})},Qn=q=>_o(q.dom.attributes,(ee,ce)=>(ee[ce.name]=ce.value,ee),{}),gl=q=>yn(q.dom.cloneNode(!0)),fs=(q,ee)=>{const ce=((Ge,ct)=>{const xt=$(ct),kt=Qn(Ge);return ns(xt,kt),xt})(q,ee);var Ce,he,Ge;he=ce,(Ge=Ce=q,Nt.from(Ge.dom.nextSibling).map(yn)).fold(()=>{ps(Ce).each(Ge=>{Po(Ge,he)})},Ge=>{Wi(Ge,he)});const Pe=Ar(q);return ga(ce,Pe),jt(q),ce};var Pa=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),As=tinymce.util.Tools.resolve("tinymce.util.Tools");const ea=q=>ee=>Us(ee)&&ee.nodeName.toLowerCase()===q,Ea=q=>ee=>Us(ee)&&q.test(ee.nodeName),ta=q=>Us(q)&&3===q.nodeType,xs=q=>Us(q)&&1===q.nodeType,Nr=Ea(/^(OL|UL|DL)$/),js=Ea(/^(OL|UL)$/),Ws=ea("ol"),Le=Ea(/^(LI|DT|DD)$/),ue=Ea(/^(DT|DD)$/),Je=Ea(/^(TH|TD)$/),$e=ea("br"),Lt=(q,ee)=>Us(ee)&&ee.nodeName in q.schema.getTextBlockElements(),Pt=(q,ee)=>Us(q)&&q.nodeName in ee,Dt=(q,ee)=>Us(ee)&&ee.nodeName in q.schema.getVoidElements(),po=(q,ee,ce)=>{const Ce=q.isEmpty(ee);return!(ce&&q.select("span[data-mce-type=bookmark]",ee).length>0)&&Ce},bo=(q,ee)=>q.isChildOf(ee,q.getRoot()),rn=q=>ee=>ee.options.get(q),An=rn("lists_indent_on_tab"),_n=rn("forced_root_block"),an=rn("forced_root_block_attrs"),Rr=(q,ee)=>{const ce=q.dom,Ce=q.schema.getBlockElements(),he=ce.createFragment(),Pe=_n(q),Ge=an(q);let ct,xt,kt=!1;for(xt=ce.create(Pe,Ge),Pt(ee.firstChild,Ce)||he.appendChild(xt);ct=ee.firstChild;)kt||"SPAN"===ct.nodeName&&"bookmark"===ct.getAttribute("data-mce-type")||(kt=!0),Pt(ct,Ce)?(he.appendChild(ct),xt=null):(xt||(xt=ce.create(Pe,Ge),he.appendChild(xt)),xt.appendChild(ct));return!kt&&xt&&xt.appendChild(ce.create("br",{"data-mce-bogus":"1"})),he},Fr=Pa.DOM,br=ji("dd"),se=ji("dt"),Ve=q=>{se(q)&&fs(q,"dd")},gt=(q,ee)=>{if(ta(q))return{container:q,offset:ee};const ce=Fo.getNode(q,ee);return ta(ce)?{container:ce,offset:ee>=q.childNodes.length?ce.data.length:0}:ce.previousSibling&&ta(ce.previousSibling)?{container:ce.previousSibling,offset:ce.previousSibling.data.length}:ce.nextSibling&&ta(ce.nextSibling)?{container:ce.nextSibling,offset:0}:{container:q,offset:ee}},lt=q=>{const ee=q.cloneRange(),ce=gt(q.startContainer,q.startOffset);ee.setStart(ce.container,ce.offset);const Ce=gt(q.endContainer,q.endOffset);return ee.setEnd(Ce.container,Ce.offset),ee},Rt=["OL","UL","DL"],xo=Rt.join(","),eo=(q,ee)=>{const ce=ee||q.selection.getStart(!0);return q.dom.getParent(ce,xo,un(q,ce))},sn=q=>{const ee=q.selection.getSelectedBlocks();return hr(((ce,Ce)=>{const he=As.map(Ce,Pe=>ce.dom.getParent(Pe,"li,dd,dt",un(ce,Pe))||Pe);return Kn(he)})(q,ee),Le)},ln=(q,ee)=>{const ce=q.dom.getParents(ee,"TD,TH");return ce.length>0?ce[0]:q.getBody()},un=(q,ee)=>{const ce=q.dom.getParents(ee,q.dom.isBlock);return Er(ce,he=>{return Pe=q.schema,!Nr(Ge=he)&&!Le(Ge)&&ie(Rt,ct=>Pe.isValidChild(Ge.nodeName,ct));var Pe,Ge}).getOr(q.getBody())},en=(q,ee)=>{const ce=q.dom.getParents(ee,"ol,ul",un(q,ee));return bi(ce)},Cs=q=>/\btox\-/.test(q.className),$s=(q,ee)=>zr(q,Nr,Je).exists(ce=>ce.nodeName===ee&&!Cs(ce)),vi=(q,ee)=>null!==ee&&!q.dom.isEditable(ee),oa=(q,ee)=>{const ce=q.dom.getParent(ee,"ol,ul,dl");return vi(q,ce)},Wn=(q,ee)=>{const ce=q.selection.getNode();return ee({parents:q.dom.getParents(ce),element:ce}),q.on("NodeChange",ee),()=>q.off("NodeChange",ee)},bs=(q,ee)=>{const ce=(ee||document).createDocumentFragment();return Ae(q,Ce=>{ce.appendChild(Ce.dom)}),yn(ce)},ur=(q,ee,ce)=>q.dispatch("ListMutation",{action:ee,element:ce}),Ml=(Is=/^\s+|\s+$/g,q=>q.replace(Is,""));var Is;const Ri=(q,ee,ce)=>{((Ce,he,Pe)=>{if(!Sa(Pe))throw console.error("Invalid call to CSS.set. Property ",he,":: Value ",Pe,":: Element ",Ce),new Error("CSS value must be a string: "+Pe);var Ge;void 0!==(Ge=Ce).style&&Or(Ge.style.getPropertyValue)&&Ce.style.setProperty(he,Pe)})(q.dom,ee,ce)},yi=q=>ri(q,"OL,UL"),Fa=q=>Ha(q).exists(yi),No=q=>"listAttributes"in q,Ta=q=>"isComment"in q,qr=q=>q.depth>0,Ns=q=>q.isSelected,Sc=q=>{const ee=Ar(q),ce=hs(q).exists(yi)?ee.slice(0,-1):ee;return ht(ce,gl)},Oo=(q,ee)=>{Po(q.item,ee.list)},qs=(q,ee)=>{const ce={list:$(ee,q),item:$("li",q)};return Po(ce.list,ce.item),ce},kc=(q,ee,ce)=>{const Ce=ee.slice(0,ce.depth);return bi(Ce).each(he=>{if(No(ce)){const Pe=((Ge,ct,xt)=>{const kt=$("li",Ge);return ns(kt,ct),ga(kt,xt),kt})(q,ce.itemAttributes,ce.content);Po((Ge=he).list,ct=Pe),Ge.item=ct,((Ge,ct)=>{ma(Ge.list)!==ct.listType&&(Ge.list=fs(Ge.list,ct.listType)),ns(Ge.list,ct.listAttributes)})(he,ce)}else if("isFragment"in ce)ga(he.item,ce.content);else{const Pe=zn(`\x3c!--${ce.content}--\x3e`);Po(he.list,Pe)}var Ge,ct}),Ce},wt=q=>(Ae(q,(ee,ce)=>{((Ce,he)=>{const Pe=Ce[he].depth,Ge=xt=>xt.depth===Pe&&!xt.dirty,ct=xt=>xt.depth<Pe;return zr(fn(Ce.slice(0,he)),Ge,ct).orThunk(()=>zr(Ce.slice(he+1),Ge,ct))})(q,ce).fold(()=>{var Ce;ee.dirty&&No(ee)&&((Ce=ee).listAttributes=(he=>{const Ge={};var ct,kt,vo,Co;return kt=(he,Pe)=>"start"!==Pe,ct=Ge,vo=(xt,kt)=>{ct[kt]=xt},Co=ua,wo(he,(Ao,Lo)=>{(kt(0,Lo)?vo:Co)(Ao,Lo)}),Ge})(Ce.listAttributes))},Ce=>{return Pe=Ce,void(No(he=ee)&&No(Pe)&&(he.listType=Pe.listType,he.listAttributes={...Pe.listAttributes}));var he,Pe})}),q),Mi=(q,ee,ce,Ce)=>{var he,Pe;if(8===dn(Pe=Ce)||"#comment"===ma(Pe))return[{depth:q+1,content:null!==(he=Ce.dom.nodeValue)&&void 0!==he?he:"",dirty:!1,isSelected:!1,isComment:!0}];ee.each(xt=>{Qt(xt.start,Ce)&&ce.set(!0)});const Ge=(xt=Ce,kt=q,vo=ce.get(),ps(xt).filter(lr).map(Co=>({depth:kt,dirty:!1,isSelected:vo,content:Sc(xt),itemAttributes:Qn(xt),listAttributes:Qn(Co),listType:ma(Co),isInPreviousLi:!1})));var xt,kt,vo;ee.each(xt=>{Qt(xt.end,Ce)&&ce.set(!1)});const ct=hs(Ce).filter(yi).map(xt=>kr(q,ee,ce,xt)).getOr([]);return Ge.toArray().concat(ct)},cs=(q,ee,ce,Ce)=>Ha(Ce).filter(yi).fold(()=>Mi(q,ee,ce,Ce),he=>{const Pe=_o(Ar(Ce),(Ge,ct,xt)=>{if(0===xt)return Ge;if(ri(ct,"LI"))return Ge.concat(Mi(q,ee,ce,ct));{const kt={isFragment:!0,depth:q,content:[ct],isSelected:!1,dirty:!1,parentListType:ma(he)};return Ge.concat(kt)}},[]);return kr(q,ee,ce,he).concat(Pe)}),kr=(q,ee,ce,Ce)=>Ke(Ar(Ce),he=>(yi(he)?kr:cs)(q+1,ee,ce,he)),tu=(q,ee)=>{const ce=Ot((Pe=>{const Ge=(xt=>{const kt=en(xt,xt.selection.getStart()),vo=hr(xt.selection.getSelectedBlocks(),js);return kt.toArray().concat(vo)})(Pe),ct=(xt=>{const kt=xt.selection.getStart();return xt.dom.getParents(kt,"ol,ul",un(xt,kt))})(Pe);return Er(ct,xt=>{return kt=yn(xt),ps(kt).exists(vo=>Le(vo.dom)&&Ha(vo).exists(Co=>!Nr(Co.dom))&&hs(vo).exists(Co=>!Nr(Co.dom)));var kt}).fold(()=>((q,ee)=>{const ce=ht(ee,Ce=>en(q,Ce).getOr(Ce));return Kn(ce)})(Pe,Ge),xt=>[xt])})(q)),Ce=Ot(hr(sn(q),ue));let he=!1;if(ce.length||Ce.length){const Pe=q.selection.getBookmark();((q,ee,ce)=>{const Ce=((he,Pe)=>{const Ge=(()=>{let xt=!1;return{get:()=>xt,set:kt=>{xt=kt}}})();return ht(he,ct=>({sourceList:ct,entries:kr(0,Pe,Ge,ct)}))})(ee,(he=>{const Pe=ht(sn(he),yn);return $r(Er(Pe,rt(Fa)),Er(fn(Pe),rt(Fa)),(Ge,ct)=>({start:Ge,end:ct}))})(q));Ae(Ce,he=>{var xt;xt=ce,Ae(hr(he.entries,Ns),kt=>((vo,Co)=>{switch(vo){case"Indent":Co.depth++;break;case"Outdent":Co.depth--;break;case"Flatten":Co.depth=0}Co.dirty=!0})(xt,kt));const Pe=((ct,xt)=>Ke(((kt,vo)=>{if(0===kt.length)return[];{let Co=vo(kt[0]);const Ao=[];let Lo=[];for(let tn=0,mn=kt.length;tn<mn;tn++){const gn=kt[tn],qn=vo(gn);qn!==Co&&(Ao.push(Lo),Lo=[]),Co=qn,Lo.push(gn)}return 0!==Lo.length&&Ao.push(Lo),Ao}})(xt,qr),kt=>at(kt).exists(qr)?((vo,Co)=>{const Ao=wt(Co);return((q,ee)=>{let ce=Nt.none();const Ce=_o(ee,(he,Pe,Ge)=>Ta(Pe)?0===Ge?(ce=Nt.some(Pe),he):kc(q,he,Pe):Pe.depth>he.length?((ct,xt,kt)=>{const vo=((Ao,Lo,tn)=>{const mn=[];for(let gn=0;gn<tn;gn++)mn.push(qs(Ao,No(Lo)?Lo.listType:Lo.parentListType));return mn})(ct,kt,kt.depth-xt.length);var Co;return(Ao=>{for(let Lo=1;Lo<Ao.length;Lo++)Oo(Ao[Lo-1],Ao[Lo])})(vo),((Ao,Lo)=>{for(let tn=0;tn<Ao.length-1;tn++)Ri(Ao[tn].item,"list-style-type","none");bi(Ao).each(tn=>{No(Lo)&&(ns(tn.list,Lo.listAttributes),ns(tn.item,Lo.itemAttributes)),ga(tn.item,Lo.content)})})(vo,kt),Co=vo,$r(bi(xt),at(Co),Oo),xt.concat(vo)})(q,he,Pe):kc(q,he,Pe),[]);return ce.each(he=>{const Pe=zn(`\x3c!--${he.content}--\x3e`);at(Ce).each(Ge=>{var ct,xt;xt=Pe,Ha(ct=Ge.list).fold(()=>{Po(ct,xt)},kt=>{ct.dom.insertBefore(xt.dom,kt.dom)})})}),at(Ce).map(he=>he.list)})(vo.contentDocument,Ao).toArray()})(ct,kt):((vo,Co)=>{const Ao=wt(Co);return ht(Ao,Lo=>{const tn=Ta(Lo)?bs([zn(`\x3c!--${Lo.content}--\x3e`)]):bs(Lo.content);return yn(Rr(vo,tn.dom))})})(ct,kt)))(q,he.entries);var Ge;Ae(Pe,ct=>{ur(q,"Indent"===ce?"IndentList":"OutdentList",ct.dom)}),Ge=he.sourceList,Ae(Pe,ct=>{Wi(Ge,ct)}),jt(he.sourceList)})})(q,ce,ee),Ge=q,Ae(Ce,"Indent"===ee?Ve:kt=>((q,ee)=>{var ce;br(ee)?fs(ee,"dt"):se(ee)&&(ce=ee,Nt.from(ce.dom.parentElement).map(yn)).each(Ce=>((he,Pe,Ge)=>{const ct=Fr.select('span[data-mce-type="bookmark"]',Pe),xt=Rr(he,Ge),kt=Fr.createRng();kt.setStartAfter(Ge),kt.setEndAfter(Pe);const vo=kt.extractContents();for(let Ao=vo.firstChild;Ao;Ao=Ao.firstChild)if("LI"===Ao.nodeName&&he.dom.isEmpty(Ao)){Fr.remove(Ao);break}he.dom.isEmpty(vo)||Fr.insertAfter(vo,Pe),Fr.insertAfter(xt,Pe);const Co=Ge.parentElement;Co&&po(he.dom,Co)&&(Ao=>{const Lo=Ao.parentNode;Lo&&As.each(ct,tn=>{Lo.insertBefore(tn,Ge.parentNode)}),Fr.remove(Ao)})(Co),Fr.remove(Ge),po(he.dom,Pe)&&Fr.remove(Pe)})(q,Ce.dom,ee.dom))})(Ge,kt)),q.selection.moveToBookmark(Pe),q.selection.setRng(lt(q.selection.getRng())),q.nodeChanged(),he=!0}var Ge;return he},Gc=(q,ee)=>!(ce=>{const Ce=eo(ce);return vi(ce,Ce)})(q)&&tu(q,ee),Yn=q=>Gc(q,"Indent"),pl=q=>Gc(q,"Outdent"),Sn=q=>Gc(q,"Flatten"),oc=q=>"\ufeff"===q;var ds=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Ga=Pa.DOM,us=q=>{const ee={},ce=Ce=>{let he=q[Ce?"startContainer":"endContainer"],Pe=q[Ce?"startOffset":"endOffset"];if(xs(he)){const Ge=Ga.create("span",{"data-mce-type":"bookmark"});he.hasChildNodes()?(Pe=Math.min(Pe,he.childNodes.length-1),Ce?he.insertBefore(Ge,he.childNodes[Pe]):Ga.insertAfter(Ge,he.childNodes[Pe])):he.appendChild(Ge),he=Ge,Pe=0}ee[Ce?"startContainer":"endContainer"]=he,ee[Ce?"startOffset":"endOffset"]=Pe};return ce(!0),q.collapsed||ce(),ee},En=q=>{const ee=Ce=>{let he=q[Ce?"startContainer":"endContainer"],Pe=q[Ce?"startOffset":"endOffset"];if(he){if(xs(he)&&he.parentNode){const Ge=he;Pe=(ct=>{var xt;let kt=null===(xt=ct.parentNode)||void 0===xt?void 0:xt.firstChild,vo=0;for(;kt;){if(kt===ct)return vo;xs(kt)&&"bookmark"===kt.getAttribute("data-mce-type")||vo++,kt=kt.nextSibling}return-1})(he),he=he.parentNode,Ga.remove(Ge),!he.hasChildNodes()&&Ga.isBlock(he)&&he.appendChild(Ga.create("br"))}q[Ce?"startContainer":"endContainer"]=he,q[Ce?"startOffset":"endOffset"]=Pe}};ee(!0),ee();const ce=Ga.createRng();return ce.setStart(q.startContainer,q.startOffset),q.endContainer&&ce.setEnd(q.endContainer,q.endOffset),lt(ce)},Rs=q=>{switch(q){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},si=(q,ee)=>{As.each(ee,(ce,Ce)=>{q.setAttribute(Ce,ce)})},Di=(q,ee,ce)=>{var Pe;q.setStyle(ee,"list-style-type",(Pe=ce)["list-style-type"]?Pe["list-style-type"]:null),((Ce,he,Pe)=>{si(he,Pe["list-attributes"]),As.each(Ce.select("li",he),Ge=>{si(Ge,Pe["list-item-attributes"])})})(q,ee,ce)},Dl=(q,ee)=>Us(ee)&&!Pt(ee,q.schema.getBlockElements()),mr=(q,ee,ce,Ce)=>{let he=ee[ce?"startContainer":"endContainer"];const Pe=ee[ce?"startOffset":"endOffset"];xs(he)&&(he=he.childNodes[Math.min(Pe,he.childNodes.length-1)]||he),!ce&&$e(he.nextSibling)&&(he=he.nextSibling);const Ge=(ct,xt)=>{var kt;const vo=new ws(ct,(Lo=>{for(;!q.dom.isBlock(Lo)&&Lo.parentNode&&Ce!==Lo;)Lo=Lo.parentNode;return Lo})(ct)),Co=xt?"next":"prev";let Ao;for(;Ao=vo[Co]();)if(!Dt(q,Ao)&&!oc(Ao.textContent)&&0!==(null===(kt=Ao.textContent)||void 0===kt?void 0:kt.length))return Nt.some(Ao);return Nt.none()};if(ce&&ta(he))if(oc(he.textContent))he=Ge(he,!1).getOr(he);else for(null!==he.parentNode&&Dl(q,he.parentNode)&&(he=he.parentNode);null!==he.previousSibling&&(Dl(q,he.previousSibling)||ta(he.previousSibling));)he=he.previousSibling;if(!ce&&ta(he))if(oc(he.textContent))he=Ge(he,!0).getOr(he);else for(null!==he.parentNode&&Dl(q,he.parentNode)&&(he=he.parentNode);null!==he.nextSibling&&(Dl(q,he.nextSibling)||ta(he.nextSibling));)he=he.nextSibling;for(;he.parentNode!==Ce;){const ct=he.parentNode;if(Lt(q,he)||/^(TD|TH)$/.test(ct.nodeName))return he;he=ct}return he},Oa=(q,ee,ce)=>{const Ce=q.selection.getRng();let he="LI";const Pe=un(q,((kt,vo)=>{const Co=kt.selection.getStart(!0),Ao=mr(kt,vo,!0,kt.getBody());return Lo=yn(Ao),tn=yn(vo.commonAncestorContainer),fr(Lo,function(qn,...Mr){return(...Ka)=>{const Hl=Mr.concat(Ka);return qn.apply(null,Hl)}}(Qt,tn),void 0).isSome()?vo.commonAncestorContainer:Co;var Lo,tn})(q,Ce)),Ge=q.dom;if("false"===Ge.getContentEditable(q.selection.getNode()))return;"DL"===(ee=ee.toUpperCase())&&(he="DT");const ct=us(Ce),xt=hr(((kt,vo,Co)=>{const Ao=[],Lo=kt.dom,tn=mr(kt,vo,!0,Co),mn=mr(kt,vo,!1,Co);let gn;const qn=[];for(let Mr=tn;Mr&&(qn.push(Mr),Mr!==mn);Mr=Mr.nextSibling);return As.each(qn,Mr=>{var Ka;if(Lt(kt,Mr))return Ao.push(Mr),void(gn=null);if(Lo.isBlock(Mr)||$e(Mr))return $e(Mr)&&Lo.remove(Mr),void(gn=null);const Hl=Mr.nextSibling;ds.isBookmarkNode(Mr)&&(Nr(Hl)||Lt(kt,Hl)||!Hl&&Mr.parentNode===Co)?gn=null:(gn||(gn=Lo.create("p"),null===(Ka=Mr.parentNode)||void 0===Ka||Ka.insertBefore(gn,Mr),Ao.push(gn)),gn.appendChild(Mr))}),Ao})(q,Ce,Pe),q.dom.isEditable);As.each(xt,kt=>{let vo;const Co=kt.previousSibling,Ao=kt.parentNode;var Lo,tn;Le(Ao)||(Co&&Nr(Co)&&Co.nodeName===ee&&((Lo,tn,mn)=>{const gn=Lo.getStyle(tn,"list-style-type");let qn=mn?mn["list-style-type"]:"";return qn=null===qn?"":qn,gn===qn})(Ge,Co,ce)?(vo=Co,kt=Ge.rename(kt,he),Co.appendChild(kt)):(vo=Ge.create(ee),Ao.insertBefore(vo,kt),vo.appendChild(kt),kt=Ge.rename(kt,he)),Lo=Ge,tn=kt,As.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],gn=>Lo.setStyle(tn,gn,"")),Di(Ge,vo,ce),$i(q.dom,vo))}),q.selection.setRng(En(ct))},ss=(q,ee,ce)=>{return Pe=ce,Nr(he=ee)&&he.nodeName===Pe?.nodeName&&((he,Pe,Ge)=>he.getStyle(Pe,"list-style-type",!0)===he.getStyle(Ge,"list-style-type",!0))(q,ee,ce)&&ee.className===ce.className;var he,Pe},$i=(q,ee)=>{let ce,Ce=ee.nextSibling;if(ss(q,ee,Ce)){const he=Ce;for(;ce=he.firstChild;)ee.appendChild(ce);q.remove(he)}if(Ce=ee.previousSibling,ss(q,ee,Ce)){const he=Ce;for(;ce=he.lastChild;)ee.insertBefore(ce,ee.firstChild);q.remove(he)}},hl=(q,ee,ce,Ce)=>{if(ee.nodeName!==ce){const he=q.dom.rename(ee,ce);Di(q.dom,he,Ce),ur(q,Rs(ce),he)}else Di(q.dom,ee,Ce),ur(q,Rs(ce),ee)},as=(q,ee,ce,Ce)=>{if(ee.classList.forEach((he,Pe,Ge)=>{he.startsWith("tox-")&&(Ge.remove(he),0===Ge.length&&ee.removeAttribute("class"))}),ee.nodeName!==ce){const he=q.dom.rename(ee,ce);Di(q.dom,he,Ce),ur(q,Rs(ce),he)}else Di(q.dom,ee,Ce),ur(q,Rs(ce),ee)},ou=q=>"list-style-type"in q,Bl=(q,ee,ce)=>{const Ce=eo(q);if(oa(q,Ce))return;const he=(Ge=>{const ct=eo(Ge),xt=Ge.selection.getSelectedBlocks();return vo=xt,Us(kt=ct)&&1===vo.length&&vo[0]===kt?(kt=>hr(kt.querySelectorAll(xo),Nr))(ct):hr(xt,kt=>Nr(kt)&&ct!==kt);var kt,vo})(q),Pe=da(ce)?ce:{};he.length>0?((Ge,ct,xt,kt,vo)=>{const Co=Nr(ct);if(!Co||ct.nodeName!==kt||ou(vo)||Cs(ct)){Oa(Ge,kt,vo);const Ao=us(Ge.selection.getRng()),Lo=Co?[ct,...xt]:xt,tn=Co&&Cs(ct)?as:hl;As.each(Lo,mn=>{tn(Ge,mn,kt,vo)}),Ge.selection.setRng(En(Ao))}else Sn(Ge)})(q,Ce,he,ee,Pe):((Ge,ct,xt,kt)=>{if(ct!==Ge.getBody())if(ct)if(ct.nodeName!==xt||ou(kt)||Cs(ct)){const vo=us(Ge.selection.getRng());Cs(ct)&&ct.classList.forEach((Ao,Lo,tn)=>{Ao.startsWith("tox-")&&(tn.remove(Ao),0===tn.length&&ct.removeAttribute("class"))}),Di(Ge.dom,ct,kt);const Co=Ge.dom.rename(ct,xt);$i(Ge.dom,Co),Ge.selection.setRng(En(vo)),Oa(Ge,xt,kt),ur(Ge,Rs(xt),Co)}else Sn(Ge);else Oa(Ge,xt,kt),ur(Ge,Rs(xt),ct)})(q,Ce,ee,Pe)},Ms=Pa.DOM,nu=(q,ee)=>{const ce=As.grep(q.select("ol,ul",ee));As.each(ce,Ce=>{((he,Pe)=>{const Ge=Pe.parentElement;if(Ge&&"LI"===Ge.nodeName&&Ge.firstChild===Pe){const ct=Ge.previousSibling;ct&&"LI"===ct.nodeName?(ct.appendChild(Pe),po(he,Ge)&&Ms.remove(Ge)):Ms.setStyle(Ge,"listStyleType","none")}if(Nr(Ge)){const ct=Ge.previousSibling;ct&&"LI"===ct.nodeName&&ct.appendChild(Pe)}})(q,Ce)})},ym=(q,ee,ce,Ce)=>{let he=ee.startContainer;const Pe=ee.startOffset;if(ta(he)&&(ce?Pe<he.data.length:Pe>0))return he;const Ge=q.schema.getNonEmptyElements();xs(he)&&(he=Fo.getNode(he,Pe));const ct=new ws(he,Ce);var kt,vo;ce&&(kt=q.dom,$e(vo=he)&&kt.isBlock(vo.nextSibling)&&!$e(vo.previousSibling))&&ct.next();const xt=ce?ct.next.bind(ct):ct.prev2.bind(ct);for(;he=xt();)if("LI"===he.nodeName&&!he.hasChildNodes()||Ge[he.nodeName]||ta(he)&&he.data.length>0)return he;return null},ru=(q,ee)=>{const ce=ee.childNodes;return 1===ce.length&&!Nr(ce[0])&&q.isBlock(ce[0])},Ad=(q,ee,ce)=>{let Ce;const he=ru(q,ce)?ce.firstChild:ce;if(ru(Pe=q,Ge=ee)&&(q=>Nt.from(q).map(yn).filter(ka).exists(ee=>((ce,Ce=!1)=>{return Nn(ce)?ce.dom.isContentEditable:(he=ce,Zn((Pe,Ge)=>St(Pe,Ge),cr,he,"[contenteditable]",void 0)).fold(kn(Ce),Pe=>"true"===Pe.dom.contentEditable);var he})(ee)&&!yr(["details"],ma(ee))))(Ge.firstChild)&&Pe.remove(Ge.firstChild,!0),!po(q,ee,!0))for(;Ce=ee.firstChild;)he.appendChild(Ce);var Pe,Ge},Il=(q,ee,ce)=>{let Ce;const he=ee.parentNode;if(!bo(q,ee)||!bo(q,ce))return;Nr(ce.lastChild)&&(Ce=ce.lastChild),he===ce.lastChild&&$e(he.previousSibling)&&q.remove(he.previousSibling);const Pe=ce.lastChild;Pe&&$e(Pe)&&ee.hasChildNodes()&&q.remove(Pe),po(q,ce,!0)&&_a(yn(ce)),Ad(q,ee,ce),Ce&&ce.appendChild(Ce);const Ge=((ct,xt)=>{const kt=ct.dom,vo=xt.dom;return kt!==vo&&kt.contains(vo)})(yn(ce),yn(ee))?q.getParents(ee,Nr,ce):[];q.remove(ee),Ae(Ge,ct=>{po(q,ct)&&ct!==q.getRoot()&&q.remove(ct)})},_c=q=>{const ee=q.selection.getStart(),ce=ln(q,ee);return q.dom.getParent(ee,"LI,DT,DD",ce)||sn(q).length>0},fl=(q,ee)=>{const ce=q.selection;return!oa(q,ce.getNode())&&(ce.isCollapsed()?((q,ee)=>{const ce=q.dom,Ce=q.selection,he=Ce.getStart(),Pe=ln(q,he),Ge=ce.getParent(Ce.getStart(),"LI",Pe);if(Ge){const ct=Ge.parentElement;if(ct===q.getBody()&&po(ce,ct))return!0;const xt=lt(Ce.getRng()),kt=ce.getParent(ym(q,xt,ee,Pe),"LI",Pe),vo=kt&&(ee?ce.isChildOf(Ge,kt):ce.isChildOf(kt,Ge));if(kt&&kt!==Ge&&!vo)return q.undoManager.transact(()=>{var Co,Ao;ee?((Lo,tn,mn,gn)=>{const qn=Lo.dom;if(qn.isEmpty(gn))Mr=Lo,Ka=mn,_a(yn(Hl=gn)),Il(Mr.dom,Ka,Hl),Mr.selection.setCursorLocation(Hl,0);else{const Mr=us(tn);Il(qn,mn,gn),Lo.selection.setRng(En(Mr))}var Mr,Ka,Hl})(q,xt,kt,Ge):(null===(Ao=(Co=Ge).parentNode)||void 0===Ao?void 0:Ao.firstChild)===Co?pl(q):((Lo,tn,mn,gn)=>{const qn=us(tn);Il(Lo.dom,mn,gn);const Mr=En(qn);Lo.selection.setRng(Mr)})(q,xt,Ge,kt)}),!0;if(vo&&!ee&&kt!==Ge)return q.undoManager.transact(()=>{if(xt.commonAncestorContainer.parentElement){const Co=us(xt),Ao=xt.commonAncestorContainer.parentElement;Ad(ce,xt.commonAncestorContainer.parentElement,kt),Ao.remove();const Lo=En(Co);q.selection.setRng(Lo)}}),!0;if(!kt&&!ee&&0===xt.startOffset&&0===xt.endOffset)return q.undoManager.transact(()=>{Sn(q)}),!0}return!1})(Ce=q,he=ee)||((Pe,Ge)=>{const ct=Pe.dom,xt=Pe.selection.getStart(),kt=ln(Pe,xt),vo=ct.getParent(xt,ct.isBlock,kt);if(vo&&ct.isEmpty(vo)){const Co=lt(Pe.selection.getRng()),Ao=ct.getParent(ym(Pe,Co,Ge,kt),"LI",kt);if(Ao){const Lo=mn=>yr(["td","th","caption"],ma(mn)),tn=mn=>mn.dom===kt;return!!((mn,gn,qn=Xt)=>$r(mn,gn,qn).getOr(mn.isNone()&&gn.isNone()))(Ni(yn(Ao),Lo,tn),Ni(yn(Co.startContainer),Lo,tn),Qt)&&(Pe.undoManager.transact(()=>{const mn=Ao.parentNode;((gn,qn,Mr)=>{const Ka=gn.getParent(qn.parentNode,gn.isBlock,Mr);gn.remove(qn),Ka&&gn.isEmpty(Ka)&&gn.remove(Ka)})(ct,vo,kt),$i(ct,mn),Pe.selection.select(Ao,!0),Pe.selection.collapse(Ge)}),!0)}}return!1})(Ce,he):(Ce=>!!_c(Ce)&&(Ce.undoManager.transact(()=>{Ce.execCommand("Delete"),nu(Ce.dom,Ce.getBody())}),!0))(q));var Ce,he},vs=q=>{const ee=fn(Ml(q).split("")),ce=ht(ee,(Ce,he)=>{const Pe=Ce.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,he)*Pe});return _o(ce,(Ce,he)=>Ce+he,0)},Bi=q=>{if(--q<0)return"";{const ee=q%26,ce=Math.floor(q/26);return Bi(ce)+String.fromCharCode(65+ee)}},ve=q=>{const ee=parseInt(q.start,10);return Cr(q.listStyleType,"upper-alpha")?Bi(ee):Cr(q.listStyleType,"lower-alpha")?Bi(ee).toLowerCase():q.start},nc=(q,ee)=>()=>{const ce=eo(q);return Us(ce)&&ce.nodeName===ee},rc=q=>{q.addCommand("mceListProps",()=>{(ee=>{const ce=eo(ee);Ws(ce)&&!oa(ee,ce)&&ee.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ve({start:ee.dom.getAttrib(ce,"start","1"),listStyleType:Nt.from(ee.dom.getStyle(ce,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Ce=>{(he=>{switch(/^[0-9]+$/.test(Pe=he)?2:/^[A-Z]+$/.test(Pe)?0:/^[a-z]+$/.test(Pe)?1:Pe.length>0?4:3){case 2:return Nt.some({listStyleType:Nt.none(),start:he});case 0:return Nt.some({listStyleType:Nt.some("upper-alpha"),start:vs(he).toString()});case 1:return Nt.some({listStyleType:Nt.some("lower-alpha"),start:vs(he).toString()});case 3:return Nt.some({listStyleType:Nt.none(),start:""});case 4:return Nt.none()}var Pe})(Ce.getData().start).each(he=>{ee.execCommand("mceListUpdate",!1,{attrs:{start:"1"===he.start?"":he.start},styles:{"list-style-type":he.listStyleType.getOr("")}})}),Ce.close()}})})(q)})};var ai=tinymce.util.Tools.resolve("tinymce.html.Node");const Nd=q=>3===q.type,$n=q=>0===q.length,bl=q=>{const ee=(Ce,he)=>{const Pe=ai.create("li");Ae(Ce,Ge=>Pe.append(Ge)),he?q.insert(Pe,he,!0):q.append(Pe)},ce=_o(q.children(),(Ce,he)=>Nd(he)?[...Ce,he]:$n(Ce)||Nd(he)?Ce:(ee(Ce,he),[]),[]);$n(ce)||ee(ce)},Rd=(q,ee)=>ce=>(ce.setEnabled(q.selection.isEditable()),Wn(q,Ce=>{ce.setActive($s(Ce.parents,ee)),ce.setEnabled(!oa(q,Ce.element)&&q.selection.isEditable())})),vl=(q,ee)=>ce=>Wn(q,Ce=>ce.setEnabled($s(Ce.parents,ee)&&!oa(q,Ce.element)));Od.add("lists",q=>{return(0,q.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0}),(ee=q).on("PreInit",()=>{const{parser:ce}=ee;ce.addNodeFilter("ul,ol",Ce=>Ae(Ce,bl))}),q.hasPlugin("rtc",!0)?rc(q):((ee=>{var ce;An(ee)&&(ce=ee).on("keydown",Ce=>{Ce.keyCode!==os.TAB||os.metaKeyPressed(Ce)||ce.undoManager.transact(()=>{(Ce.shiftKey?pl(ce):Yn(ce))&&Ce.preventDefault()})}),(ce=>{ce.on("ExecCommand",Ce=>{const he=Ce.command.toLowerCase();"delete"!==he&&"forwarddelete"!==he||!_c(ce)||nu(ce.dom,ce.getBody())}),ce.on("keydown",Ce=>{Ce.keyCode===os.BACKSPACE?fl(ce,!1)&&Ce.preventDefault():Ce.keyCode===os.DELETE&&fl(ce,!0)&&Ce.preventDefault()})})(ee)})(q),(ee=>{ee.on("BeforeExecCommand",ce=>{const Ce=ce.command.toLowerCase();"indent"===Ce?Yn(ee):"outdent"===Ce&&pl(ee)}),ee.addCommand("InsertUnorderedList",(ce,Ce)=>{Bl(ee,"UL",Ce)}),ee.addCommand("InsertOrderedList",(ce,Ce)=>{Bl(ee,"OL",Ce)}),ee.addCommand("InsertDefinitionList",(ce,Ce)=>{Bl(ee,"DL",Ce)}),ee.addCommand("RemoveList",()=>{Sn(ee)}),rc(ee),ee.addCommand("mceListUpdate",(ce,Ce)=>{da(Ce)&&((he,Pe)=>{const Ge=eo(he);null===Ge||oa(he,Ge)||he.undoManager.transact(()=>{da(Pe.styles)&&he.dom.setStyles(Ge,Pe.styles),da(Pe.attrs)&&wo(Pe.attrs,(ct,xt)=>he.dom.setAttrib(Ge,xt,ct))})})(ee,Ce)}),ee.addQueryStateHandler("InsertUnorderedList",nc(ee,"UL")),ee.addQueryStateHandler("InsertOrderedList",nc(ee,"OL")),ee.addQueryStateHandler("InsertDefinitionList",nc(ee,"DL"))})(q)),(ee=>{const ce=Ce=>()=>ee.execCommand(Ce);ee.hasPlugin("advlist")||(ee.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:ce("InsertOrderedList"),onSetup:Rd(ee,"OL")}),ee.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:ce("InsertUnorderedList"),onSetup:Rd(ee,"UL")}))})(q),(ee=>{const ce={text:"List properties...",icon:"ordered-list",onAction:()=>ee.execCommand("mceListProps"),onSetup:vl(ee,"OL")};ee.ui.registry.addMenuItem("listprops",ce),ee.ui.registry.addContextMenu("lists",{update:Ce=>{const he=eo(ee,Ce);return Ws(he)?["listprops"]:[]}})})(q),(ee=>({backspaceDelete:ce=>{fl(ee,ce)}}))(q);var ee})}(),function(){"use strict";var Od=tinymce.util.Tools.resolve("tinymce.PluginManager");const $a=Le=>ue=>(Je=>{const $e=typeof Je;return null===Je?"null":"object"===$e&&Array.isArray(Je)?"array":"object"===$e&&(Lt=Pt=Je,(Dt=String).prototype.isPrototypeOf(Lt)||(null===(po=Pt.constructor)||void 0===po?void 0:po.name)===Dt.name)?"string":$e;var Lt,Pt,Dt,po})(ue)===Le,fi=Le=>ue=>typeof ue===Le,Sa=$a("string"),da=$a("object"),Zo=$a("array"),Us=fi("boolean"),Or=Le=>!(null==Le),Zi=fi("function"),ua=(Le,ue)=>{if(Zo(Le)){for(let Je=0,$e=Le.length;Je<$e;++Je)if(!ue(Le[Je]))return!1;return!0}return!1},kn=()=>{},Xt=(Le,ue)=>Le===ue;class rt{constructor(ue,Je){this.tag=ue,this.value=Je}static some(ue){return new rt(!0,ue)}static none(){return rt.singletonNone}fold(ue,Je){return this.tag?Je(this.value):ue()}isSome(){return this.tag}isNone(){return!this.tag}map(ue){return this.tag?rt.some(ue(this.value)):rt.none()}bind(ue){return this.tag?ue(this.value):rt.none()}exists(ue){return this.tag&&ue(this.value)}forall(ue){return!this.tag||ue(this.value)}filter(ue){return!this.tag||ue(this.value)?this:rt.none()}getOr(ue){return this.tag?this.value:ue}or(ue){return this.tag?this:ue}getOrThunk(ue){return this.tag?this.value:ue()}orThunk(ue){return this.tag?this:ue()}getOrDie(ue){if(this.tag)return this.value;throw new Error(ue??"Called getOrDie on None")}static from(ue){return Or(ue)?rt.some(ue):rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ue){this.tag&&ue(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}rt.singletonNone=new rt(!1);const Ut=Array.prototype.indexOf,Nt=Array.prototype.push,Wr=Le=>{const ue=[];for(let Je=0,$e=Le.length;Je<$e;++Je){if(!Zo(Le[Je]))throw new Error("Arr.flatten item "+Je+" was not an array, input: "+Le);Nt.apply(ue,Le[Je])}return ue},yt=(Le,ue)=>{for(let Je=0;Je<Le.length;Je++){const $e=ue(Le[Je],Je);if($e.isSome())return $e}return rt.none()},Bt=(Le,ue,Je=Xt)=>Le.exists($e=>Je($e,ue)),yr=Le=>{const ue=[],Je=$e=>{ue.push($e)};for(let $e=0;$e<Le.length;$e++)Le[$e].each(Je);return ue},ie=(Le,ue)=>Le?rt.some(ue):rt.none(),ht=Le=>ue=>ue.options.get(Le),Ae=ht("link_assume_external_targets"),hr=ht("link_context_toolbar"),_o=ht("link_list"),zr=ht("link_default_target"),Er=ht("link_default_protocol"),Ke=ht("link_target_list"),fn=ht("link_rel_list"),M=ht("link_class_list"),at=ht("link_title"),bi=ht("allow_unsafe_link_target"),Kn=ht("link_quicklink");var Cr=tinymce.util.Tools.resolve("tinymce.util.Tools");const $r=Le=>Sa(Le.value)?Le.value:"",Do=(Le,ue)=>{const Je=[];return Cr.each(Le,$e=>{const Lt=Sa((Pt=$e).text)?Pt.text:Sa(Pt.title)?Pt.title:"";var Pt;if(void 0!==$e.menu){const Pt=Do($e.menu,ue);Je.push({text:Lt,items:Pt})}else{const Pt=ue($e);Je.push({text:Lt,value:Pt})}}),Je},zn=(Le=$r)=>ue=>rt.from(ue).map(Je=>Do(Je,Le)),$=Le=>zn($r)(Le),yn=zn,St=(Le,ue)=>Je=>({name:Le,type:"listbox",label:ue,items:Je}),Qt=$r,ri=Object.keys,zt=Object.hasOwnProperty,Bn=(Le,ue)=>zt.call(Le,ue);var no=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ue=tinymce.util.Tools.resolve("tinymce.util.URI");const ma=Le=>Or(Le)&&"a"===Le.nodeName.toLowerCase(),dn=Le=>ma(Le)&&!!lr(Le),Vt=(Le,ue)=>{if(Le.collapsed)return[];{const Je=Le.cloneContents(),$e=Je.firstChild,Lt=new no($e,Je),Pt=[];let Dt=$e;do{ue(Dt)&&Pt.push(Dt)}while(Dt=Lt.next());return Pt}},ka=Le=>/^\w+:/i.test(Le),lr=Le=>{var ue,Je;return null!==(Je=null!==(ue=Le.getAttribute("data-mce-href"))&&void 0!==ue?ue:Le.getAttribute("href"))&&void 0!==Je?Je:""},qa=(Le,ue)=>{const Je=["noopener"],$e=Le?Le.split(/\s+/):[],Lt=Dt=>Dt.filter(po=>-1===Cr.inArray(Je,po)),Pt=ue?(Dt=Lt(Dt=$e)).length>0?Dt.concat(Je):Je:Lt($e);var Dt;return Pt.length>0?(Dt=>Cr.trim(Dt.sort().join(" ")))(Pt):""},wr=(Le,ue)=>(ue=ue||ps(Le.selection.getRng())[0]||Le.selection.getNode(),hs(ue)?rt.from(Le.dom.select("a[href]",ue)[0]):rt.from(Le.dom.getParent(ue,"a[href]"))),Ui=(Le,ue)=>wr(Le,ue).isSome(),ji=(Le,ue)=>ue.fold(()=>Le.getContent({format:"text"}),Je=>Je.innerText||Je.textContent||"").replace(/\uFEFF/g,""),ps=Le=>Vt(Le,dn),Ar=Le=>Cr.grep(Le,dn),nr=Le=>Ar(Le).length>0,Ha=Le=>{const ue=Le.schema.getTextInlineElements();if(wr(Le).exists($e=>$e.hasAttribute("data-mce-block")))return!1;const Je=Le.selection.getRng();return!!Je.collapsed||0===Vt(Je,$e=>1===$e.nodeType&&!ma($e)&&!Bn(ue,$e.nodeName.toLowerCase())).length},hs=Le=>Or(Le)&&"FIGURE"===Le.nodeName&&/\bimage\b/i.test(Le.className),Nn=(Le,ue,Je)=>{const $e=((Lt,Pt)=>{const Dt=Lt.options.get,po={allow_html_data_urls:Dt("allow_html_data_urls"),allow_script_urls:Dt("allow_script_urls"),allow_svg_data_urls:Dt("allow_svg_data_urls")},bo=Pt.href;return{...Pt,href:Ue.isDomSafe(bo,"a",po)?bo:""}})(Le,Je);Le.hasPlugin("rtc",!0)?Le.execCommand("createlink",!1,(Le=>{const{class:ue,href:Je,rel:$e,target:Lt,text:Pt,title:Dt}=Le;return(po=>{const rn={};var An,Rr,Fr;return An=rn,Rr=(_n,an)=>{An[an]=_n},Fr=kn,((br,se)=>{const we=ri(br);for(let Ve=0,gt=we.length;Ve<gt;Ve++){const lt=we[Ve];se(br[lt],lt)}})(po,(br,se)=>{(!1===(Le=>null===Le)(br)?Rr:Fr)(br,se)}),rn})({class:ue.getOrNull(),href:Je,rel:$e.getOrNull(),target:Lt.getOrNull(),text:Pt.getOrNull(),title:Dt.getOrNull()})})($e)):((Le,ue,Je)=>{const $e=Le.selection.getNode(),Lt=wr(Le,$e),Pt=((Dt,po)=>{const bo={...po};if(0===fn(Dt).length&&!bi(Dt)){const rn=qa(bo.rel,"_blank"===bo.target);bo.rel=rn||null}return rt.from(bo.target).isNone()&&!1===Ke(Dt)&&(bo.target=zr(Dt)),bo.href=(rn=bo.href,"http"!==(An=Ae(Dt))&&"https"!==An||ka(rn)?rn:An+"://"+rn),bo;var rn,An})(Le,(bo=(An,_n)=>(Dt[_n].each(an=>{An[_n]=an.length>0?an:null}),An),rn={href:(Dt=Je).href},((An,_n)=>{for(let an=0,Rr=An.length;an<Rr;an++)_n(An[an])})(["title","rel","class","target"],(An,_n)=>{rn=bo(rn,An)}),rn));var Dt,bo,rn;Le.undoManager.transact(()=>{Je.href===ue.href&&ue.attach(),Lt.fold(()=>{((Dt,po,bo,rn)=>{const An=Dt.dom;hs(po)?Ni(An,po,rn):bo.fold(()=>{Dt.execCommand("mceInsertLink",!1,rn)},_n=>{Dt.insertContent(An.createHTML("a",rn,An.encode(_n)))})})(Le,$e,Je.text,Pt)},Dt=>{Le.focus(),((po,bo,rn,An)=>{rn.each(_n=>{Bn(bo,"innerText")?bo.innerText=_n:bo.textContent=_n}),po.dom.setAttribs(bo,An),po.selection.select(bo)})(Le,Dt,Je.text,Pt)})})})(Le,ue,$e)},Zn=Le=>{var ue;Le.hasPlugin("rtc",!0)?Le.execCommand("unlink"):(ue=Le).undoManager.transact(()=>{const Je=ue.selection.getNode();hs(Je)?fr(ue,Je):($e=>{const Lt=$e.dom,Pt=$e.selection,Dt=Pt.getBookmark(),po=Pt.getRng().cloneRange(),bo=Lt.getParent(po.startContainer,"a[href]",$e.getBody()),rn=Lt.getParent(po.endContainer,"a[href]",$e.getBody());bo&&po.setStartBefore(bo),rn&&po.setEndAfter(rn),Pt.setRng(po),$e.execCommand("unlink"),Pt.moveToBookmark(Dt)})(ue),ue.focus()})},fr=(Le,ue)=>{var Je;const $e=Le.dom.select("img",ue)[0];if($e){const Lt=Le.dom.getParents($e,"a[href]",ue)[0];Lt&&(null===(Je=Lt.parentNode)||void 0===Je||Je.insertBefore($e,Lt),Le.dom.remove(Lt))}},Ni=(Le,ue,Je)=>{var $e;const Lt=Le.select("img",ue)[0];if(Lt){const Pt=Le.create("a",Je);null===($e=Lt.parentNode)||void 0===$e||$e.insertBefore(Pt,Lt),Pt.appendChild(Lt)}},cr=(Le,ue)=>yt(ue,Je=>{return Bn(Lt=Je,"items")&&null!=Lt.items?cr(Le,Je.items):ie(Je.value===Le,Je);var Lt});var Po=tinymce.util.Tools.resolve("tinymce.util.Delay");const ga=Le=>{const ue=Le.href;return ue.indexOf("@")>0&&-1===ue.indexOf("/")&&-1===ue.indexOf("mailto:")?rt.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Je=>({...Je,href:"mailto:"+ue})}):rt.none()},_a=(Le,ue)=>Je=>{const $e=Je.href;return 1===Le&&!ka($e)||0===Le&&/^\s*www(\.|\d\.)/i.test($e)?rt.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ue}:// prefix?`,preprocess:Lt=>({...Lt,href:ue+"://"+$e})}):rt.none()},jt=Le=>{const ue=Le.dom.select("a:not([href])"),Je=Wr((($e,Lt)=>{const Pt=$e.length,Dt=new Array(Pt);for(let po=0;po<Pt;po++)Dt[po]=Lt($e[po]);return Dt})(ue,$e=>{const Lt=$e.name||$e.id;return Lt?[{text:Lt,value:"#"+Lt}]:[]}));return Je.length>0?rt.some([{text:"None",value:""}].concat(Je)):rt.none()},Fo=Le=>{const ue=M(Le);return ue.length>0?$(ue):rt.none()},ws=Le=>{try{return rt.some(JSON.parse(Le))}catch{return rt.none()}},os=(Le,ue)=>{const Je=fn(Le);if(Je.length>0){const $e=Bt(ue,"_blank"),Lt=Pt=>qa(Qt(Pt),$e);return(!1===bi(Le)?yn(Lt):$)(Je)}return rt.none()},Ot=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],wn=Le=>{const ue=Ke(Le);return Zo(ue)?$(ue).orThunk(()=>rt.some(Ot)):!1===ue?rt.none():rt.some(Ot)},wo=(Le,ue,Je)=>{const $e=Le.getAttrib(ue,Je);return null!==$e&&$e.length>0?rt.some($e):rt.none()},Qn=Le=>{var Je;(Je=Le,((Le,ue)=>(Je=>{const $e=Pt=>Je.convertURL(Pt.value||Pt.url||"","href"),Lt=_o(Je);return new Promise(Pt=>{Sa(Lt)?fetch(Lt).then(Dt=>Dt.ok?Dt.text().then(ws):Promise.reject()).then(Pt,()=>Pt(rt.none())):Zi(Lt)?Lt(Dt=>Pt(rt.some(Dt))):Pt(rt.from(Lt))}).then(Pt=>Pt.bind(yn($e)).map(Dt=>Dt.length>0?[{text:"None",value:""}].concat(Dt):Dt))})(Le).then(Je=>{const $e=((Lt,Pt)=>{const Dt=Lt.dom,po=Ha(Lt)?rt.some(ji(Lt.selection,Pt)):rt.none(),bo=Pt.bind(an=>rt.from(Dt.getAttrib(an,"href"))),rn=Pt.bind(an=>rt.from(Dt.getAttrib(an,"target"))),An=Pt.bind(an=>wo(Dt,an,"rel")),_n=Pt.bind(an=>wo(Dt,an,"class"));return{url:bo,text:po,title:Pt.bind(an=>wo(Dt,an,"title")),target:rn,rel:An,linkClass:_n}})(Le,ue);return{anchor:$e,catalogs:{targets:wn(Le),rels:os(Le,$e.target),classes:Fo(Le),anchor:jt(Le),link:Je},optNode:ue,flags:{titleEnabled:at(Le)}}}))(Je,wr(Je))).then(Je=>((Lt,Pt,Dt)=>{const po=Lt.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),bo=Lt.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],rn=((an,Rr)=>{const Fr=an.anchor,br=Fr.url.getOr("");return{url:{value:br,meta:{original:{value:br}}},text:Fr.text.getOr(""),title:Fr.title.getOr(""),anchor:br,link:br,rel:Fr.rel.getOr(""),target:Fr.target.or(Rr).getOr(""),linkClass:Fr.linkClass.getOr("")}})(Lt,rt.from(zr(Dt))),An=Lt.catalogs,_n=((Le,ue)=>{const Je={text:Le.text,title:Le.title};return{onChange:(Lt,Pt)=>{const Dt=Pt.name;return"url"===Dt?(po=>{const bo=ie(Je.text.length<=0,rt.from(null===(An=(rn=po.url).meta)||void 0===An?void 0:An.text).getOr(rn.value));var rn,An;const _n=ie(Je.title.length<=0,rt.from(null===(Rr=po.url.meta)||void 0===Rr?void 0:Rr.title).getOr(""));var Rr;return bo.isSome()||_n.isSome()?rt.some({...bo.map(an=>({text:an})).getOr({}),..._n.map(an=>({title:an})).getOr({})}):rt.none()})(Lt()):Ut.call(["anchor","link"],Dt)>-1?((Lt,Pt)=>{const Dt=(po=ue,bo=Pt,"link"===bo?po.link:"anchor"===bo?po.anchor:rt.none()).getOr([]);var po,bo;return((rn,An,_n,an)=>{const Rr=an[An],Fr=rn.length>0;return void 0!==Rr?cr(Rr,_n).map(br=>({url:{value:br.value,meta:{text:Fr?rn:br.text,attach:kn}},text:Fr?rn:br.text})):rt.none()})(Je.text,Pt,Dt,Lt)})(Lt(),Dt):(("text"===Dt||"title"===Dt)&&(Je[Dt]=Lt()[Dt]),rt.none())}}})(rn,An);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Wr([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],po,bo,yr([An.anchor.map(St("anchor","Anchors")),An.rels.map(St("rel","Rel")),An.targets.map(St("target","Open link in...")),An.link.map(St("link","Link list")),An.classes.map(St("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:rn,onChange:(an,{name:Rr})=>{_n.onChange(an.getData,{name:Rr}).each(Fr=>{an.setData(Fr)})},onSubmit:Pt}})(Je,((Lt,Pt)=>Dt=>{const po=Dt.getData();if(!po.url.value)return Zn(Lt),void Dt.close();const bo=_n=>rt.from(po[_n]).filter(an=>!Bt(Pt.anchor[_n],an)),rn={href:po.url.value,text:bo("text"),target:bo("target"),rel:bo("rel"),class:bo("linkClass"),title:bo("title")},An={href:po.url.value,attach:void 0!==po.url.meta&&po.url.meta.attach?po.url.meta.attach:kn};var _n,an;(_n=Lt,an=rn,yt([ga,_a(Ae(_n),Er(_n))],Rr=>Rr(an)).fold(()=>Promise.resolve(an),Rr=>new Promise(Fr=>{((br,se)=>{const Ve=br.selection.getRng();Po.setEditorTimeout(br,()=>{br.windowManager.confirm(se,gt=>{br.selection.setRng(Ve),(br=>{Fr(br?Rr.preprocess(an):an)})(gt)})})})(_n,Rr.message)}))).then(_n=>{Nn(Lt,An,_n)}),Dt.close()})(Le,Je),Le)).then(Je=>{Le.windowManager.open(Je)})};var gl=tinymce.util.Tools.resolve("tinymce.util.VK");const fs=(Le,ue)=>Le.dom.getParent(ue,"a[href]"),Pa=Le=>fs(Le,Le.selection.getStart()),As=(Le,ue)=>{if(ue){const Je=lr(ue);if(/^#/.test(Je)){const $e=Le.dom.select(Je);$e.length&&Le.selection.scrollIntoView($e[0],!0)}else($e=>{const Lt=document.createElement("a");Lt.target="_blank",Lt.href=$e,Lt.rel="noreferrer noopener";const Pt=document.createEvent("MouseEvents");var Dt,po;Pt.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Dt=Lt,po=Pt,document.body.appendChild(Dt),Dt.dispatchEvent(po),document.body.removeChild(Dt)})(ue.href)}},ea=Le=>()=>{Le.execCommand("mceLink",!1,{dialog:!0})},Ea=Le=>()=>{As(Le,Pa(Le))},ta=(Le,ue)=>(Le.on("NodeChange",ue),()=>Le.off("NodeChange",ue)),xs=Le=>ue=>{const Je=()=>{ue.setActive(!Le.mode.isReadOnly()&&Ui(Le,Le.selection.getNode())),ue.setEnabled(Le.selection.isEditable())};return Je(),ta(Le,Je)},Nr=Le=>ue=>{const Je=()=>{ue.setEnabled(Le.selection.isEditable())};return Je(),ta(Le,Je)},js=Le=>ue=>{const Je=()=>{return ue.setEnabled(1===(($e=Le).selection.isCollapsed()?Ar($e.dom.getParents($e.selection.getStart())):ps($e.selection.getRng())).length);var $e};return Je(),ta(Le,Je)},Ws=Le=>ue=>{const Je=Le.dom.getParents(Le.selection.getStart()),$e=Lt=>{var Dt;ue.setEnabled((nr(Lt)||(Dt=Le.selection.getRng(),ps(Dt).length>0))&&Le.selection.isEditable())};return $e(Je),ta(Le,Lt=>$e(Lt.parents))};Od.add("link",Le=>{var ue;(ue=>{const Je=ue.options.register;Je("link_assume_external_targets",{processor:$e=>{const Lt=Sa($e)||Us($e);return Lt?!0===$e?{value:1,valid:Lt}:"http"===$e||"https"===$e?{value:$e,valid:Lt}:{value:0,valid:Lt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Je("link_context_toolbar",{processor:"boolean",default:!1}),Je("link_list",{processor:$e=>Sa($e)||Zi($e)||ua($e,da)}),Je("link_default_target",{processor:"string"}),Je("link_default_protocol",{processor:"string",default:"https"}),Je("link_target_list",{processor:$e=>Us($e)||ua($e,da),default:!0}),Je("link_rel_list",{processor:"object[]",default:[]}),Je("link_class_list",{processor:"object[]",default:[]}),Je("link_title",{processor:"boolean",default:!0}),Je("allow_unsafe_link_target",{processor:"boolean",default:!1}),Je("link_quicklink",{processor:"boolean",default:!1})})(Le),(ue=Le).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ea(ue),onSetup:xs(ue)}),ue.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ea(ue),onSetup:js(ue)}),ue.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Zn(ue),onSetup:Ws(ue)}),(ue=>{ue.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ea(ue),onSetup:js(ue)}),ue.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Nr(ue),onAction:ea(ue)}),ue.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Zn(ue),onSetup:Ws(ue)})})(Le),(ue=>{ue.ui.registry.addContextMenu("link",{update:Je=>ue.dom.isEditable(Je)?nr(ue.dom.getParents(Je,"a"))?"link unlink openlink":"link":""})})(Le),(ue=>{const Je=$e=>{const Lt=ue.selection.getNode();return $e.setEnabled(Ui(ue,Lt)),kn};ue.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:xs(ue)},label:"Link",predicate:$e=>hr(ue)&&Ui(ue,$e),initValue:()=>wr(ue).fold(()=>"",lr),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:$e=>{const Lt=ue.selection.getNode();return $e.setActive(Ui(ue,Lt)),xs(ue)($e)},onAction:$e=>{const Lt=$e.getValue(),Pt=(Dt=>{const po=wr(ue),bo=Ha(ue);if(po.isNone()&&bo){const rn=ji(ue.selection,po);return ie(0===rn.length,Dt)}return rt.none()})(Lt);Nn(ue,{href:Lt,attach:kn},{href:Lt,text:Pt,title:rt.none(),rel:rt.none(),target:rt.none(),class:rt.none()}),ue.selection.collapse(!1),$e.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Je,onAction:$e=>{Zn(ue),$e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Je,onAction:$e=>{Ea(ue)(),$e.hide()}}]})})(Le),(ue=>{ue.on("click",Je=>{const $e=fs(ue,Je.target);$e&&gl.metaKeyPressed(Je)&&(Je.preventDefault(),As(ue,$e))}),ue.on("keydown",Je=>{if(!Je.isDefaultPrevented()&&13===Je.keyCode&&!0===($e=Je).altKey&&!1===$e.shiftKey&&!1===$e.ctrlKey&&!1===$e.metaKey){const $e=Pa(ue);$e&&(Je.preventDefault(),As(ue,$e))}var $e})})(Le),(ue=>{ue.addCommand("mceLink",(Je,$e)=>{!0!==$e?.dialog&&Kn(ue)?ue.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Qn(ue)})})(Le),(ue=>{ue.addShortcut("Meta+K","",()=>{ue.execCommand("mceLink")})})(Le)})}(),function(){"use strict";var Od=tinymce.util.Tools.resolve("tinymce.PluginManager");const $a=F=>G=>(K=>{const re=typeof K;return null===K?"null":"object"===re&&Array.isArray(K)?"array":"object"===re&&(_e=De=K,(dt=String).prototype.isPrototypeOf(_e)||(null===(Tt=De.constructor)||void 0===Tt?void 0:Tt.name)===dt.name)?"string":re;var _e,De,dt,Tt})(G)===F,fi=F=>G=>typeof G===F,Sa=$a("string"),da=$a("array"),Zo=fi("boolean"),Ia=F=>void 0===F,Us=F=>!(null==F),Or=fi("function"),Zi=fi("number"),ua=()=>{},kn=F=>()=>F,Xt=F=>F,rt=(F,G)=>F===G;function Ut(F,...G){return(...K)=>{const re=G.concat(K);return F.apply(null,re)}}const Nt=F=>{F()},Wr=kn(!1),yt=kn(!0);class Bt{constructor(G,K){this.tag=G,this.value=K}static some(G){return new Bt(!0,G)}static none(){return Bt.singletonNone}fold(G,K){return this.tag?K(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?Bt.some(G(this.value)):Bt.none()}bind(G){return this.tag?G(this.value):Bt.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:Bt.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G??"Called getOrDie on None")}static from(G){return Us(G)?Bt.some(G):Bt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Bt.singletonNone=new Bt(!1);const yr=Object.keys,ie=Object.hasOwnProperty,ht=(F,G)=>{const K=yr(F);for(let re=0,_e=K.length;re<_e;re++){const De=K[re];G(F[De],De)}},Ae=(F,G)=>{const K={};var re,De,dt,Tt;return De=G,re=K,dt=(_e,De)=>{re[De]=_e},Tt=ua,ht(F,(Et,At)=>{(De(Et,At)?dt:Tt)(Et,At)}),K},hr=F=>yr(F).length,_o=(F,G)=>zr(F,G)?Bt.from(F[G]):Bt.none(),zr=(F,G)=>ie.call(F,G),Er=(F,G)=>zr(F,G)&&null!=F[G],Ke=Array.prototype.indexOf,fn=Array.prototype.push,M=(F,G)=>Ke.call(F,G)>-1,at=(F,G)=>{for(let K=0,re=F.length;K<re;K++)if(G(F[K],K))return!0;return!1},bi=(F,G)=>{const K=[];for(let re=0;re<F;re++)K.push(G(re));return K},Kn=(F,G)=>{const K=F.length,re=new Array(K);for(let _e=0;_e<K;_e++)re[_e]=G(F[_e],_e);return re},Cr=(F,G)=>{for(let K=0,re=F.length;K<re;K++)G(F[K],K)},$r=(F,G)=>{const K=[];for(let re=0,_e=F.length;re<_e;re++){const De=F[re];G(De,re)&&K.push(De)}return K},Do=(F,G,K)=>(Cr(F,(re,_e)=>{K=G(K,re,_e)}),K),zn=(F,G)=>((K,re,_e)=>{for(let De=0,dt=K.length;De<dt;De++){const Tt=K[De];if(re(Tt,De))return Bt.some(Tt);if(_e(Tt,De))break}return Bt.none()})(F,G,Wr),$=(F,G)=>(K=>{const re=[];for(let _e=0,De=K.length;_e<De;++_e){if(!da(K[_e]))throw new Error("Arr.flatten item "+_e+" was not an array, input: "+K);fn.apply(re,K[_e])}return re})(Kn(F,G)),yn=(F,G)=>{for(let K=0,re=F.length;K<re;++K)if(!0!==G(F[K],K))return!1;return!0},St=(F,G)=>G>=0&&G<F.length?Bt.some(F[G]):Bt.none(),Qt=(F,G)=>{for(let K=0;K<F.length;K++){const re=G(F[K],K);if(re.isSome())return re}return Bt.none()},ri=F=>{if(null==F)throw new Error("Node cannot be null or undefined");return{dom:F}},zt={fromHtml:(F,G)=>{const K=(G||document).createElement("div");if(K.innerHTML=F,!K.hasChildNodes()||K.childNodes.length>1){const re="HTML does not have a single root node";throw console.error(re,F),new Error(re)}return ri(K.childNodes[0])},fromTag:(F,G)=>{const K=(G||document).createElement(F);return ri(K)},fromText:(F,G)=>{const K=(G||document).createTextNode(F);return ri(K)},fromDom:ri,fromPoint:(F,G,K)=>Bt.from(F.dom.elementFromPoint(G,K)).map(ri)},Bn=(F,G)=>{const K=F.dom;if(1!==K.nodeType)return!1;{const re=K;if(void 0!==re.matches)return re.matches(G);if(void 0!==re.msMatchesSelector)return re.msMatchesSelector(G);if(void 0!==re.webkitMatchesSelector)return re.webkitMatchesSelector(G);if(void 0!==re.mozMatchesSelector)return re.mozMatchesSelector(G);throw new Error("Browser lacks native selectors")}},no=F=>1!==F.nodeType&&9!==F.nodeType&&11!==F.nodeType||0===F.childElementCount,Ue=(F,G)=>F.dom===G.dom,ma=Bn;typeof window<"u"||Function("return this;")();const dn=F=>F.dom.nodeName.toLowerCase(),Vt=F=>F.dom.nodeType,ka=F=>G=>Vt(G)===F,lr=ka(1),qa=ka(3),wr=ka(9),Ui=ka(11),ji=F=>G=>lr(G)&&dn(G)===F,ps=F=>wr(F)?F:zt.fromDom(F.dom.ownerDocument),Ar=F=>Bt.from(F.dom.parentNode).map(zt.fromDom),nr=F=>Bt.from(F.dom.nextSibling).map(zt.fromDom),Ha=F=>Kn(F.dom.childNodes,zt.fromDom),hs=Or(Element.prototype.attachShadow)&&Or(Node.prototype.getRootNode)?F=>zt.fromDom(F.dom.getRootNode()):ps,Sr=F=>zt.fromDom(F.dom.host),ml=F=>{const G=qa(F)?F.dom.parentNode:F.dom;if(null==G||null===G.ownerDocument)return!1;const K=G.ownerDocument;return(De=>{const dt=hs(De);return Ui(Tt=dt)&&Us(Tt.dom.host)?Bt.some(dt):Bt.none();var Tt})(zt.fromDom(G)).fold(()=>K.body.contains(G),(re=ml,_e=Sr,De=>re(_e(De))));var re,_e};var Nn=(F,G,K,re,_e)=>F(K,re)?Bt.some(K):Or(_e)&&_e(K)?Bt.none():G(K,re,_e);const Zn=(F,G,K)=>{let re=F.dom;const _e=Or(K)?K:Wr;for(;re.parentNode;){re=re.parentNode;const De=zt.fromDom(re);if(G(De))return Bt.some(De);if(_e(De))break}return Bt.none()},fr=(F,G,K)=>Zn(F,re=>Bn(re,G),K),cr=(F,G)=>((K,re)=>{const _e=void 0===re?document:re.dom;return no(_e)?Bt.none():Bt.from(_e.querySelector(K)).map(zt.fromDom)})(G,F),Wi=(F,G,K)=>Nn((re,_e)=>Bn(re,_e),fr,F,G,K),Po=(F,G=!1)=>{return ml(F)?F.dom.isContentEditable:(K=F,Wi(K,"[contenteditable]")).fold(kn(G),re=>"true"===ga(re));var K},ga=F=>F.dom.contentEditable,_a=F=>G=>Ue(G,zt.fromDom(F.getBody())),jt=F=>/^\d+(\.\d+)?$/.test(F)?F+"px":F,Fo=F=>zt.fromDom(F.selection.getStart()),ws=(F,G)=>{let K=[];return Cr(Ha(F),re=>{G(re)&&(K=K.concat([re])),K=K.concat(ws(re,G))}),K},os=(F,G)=>$r(Ha(F),_e=>Bn(_e,G)),Ot=(F,G)=>((K,re)=>{const _e=void 0===re?document:re.dom;return no(_e)?[]:Kn(_e.querySelectorAll(K),zt.fromDom)})(G,F),wn=(F,G,K)=>{if(!(Sa(K)||Zo(K)||Zi(K)))throw console.error("Invalid call to Attribute.set. Key ",G,":: Value ",K,":: Element ",F),new Error("Attribute value was not simple");F.setAttribute(G,K+"")},wo=(F,G)=>{const K=F.dom.getAttribute(G);return null===K?void 0:K},ns=(F,G)=>Bt.from(wo(F,G)),Qn=(F,G)=>{F.dom.removeAttribute(G)},gl=(F,G,K=rt)=>F.exists(re=>K(re,G)),fs=(F,G,K)=>F.isSome()&&G.isSome()?Bt.some(K(F.getOrDie(),G.getOrDie())):Bt.none(),Pa=(F,G)=>{return K=F,""===(re=G)||K.length>=re.length&&K.substr(0,0+re.length)===re;var K,re},As=(ea=/^\s+|\s+$/g,F=>F.replace(ea,""));var ea;const Ea=F=>F.length>0,ta=(F,G=10)=>{const K=parseInt(F,G);return isNaN(K)?Bt.none():Bt.some(K)},xs=F=>void 0!==F.style&&Or(F.style.getPropertyValue),Nr=(F,G)=>{const K=F.dom,re=window.getComputedStyle(K).getPropertyValue(G);return""!==re||ml(F)?re:js(K,G)},js=(F,G)=>xs(F)?F.style.getPropertyValue(G):"",Ws=(F,G)=>{const re=js(F.dom,G);return Bt.from(re).filter(_e=>_e.length>0)},Le=(F,G,K=0)=>ns(F,G).map(re=>parseInt(re,10)).getOr(K),ue=(F,G)=>Je(F,G,yt),Je=(F,G,K)=>$(Ha(F),re=>Bn(re,G)?K(re)?[re]:[]:Je(re,G,K)),$e=["tfoot","thead","tbody","colgroup"],Lt=(F,G,K)=>({element:F,rowspan:G,colspan:K}),Pt=(F,G,K)=>({element:F,cells:G,section:K}),Dt=(F,G)=>Wi(F,"table",G),po=F=>ue(F,"tr"),bo=F=>Dt(F).fold(kn([]),G=>os(G,"colgroup")),rn=F=>Ar(F).map(G=>{const K=dn(G);return M($e,K)?K:"tbody"}).getOr("tbody"),An=F=>ns(F,"data-snooker-locked-cols").bind(G=>Bt.from(G.match(/\d+/g))).map(G=>((K,re)=>{const _e={};for(let De=0,dt=K.length;De<dt;De++){const Tt=K[De];_e[String(Tt)]=re(Tt,De)}return _e})(G,yt)),_n=(F,G)=>F+","+G,Rr=F=>(F=>{const G={},K=[];var re;const _e=(re=F,St(re,0)).map(ao=>ao.element).bind(Dt).bind(An).getOr({});let De=0,dt=0,Tt=0;const{pass:Et,fail:At}=(ao=>{const Tn=[],so=[];for(let Qo=0,xn=ao.length;Qo<xn;Qo++){const gr=ao[Qo];(cn=gr,"colgroup"===cn.section?Tn:so).push(gr)}var cn;return{pass:Tn,fail:so}})(F);Cr(At,ao=>{const Ct=[];Cr(ao.cells,Tn=>{let so=0;for(;void 0!==G[_n(Tt,so)];)so++;const cn=Er(_e,so.toString()),Qo=((xn,gr,er,vr,tr,ha)=>({element:xn,rowspan:gr,colspan:er,row:vr,column:tr,isLocked:ha}))(Tn.element,Tn.rowspan,Tn.colspan,Tt,so,cn);for(let xn=0;xn<Tn.colspan;xn++)for(let gr=0;gr<Tn.rowspan;gr++){const er=so+xn,vr=_n(Tt+gr,er);G[vr]=Qo,dt=Math.max(dt,er+1)}Ct.push(Qo)}),De++,K.push(Pt(ao.element,Ct,ao.section)),Tt++});const{columns:qt,colgroups:to}=(ao=Et,St(ao,ao.length-1)).map(ao=>{const Ct=(so=>{const cn={};let Qo=0;return Cr(so.cells,xn=>{const gr=xn.colspan;bi(gr,er=>{const vr=Qo+er;cn[vr]=((tr,ha,fa)=>({element:tr,colspan:ha,column:fa}))(xn.element,gr,vr)}),Qo+=gr}),cn})(ao);return{colgroups:[((so,cn)=>({element:so,columns:cn}))(ao.element,((so,cn)=>{const Qo=[];return ht(so,(xn,gr)=>{Qo.push(cn(xn,gr))}),Qo})(Ct,Xt))],columns:Ct}}).getOrThunk(()=>({colgroups:[],columns:{}}));var ao;return{grid:((ao,Ct)=>({rows:ao,columns:Ct}))(De,dt),access:G,all:K,columns:qt,colgroups:to}})((K=>{const re=po(K);return _e=[...bo(K),...re],De=rn,Kn(_e,dt=>{if("colgroup"===dn(dt)){const Tt=Kn(Bn(Et=dt,"colgroup")?os(Et,"col"):$(bo(Et),At=>os(At,"col")),Et=>{const At=Le(Et,"span",1);return Lt(Et,1,At)});return Pt(dt,Tt,"colgroup")}var Et;{const Tt=Kn((Et=>ue(Et,"th,td"))(dt),Et=>{const At=Le(Et,"rowspan",1),qt=Le(Et,"colspan",1);return Lt(Et,At,qt)});return Pt(dt,Tt,De(dt))}});var _e,De})(F)),Fr=(F,G,K)=>Bt.from(F.access[_n(G,K)]),br=(F,G,K)=>{const re=(_e=>{const dt=$(_e.all,Tt=>Tt.cells);return $r(dt,_e=>K(G,_e.element))})(F);return re.length>0?Bt.some(re[0]):Bt.none()},se=(F,G)=>Bt.from(F.columns[G]);var we=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ve=(F,G,K)=>{const re=F.select("td,th",G);let _e;for(let De=0;De<re.length;De++){const dt=F.getStyle(re[De],K);if(Ia(_e)&&(_e=dt),_e!==dt)return""}return _e},gt=(F,G,K)=>{we.each("left center right".split(" "),re=>{re!==K&&F.formatter.remove("align"+re,{},G)}),K&&F.formatter.apply("align"+K,{},G)},lt=(F,G,K)=>{F.dispatch("TableModified",{...K,table:G})},Rt=(F,G,K)=>{return _e=K,(De=>{const dt=parseFloat(De);return isNaN(dt)?Bt.none():Bt.some(dt)})(Nr(F,G)).getOr(_e);var _e};var eo=tinymce.util.Tools.resolve("tinymce.Env");const sn=bi(5,F=>{const G=`${F+1}px`;return{title:G,value:G}}),ln=Kn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],F=>({title:F,value:F.toLowerCase()})),en=F=>{var G;const K=F.dom,re=null!==(G=K.getParent(F.selection.getStart(),K.isBlock))&&void 0!==G?G:F.getBody();return(F=>(G=>{const re=G.dom;return(re.getBoundingClientRect().width||re.offsetWidth)-Rt(De=G,"padding-left",0)-Rt(De,"padding-right",0)-Rt(De,"border-left-width",0)-Rt(De,"border-right-width",0);var De})(F))(zt.fromDom(re))+"px"},dr=F=>G=>G.options.get(F),Cs=dr("table_sizing_mode"),$s=dr("table_border_widths"),vi=dr("table_border_styles"),oa=dr("table_cell_advtab"),Wn=dr("table_row_advtab"),bs=dr("table_advtab"),ur=dr("table_appearance_options"),Ml=dr("table_grid"),Is=dr("table_style_by_css"),Ri=dr("table_cell_class_list"),yi=dr("table_row_class_list"),Fa=dr("table_class_list"),No=dr("table_toolbar"),Ta=dr("table_background_color_map"),qr=dr("table_border_color_map"),Ns=F=>"fixed"===Cs(F),Sc=F=>"responsive"===Cs(F),Oo=F=>{const G=F.options,K=G.get("table_default_styles");return G.isSet("table_default_styles")?K:(_e=K,Sc(re=F)||!Is(re)?_e:Ns(re)?{..._e,width:en(re)}:{..._e,width:"100%"});var re,_e},qs=F=>{const G=F.options,K=G.get("table_default_attributes");return G.isSet("table_default_attributes")?K:(_e=K,Sc(re=F)||Is(re)?_e:Ns(re)?{..._e,width:en(re)}:{..._e,width:"100%"});var re,_e},kc=(F,G)=>G.column>=F.startCol&&G.column+G.colspan-1<=F.finishCol&&G.row>=F.startRow&&G.row+G.rowspan-1<=F.finishRow,wt=Rr,Mi=(F,G)=>{Ar(F).each(K=>{K.dom.insertBefore(G.dom,F.dom)})},cs=(F,G)=>{nr(F).fold(()=>{Ar(F).each(K=>{kr(K,G)})},K=>{Mi(K,G)})},kr=(F,G)=>{F.dom.appendChild(G.dom)},rs=(F,G)=>{Cr(G,(K,re)=>{cs(0===re?F:G[re-1],K)})},tu=F=>{const G=F.dom;null!==G.parentNode&&G.parentNode.removeChild(G)},Gc=(F=>{const K=re=>F(re)?Bt.from(re.dom.nodeValue):Bt.none();return{get:re=>{if(!F(re))throw new Error("Can only get text value of a text node");return K(re).getOr("")},getOption:K,set:(re,_e)=>{if(!F(re))throw new Error("Can only set raw text value of a text node");re.dom.nodeValue=_e}}})(qa);var Yn=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Sn=(F,G,K)=>G.bind(re=>K.filter(Ut(F.eq,re))),oc={up:kn({selector:fr,closest:Wi,predicate:Zn,all:(F,G)=>{const K=Or(G)?G:Wr;let re=F.dom;const _e=[];for(;null!=re.parentNode;){const De=re.parentNode,dt=zt.fromDom(De);if(_e.push(dt),!0===K(dt))break;re=De}return _e}}),down:kn({selector:Ot,predicate:ws}),styles:kn({get:Nr,getRaw:Ws,set:(F,G,K)=>{((re,_e,De)=>{if(!Sa(De))throw console.error("Invalid call to CSS.set. Property ",_e,":: Value ",De,":: Element ",re),new Error("CSS value must be a string: "+De);xs(re)&&re.style.setProperty(_e,De)})(F.dom,G,K)},remove:(F,G)=>{var K,re;re=G,xs(K=F.dom)&&K.style.removeProperty(re),gl(ns(F,"style").map(As),"")&&Qn(F,"style")}}),attrs:kn({get:wo,set:(F,G,K)=>{wn(F.dom,G,K)},remove:Qn,copyTo:(F,G)=>{((K,re)=>{const _e=K.dom;ht(re,(De,dt)=>{wn(_e,dt,De)})})(G,Do(F.dom.attributes,(K,re)=>(K[re.name]=re.value,K),{}))}}),insert:kn({before:Mi,after:cs,afterAll:rs,append:kr,appendAll:(F,G)=>{Cr(G,K=>{kr(F,K)})},prepend:(F,G)=>{var K;(K=F,Bt.from(K.dom.childNodes[0]).map(zt.fromDom)).fold(()=>{kr(F,G)},K=>{F.dom.insertBefore(G.dom,K.dom)})},wrap:(F,G)=>{Mi(F,G),kr(G,F)}}),remove:kn({unwrap:F=>{const G=Ha(F);G.length>0&&rs(F,G),tu(F)},remove:tu}),create:kn({nu:zt.fromTag,clone:F=>zt.fromDom(F.dom.cloneNode(!1)),text:zt.fromText}),query:kn({comparePosition:(F,G)=>F.dom.compareDocumentPosition(G.dom),prevSibling:F=>Bt.from(F.dom.previousSibling).map(zt.fromDom),nextSibling:nr}),property:kn({children:Ha,name:dn,parent:Ar,document:F=>ps(F).dom,isText:qa,isComment:F=>8===Vt(F)||"#comment"===dn(F),isElement:lr,isSpecial:F=>{const G=dn(F);return M(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],G)},getLanguage:F=>lr(F)?ns(F,"lang"):Bt.none(),getText:F=>Gc.get(F),setText:(F,G)=>Gc.set(F,G),isBoundary:F=>!!lr(F)&&("body"===dn(F)||M(Yn,dn(F))),isEmptyTag:F=>!!lr(F)&&M(["br","img","hr","input"],dn(F)),isNonEditable:F=>lr(F)&&"false"===wo(F,"contenteditable")}),eq:Ue,is:ma},ds=F=>fr(F,"table"),Ga=(F,G,K)=>cr(F,G).bind(re=>cr(F,K).bind(_e=>{return(De=ds,dt=[re,_e],Tt=oc,At=dt,At.length>0?(to=(Tt,Et)=>De(Et),((F,G,K,re)=>{const _e=G(F,K);return De=(Tt,Et)=>{const At=G(F,Et);return Sn(F,Tt,At)},dt=_e,((Tt,Et)=>{for(let At=Tt.length-1;At>=0;At--)Et(Tt[At])})(re,(Tt,Et)=>{dt=De(dt,Tt)}),dt;var De,dt})(Tt,to,(rr=At)[0],rr.slice(1))):Bt.none()).map(Tt=>({first:re,last:_e,table:Tt}));var Tt,At,to,rr,De,dt})),us=F=>Kn(F,zt.fromDom),En="data-mce-selected",Rs="data-mce-first-selected",si="data-mce-last-selected",Di={selected:En,selectedSelector:"td["+En+"],th["+En+"]",firstSelected:Rs,firstSelectedSelector:"td["+Rs+"],th["+Rs+"]",lastSelected:si,lastSelectedSelector:"td["+si+"],th["+si+"]"},Dl=F=>(G,K)=>{const re=dn(G),_e="col"===re||"colgroup"===re?Dt(De=G).bind(dt=>((At,qt)=>{const to=Ot(At,qt);return to.length>0?Bt.some(to):Bt.none()})(dt,Di.firstSelectedSelector)).fold(kn(De),dt=>dt[0]):G;var De;return Wi(_e,F,K)},mr=Dl("th,td,caption"),Oa=Dl("th,td"),ss=F=>us(F.model.table.getSelectedCells()),hl=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],as=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ou=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Bl=F=>{return(G=F,Pa(G,"#")?(K=G,K.substring(1)):G).toUpperCase();var K,G},Ms=F=>{const G=F.toString(16);return(1===G.length?"0"+G:G).toUpperCase()},nu=F=>{return G=Ms(F.red)+Ms(F.green)+Ms(F.blue),{value:Bl(G)};var G},ym=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ru=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ll=(F,G,K,re)=>({red:F,green:G,blue:K,alpha:re}),Ad=(F,G,K,re)=>{const _e=parseInt(F,10),De=parseInt(G,10),dt=parseInt(K,10),Tt=parseFloat(re);return Ll(_e,De,dt,Tt)},Il=F=>{if("transparent"===F)return Bt.some(Ll(0,0,0,0));const G=ym.exec(F);if(null!==G)return Bt.some(Ad(G[1],G[2],G[3],"1"));const K=ru.exec(F);return null!==K?Bt.some(Ad(K[1],K[2],K[3],K[4])):Bt.none()},Kc=F=>{let G=F;return{get:()=>G,set:K=>{G=K}}},_c=(F,G,K)=>re=>{const _e=(Tt=>{const Et=Kc(Bt.none()),At=()=>Et.get().each(Tt);return{clear:()=>{At(),Et.set(Bt.none())},isSet:()=>Et.get().isSome(),get:()=>Et.get(),set:qt=>{At(),Et.set(Bt.some(qt))}}})(Tt=>Tt.unbind()),De=!Ea(K),dt=()=>{const Tt=ss(F),Et=At=>F.formatter.match(G,{value:K},At.dom,De);De?(re.setActive(!at(Tt,Et)),_e.set(F.formatter.formatChanged(G,At=>re.setActive(!At),!0))):(re.setActive(yn(Tt,Et)),_e.set(F.formatter.formatChanged(G,re.setActive,!1,{value:K})))};return F.initialized?dt():F.on("init",dt),_e.clear},fl=F=>Er(F,"menu"),vs=F=>Kn(F,G=>{const K=G.text||G.title||"";return fl(G)?{text:K,items:vs(G.menu)}:{text:K,value:G.value}}),Bi=(F,G,K,re)=>Kn(G,_e=>{const De=_e.text||_e.title;return fl(_e)?{type:"nestedmenuitem",text:De,getSubmenuItems:()=>Bi(F,_e.menu,K,re)}:{text:De,type:"togglemenuitem",onAction:()=>re(_e.value),onSetup:_c(F,K,_e.value)}}),ve=(F,G)=>K=>{F.execCommand("mceTableApplyCellStyle",!1,{[G]:K})},nc=F=>$(F,G=>fl(G)?[{...G,menu:nc(G.menu)}]:Ea(G.value)?[G]:[]),rc=(F,G,K,re)=>_e=>_e(Bi(F,G,K,re)),ai=(F,G,K)=>{const re=Kn(G,_e=>{return{text:_e.title,value:"#"+(dt=_e.value,(De=dt,Tt=De,as.test(Tt)||ou.test(Tt)?Bt.some({value:Bl(De)}):Bt.none()).orThunk(()=>Il(dt).map(nu)).getOrThunk(()=>{const Tt=document.createElement("canvas");Tt.height=1,Tt.width=1;const Et=Tt.getContext("2d");Et.clearRect(0,0,Tt.width,Tt.height),Et.fillStyle="#FFFFFF",Et.fillStyle=dt,Et.fillRect(0,0,1,1);const At=Et.getImageData(0,0,1,1).data;return nu(Ll(At[0],At[1],At[2],At[3]))})).value,type:"choiceitem"};var Tt,De,dt});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:re.length>0?re:void 0,allowCustomColors:!1},onAction:_e=>{const De="remove"===_e.value?"":_e.value;F.execCommand("mceTableApplyCellStyle",!1,{[K]:De})}}]},Nd=F=>()=>{const G="header"===F.queryCommandValue("mceTableRowType")?"body":"header";F.execCommand("mceTableRowType",!1,{type:G})},$n=F=>()=>{const G="th"===F.queryCommandValue("mceTableColType")?"td":"th";F.execCommand("mceTableColType",!1,{type:G})},bl=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:hl}],Rd=F=>bl.concat((G=>{const K=vs(Ri(G));return K.length>0?Bt.some({name:"class",type:"listbox",label:"Class",items:K}):Bt.none()})(F).toArray()),vl=(F,G)=>{const K=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(vs(vi(F)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===G?[{name:"borderwidth",type:"input",label:"Border width"}].concat(K):K}},q=(F,G)=>{const K=F.dom;return{setAttrib:(re,_e)=>{K.setAttrib(G,re,_e)},setStyle:(re,_e)=>{K.setStyle(G,re,_e)},setFormat:(re,_e)=>{""===_e?F.formatter.remove(re,{value:null},G,!0):F.formatter.apply(re,{value:_e},G)}}},ee=ji("th"),ce=(F,G)=>F&&G?"sectionCells":F?"section":"cells",he=(F,G)=>Qt(F.all,K=>zn(K.cells,re=>Ue(G,re.element))),Ge=(F,G)=>((F,G,K)=>{const re=(De=>{const dt=[],Tt=Et=>{dt.push(Et)};for(let Et=0;Et<De.length;Et++)De[Et].each(Tt);return dt})(Kn(G.selection,De=>{return(dt=De,((Et,At,qt=Wr)=>qt(At)?Bt.none():M(Et,dn(At))?Bt.some(At):fr(At,Et.join(","),to=>Bn(to,"table")||qt(to)))(["td","th"],dt,void 0)).bind(Et=>he(F,Et)).filter(K);var dt}));return re.length>0?Bt.some(re):Bt.none()})(F,G,yt),ct=(F,G)=>yn(G,K=>he(F,K).exists(De=>!De.isLocked)),xt=(F,G)=>{return(re=G,re.mergable).filter(K=>ct(F,K.cells));var re},kt=(F,G)=>{return(re=G,re.unmergable).filter(K=>ct(F,K));var re},vo=((F=>{if(!da(F))throw new Error("cases must be an array");if(0===F.length)throw new Error("there must be at least one case");const G=[],K={};Cr(F,(re,_e)=>{const De=yr(re);if(1!==De.length)throw new Error("one and only one name per case");const dt=De[0],Tt=re[dt];if(void 0!==K[dt])throw new Error("duplicate key detected:"+dt);if("cata"===dt)throw new Error("cannot have a case named cata (sorry)");if(!da(Tt))throw new Error("case arguments must be an array");G.push(dt),K[dt]=(...Et)=>{const At=Et.length;if(At!==Tt.length)throw new Error("Wrong number of arguments to case "+dt+". Expected "+Tt.length+" ("+Tt+"), got "+At);return{fold:(...qt)=>{if(qt.length!==F.length)throw new Error("Wrong number of arguments to fold. Expected "+F.length+", got "+qt.length);return qt[_e].apply(null,Et)},match:qt=>{const to=yr(qt);if(G.length!==to.length)throw new Error("Wrong number of arguments to match. Expected: "+G.join(",")+"\nActual: "+to.join(","));if(!yn(G,rr=>M(to,rr)))throw new Error("Not all branches were specified when using match. Specified: "+to.join(", ")+"\nRequired: "+G.join(", "));return qt[dt].apply(null,Et)},log:qt=>{console.log(qt,{constructors:G,constructor:dt,params:Et})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(F,G)=>{const K=Rr(F);return Ge(K,G).bind(re=>{const _e=re[re.length-1];return(F=>{const G=Kn(F,_e=>(De=>{const dt="thead"===De.section,Tt=gl((Et=>{const At=$r(Et,qt=>ee(qt.element));return 0===At.length?Bt.some("td"):At.length===Et.length?Bt.some("th"):Bt.none()})(De.cells),"th");return"tfoot"===De.section?{type:"footer"}:dt||Tt?{type:"header",subType:ce(dt,Tt)}:{type:"body"}})(_e).type),K=M(G,"header"),re=M(G,"footer");if(K||re){const _e=M(G,"body");return!K||_e||re?K||_e||!re?Bt.none():Bt.some("footer"):Bt.some("header")}return Bt.some("body")})(K.all.slice(re[0].row,_e.row+_e.rowspan))}).getOr("")}),Co=F=>{return Pa(F,"rgb")?Il(G=F).map(nu).map(K=>"#"+K.value).getOr(G):F;var G},Ao=F=>{const G=zt.fromDom(F);return{borderwidth:Ws(G,"border-width").getOr(""),borderstyle:Ws(G,"border-style").getOr(""),bordercolor:Ws(G,"border-color").map(Co).getOr(""),backgroundcolor:Ws(G,"background-color").map(Co).getOr("")}},Lo=F=>{const G=F[0],K=F.slice(1);return Cr(K,re=>{Cr(yr(G),_e=>{ht(re,(De,dt)=>{const Tt=G[_e];""!==Tt&&_e===dt&&Tt!==De&&(G[_e]="")})})}),G},tn=(F,G,K,re)=>zn(F,_e=>!Ia(K.formatter.matchNode(re,G+_e))).getOr(""),mn=Ut(tn,["left","center","right"],"align"),gn=Ut(tn,["top","middle","bottom"],"valign"),qn=F=>Dt(zt.fromDom(F)).map(G=>{const K={selection:us(F.cells)};return vo(G,K)}).getOr(""),Mr=(F,G)=>{const K=Rr(F),re=$(K.all,dt=>dt.cells),_e=$r(re,De=>at(G,dt=>Ue(De.element,dt)));return Kn(_e,De=>({element:De.element.dom,column:se(K,De.column).map(dt=>dt.element.dom)}))},Ka=(F,G,K,re)=>{const _e=re.getData();re.close(),F.undoManager.transact(()=>{((De,dt,Tt,Et)=>{const At=Ae(Et,(qt,to)=>Tt[to]!==qt);hr(At)>0&&dt.length>=1&&Dt(dt[0]).each(qt=>{const to=Mr(qt,dt),rr=hr(Ae(At,(Ct,Tn)=>"scope"!==Tn&&"celltype"!==Tn))>0,ao=zr(At,"celltype");(rr||zr(At,"scope"))&&((Ct,Tn,so,cn)=>{const Qo=1===Tn.length;Cr(Tn,xn=>{const gr=xn.element,er=Qo?yt:cn,vr=q(Ct,gr);var tr,ha,fa,Wt;tr=vr,ha=xn.column.map(tr=>q(Ct,tr)).getOr(vr),fa=so,(Wt=er)("scope")&&tr.setAttrib("scope",fa.scope),Wt("class")&&tr.setAttrib("class",fa.class),Wt("height")&&tr.setStyle("height",jt(fa.height)),Wt("width")&&ha.setStyle("width",jt(fa.width)),oa(Ct)&&((tr,ha,fa)=>{fa("backgroundcolor")&&tr.setFormat("tablecellbackgroundcolor",ha.backgroundcolor),fa("bordercolor")&&tr.setFormat("tablecellbordercolor",ha.bordercolor),fa("borderstyle")&&tr.setFormat("tablecellborderstyle",ha.borderstyle),fa("borderwidth")&&tr.setFormat("tablecellborderwidth",jt(ha.borderwidth))})(vr,so,er),cn("halign")&&gt(Ct,gr,so.halign),cn("valign")&&((tr,ha,fa)=>{we.each("top middle bottom".split(" "),Wt=>{Wt!==fa&&tr.formatter.remove("valign"+Wt,{},ha)}),fa&&tr.formatter.apply("valign"+fa,{},ha)})(Ct,gr,so.valign)})})(De,to,Et,Ut(zr,At)),ao&&De.execCommand("mceTableCellType",!1,{type:Et.celltype,no_events:!0}),lt(De,qt.dom,{structure:ao,style:rr})})})(F,G,K,_e),F.focus()})},Hl=F=>{const G=ss(F);if(0===G.length)return;const K=((De,dt)=>{const Tt=Dt(dt[0]).map(Et=>Kn(Mr(Et,dt),At=>((qt,to,rr,ao)=>{const Ct=qt.dom,Tn=(cn,Qo)=>Ct.getStyle(cn,Qo)||Ct.getAttrib(cn,Qo);return{width:Tn(ao.getOr(to),"width"),height:Tn(to,"height"),scope:Ct.getAttrib(to,"scope"),celltype:(so=to,so.nodeName.toLowerCase()),class:Ct.getAttrib(to,"class",""),halign:mn(qt,to),valign:gn(qt,to),...rr?Ao(to):{}};var so})(De,At.element,oa(De),At.column)));return Lo(Tt.getOrDie())})(F,G),re={type:"tabpanel",tabs:[{title:"General",name:"general",items:Rd(F)},vl(F,"cell")]},_e={type:"panel",items:[{type:"grid",columns:2,items:Rd(F)}]};F.windowManager.open({title:"Cell Properties",size:"normal",body:oa(F)?re:_e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:K,onSubmit:Ut(Ka,F,G,K)})},Pl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],su=F=>Pl.concat((G=>{const K=vs(yi(G));return K.length>0?Bt.some({name:"class",type:"listbox",label:"Class",items:K}):Bt.none()})(F).toArray()),Gr=(F,G,K,re)=>{const _e=re.getData();re.close(),F.undoManager.transact(()=>{((De,dt,Tt,Et)=>{const At=Ae(Et,(qt,to)=>Tt[to]!==qt);if(hr(At)>0){const qt=zr(At,"type"),to=!qt||hr(At)>1;to&&((rr,ao,Ct,Tn)=>{const so=1===ao.length?yt:Tn;Cr(ao,cn=>{const Qo=q(rr,cn);var xn,gr,er;xn=Qo,gr=Ct,(er=so)("class")&&xn.setAttrib("class",gr.class),er("height")&&xn.setStyle("height",jt(gr.height)),Wn(rr)&&((xn,gr,er)=>{er("backgroundcolor")&&xn.setStyle("background-color",gr.backgroundcolor),er("bordercolor")&&xn.setStyle("border-color",gr.bordercolor),er("borderstyle")&&xn.setStyle("border-style",gr.borderstyle)})(Qo,Ct,so),Tn("align")&&gt(rr,cn,Ct.align)})})(De,dt,Et,Ut(zr,At)),qt&&De.execCommand("mceTableRowType",!1,{type:Et.type,no_events:!0}),Dt(zt.fromDom(dt[0])).each(rr=>lt(De,rr.dom,{structure:qt,style:to}))}})(F,G,K,_e),F.focus()})},Ds=F=>{const G=((F,G)=>{const K=Oa(F),re=K.bind(_e=>Dt(_e)).map(_e=>po(_e));return fs(K,re,(_e,De)=>$r(De,dt=>at(us(dt.dom.cells),Tt=>"1"===wo(Tt,G)||Ue(Tt,_e)))).getOr([])})(Fo(F),Di.selected);if(0===G.length)return;const K=Kn(G,dt=>((Tt,Et,At)=>{const qt=Tt.dom;return{height:qt.getStyle(Et,"height")||qt.getAttrib(Et,"height"),class:qt.getAttrib(Et,"class",""),type:qn(Et),align:mn(Tt,Et),...At?Ao(Et):{}}})(F,dt.dom,Wn(F))),re=Lo(K),_e={type:"tabpanel",tabs:[{title:"General",name:"general",items:su(F)},vl(F,"row")]},De={type:"panel",items:[{type:"grid",columns:2,items:su(F)}]};F.windowManager.open({title:"Row Properties",size:"normal",body:Wn(F)?_e:De,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:re,onSubmit:Ut(Gr,F,Kn(G,dt=>dt.dom),re)})},Gs=(F,G,K)=>{const re=K?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],_e=ur(F)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],De=G.length>0?[{type:"listbox",name:"class",label:"Class",items:G}]:[];return re.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(_e).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(De)},sc=(F,G,K,re)=>{if("TD"===G.tagName||"TH"===G.tagName)Sa(K)&&Us(re)?F.setStyle(G,K,re):F.setStyles(G,K);else if(G.children)for(let _e=0;_e<G.children.length;_e++)sc(F,G.children[_e],K,re)},ys=(F,G,K,re)=>{const _e=F.dom,De=re.getData(),dt=Ae(De,(Tt,Et)=>K[Et]!==Tt);re.close(),""===De.class&&delete De.class,F.undoManager.transact(()=>{if(!G){const Tt=ta(De.cols).getOr(1),Et=ta(De.rows).getOr(1);F.execCommand("mceInsertTable",!1,{rows:Et,columns:Tt}),G=Oa(Fo(F),_a(F)).bind(At=>Dt(At,_a(F))).map(At=>At.dom).getOrDie()}if(hr(dt)>0){const Tt={border:zr(dt,"border"),bordercolor:zr(dt,"bordercolor"),cellpadding:zr(dt,"cellpadding")};((At,qt,to,rr)=>{const ao=At.dom,Ct={},Tn={},so=Is(At),cn=bs(At);if(Ia(to.class)||(Ct.class=to.class),Tn.height=jt(to.height),so?Tn.width=jt(to.width):ao.getAttrib(qt,"width")&&(Ct.width=(Qo=to.width)?Qo.replace(/px$/,""):""),so?(Tn["border-width"]=jt(to.border),Tn["border-spacing"]=jt(to.cellspacing)):(Ct.border=to.border,Ct.cellpadding=to.cellpadding,Ct.cellspacing=to.cellspacing),so&&qt.children){const Qo={};if(rr.border&&(Qo["border-width"]=jt(to.border)),rr.cellpadding&&(Qo.padding=jt(to.cellpadding)),cn&&rr.bordercolor&&(Qo["border-color"]=to.bordercolor),!(xn=>{for(const gr in xn)if(ie.call(xn,gr))return!1;return!0})(Qo))for(let xn=0;xn<qt.children.length;xn++)sc(ao,qt.children[xn],Qo)}var Qo;if(cn){const Qo=to;Tn["background-color"]=Qo.backgroundcolor,Tn["border-color"]=Qo.bordercolor,Tn["border-style"]=Qo.borderstyle}ao.setStyles(qt,{...Oo(At),...Tn}),ao.setAttribs(qt,{...qs(At),...Ct})})(F,G,De,Tt);const Et=_e.select("caption",G)[0];(Et&&!De.caption||!Et&&De.caption)&&F.execCommand("mceTableToggleCaption"),gt(F,G,De.align)}if(F.focus(),F.addVisual(),hr(dt)>0){const Tt=zr(dt,"caption"),Et=!Tt||hr(dt)>1;lt(F,G,{structure:Tt,style:Et})}})},ac=(F,G)=>{const K=F.dom;let re,_e=((Et,At)=>{const qt=Oo(Et),to=qs(Et),rr=At?{borderstyle:_o(qt,"border-style").getOr(""),bordercolor:Co(_o(qt,"border-color").getOr("")),backgroundcolor:Co(_o(qt,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...qt,...to,...rr,...(()=>{const ao=qt["border-width"];return Is(Et)&&ao?{border:ao}:_o(to,"border").fold(()=>({}),Ct=>({border:Ct}))})(),..._o(qt,"border-spacing").or(_o(to,"cellspacing")).fold(()=>({}),ao=>({cellspacing:ao})),..._o(qt,"border-padding").or(_o(to,"cellpadding")).fold(()=>({}),ao=>({cellpadding:ao}))}})(F,bs(F));G?(_e.cols="1",_e.rows="1",bs(F)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor="")):(re=K.getParent(F.selection.getStart(),"table",F.getBody()),re?_e=((Et,At,qt)=>{const to=Et.dom,rr=Is(Et)?to.getStyle(At,"border-spacing")||to.getAttrib(At,"cellspacing"):to.getAttrib(At,"cellspacing")||to.getStyle(At,"border-spacing"),ao=Is(Et)?Ve(to,At,"padding")||to.getAttrib(At,"cellpadding"):to.getAttrib(At,"cellpadding")||Ve(to,At,"padding");return{width:to.getStyle(At,"width")||to.getAttrib(At,"width"),height:to.getStyle(At,"height")||to.getAttrib(At,"height"),cellspacing:rr??"",cellpadding:ao??"",border:((Ct,Tn)=>{const so=Ws(zt.fromDom(Tn),"border-width");return Is(Et)&&so.isSome()?so.getOr(""):Ct.getAttrib(Tn,"border")||Ve(Et.dom,Tn,"border-width")||Ve(Et.dom,Tn,"border")||""})(to,At),caption:!!to.select("caption",At)[0],class:to.getAttrib(At,"class",""),align:mn(Et,At),...qt?Ao(At):{}}})(F,re,bs(F)):bs(F)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor=""));const De=vs(Fa(F));De.length>0&&_e.class&&(_e.class=_e.class.replace(/\s*mce\-item\-table\s*/g,""));const dt={type:"grid",columns:2,items:Gs(F,De,G)},Tt=bs(F)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[dt]},vl(F,"table")]}:{type:"panel",items:[dt]};F.windowManager.open({title:"Table Properties",size:"normal",body:Tt,onSubmit:Ut(ys,F,re,_e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_e})},Cg=Xt,pn=F=>{const G=(K,re)=>ns(K,re).exists(_e=>parseInt(_e,10)>1);return F.length>0&&yn(F,K=>G(K,"rowspan")||G(K,"colspan"))?Bt.some(F):Bt.none()},ii=(F,G,K)=>{return G.length<=1?Bt.none():(re=F,_e=K.firstSelectedSelector,De=K.lastSelectedSelector,Ga(re,_e,De).bind(dt=>{const Tt=to=>Ue(re,to),Et="thead,tfoot,tbody,table",At=fr(dt.first,Et,Tt),qt=fr(dt.last,Et,Tt);return At.bind(to=>qt.bind(rr=>{return Ue(to,rr)?(Ct=dt.first,Tn=dt.last,((F,G,K)=>((re,_e,De)=>{const dt=br(re,_e,Ue),Tt=br(re,De,Ue);return dt.bind(Et=>Tt.map(At=>{return qt=Et,to=At,{startRow:Math.min(qt.row,to.row),startCol:Math.min(qt.column,to.column),finishRow:Math.max(qt.row+qt.rowspan-1,to.row+to.rowspan-1),finishCol:Math.max(qt.column+qt.colspan-1,to.column+to.colspan-1)};var qt,to}))})(F,G,K).bind(re=>((_e,De)=>{let dt=!0;const Tt=Ut(kc,De);for(let Et=De.startRow;Et<=De.finishRow;Et++)for(let At=De.startCol;At<=De.finishCol;At++)dt=dt&&Fr(_e,Et,At).exists(Tt);return dt?Bt.some(De):Bt.none()})(F,re)))(wt(dt.table),Ct,Tn)):Bt.none();var Ct,Tn}))})).map(dt=>({bounds:dt,cells:G}));var re,_e,De};var au=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const yl="x-tinymce/dom-table-",Xc=yl+"rows",ic=yl+"columns",Sg=F=>{var G;const K=null!==(G=au.read())&&void 0!==G?G:[];return Qt(K,re=>Bt.from(re.getType(F)))},iu=()=>Sg(Xc),pa=()=>Sg(ic),Fl=F=>G=>{const K=()=>{G.setEnabled(F.selection.isEditable())};return F.on("NodeChange",K),K(),()=>{F.off("NodeChange",K)}},Zr=F=>G=>{const K=()=>{G.setEnabled(F.selection.isEditable())};return F.on("NodeChange",K),K(),()=>{F.off("NodeChange",K)}};Od.add("table",F=>{const G=(F=>{const G=Kc(Bt.none()),K=Kc([]);let re=Bt.none();const _e=ji("caption"),De=so=>re.forall(cn=>!cn[so]),dt=()=>mr(Fo(F),_a(F)).bind(so=>{return fs(Dt(so),mr((Qo=F,zt.fromDom(Qo.selection.getEnd())),_a(F)).bind(Dt),(Qo,xn)=>{return Ue(Qo,xn)?_e(so)?Bt.some({element:gr=so,mergable:Bt.none(),unmergable:Bt.none(),selection:[gr]}):Bt.some(((gr,er,vr)=>({element:vr,mergable:ii(er,gr,Di),unmergable:pn(gr),selection:Cg(gr)}))(ss(F),Qo,so)):Bt.none();var gr}).bind(Xt);var Qo}),Tt=so=>Dt(so.element).map(cn=>{const Qo=Rr(cn),xn=Ge(Qo,so).getOr([]),gr=Do(xn,(er,vr)=>(vr.isLocked&&(er.onAny=!0,0===vr.column?er.onFirst=!0:vr.column+vr.colspan>=Qo.grid.columns&&(er.onLast=!0)),er),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:xt(Qo,so).isSome(),unmergeable:kt(Qo,so).isSome(),locked:gr}}),Et=()=>{G.set((so=>{let cn,Qo=!1;return(...xn)=>(Qo||(Qo=!0,cn=so.apply(null,xn)),cn)})(dt)()),re=G.get().bind(Tt),Cr(K.get(),Nt)},At=so=>(so(),K.set(K.get().concat([so])),()=>{K.set($r(K.get(),cn=>cn!==so))}),qt=(so,cn)=>At(()=>G.get().fold(()=>{so.setEnabled(!1)},Qo=>{so.setEnabled(!cn(Qo)&&F.selection.isEditable())})),to=(so,cn,Qo)=>At(()=>G.get().fold(()=>{so.setEnabled(!1),so.setActive(!1)},xn=>{so.setEnabled(!cn(xn)&&F.selection.isEditable()),so.setActive(Qo(xn))})),rr=so=>re.exists(cn=>cn.locked[so]),ao=(so,cn)=>Qo=>to(Qo,xn=>_e(xn.element),()=>F.queryCommandValue(so)===cn),Ct=ao("mceTableRowType","header"),Tn=ao("mceTableColType","th");return F.on("NodeChange ExecCommand TableSelectorChange",Et),{onSetupTable:so=>qt(so,cn=>!1),onSetupCellOrRow:so=>qt(so,cn=>_e(cn.element)),onSetupColumn:so=>cn=>qt(cn,Qo=>_e(Qo.element)||rr(so)),onSetupPasteable:so=>cn=>qt(cn,Qo=>_e(Qo.element)||so().isNone()),onSetupPasteableColumn:(so,cn)=>Qo=>qt(Qo,xn=>_e(xn.element)||so().isNone()||rr(cn)),onSetupMergeable:so=>qt(so,cn=>De("mergeable")),onSetupUnmergeable:so=>qt(so,cn=>De("unmergeable")),resetTargets:Et,onSetupTableWithCaption:so=>to(so,Wr,cn=>Dt(cn.element,_a(F)).exists(Qo=>(F=>zn(F.dom.childNodes,_e=>{return De=zt.fromDom(_e),Bn(De,"caption");var De}).map(zt.fromDom))(Qo).isSome())),onSetupTableRowHeaders:Ct,onSetupTableColumnHeaders:Tn,targets:G.get}})(F);(K=>{const re=K.options.register;re("table_border_widths",{processor:"object[]",default:sn}),re("table_border_styles",{processor:"object[]",default:ln}),re("table_cell_advtab",{processor:"boolean",default:!0}),re("table_row_advtab",{processor:"boolean",default:!0}),re("table_advtab",{processor:"boolean",default:!0}),re("table_appearance_options",{processor:"boolean",default:!0}),re("table_grid",{processor:"boolean",default:!eo.deviceType.isTouch()}),re("table_cell_class_list",{processor:"object[]",default:[]}),re("table_row_class_list",{processor:"object[]",default:[]}),re("table_class_list",{processor:"object[]",default:[]}),re("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),re("table_background_color_map",{processor:"object[]",default:[]}),re("table_border_color_map",{processor:"object[]",default:[]})})(F),(F=>{ht({mceTableProps:Ut(ac,F,!1),mceTableRowProps:Ut(Ds,F),mceTableCellProps:Ut(Hl,F),mceInsertTableDialog:Ut(ac,F,!0)},(G,K)=>F.addCommand(K,()=>{return re=G,void((De=Fo(F),dt=ji("table"),Nn((Tt,Et)=>Et(Tt),Zn,De,dt,void 0)).forall(Po)&&re());var De,dt,re}))})(F),((K,re)=>{const _e=ao=>()=>K.execCommand(ao),De=(ao,Ct)=>!!K.queryCommandSupported(Ct.command)&&(K.ui.registry.addMenuItem(ao,{...Ct,onAction:Or(Ct.onAction)?Ct.onAction:_e(Ct.command)}),!0),dt=(ao,Ct)=>{K.queryCommandSupported(Ct.command)&&K.ui.registry.addToggleMenuItem(ao,{...Ct,onAction:Or(Ct.onAction)?Ct.onAction:_e(Ct.command)})},Tt=ao=>{K.execCommand("mceInsertTable",!1,{rows:ao.numRows,columns:ao.numColumns})},Et=[De("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:re.onSetupCellOrRow}),De("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:re.onSetupCellOrRow}),De("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:re.onSetupCellOrRow}),De("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:re.onSetupCellOrRow}),De("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:re.onSetupCellOrRow}),De("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:re.onSetupCellOrRow}),De("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:re.onSetupPasteable(iu)}),De("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:re.onSetupPasteable(iu)})],At=[De("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:re.onSetupColumn("onFirst")}),De("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:re.onSetupColumn("onLast")}),De("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:re.onSetupColumn("onAny")}),De("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:re.onSetupColumn("onAny")}),De("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:re.onSetupColumn("onAny")}),De("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:re.onSetupPasteableColumn(pa,"onFirst")}),De("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:re.onSetupPasteableColumn(pa,"onLast")})],qt=[De("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:re.onSetupCellOrRow}),De("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:re.onSetupMergeable}),De("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:re.onSetupUnmergeable})];Ml(K)?K.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Tt}],onSetup:Zr(K)}):K.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:_e("mceInsertTableDialog"),onSetup:Zr(K)}),K.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:_e("mceInsertTableDialog"),onSetup:Zr(K)}),De("tableprops",{text:"Table properties",onSetup:re.onSetupTable,command:"mceTableProps"}),De("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:re.onSetupTable,command:"mceTableDelete"}),M(Et,!0)&&K.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:kn("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),M(At,!0)&&K.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:kn("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),M(qt,!0)&&K.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:kn("tablecellprops tablemergecells tablesplitcells")}),K.ui.registry.addContextMenu("table",{update:()=>(re.resetTargets(),re.targets().fold(kn(""),ao=>"caption"===dn(ao.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const to=nc(Fa(K));0!==to.length&&K.queryCommandSupported("mceTableToggleClass")&&K.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Bi(K,to,"tableclass",ao=>K.execCommand("mceTableToggleClass",!1,ao)),onSetup:re.onSetupTable});const rr=nc(Ri(K));0!==rr.length&&K.queryCommandSupported("mceTableCellToggleClass")&&K.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Bi(K,rr,"tablecellclass",ao=>K.execCommand("mceTableCellToggleClass",!1,ao)),onSetup:re.onSetupCellOrRow}),K.queryCommandSupported("mceTableApplyCellStyle")&&(K.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Bi(K,hl,"tablecellverticalalign",ve(K,"vertical-align")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Bi(K,$s(K),"tablecellborderwidth",ve(K,"border-width")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Bi(K,vi(K),"tablecellborderstyle",ve(K,"border-style")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>ai(K,Ta(K),"background-color"),onSetup:re.onSetupCellOrRow}),K.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>ai(K,qr(K),"border-color"),onSetup:re.onSetupCellOrRow})),dt("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:re.onSetupTableWithCaption}),dt("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Nd(K),onSetup:re.onSetupTableRowHeaders}),dt("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:$n(K),onSetup:re.onSetupTableRowHeaders})})(F,G),((K,re)=>{K.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Fl(K),fetch:At=>At("inserttable | cell row column | advtablesort | tableprops deletetable")});const _e=At=>()=>K.execCommand(At),De=(At,qt)=>{K.queryCommandSupported(qt.command)&&K.ui.registry.addButton(At,{...qt,onAction:Or(qt.onAction)?qt.onAction:_e(qt.command)})},dt=(At,qt)=>{K.queryCommandSupported(qt.command)&&K.ui.registry.addToggleButton(At,{...qt,onAction:Or(qt.onAction)?qt.onAction:_e(qt.command)})};De("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:re.onSetupTable}),De("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:re.onSetupTable}),De("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:re.onSetupCellOrRow}),De("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:re.onSetupMergeable}),De("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:re.onSetupUnmergeable}),De("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:re.onSetupCellOrRow}),De("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:re.onSetupCellOrRow}),De("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:re.onSetupCellOrRow}),De("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:re.onSetupCellOrRow}),De("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:re.onSetupColumn("onFirst")}),De("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:re.onSetupColumn("onLast")}),De("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:re.onSetupColumn("onAny")}),De("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:re.onSetupCellOrRow}),De("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:re.onSetupCellOrRow}),De("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:re.onSetupPasteable(iu)}),De("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:re.onSetupPasteable(iu)}),De("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:re.onSetupColumn("onAny")}),De("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:re.onSetupColumn("onAny")}),De("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:re.onSetupPasteableColumn(pa,"onFirst")}),De("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:re.onSetupPasteableColumn(pa,"onLast")}),De("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Fl(K)});const Tt=nc(Fa(K));0!==Tt.length&&K.queryCommandSupported("mceTableToggleClass")&&K.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:rc(K,Tt,"tableclass",At=>K.execCommand("mceTableToggleClass",!1,At)),onSetup:re.onSetupTable});const Et=nc(Ri(K));0!==Et.length&&K.queryCommandSupported("mceTableCellToggleClass")&&K.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:rc(K,Et,"tablecellclass",At=>K.execCommand("mceTableCellToggleClass",!1,At)),onSetup:re.onSetupCellOrRow}),K.queryCommandSupported("mceTableApplyCellStyle")&&(K.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:rc(K,hl,"tablecellverticalalign",ve(K,"vertical-align")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:rc(K,$s(K),"tablecellborderwidth",ve(K,"border-width")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:rc(K,vi(K),"tablecellborderstyle",ve(K,"border-style")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:At=>At(ai(K,Ta(K),"background-color")),onSetup:re.onSetupCellOrRow}),K.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:At=>At(ai(K,qr(K),"border-color")),onSetup:re.onSetupCellOrRow})),dt("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:re.onSetupTableWithCaption}),dt("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Nd(K),onSetup:re.onSetupTableRowHeaders}),dt("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:$n(K),onSetup:re.onSetupTableColumnHeaders})})(F,G),(K=>{const re=No(K);re.length>0&&K.ui.registry.addContextToolbar("table",{predicate:_e=>K.dom.is(_e,"table")&&K.getBody().contains(_e)&&K.dom.isEditable(_e.parentNode),items:re,scope:"node",position:"node"})})(F)})}();